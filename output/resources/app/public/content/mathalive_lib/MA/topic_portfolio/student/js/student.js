!function(t){var e={};function o(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(i,s,function(e){return t[e]}.bind(null,s));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=9)}([function(t,e){t.exports=React},function(t,e){t.exports=mobx},function(t,e){t.exports=mobxReact},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0;const i=o(8),s=o(4);function n(t){if(!t)return t;console.log("init student",t),t.displayMode=""+t.displayMode=="2"?"2":"1",t.gender=t.gender,""===t.nickname&&(t.nickname=t.name);let e=t.avatar&&""!==t.avatar?t.avatar:"";return""===e&&(e="f"===t.gender||"F"===t.gender?"/content/mathalive_lib/images/default_candy.png":"/content/mathalive_lib/images/default_cheese.png",t.avatar=e),t}class r{static get isMobile(){return r._isMobile}static get tempEl(){return r._tempEl}static pub_init(){const t=navigator.userAgent;r._isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t)||/android/i.test(t),r._tempBnd=document.createElement("div"),r._tempBnd.style.display="none",r._tempEl=document.createElement("div"),r._tempBnd.appendChild(r._tempEl),null===document.body?document.addEventListener("DOMContentLoaded",t=>{document.body.appendChild(r._tempBnd)}):document.body.appendChild(r._tempBnd)}static get students(){return r._students}static get student(){return r._student}static get lang(){return r._lang}static get isDvlp(){return r._isDvlp}static get data_url(){return r._data_url}static get lesson(){return r._lesson}static get book(){return r._book}static get nextBook(){return r._nextBook}static get prevBook(){return r._prevBook}static get addOnHost(){return r._addOnHost}static setaddOnHost(t){r._addOnHost=t}static pub_load(t,e,o,i,s,a,c){r._lesson=i,r._book=o,r._nextBook=a,r._prevBook=c,r._students=[],t&&Array.isArray(t)&&t.forEach((t,e)=>{r._students[e]=n(t)}),r._student=n(e),s&&""!==s&&(r._addOnHost=s)}static pub_reloadStudents(t){s.getStudents((e,o)=>{for(;r._students.length>0;)r._students.pop();for(;r._students_inited.length>0;)r._students_inited.pop();for(let t=0,o=e.length;t<o;t++)r.isDvlp?r._students[t]=n(e[t]):r._students[t]=n({id:e[t].id,name:e[t].name,thumb:e[t].defaultThumbnail,avatar:e[t].profileThumbnail,nickname:""!==e[t].nickName?e[t].nickName:e[t].name,displayMode:e[t].displayMode,gender:e[t].gender,inited:!0}),console.log("student",e[t]),r._students_inited.push(e[t].id);t()})}static pub_parseStyle(t){return r._tempEl.style.cssText=t,r._tempEl.style}static pub_initAudio(){r._common_audio=document.getElementById("common_audio"),r._ding_audio=document.getElementById("ding_audio"),r._dingend_audio=document.getElementById("dingend_audio"),r._btn_audio=document.getElementById("btn_audio"),r._correct_audio=document.getElementById("correct_audio"),r._wrong_audio=document.getElementById("wrong_audio"),r._topad_audio=document.getElementById("topad_audio"),r._goodjob_audio=document.getElementById("goodjob_audio"),r._btn_back_audio=document.getElementById("btn_back_audio"),r._btn_page_audio=document.getElementById("btn_page_audio"),r._popup_audio=document.getElementById("popup_audio"),r._clock_audio=document.getElementById("clock_audio"),r._ts_bgm_audio=document.getElementById("ts_bgm_audio"),r._bs_audio=document.getElementById("bs_audio"),r._bb_audio=document.getElementById("bb_audio"),r._cd_audio=document.getElementById("cd_audio"),r._tc_audio=document.getElementById("tc_audio"),r._te_audio=document.getElementById("te_audio"),r._trg_bgm_audio=document.getElementById("trg_bgm_audio"),r._afc_audio=document.getElementById("afc_audio"),r._trs_audio=document.getElementById("trs_audio"),r._btn_choice_audio=document.getElementById("btn_choice_audio"),r._retry_audio=document.getElementById("retry_audio"),r._sorry_audio=document.getElementById("sorry_audio"),r._great_audio=document.getElementById("great_audio"),r._memorygame_flipcard_audio=document.getElementById("flipcard_audio"),r._ispy_gameclick_audio=document.getElementById("gameclick_audio"),r._game_timesetting_start_audio=document.getElementById("game_timesetting_start"),r._solution_btn_audio=document.getElementById("solution_btn_audio"),r._game_result_audio=document.getElementById("game_result_audio"),r._open_problom_audio=document.getElementById("open_problom_audio"),r._quiz_done_audio=document.getElementById("quiz_done_audio"),r._hit_up_audio=document.getElementById("hu_audio"),r._hit_down_audio=document.getElementById("hd_audio"),r._hit_good_audio=document.getElementById("hg_audio"),r._hit_wrong_audio=document.getElementById("hw_audio"),r._pick_presenter=document.getElementById("pick_presenter"),r._game_good_audio=document.getElementById("gg_audio")}static pub_playClock(){r._clock_audio&&(r._clock_audio.currentTime=4.5,r._clock_audio.play())}static pub_playPopup(){r._popup_audio&&(r._popup_audio.currentTime=0,r._popup_audio.play())}static pub_playBtnPage(){r._btn_page_audio&&(r._btn_page_audio.currentTime=0,r._btn_page_audio.play())}static pub_playBtnBack(){r._btn_back_audio&&(r._btn_back_audio.currentTime=0,r._btn_back_audio.play())}static pub_playGoodjob(){r._goodjob_audio&&(r._goodjob_audio.currentTime=0,r._goodjob_audio.play())}static pub_playDing(){r._ding_audio&&(r._ding_audio.currentTime=0,r._ding_audio.play())}static pub_playDingend(){r._dingend_audio&&(r._dingend_audio.currentTime=0,r._dingend_audio.play())}static pub_playToPad(){r._topad_audio&&(r._topad_audio.currentTime=0,r._topad_audio.play())}static pub_playBtnTab(){r._btn_audio&&(r._btn_audio.currentTime=0,r._btn_audio.play())}static pub_playCorrect(){r._correct_audio&&(r._correct_audio.currentTime=0,r._correct_audio.play())}static pub_playWrong(){r._wrong_audio&&(r._wrong_audio.currentTime=0,r._wrong_audio.play())}static pub_playTeamSelectBgm(){r._ts_bgm_audio&&(r._ts_bgm_audio.currentTime=0,r._ts_bgm_audio.play())}static pub_stopTeamSelectBgm(){r._ts_bgm_audio&&(r._ts_bgm_audio.pause(),r._ts_bgm_audio.currentTime=0)}static pub_playStartButton(){r._bs_audio&&(r._bs_audio.currentTime=0,r._bs_audio.play())}static pub_playBasicButton(){r._bb_audio&&(r._bb_audio.currentTime=0,r._bb_audio.play())}static pub_playCountDown(){r._cd_audio&&(r._cd_audio.currentTime=0,r._cd_audio.play())}static pub_playTimerClock(){r._tc_audio&&(r._tc_audio.currentTime=0,r._tc_audio.play())}static pub_stopTimerClock(){r._tc_audio&&(r._tc_audio.pause(),r._tc_audio.currentTime=0)}static pub_playTimerEnd(){r._te_audio&&(r._te_audio.currentTime=0,r._te_audio.play())}static pub_playResultGraph(){r._trg_bgm_audio&&(r._trg_bgm_audio.currentTime=0,r._trg_bgm_audio.play())}static pub_playFireworksClapping(){r._afc_audio&&(r._afc_audio.currentTime=0,r._afc_audio.play())}static pub_playTotalResult(){r._trs_audio&&(r._trs_audio.currentTime=0,r._trs_audio.play())}static pub_playChoiceBtn(){r._btn_choice_audio&&(r._btn_choice_audio.currentTime=0,r._btn_choice_audio.play())}static pub_playsorry(){r._sorry_audio&&(r._sorry_audio.currentTime=0,r._sorry_audio.play())}static pub_playretry(){r._retry_audio&&(r._retry_audio.currentTime=0,r._retry_audio.play())}static pub_playgreat(){r._great_audio&&(r._great_audio.currentTime=0,r._great_audio.play())}static pub_playFlipCard(){r._memorygame_flipcard_audio&&(r._memorygame_flipcard_audio.currentTime=0,r._memorygame_flipcard_audio.play())}static pub_playGameClick(){r._ispy_gameclick_audio&&(r._ispy_gameclick_audio.currentTime=0,r._ispy_gameclick_audio.play())}static pub_game_timesetting_start(){r._game_timesetting_start_audio&&(r._game_timesetting_start_audio.currentTime=0,r._game_timesetting_start_audio.play())}static pub_solution_btn_click(){r._solution_btn_audio&&(r._solution_btn_audio.currentTime=0,r._solution_btn_audio.play())}static pub_playGameresult(){r._game_result_audio&&(r._game_result_audio.currentTime=0,r._game_result_audio.play())}static pub_openProblom(){r._open_problom_audio&&(r._open_problom_audio.currentTime=0,r._open_problom_audio.play())}static pub_quizDone(){r._quiz_done_audio&&(r._quiz_done_audio.currentTime=0,r._quiz_done_audio.play())}static pub_pick_presenter(){r._pick_presenter&&(r._pick_presenter.currentTime=0,r._pick_presenter.play())}static pub_stop(){null!=r._common_audio.onended&&r._common_audio.onended.call(r._common_audio,new Event("ended")),r._common_audio.oncanplaythrough=null,isNaN(r._common_audio.duration)||r._common_audio.paused||r._common_audio.pause()}static pub_play(t,e){r.pub_stop(),t=i.nteString(t,"");const o=i.nteString(r._common_audio.getAttribute("src"),"");if(""===t&&""===o)return void(null!=e&&e(!0));""!==t&&o!==t&&(r._common_audio.src=t);const s=t=>{r._common_audio.onended=null,null!==e&&e(!0),r._common_audio.removeEventListener("error",s)};r._common_audio.onended=t=>{r._common_audio.onended=null,null!==e&&e(!!t),r._common_audio.removeEventListener("error",s)},r._common_audio.addEventListener("error",s),isNaN(r._common_audio.duration)?(r._common_audio.oncanplaythrough=t=>{0!==r._common_audio.currentTime&&(r._common_audio.currentTime=0),r._common_audio.play(),r._common_audio.oncanplaythrough=null},r._common_audio.load()):(0!==r._common_audio.currentTime&&(r._common_audio.currentTime=0),r._common_audio.oncanplaythrough=null,r._common_audio.play())}static pub_set(t,e,o){r._isDvlp=e,r._lang=o,s.set(e)}static pub_addInitedStudent(t){let e=!0;for(let o=0,i=r._students_inited.length;o<i;o++){r._students_inited[o]===t.id&&(e=!1)}e&&r._students_inited.push(t.id);const o=r._start_idx>0&&r._students.length>0&&r._students_inited.length>=r._students.length;return o&&(window.clearTimeout(r._start_idx),r._start_idx=-1),o}static pub_start(t){0===r._students.length||r._students_inited.length>=r._students.length?t():r._start_idx=window.setTimeout(t,2e3)}static pub_clear(){for(;r._students.length>0;)r._students.pop();for(;r._students_inited.length>0;)r._students_inited.pop()}static pub_playHitup(){r._hit_up_audio&&(r._hit_up_audio.currentTime=0,r._hit_up_audio.play())}static pub_playHitdown(){r._hit_down_audio&&(r._hit_down_audio.currentTime=0,r._hit_down_audio.play())}static pub_playHitgood(){r._hit_good_audio&&(r._hit_good_audio.currentTime=0,r._hit_good_audio.play())}static pub_playHitwrong(){r._hit_wrong_audio&&(r._hit_wrong_audio.currentTime=0,r._hit_wrong_audio.play())}static pub_playGamegood(){r._game_good_audio&&(r._game_good_audio.currentTime=0,r._game_good_audio.play())}}e.App=r,r._isMobile=!1,r._students=[],r._students_inited=[],r._student=null,r._lang="ko",r._isDvlp=!1,r._data_url="../data/",r._lesson="",r._book="",r._nextBook=!1,r._prevBook=!1,r._start_idx=-1,r.isStarted=!1,r._addOnHost="https://addonsapi.fel40.com"},function(t,e,o){"use strict";var i=this&&this.__awaiter||function(t,e,o,i){return new(o||(o=Promise))((function(s,n){function r(t){try{c(i.next(t))}catch(t){n(t)}}function a(t){try{c(i.throw(t))}catch(t){n(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,a)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.postAttention=e.postViewDiv=e.getPreviewDmsResult=e.getPreviewResult=e.showSGiftBox=e.showSLivePointPop=e.launchSTool=e.clearPenTool=e.hidePenTool=e.showPenTool=e.showRecordTool=e.showSendButton=e.alertToStudent=e.showSLoading=e.showSMathKit=e.clearSPenTool=e.takePicture=e.uploadInclassReport=e.stopVideoRecord=e.startVideoRecord=e.switchCamera=e.stopCamera=e.pauseRecordPlayer=e.playRecordPlayer=e.startCustomCamera=e.startCamera=e.getStudents=e.uploadFileToServerMulti=e.uploadImageToServer=e.uploadFileToServer=e.stopVoiceRecord=e.startVoiceRecord=e.sendTeacher=e.disableSoftwareKeyboard=e.sendPAD=e.sendPADToID=e.sendLauncher=e.uploadStudentReport=e.addStudentForStudentReportType6=e.hideStudentReportListPage=e.showStudentReportListPage=e.showStudentReportUI=e.hideStudentReportUI=e.startStudentReportProcess=e.finishContentPage=e.showTMathKit=e.alertToTeacher=e.showTLoading=e.clearTPenTool=e.getBookCaptureInfo=e.uploadTImageToServer=e.useFractionBar=e.logOut=e.exitClass=e.getNaviInfo=e.launchPadTool=e.launchTool=e.exitBook=e.gotoBookByKey=e.gotoBook=e.set=void 0;const s=o(5);let n=!1;e.set=function(t){n=t},e.gotoBook=function(t,e){if(console.log("felsocket gotoBook",t,e),!n)try{window.tsoc_o.gotoBook(t,e)}catch(t){}},e.gotoBookByKey=function(t){if(console.log("felsocket gotoBookByKey",t),!n)try{window.tsoc_o.gotoBookByKey(t)}catch(t){}},e.exitBook=function(){if(console.log("felsocket exitBook"),!n)try{window.tsoc_o.exitBook()}catch(t){}},e.launchTool=function(t){if(console.log("felsocket launchTool",t),!n)try{window.tsoc_o.launchTool(t)}catch(t){}},e.launchPadTool=function(t){if(console.log("felsocket launchPadTool",t),!n)try{window.tsoc_o.launchPadTool(t)}catch(t){}},e.getNaviInfo=function(t){if(console.log("felsocket getNaviInfo",t),!n)try{window.tsoc_o.getNaviInfo(t)}catch(t){}},e.exitClass=function(){if(console.log("felsocket exitClass"),!n)try{window.tsoc_o.exitClass()}catch(t){}},e.logOut=function(){if(console.log("felsocket logOut"),!n)try{window.tsoc_o.logOut()}catch(t){}},e.useFractionBar=function(){if(console.log("felsocket useFractionBar"),!n)try{window.tsoc_o.useFractionBar()}catch(t){}},e.uploadTImageToServer=function(t,e,o,i){if(console.log("felsocket uploadTImageToServer",e,o,i),!n)try{window.tsoc_o.uploadImageToServer(t,e,o,i)}catch(t){}},e.getBookCaptureInfo=function(t){if(console.log("felsocket getBookCaptureInfo"),!n)try{window.tsoc_o.getBookCaptureInfo(t)}catch(t){}},e.clearTPenTool=function(){if(console.log("felsocket clearTPenTool"),!n)try{window.tsoc_o.clearPenTool()}catch(t){}},e.showTLoading=function(t){if(console.log("felsocket showTLoading",t),!n)try{window.tsoc_o.showLoading(t)}catch(t){}},e.alertToTeacher=function(t){if(console.log("felsocket alertToTeacher",t),!n)try{window.tsoc_o.alert(t)}catch(t){}},e.showTMathKit=function(t){if(console.log("felsocket showTMathKit",t),!n)try{window.tsoc_o.showMathKit(t)}catch(t){}},e.finishContentPage=function(){if(!n)try{window.tsoc_o.finishContentPage()}catch(t){}},e.startStudentReportProcess=function(t,e,o){if(!n)try{window.tsoc_o.startStudentReportProcess(t,e,o)}catch(t){}},e.hideStudentReportUI=function(){if(!n)try{window.tsoc_o.hideStudentReportUI()}catch(t){}},e.showStudentReportUI=function(){if(!n)try{window.tsoc_o.showStudentReportUI()}catch(t){}},e.showStudentReportListPage=function(){if(!n)try{window.tsoc_o.showStudentReportListPage()}catch(t){}},e.hideStudentReportListPage=function(){if(!n)try{window.tsoc_o.hideStudentReportListPage()}catch(t){}},e.addStudentForStudentReportType6=function(t){if(!n)try{window.tsoc_o.addStudentForStudentReportType6(t)}catch(t){}},e.uploadStudentReport=function(t,e,o){if(!n)try{window.psoc_o.uploadStudentReport(t,e,o)}catch(t){}},e.sendLauncher=function(t,e){if(5!==t||n)if(6!==t||n)if(7!==t||n){if(8===t)if(console.log("felsocket gotoPrevBook"),n)try{window.top.tsoc_o.gotoPrevBook()}catch(t){}else try{window.tsoc_o.gotoPrevBook()}catch(t){}else if(9===t)if(console.log("felsocket gotoNextBook"),n)try{window.top.tsoc_o.gotoNextBook()}catch(t){}else try{window.tsoc_o.gotoNextBook()}catch(t){}}else try{window.tsoc_o.setTitleBar(e)}catch(t){}else try{window.tsoc_o.showTitleBar()}catch(t){}else try{window.tsoc_o.hideTitleBar()}catch(t){}},e.sendPADToID=function(t,e,o){const i={type:e,data:o};if(n)try{window.top.tsoc_o.sendPADToID(t,i)}catch(t){}else try{window.tsoc_o.sendPADToID(t,i)}catch(t){}},e.sendPAD=function(t,e){const o={type:t,data:e};if(n)try{window.top.tsoc_o.sendAll(o)}catch(t){}else try{window.tsoc_o.sendAll(o)}catch(t){}},e.disableSoftwareKeyboard=function(){try{window.psoc_o.disableSoftwareKeyboard()}catch(t){}},e.sendTeacher=function(t,e){const o={type:t,data:e};if(n)try{null!==window.opener&&window.opener.tsoc_o.sendTeacher(o)}catch(t){}else try{window.psoc_o.sendTeacher(o)}catch(t){}},e.startVoiceRecord=function(){try{window.psoc_o.startVoiceRecord()}catch(t){}},e.stopVoiceRecord=function(){try{window.psoc_o.stopVoiceRecord()}catch(t){}},e.uploadFileToServer=function(t){try{window.psoc_o.uploadFileToServer(t)}catch(t){}},e.uploadImageToServer=function(t,e,o,i){try{window.psoc_o.uploadImageToServer(t,e,o,i)}catch(t){}},e.uploadFileToServerMulti=function(t){try{window.psoc_o.uploadFileToServerMulti(t)}catch(t){}},e.getStudents=function(t){if(n)if(window.top.tsoc_o)try{window.top.tsoc_o.getStudents(t)}catch(t){}else t([],!1);else try{window.tsoc_o.getStudents(t)}catch(t){}},e.startCamera=function(t){if(!n)try{window.psoc_o.startCamera(t)}catch(t){}},e.startCustomCamera=function(t){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"startCustomCamera",msg:t},"*")},e.playRecordPlayer=function(){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"playRecordPlayer"},"*")},e.pauseRecordPlayer=function(){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"pauseRecordPlayer"},"*")},e.stopCamera=function(){if(!n)try{window.psoc_o.stopCamera()}catch(t){}},e.switchCamera=function(t){if(!n)try{window.psoc_o.switchCamera(t)}catch(t){}},e.startVideoRecord=function(){if(!n)try{window.psoc_o.startVideoRecord()}catch(t){}},e.stopVideoRecord=function(){if(!n)try{window.psoc_o.stopVideoRecord()}catch(t){}},e.uploadInclassReport=function(t){if(!n)try{window.tsoc_o.uploadInclassReport(t)}catch(t){}},e.takePicture=function(t){if(!n)try{window.psoc_o.takePicture(t)}catch(t){}},e.clearSPenTool=function(){if(console.log("felsocket clearPenTool"),!n)try{window.psoc_o.clearPenTool()}catch(t){}},e.showSMathKit=function(t){if(console.log("felsocket showSMathKit",t),!n)try{window.psoc_o.showMathKit(t)}catch(t){}},e.showSLoading=function(t){if(console.log("felsocket showSLoading",t),!n)try{window.psoc_o.showLoading(t)}catch(t){}},e.alertToStudent=function(t){if(console.log("felsocket alertToStudent",t),!n)try{window.psoc_o.alert(t)}catch(t){}},e.showSendButton=function(t,e){if(console.log("felsocket showSendButton"),!n)try{window.psoc_o.showSendButton(t,e)}catch(t){}},e.showRecordTool=function(t){if(console.log("felsocket showRecordTool",t),!n)try{window.psoc_o.showRecordTool(t)}catch(t){}},e.showPenTool=function(){if(console.log("felsocket showPentool"),!n)try{window.psoc_o.showPenTool()}catch(t){}},e.hidePenTool=function(){if(console.log("felsocket hidePentool"),!n)try{window.psoc_o.hidePenTool()}catch(t){}},e.clearPenTool=function(){if(console.log("felsocket clearPenTool"),!n)try{window.psoc_o.clearPenTool()}catch(t){}},e.launchSTool=function(t){if(console.log("felsocket launchTool",t),!n)try{window.psoc_o.launchTool(t)}catch(t){}},e.showSLivePointPop=function(t){if(console.log("felsocket showLivePointPop"),!n)try{window.psoc_o.showLivePointPop(t)}catch(t){}},e.showSGiftBox=function(t,e){if(console.log("felsocket showGiftBox"),!n)try{window.psoc_o.showGiftBox(t,e)}catch(t){}},e.getPreviewResult=function(t){return i(this,void 0,void 0,(function*(){return new Promise(e=>{if(n)e([]);else{let o=!1;const i=t=>{o||(o=!0,e(t))};window.tsoc_o.getPreviewResult(i,t),s.delay(()=>{o||(o=!0,e([]))},5e3)}})}))},e.getPreviewDmsResult=function(t){return i(this,void 0,void 0,(function*(){return new Promise(e=>{if(n)e([]);else{let o=!1;const i=t=>{o||(o=!0,e(t))};window.tsoc_o.getPreviewDmsResult(i,t),s.delay(()=>{o||(o=!0,e([]))},5e3)}})}))},e.postViewDiv=function(t){return i(this,void 0,void 0,(function*(){console.log("postViewDiv",t),window.top.postMessage({type:"viewDiv",msg:t,from:"content"},"*")}))},e.postAttention=function(t){return i(this,void 0,void 0,(function*(){console.log("postAttention",t),window.top.postMessage({type:"attention",msg:t,from:"content"},"*")}))}},function(t,e){t.exports=_},function(t,e,o){"use strict";var i=this&&this.__awaiter||function(t,e,o,i){return new(o||(o=Promise))((function(s,n){function r(t){try{c(i.next(t))}catch(t){n(t)}}function a(t){try{c(i.throw(t))}catch(t){n(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,a)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.getBounds=e.getTimeStr=e.wait=void 0;const s=o(5);e.wait=function(t){return i(this,void 0,void 0,(function*(){return new Promise(e=>{s.delay(e,t)})}))},e.getTimeStr=function(t,e){const o=Math.round(e/1e3);let i=Math.round(t/1e3),s=Math.floor(i/60),n=Math.floor(s/60),r="";return i%=60,s%=60,n>0||o>=3600?(r=n+":",r+=s>=10?s+":":"0"+s+":"):o>=600?r+=s>=10?s+":":"0"+s+":":r=s+":",r+=i>=10?i:"0"+i,r},e.getBounds=function(t){const e={left:0,top:0,width:0,height:0};if(!t)return e;try{const o=t.getBoundingClientRect();e.left=o.left,e.top=o.top,e.width=o.width,e.height=o.height}catch(t){}const o=t.ownerDocument,i=o.body,s=o.documentElement;e.left=e.left-(s.clientLeft||i.clientLeft||0),e.top=e.top-(s.clientTop||i.clientTop||0);const n=o.defaultView;return e.left+=n.pageXOffset||s.scrollLeft||i.scrollLeft,e.top+=n.pageYOffset||s.scrollTop||i.scrollTop,e}},function(t,e,o){"use strict";t.exports=o(12)},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._toStringTimestamp=e.getDateStr=e.nteArray=e.intToHTMLcolor=e.nteBool=e.nteString=e.nteFloat=e.nteInt=e.nteUInt=e.getUnicUrl=e.getUnicNum=e.getUnic=void 0,Date.now||(Date.now=function(){return(new Date).getTime()});let i=0;function s(){return n().toString(36)}function n(){const t=Date.now();return t>i?i=t:i+=1,i}e.getUnic=s,e.getUnicNum=n,e.getUnicUrl=function(t){if(!t)return"";let e=t=t.trim();return 0!==e.indexOf("http://")&&0!==e.indexOf("https://")||(e=e.indexOf("?")>0?e+"&t="+s():e+"?t="+s()),e},e.nteUInt=function(t,e){if(null==t)return e;if("number"==typeof t)return isNaN(t)||t<0?e:Math.round(t);{const o=parseInt(String(t),10);return isNaN(o)||o<0?e:o}},e.nteInt=function(t,e){if(null==t)return e;if("number"==typeof t)return Math.round(t);{const o=parseInt(String(t),10);return isNaN(o)?e:o}},e.nteFloat=function(t,e){if(null==t)return e;if("number"==typeof t)return t;{const o=parseFloat(String(t));return isNaN(o)?e:o}},e.nteString=function(t,e){return null==t?e:String(t)},e.nteBool=function(t,e){if(null==t)return e;if("boolean"==typeof t)return t;const o=String(t);return"true"===o||"false"!==o&&e},e.intToHTMLcolor=function(t){let e,o,i,s=t-0;e=(255&s)<<16,o=65280&s,i=(16711680&s)>>>16,s=e|o|i;let n=s.toString(16);return n="#000000".substring(0,7-n.length)+n,n},e.nteArray=function(t){if(t){if(Array.isArray(t))return t;if("string"==typeof t){const e=t;if(e.indexOf("[")>=0&&e.indexOf("]")>0)try{return JSON.parse(e)}catch(t){}}const e=[];return e.push(t),e}return[]},e.getDateStr=function(t="."){const e=new Date,o=e.getFullYear(),i=e.getMonth()+1,s=e.getDate();return o+t+(i<10?"0"+i:""+i)+t+(s<10?"0"+s:""+s)},e._toStringTimestamp=function(t){let e;const o=t.getFullYear();let i=t.getMonth()+1+"";parseInt(i,10)<10&&(i="0"+i);let s=t.getDate()+"";return parseInt(s,10)<10&&(s="0"+s),e=o+"-"+i+"-"+s+" "+t.toTimeString().substr(0,8),e}},function(t,e,o){t.exports=o(10)},function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const i=o(7),s=o(0),n=o(13),r=o(3),a=o(4),c=o(14);i.setConfig({ErrorOverlay:t=>s.createElement("div",null)});const d={clear:r.App.pub_clear,importLink:c.importLink,importHTML:c.importHTML};let p,u=!0;p=o(15),u=!1;let l=!1;const h=p,_=h.default,m=h.AppProvider,f=h.appContext;d.set=(t,e,o)=>{r.App.pub_set(t,e,o),f.setData(t)},d.render=()=>{r.App.pub_initAudio(),n.render(s.createElement(m,null,s.createElement(_,null)),document.getElementById("wrap"))},u?(d.init=(t,e,o,i,s,n)=>{r.App.pub_load(t,null,e,o,i,s,n)},d.start=()=>{l=!0,setTimeout(()=>f.start(),500)},d.receive=t=>{if(4===t.type){const e=t.data;l?e&&e.id&&""!==e.id&&(r.App.isStarted?a.sendPADToID(e.id,0,null):a.sendPADToID(e.id,1,null)):r.App.pub_addInitedStudent(e)&&(l||(l=!0,f.start()))}else f.receive(t)},d.teachingTool=t=>{},d.notifyNaviInfo=(t,e,o,i,s,n)=>{f.notifyNaviInfo(t,e,o,i,s,n)},d.notifyBookCaptureInfo=t=>{f.notifyBookCaptureInfo(t)},d.notifyUploadToServerResult=t=>{f.uploaded(t)},d.notifyUploadToServerMultiResult=t=>{f.multiUploaded(t)},d.notifyAlert=t=>{f.notifyAlert(t)},d.notifyPenToolState=(t,e)=>{f.notifyPenToolState(t,e)},d.notifyHamburgerMenuClicked=t=>{f.notifyHamburgerMenuClicked(t)},d.callThreeminState=()=>{f.callThreeminState()}):(d.init=(t,e,o,i,s,n)=>{r.App.pub_load(null,t,e,o,i,s,n),a.sendTeacher(4,t),f.start()},d.receive=t=>{null!=r.App.student&&f.receive(t)},d.notifyUploadToServerResult=t=>{f.uploaded(t)},d.notifyUploadToServerMultiResult=t=>{f.multiUploaded(t)},d.notify=t=>{f.notify(t)},d.notifyVideoRecord=t=>{f.notifyVideoRecord(t)},d.notifyStartVoice=()=>{f.notify("notifyStartVoice")},d.notifyVoiceRecordResult=t=>{f.notifyRecorded(t)},d.notifyTakePicture=(t,e)=>{f.notifyTakePicture&&f.notifyTakePicture(t,e)},d.clickSendButton=()=>{f.clickSendButton()},d.notifyRecordData=(t,e)=>{f.notifyRecordData(t,e)},d.notifyAlert=t=>{f.notifyAlert(t)},d.notifyPenToolState=(t,e)=>{f.notifyPenToolState(t,e)},d.notifyLiveGivePopupClose=()=>{f.notifyLiveGivePopupClose()}),o(30),t.app_o=d}).call(this,o(11))},function(t,e){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(t){"object"==typeof window&&(o=window)}t.exports=o},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,s=(i=o(0))&&"object"==typeof i&&"default"in i?i.default:i;function n(t){return n.warnAboutHMRDisabled&&(n.warnAboutHMRDisabled=!0,console.error("React-Hot-Loader: misconfiguration detected, using production version in non-production environment."),console.error("React-Hot-Loader: Hot Module Replacement is not enabled.")),s.Children.only(t.children)}n.warnAboutHMRDisabled=!1;var r=function t(){return t.shouldWrapWithAppContainer?function(t){return function(e){return s.createElement(n,null,s.createElement(t,e))}}:function(t){return t}};r.shouldWrapWithAppContainer=!1;e.AppContainer=n,e.hot=r,e.areComponentsEqual=function(t,e){return t===e},e.setConfig=function(){},e.cold=function(t){return t},e.configureComponent=function(){}},function(t,e){t.exports=ReactDOM},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.importLink=e.importHTML=void 0,e.importHTML=function(t){return new Promise((e,o)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="document",i.onload=t=>{if(!t)return;const s=i.response;s&&s.body&&s.body.firstElementChild?e(s.body.firstElementChild):s&&s.documentElement?e(s.documentElement):o("error")},i.onerror=t=>{o(t)},i.send(null)})},e.importLink=function(t,e){return new Promise((e,o)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="document",i.onload=t=>{if(!t)return;const o=i.response;e(o)},i.onerror=t=>{o(t)},i.send(null)})}},function(t,e,o){"use strict";(function(t){var i=this&&this.__decorate||function(t,e,o,i){var s,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,o,r):s(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.appContext=e.AppProvider=void 0;const s=o(0),n=o(2),r=o(7),a=o(17),c=o(18),d=o(19);Object.defineProperty(e,"appContext",{enumerable:!0,get:function(){return d.sContext}}),Object.defineProperty(e,"AppProvider",{enumerable:!0,get:function(){return d.StudentProvider}});const p=o(21);o(28),o(29);let u=class extends s.Component{render(){const{state:t,actions:e}=this.props,o=t.viewDiv;return s.createElement(s.Fragment,null,s.createElement("div",{className:"content-container"},s.createElement("div",{className:"content-wrapper",style:{left:("direction"===o?0:-1280)+"px"}},s.createElement("div",null,s.createElement(a.default,{className:"video-direction",view:"direction"===t.viewDiv,on:t.directionON,isTeacher:!1,lesson:e.getCurriculum(),bookId:t.bookid,subtitle:"",poster_url:"/content/mathalive_lib/MA/topic_portfolio/common/bg_direction.jpg",video_url:"/content/mathalive_lib/MA/topic_portfolio/common/mv_topic_portfolio.mp4",video_frame:125})),s.createElement("div",null,s.createElement(p.default,{view:"content"===o,state:t,actions:e,teacherSeq:t.teacherSeq,portfolioProg:t.portfolioProg}),s.createElement(c.default,{view:"eyeon"===t.viewDiv})))))}};u=i([n.observer],u);const l=d.useStudent(t=>s.createElement(n.Observer,null,()=>s.createElement(u,{state:t.state,actions:t.actions})));e.default=r.hot(t)(l)}).call(this,o(16)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,o){"use strict";var i=this&&this.__decorate||function(t,e,o,i){var s,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,o,r):s(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},s=this&&this.__awaiter||function(t,e,o,i){return new(o||(o=Promise))((function(s,n){function r(t){try{c(i.next(t))}catch(t){n(t)}}function a(t){try{c(i.throw(t))}catch(t){n(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,a)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const n=o(0),r=o(1),a=o(2),c=o(6);let d=class extends n.Component{constructor(t){super(t),this.m_on=!1,this.m_showMathKit=!1,this.bookInfo=[],this.curIndex=0,this._list=[],this._onClick=()=>{this.props.isTeacher&&this._off()},this._off=()=>s(this,void 0,void 0,(function*(){this.props.view&&this.m_on&&(this.m_on=!1,this.props.onEndStart&&this.props.onEndStart(),yield c.wait(500),this.props.view&&!this.m_on&&this.props.onEnd&&this.props.onEnd())})),this.m_on=t.view&&t.on}_on(){return s(this,void 0,void 0,(function*(){this.m_on=!0}))}componentWillReceiveProps(t){if(t.lesson&&this.props.lesson!==t.lesson||this.props.view!==t.view){for(;this.bookInfo.length>0;)this.bookInfo.pop();t.lesson&&t.lesson.childrenList&&t.lesson.childrenList.length>0&&t.lesson.childrenList.map((e,o)=>{try{if(e.book){e.book.id===t.bookId&&(this.curIndex=this.bookInfo.length);let o=e.depth_name?e.depth_name:"";o=o.replace(/\&lt;/g,"<"),o=o.replace(/\&gt;/g,">"),this.bookInfo.push({bookName:e.name?e.name:"",id:e.id,lesson:t.lesson?t.lesson.name:"",subtitle:o})}}catch(t){alert("A ee  "+JSON.stringify(t))}})}}componentDidUpdate(t){this.props.view?t.view?this.props.on&&!t.on?this._on():!this.props.on&&t.on&&this._off():this.props.on?this._on():this.m_on=!1:this.m_on=!1}render(){const{isTeacher:t,subtitle:e}=this.props,o=[];o.push(this.props.className);const i=document.querySelector(".bgm");return this.props.view?(this.m_on&&o.push("on"),i&&i.play()):(o.push("hide"),i&&(i.pause(),i.currentTime=0)),n.createElement("div",{className:o.join(" "),onClick:this._onClick},t&&this.bookInfo&&n.createElement("span",{className:"concept_name"},this.bookInfo.length>0?this.bookInfo[this.curIndex].lesson:""),n.createElement("div",{className:"progress_dot"},t&&this.bookInfo&&this.bookInfo.map((t,e)=>n.createElement("span",{key:"q_"+e,className:this.curIndex===e?"on":""}))),n.createElement("div",{className:"video"},n.createElement("video",{muted:!0,autoPlay:!0,poster:this.props.poster_url?this.props.poster_url:void 0},n.createElement("source",{src:this.props.video_url,type:"video/mp4"}),n.createElement("strong",null,"Your browser does not support the video tag."))),n.createElement("div",{className:"text"},n.createElement("div",{className:"t1"},this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].bookName:""),t&&n.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].subtitle:""}}),!t&&n.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:0===e.length&&this.bookInfo[this.curIndex]?this.bookInfo[this.curIndex].subtitle:e}})),n.createElement("audio",{className:"bgm",autoPlay:!0,src:this.props.audio_url?this.props.audio_url:void 0}))}};i([r.observable],d.prototype,"m_on",void 0),i([r.observable],d.prototype,"_list",void 0),i([r.action],d.prototype,"_off",void 0),d=i([a.observer],d),e.default=d},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=o(0);class s extends i.Component{componentDidUpdate(t){}render(){return i.createElement("div",{className:"attention "+(this.props.view?"":"hide")},i.createElement("span",null,"Attention"))}}e.default=s},function(t,e,o){"use strict";var i=this&&this.__decorate||function(t,e,o,i){var s,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,o,r):s(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.SENDPROG=e.useStudent=e.StudentContext=e.StudentConsumer=e.StudentProvider=e.sContext=void 0;const s=o(0),n=o(1),r=o(20);var a;!function(t){t[t.READY=0]="READY",t[t.SENDING=1]="SENDING",t[t.SENDED=2]="SENDED",t[t.COMPLETE=3]="COMPLETE"}(a||(a={})),e.SENDPROG=a;class c extends r.StudentContextBase{constructor(){super(),this._uploadedImageFnc=null,this._uploadedAudioFnc=null,this._clickSendedFnc=null,this._nofityRecordDataFnc=null,this.uploaded=t=>{"content"===this.state.viewDiv&&"portfolio"===this.state.prog&&"image"===this.state.curMedia?this._uploadedImageFnc&&this._uploadedImageFnc(t):"content"===this.state.viewDiv&&"portfolio"===this.state.prog&&"audio"===this.state.curMedia&&this._uploadedAudioFnc&&this._uploadedAudioFnc(t)},this.notify=t=>{},this.notifyRecorded=t=>{},this.clickSendButton=()=>{this._clickSendedFnc&&this._clickSendedFnc()},this.notifyRecordData=(t,e)=>{"content"===this.state.viewDiv&&"portfolio"===this.state.prog&&this._nofityRecordDataFnc&&this._nofityRecordDataFnc(t,e)},this.state.teacherSeq=0,this.state.prog="",this.state.portfolioProg=0,this.state.curMedia="image",this.actions.getData=()=>this._data,this.actions.setImageUploadedFnc=t=>{this._uploadedImageFnc=t},this.actions.setAudioUploadedFnc=t=>{this._uploadedAudioFnc=t},this.actions.setClickSendFnc=t=>{this._clickSendedFnc=t},this.actions.setNofityRecordDataFnc=t=>{this._nofityRecordDataFnc=t},this.actions.getCurriculum=()=>this._curriculum}_setViewDiv(t){this.state.viewDiv!==t&&"content"!==t&&(this.state.teacherSeq=0,this.state.prog="",this.state.portfolioProg=0),super._setViewDiv(t)}receive(t){if(super.receive(t),10===t.type&&t.data){const e=t.data;if("portfolio_send"===e.msgtype)this._setViewDiv("content"),this.state.prog="portfolio",this.state.teacherSeq=e.seq,this.state.portfolioProg=0;else if("portfolio_end"===e.msgtype){if("portfolio"!==this.state.prog)return;this.state.portfolioProg=3}}}setData(t){this._data=t}}i([n.observable],c.prototype,"state",void 0),i([n.action],c.prototype,"_setViewDiv",null),i([n.action],c.prototype,"receive",null),i([n.action],c.prototype,"notify",void 0),i([n.action],c.prototype,"notifyRecorded",void 0),i([n.action],c.prototype,"clickSendButton",void 0),i([n.action],c.prototype,"notifyRecordData",void 0),e.StudentContext=c;const d=new c;e.sContext=d;const{Provider:p,Consumer:u}=s.createContext(d);e.StudentConsumer=u;class l extends s.Component{render(){return s.createElement(p,{value:d},this.props.children)}}e.StudentProvider=l,e.useStudent=function(t){return function(e){return s.createElement(u,null,e=>s.createElement(t,Object.assign({},e)))}}},function(t,e,o){"use strict";var i=this&&this.__decorate||function(t,e,o,i){var s,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,o,r):s(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.StudentContextBase=void 0;const s=o(1),n=o(3),r=o(4);class a{constructor(){this._naviLeftFnc=null,this._naviRightFnc=null,this.state={viewDiv:"direction",directionON:!1,navi:{view:!1,enableLeft:!1,enableRight:!1},loading:!1,bookid:0,bookkey:0,curriculumid:0,classid:0,unitid:0,lessonid:0,svg_bg:{view:!0,bPlay:!1,viewCharactor:!0},is_lock:!1,isRemote:!1},this.actions={setNaviView:t=>{this.state.navi.view=t},setNavi:(t,e)=>{this.state.navi.enableLeft=t,this.state.navi.enableRight=e},setNaviFnc:(t,e)=>{this._naviLeftFnc=t,this._naviRightFnc=e},naviLeft:()=>{n.App.pub_playBtnPage(),this._naviLeftFnc&&this._naviLeftFnc()},naviRight:()=>{n.App.pub_playBtnPage(),this._naviRightFnc&&this._naviRightFnc()},setLoading:t=>{r.showSLoading(t)}},this.uploaded=t=>{},this.notify=t=>{},this.notifyRecorded=t=>{},this.notifyVideoRecord=t=>{},this.notifySwitchCamera=()=>{},this.notifyTakePicture=(t,e)=>{},this.notifyBookCaptureInfo=t=>{},this.clickSendButton=()=>{},this.notifyRecordData=(t,e)=>{},this.notifyAlert=t=>{},this.state.isRemote=document.location.href.indexOf("remote=y")>=0}_setViewDiv(t,e){this.state.viewDiv!==t&&(r.postViewDiv(t),"direction"===t?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0):(this.state.directionON=!1,this.state.svg_bg.bPlay=!1,this.state.svg_bg.viewCharactor=!1),this.state.loading=!1,this.state.viewDiv=t)}start(){}receive(t){switch(t.type){case 1:"direction"===this.state.viewDiv?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0):this._setViewDiv("direction"),r.sendTeacher(1,{id:n.App.student?n.App.student.id:"",name:n.App.student?n.App.student.name:""});break;case 3:this.state.directionON=!1,r.sendTeacher(3,{id:n.App.student?n.App.student.id:"",name:n.App.student?n.App.student.name:""});break;case 0:this._setViewDiv("eyeon"),r.sendTeacher(0,{id:n.App.student?n.App.student.id:"",name:n.App.student?n.App.student.name:""});break;case 10:"page_lock"===t.data.msgtype?this.state.is_lock=!0:"page_unlock"===t.data.msgtype&&(this.state.is_lock=!1)}}multiUploaded(t){}notifyNaviInfo(t,e,o,i,s,n){}notifyPenToolState(t,e){}notifyLiveGivePopupClose(){}notifyHamburgerMenuClicked(t){}callThreeminState(){}}i([s.observable],a.prototype,"state",void 0),i([s.action],a.prototype,"_setViewDiv",null),i([s.action],a.prototype,"start",null),i([s.action],a.prototype,"receive",null),e.StudentContextBase=a},function(t,e,o){"use strict";var i=this&&this.__decorate||function(t,e,o,i){var s,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,o,r):s(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},s=this&&this.__awaiter||function(t,e,o,i){return new(o||(o=Promise))((function(s,n){function r(t){try{c(i.next(t))}catch(t){n(t)}}function a(t){try{c(i.throw(t))}catch(t){n(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,a)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const n=o(0),r=o(2),a=o(1),c=o(5),d=o(3),p=o(22),u=o(24),l=o(6),h=o(4),_=o(25),m=o(27).default,f={direction:"horizontal",observer:!0};var g;!function(t){t[t.READY=0]="READY",t[t.WAIT_RECORDING=1]="WAIT_RECORDING",t[t.RECORDING=2]="RECORDING",t[t.WAIT_RECORDED=3]="WAIT_RECORDED",t[t.RECORDED=4]="RECORDED",t[t.RECORD_OK=5]="RECORD_OK",t[t.PLAYING=6]="PLAYING"}(g||(g={}));let y=class extends n.Component{constructor(t){super(t),this._curIdx=-1,this._prog=[],this._techerQuiz=null,this._quizs=[],this._viewAlert=!1,this._showSendBtn=!1,this._showRecordBtn=!1,this._base64images=[],this._base64audios=[],this._penThumb=[],this._penBg=[],this._penRecordData=[],this._state=0,this._time=0,this._timeStr="00:00",this._stime=0,this._btime=0,this.ifr=[],this._swiper=null,this._refSwiper=t=>{if(this._swiper||!t)return;const e=t.swiper;e.on("transitionStart",()=>{this._curIdx=-1}),e.on("transitionEnd",()=>{this.props.view&&(3===this._prog[this._quizs.length-1]&&h.clearSPenTool(),this._curIdx=e.activeIndex)}),this._swiper=e},this._onPrev=()=>{0!==this._curIdx&&(h.clearSPenTool(),d.App.pub_playBtnTab(),this._swiper&&this._swiper.slidePrev())},this._onNext=()=>{this._curIdx>=this._quizs.length-1||(h.clearSPenTool(),d.App.pub_playBtnTab(),0!==this._prog[this._curIdx]&&(this._showRecordBtn=!1,h.showRecordTool(!1),this._swiper&&this._swiper.slideNext(),d.App.isDvlp&&(this._state=0,this._time=0)))},this._recordStarted=()=>{this.props.view&&1===this._state&&(this._btime=this._time,this._stime=Date.now(),this._state=2,window.requestAnimationFrame(this._frame))},this._frame=t=>{this.props.view&&2===this._state&&(this._time=this._btime+Date.now()-this._stime,this._time>=9e4?this._recordClick():(this._updateTime(),window.requestAnimationFrame(this._frame)))},this._recorded=t=>{if(!this.props.view)return;if(3!==this._state)return;this._state=4;let e=t;this._notifyRecordData(e,{ridxs:[0,0,0,0,0],starts:[510,910,1522,2278,2750],ends:[721,1320,2008,2575,2959],erases:[0,0,0,0,0],colors:["black","black","black","black","black"],thicks:[1,1,1,1,1],arrX:[[321.9571838378906,321.9571838378906,323.91436767578125,327.8287353515625,329.7859191894531,333.7003173828125,334.67889404296875,335.6575012207031,338.59326171875,338.59326171875,338.59326171875,338.59326171875,338.59326171875,338.59326171875,338.59326171875,338.59326171875,338.59326171875,338.59326171875,338.59326171875,338.59326171875,338.59326171875,338.59326171875,338.59326171875],[458.9602355957031,460.91741943359375,462.8746032714844,469.7247619628906,477.55352783203125,487.3394470214844,498.1039733886719,511.8042907714844,523.5474243164062,537.2476806640625,551.9266357421875,561.7125244140625,566.6055297851562,570.5198974609375,573.4556274414062,574.4342651367188,574.4342651367188,574.4342651367188,574.4342651367188,574.4342651367188,571.4984741210938,566.6055297851562,562.6911010742188,559.75537109375,558.7767333984375,556.819580078125,556.819580078125,554.8623657226562,554.8623657226562,555.8410034179688,557.7981567382812,562.6911010742188,571.4984741210938,585.1987915039062,597.9204711914062,610.6422119140625,622.3853149414062,634.12841796875,647.8287353515625,657.6146850585938,665.4434204101562,669.3577880859375,673.2721557617188,676.2079467773438],[698.715576171875,703.6085815429688,709.4801025390625,720.24462890625,731.98779296875,745.6880493164062,759.3883666992188,771.1314697265625,778.9602661132812,785.8104248046875,791.6819458007812,794.6177368164062,795.5963134765625,797.5535278320312,797.5535278320312,796.574951171875,791.6819458007812,782.8746337890625,775.0458984375,769.17431640625,764.2813720703125,761.3455810546875,759.3883666992188,757.4312133789062,760.366943359375,767.2171020507812,776.0244750976562,786.7890014648438,797.5535278320312,806.36083984375,812.232421875,815.168212890625,817.1253662109375,820.0611572265625,820.0611572265625,821.0397338867188,821.0397338867188,821.0397338867188,819.0825805664062,815.168212890625,811.2538452148438,805.3822631835938,799.5106811523438,794.6177368164062,792.6605224609375,789.7247924804688,788.7461547851562,787.767578125,787.767578125,785.8104248046875],[902.2630004882812,900.3057861328125,899.3272094726562,898.3486328125,897.3700561523438,897.3700561523438,897.3700561523438,897.3700561523438,897.3700561523438,895.412841796875,895.412841796875,895.412841796875,895.412841796875,896.3914184570312,897.3700561523438,899.3272094726562,905.1987915039062,915.9633178710938,927.7064208984375,940.4281616210938,962.935791015625,991.3150024414062,1019.6942138671875,1044.1590576171875,1072.5382080078125,1086.238525390625,1101.89599609375,1111.6820068359375,1118.5321044921875,1122.446533203125,1124.4036865234375,1125.3822021484375],[1027.52294921875,1026.5443115234375,1026.5443115234375,1026.5443115234375,1026.5443115234375,1026.5443115234375,1026.5443115234375,1021.6513671875,1016.7584228515625,1008.9296875,1004.0366821289062,999.1437377929688,999.1437377929688,999.1437377929688,999.1437377929688,999.1437377929688,999.1437377929688]],arrY:[[195.9633026123047,198.89907836914062,204.77064514160156,215.53517150878906,224.34251403808594,237.06422424316406,248.80734252929688,264.46484375,285.0152893066406,306.5443420410156,325.1376037597656,343.73089599609375,360.3669738769531,376.02447509765625,386.78900146484375,392.6605529785156,401.4678955078125,407.3394470214844,410.2752380371094,413.21099853515625,417.1253967285156,419.08258056640625,420.0611572265625],[251.7431182861328,250.7645263671875,250.7645263671875,250.7645263671875,250.7645263671875,251.7431182861328,256.6360778808594,258.59326171875,262.5076599121094,268.37921142578125,274.2507629394531,281.1009216308594,285.0152893066406,291.8654479980469,300.67279052734375,309.4801330566406,318.2874755859375,328.0733947753906,335.9021301269531,344.70947265625,353.5168151855469,360.3669738769531,367.2171325683594,373.08868408203125,377.0030517578125,381.8960266113281,382.8746032714844,384.8318176269531,385.8103942871094,385.8103942871094,385.8103942871094,385.8103942871094,383.85321044921875,377.9816589355469,375.0458679199219,369.17431640625,364.2813415527344,361.3455505371094,357.4311828613281,354.49542236328125,351.55963134765625,350.5810546875,349.6024475097656,349.6024475097656],[243.91436767578125,242.93577575683594,242.93577575683594,242.93577575683594,242.93577575683594,242.93577575683594,242.93577575683594,244.89295959472656,246.85015869140625,251.7431182861328,255.65748596191406,258.59326171875,264.46484375,273.2721862792969,283.05810546875,291.8654479980469,298.7156066894531,308.50152587890625,316.33026123046875,321.2232360839844,325.1376037597656,328.0733947753906,328.0733947753906,330.03057861328125,330.03057861328125,330.03057861328125,330.03057861328125,330.03057861328125,331.0091857910156,331.9877624511719,333.9449462890625,335.9021301269531,336.8807373046875,339.8165283203125,342.7522888183594,346.6666564941406,352.5382385253906,358.4097900390625,364.2813415527344,370.15289306640625,375.0458679199219,381.8960266113281,389.7247619628906,394.61773681640625,398.5321044921875,401.4678955078125,403.4250793457031,403.4250793457031,404.4036560058594,404.4036560058594],[266.4220275878906,270.3363952636719,276.20794677734375,285.0152893066406,294.80120849609375,303.6085510253906,315.3516845703125,327.09478759765625,336.8807373046875,347.645263671875,358.4097900390625,362.32415771484375,365.25994873046875,366.238525390625,366.238525390625,366.238525390625,366.238525390625,366.238525390625,364.2813415527344,363.3027648925781,359.38836669921875,356.4526062011719,351.55963134765625,348.62384033203125,343.73089599609375,341.7737121582031,339.8165283203125,337.85931396484375,336.8807373046875,336.8807373046875,336.8807373046875,336.8807373046875],[246.85015869140625,246.85015869140625,251.7431182861328,262.5076599121094,274.2507629394531,286.97247314453125,304.587158203125,337.85931396484375,383.85321044921875,422.9969482421875,464.0978698730469,497.3700256347656,537.4923706054688,569.7859497070312,585.4434204101562,593.2721557617188,595.2293701171875]]})},this._recordClick=()=>{if(this.props.view&&d.App.isDvlp)if(0===this._state||4===this._state||5===this._state){if(5===this._state)this._curIdx=0,this._time=0,this._stime=0,this._btime=0;else if(this._time>=9e4)return;this._state=1,this._recordStarted()}else 2===this._state&&(this._time=this._btime+Date.now()-this._stime,this._updateTime(),this._state=3,this._recorded(d.App.data_url+"team_select_bgm.mp3"))},this._playClick=()=>{this.props.view&&d.App.isDvlp&&(this._state<5||(d.App.pub_playBtnTab(),5===this._state?this._state=6:this._state=5))},this._okClick=()=>{this.props.view&&d.App.isDvlp&&4===this._state&&(d.App.pub_playBtnTab(),this._state=5)},this._onCompletedAlertPop=()=>{if(!this.props.view)return;if(this._curIdx<0||this._curIdx>this._quizs.length)return;this._viewAlert=!1;this._quizs[this._curIdx];if(this._techerQuiz&&1===this._techerQuiz.step){if(""!==this._base64images[this._curIdx])return;this.props.actions.setLoading(!0),this.sendPostMessage("domtoimage",null)}else this._techerQuiz&&2===this._techerQuiz.step&&(this.props.actions.setLoading(!0),""!==this._penRecordData[this._curIdx]?this._uploadImage():this._uploadedAudio(""))},this._onSend=()=>s(this,void 0,void 0,(function*(){if(!this.props.view)return;if(this._curIdx<0||this._curIdx>=this._quizs.length)return;if(0!==this._prog[this._curIdx])return;d.App.pub_playToPad();this._quizs[this._curIdx];this._techerQuiz&&1===this._techerQuiz.step?(this.props.actions.setLoading(!0),this.sendPostMessage("domtoimage",null)):this._techerQuiz&&2===this._techerQuiz.step&&(this.props.actions.setLoading(!0),""!==this._penRecordData[this._curIdx]?this._uploadImage():this._uploadedAudio(""))})),this._uploadImage=()=>s(this,void 0,void 0,(function*(){if(this._techerQuiz&&1===this._techerQuiz.step){if(this._curIdx>this._base64images.length)return void this.props.actions.setLoading(!1)}else if(this._techerQuiz&&2===this._techerQuiz.step&&this._curIdx>this._penRecordData.length)return void this.props.actions.setLoading(!1);let t=this._base64images[this._curIdx];if(this.props.actions.setImageUploadedFnc(this._uploadedImage),d.App.isDvlp){yield l.wait(1e3);let t=d.App.data_url+"sample_draw.png";this._uploadedImage({url:t,pen:t})}else this.props.state.curMedia="image",this._techerQuiz&&1===this._techerQuiz.step?h.uploadImageToServer(t,!0,{left:0,top:0,width:1280,height:800}):this._techerQuiz&&2===this._techerQuiz.step&&h.uploadImageToServer(t,"split-pen",{left:0,top:0,width:1280,height:800})})),this._uploadedImage=t=>s(this,void 0,void 0,(function*(){if(!t)return void this.props.actions.setLoading(!1);if(!this.props.view)return void this.props.actions.setLoading(!1);if(this._techerQuiz&&1===this._techerQuiz.step){if(this._curIdx>this._quizs.length)return void this.props.actions.setLoading(!1)}else if(this._techerQuiz&&2===this._techerQuiz.step&&this._curIdx>this._quizs.length)return void this.props.actions.setLoading(!1);let e="",o="";if(c.isObject(t)?(e=t.pen,o=t.url):o=t,3!==this._prog[this._curIdx]&&(this._prog[this._curIdx]=1,this._showSendBtn=!1,h.showSendButton(!1)),this._techerQuiz&&1===this._techerQuiz.step){if(d.App.student){const t={msgtype:"portfolio_result",id:d.App.student.id,teacherSeq:this._techerQuiz?this._techerQuiz.seq:0,studentSeq:this._curIdx>-1&&this._curIdx<this._quizs.length?this._quizs[this._curIdx].seq:0,kind:"image",image:o,penimage:"",audio:"",pendata:"",forced:3===this._prog[this._curIdx]};h.sendTeacher(11,t)}yield l.wait(600),this.props.actions.setLoading(!1),3!==this._prog[this._curIdx]&&(this._prog[this._curIdx]=3)}else this._techerQuiz&&2===this._techerQuiz.step&&(this._penBg[this._curIdx]=o,this._penThumb[this._curIdx]=e,this.props.actions.setAudioUploadedFnc(this._uploadedAudio),d.App.isDvlp?(yield l.wait(1e3),this._uploadedAudio(this._base64audios[this._curIdx])):(this.props.state.curMedia="audio",h.uploadFileToServer(this._base64audios[this._curIdx])))})),this._uploadedAudio=t=>s(this,void 0,void 0,(function*(){if(this.props.view)if(this._techerQuiz&&2!==this._techerQuiz.step)this.props.actions.setLoading(!1);else if(this._curIdx>this._quizs.length)this.props.actions.setLoading(!1);else{if(this._showRecordBtn=!1,h.showRecordTool(!1),d.App.student){const e={msgtype:"portfolio_result",id:d.App.student.id,teacherSeq:this._techerQuiz?this._techerQuiz.seq:0,studentSeq:this._curIdx>-1&&this._curIdx<this._quizs.length?this._quizs[this._curIdx].seq:0,kind:"penrecord",image:this._curIdx>-1&&this._curIdx<this._penBg.length?this._penBg[this._curIdx]:"",penimage:this._curIdx>-1&&this._curIdx<this._penThumb.length?this._penThumb[this._curIdx]:"",audio:t,pendata:this._curIdx>-1&&this._curIdx<this._penRecordData.length?this._penRecordData[this._curIdx]:"",forced:3===this._prog[this._curIdx]};h.sendTeacher(11,e)}yield l.wait(600),h.clearSPenTool(),this.props.actions.setLoading(!1),3!==this._prog[this._curIdx]&&(this._prog[this._curIdx]=3)}else this.props.actions.setLoading(!1)})),this._notifyRecordData=(t,e)=>{if(this.props.view&&!(this._curIdx<0||this._curIdx>this._quizs.length)){if(d.App.isDvlp)this._base64audios[this._curIdx]=t;else{if(t.indexOf("https://")>-1)return;this._base64audios[this._curIdx]=t}this._penRecordData[this._curIdx]=JSON.stringify(e),this.props.actions.setLoading(!0),this.sendPostMessage("domtoimage",null)}},this.handlePostMessage=t=>{const e=t.data;if("macontent"===e.from&&"domtoimage"===e.type){if(this._curIdx<0||this._curIdx>this._quizs.length)return;this._base64images[this._curIdx]=e.msg.base64Img,this._techerQuiz&&1===this._techerQuiz.step?this._uploadImage():this._techerQuiz&&2===this._techerQuiz.step&&(this.props.actions.setLoading(!1),this._showSendBtn||(h.showSendButton(!0),this._showSendBtn=!0,this.props.actions.setClickSendFnc(this._onSend)))}}}_updateTime(){this._time>9e4?(this._time=9e4,this._timeStr="01:30"):this._timeStr=l.getTimeStr(this._time,6e5)}componentDidMount(){window.addEventListener("message",this.handlePostMessage,!1)}componentWillUnmount(){window.removeEventListener("message",this.handlePostMessage,!1)}sendPostMessage(t,e){const o={from:"matemplate",to:"macontent",type:t,msg:e};this._curIdx>-1&&this.ifr[this._curIdx]&&this.ifr[this._curIdx].contentWindow.postMessage(o,"*")}componentDidUpdate(t){if(this.props.view&&!t.view){for(this._curIdx=0,this._techerQuiz=null;this._quizs.length>0;)this._quizs.pop();for(;this._prog.length>0;)this._prog.pop();for(this._viewAlert=!1,this._showSendBtn=!1,this._showRecordBtn=!1;this._base64images.length>0;)this._base64images.pop();for(;this._base64audios.length>0;)this._base64audios.pop();for(;this._penThumb.length>0;)this._penThumb.pop();for(;this._penBg.length>0;)this._penBg.pop();for(;this._penRecordData.length>0;)this._penRecordData.pop();this.props.actions.setImageUploadedFnc(null),this.props.actions.setAudioUploadedFnc(null),this.props.actions.setNofityRecordDataFnc(null)}else if(!this.props.view&&t.view){for(this._viewAlert=!1,this._showSendBtn=!1,this._showRecordBtn=!1;this._base64images.length>0;)this._base64images.pop();for(;this._base64audios.length>0;)this._base64audios.pop();for(;this._penThumb.length>0;)this._penThumb.pop();for(;this._penBg.length>0;)this._penBg.pop();for(;this._penRecordData.length>0;)this._penRecordData.pop();this.props.actions.setImageUploadedFnc(null),this.props.actions.setAudioUploadedFnc(null),this.props.actions.setNofityRecordDataFnc(null)}if(this.props.view){if(this.props.teacherSeq>0&&this.props.teacherSeq!==t.teacherSeq){for(t.teacherSeq>0&&h.clearSPenTool(),this._curIdx=0,this._viewAlert=!1,this._showSendBtn=!1,this._showRecordBtn=!1;this._quizs.length>0;)this._quizs.pop();for(;this._prog.length>0;)this._prog.pop();const e=this.props.actions.getData().quizs,o=c.find(e,{seq:this.props.teacherSeq});if(o){this._techerQuiz=o;const t=e.filter(t=>!t.isteacher&&t.ptype===o.ptype&&t.step===o.step).sort((t,e)=>t.qnum<e.qnum?-1:t.qnum>e.qnum?1:0);if(t){for(this._quizs=t;this._base64images.length>0;)this._base64images.pop();for(;this._base64audios.length>0;)this._base64audios.pop();for(;this._penThumb.length>0;)this._penThumb.pop();for(;this._penBg.length>0;)this._penBg.pop();for(;this._penRecordData.length>0;)this._penRecordData.pop();for(let e=0;e<t.length;e++)this._prog.push(0),this._base64images.push(""),this._base64audios.push(""),this._penThumb.push(""),this._penBg.push(""),this._penRecordData.push("");this._state=0,this._time=0}}this._swiper&&this._swiper.slideTo(0,0)}if(this.props.portfolioProg!==t.portfolioProg&&3===this.props.portfolioProg&&3!==this._prog[this._curIdx]){this._viewAlert=!0,h.showSendButton(!1),this._showSendBtn=!1,h.showRecordTool(!1),this._showRecordBtn=!1;for(let t=0;t<this._prog.length;t++)3!==this._prog[t]&&(this._prog[t]=3)}this._curIdx>-1&&this._curIdx<this._quizs.length&&0===this._prog[this._curIdx]&&(this._techerQuiz&&1===this._techerQuiz.step?(this._showRecordBtn&&(h.showRecordTool(!1),this._showRecordBtn=!1,this.props.actions.setNofityRecordDataFnc(null)),this._showSendBtn||(h.showSendButton(!0),this._showSendBtn=!0,this.props.actions.setClickSendFnc(this._onSend))):this._techerQuiz&&2===this._techerQuiz.step&&(this._showRecordBtn||(h.showRecordTool(!0),this._showRecordBtn=!0,this.props.actions.setNofityRecordDataFnc(this._notifyRecordData))))}}render(){const{view:t,state:e,actions:o}=this.props;let i=this._timeStr,s=!1,r="";return 2===this._state?r="recording":3===this._state?r="pause":4===this._state||5===this._state?r="stop":6===this._state&&(r="playing",s=!0),n.createElement("div",{className:"s_portfolio",style:{display:t?void 0:"none"}},n.createElement("div",{className:"portfolioPage"},n.createElement(m,Object.assign({ref:this._refSwiper},f),this._quizs.map((t,e)=>n.createElement("div",{key:e,className:this._prog[this._quizs.length-1]<3?"swiper-no-swiping":""},n.createElement("iframe",{key:e,src:d.App.data_url+t.url+"?idx="+e,style:{zIndex:3!==this._prog[this._quizs.length-1]?10:-1},ref:t=>{t&&(this.ifr[e]=t)}}),n.createElement("div",{style:{zIndex:3===this._prog[this._quizs.length-1]?10:-1}})))),d.App.isDvlp&&this._showRecordBtn&&n.createElement("div",{className:"record "+r,style:{display:this._techerQuiz&&2===this._techerQuiz.step?void 0:"none",zIndex:20}},n.createElement(u.ToggleBtn,{className:"btn_record",view:this._state<5,on:2===this._state,disabled:this._state>=5,onClick:this._recordClick}),n.createElement(u.ToggleBtn,{className:"btn_record",view:this._state>=5,disabled:5!==this._state,onClick:this._recordClick}),n.createElement("div",{className:"time"},n.createElement("span",{className:"status_rec"}),i),n.createElement(u.ToggleBtn,{className:"btn_right",view:4===this._state,onClick:this._okClick}),n.createElement(u.ToggleBtn,{className:"btn_right",view:this._state>=5,on:s,onClick:this._playClick}))),n.createElement(u.ToggleBtn,{className:"btn_prev",view:this._curIdx>0&&3===this._prog[this._curIdx],onClick:this._onPrev}),n.createElement(u.ToggleBtn,{className:"btn_next",view:this._curIdx>=0&&this._curIdx<this._quizs.length-1&&3===this._prog[this._curIdx],onClick:this._onNext}),n.createElement(_.WarningPopup,{view:this._viewAlert,type:0,button:!1,delay:3e3,onComplete:this._onCompletedAlertPop}),d.App.isDvlp&&n.createElement(p.default,{view:this._curIdx>-1&&0===this._prog[this._curIdx],type:"pad",sended:this._prog[this._curIdx]>=3,originY:0,onSend:this._onSend}))}};i([a.observable],y.prototype,"_curIdx",void 0),i([a.observable],y.prototype,"_prog",void 0),i([a.observable],y.prototype,"_techerQuiz",void 0),i([a.observable],y.prototype,"_quizs",void 0),i([a.observable],y.prototype,"_viewAlert",void 0),i([a.observable],y.prototype,"_showRecordBtn",void 0),i([a.observable],y.prototype,"_state",void 0),i([a.observable],y.prototype,"_time",void 0),i([a.observable],y.prototype,"_timeStr",void 0),y=i([r.observer],y),e.default=y},function(t,e,o){"use strict";var i=this&&this.__decorate||function(t,e,o,i){var s,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,o,r):s(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(e,"__esModule",{value:!0});const s=o(0),n=o(1),r=o(2),a=o(23),c=o(8);let d=class extends s.Component{constructor(t){super(t),this.m_btnH=0,this.m_max=0,this.m_sy=-1,this.m_vy=-1,this.m_time=-1,this.m_bSend=!1,this.m_state={y:0,alpha:1,tDur:0,aDur:0,isOn:!1,disabled:!1},this._ref=t=>{if(this.m_max>0||!t)return;t.setAttribute("touch-action","none");const e=window.getComputedStyle(t),o=c.nteFloat(e.height,0),i=c.nteFloat(e.bottom,0);o>0&&(this.m_btnH=o,"pad"===this.props.type?this.m_max=i-o-35:this.m_max=o+i+10,this.props.view||(this.m_state.y=this.m_max))},this._down=t=>{this.m_state.isOn||this.m_state.disabled||void 0!==this.props.disable&&this.props.disable||(this.m_state.y=this.props.originY,this.m_state.alpha=1,this.m_state.tDur=0,this.m_state.aDur=0,this.m_state.isOn=!0,this.m_vy=0,this.m_time=Date.now())},this._start=(t,e)=>{this.m_sy=e.y,this.m_bSend=!0},this._drag=(t,e)=>{if(!this.m_state.isOn||this.m_state.disabled)return;let o=e.y-this.m_sy;"teacher"===this.props.type?(e.deltaY<-1?this.m_bSend=!1:e.deltaY>=0&&(this.m_bSend=!0),o<0&&(o=0)):(e.deltaY>1?this.m_bSend=!1:e.deltaY<=0&&(this.m_bSend=!0),o>0&&(o=0)),!1===this.props.preventDrag&&(this.m_state.y=o+this.props.originY);const i=Date.now();this.m_vy=e.deltaY/(i-this.m_time),this.m_time=i},this._stop=(t,e)=>{if(this.m_state.isOn&&!this.m_state.disabled)if(this.m_bSend){let t=.5*this.m_vy*1e3,o=e.y-this.m_sy;"teacher"===this.props.type?(t<this.m_btnH?t=this.m_btnH:t>4*this.m_btnH&&(t=4*this.m_btnH),o<0&&(o=0)):(-1*t<this.m_btnH?t=-this.m_btnH:-1*t>4*this.m_btnH&&(t=-4*this.m_btnH),o>0&&(o=0)),this.m_state.tDur=.5,this.m_state.aDur=.5,this.m_state.alpha=0,this.m_state.y=o+t+this.props.originY,this.props.onSend()}else this.m_state.isOn=!1,this.m_state.tDur=.3,this.m_state.aDur=0,this.m_state.y=this.props.originY},t.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):t.view?(this.m_state.y=t.originY,this.m_state.alpha=1,this.m_state.tDur=.3,this.m_state.aDur=0,this.m_state.isOn=!1,this.m_state.disabled=!1):t.view||(this.m_state.y=t.originY,this.m_state.alpha=0,this.m_state.tDur=.3,this.m_state.aDur=.3,this.m_state.isOn=!1,this.m_state.disabled=!0)}componentWillReceiveProps(t){t.sended&&!this.props.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):t.view&&!this.props.view?(this.m_state.y=t.originY,this.m_state.alpha=1,t.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=.3):(this.m_state.tDur=.3,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1):!t.view&&this.props.view?(this.m_state.y=this.m_max,this.m_state.alpha=0,this.m_state.tDur=.3,this.m_state.aDur=.3,this.m_state.isOn=!1,this.m_state.disabled=!0):!t.view||t.sended||this.m_state.isOn||t.originY===this.props.originY||(this.m_state.y=t.originY,this.m_state.tDur=.3,this.m_state.aDur=0),!this.props.isRetry&&t.isRetry&&(this.m_state.y=t.originY,this.m_state.alpha=1,t.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=.3):(this.m_state.tDur=.3,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1)}render(){const{y:t,tDur:e,aDur:o,alpha:i,isOn:n,disabled:r}=this.m_state;let c={transform:`translateY(${t}px)`,transition:`transform ${e}s, opacity ${o/2}s ${o/2}s`,opacity:i,pointerEvents:r||!this.props.view?"none":"auto"};this.props.preventDrag&&(c={});const d=[];return"pad"===this.props.type?d.push("fel_toteacher"):d.push("fel_topad"),n&&d.push("on"),this.props.isVisiblePenTool&&this.props.isVisiblePenTool&&d.push("up"),s.createElement(a.DraggableCore,{onMouseDown:this._down,onDrag:this._drag,onStart:this._start,onStop:this._stop},s.createElement("button",{ref:this._ref,className:d.join(" ")+(this.props.className?" "+this.props.className:""),style:c},s.createElement("span",{className:"revise"+(this.props.isRevise?" on":""),style:{display:this.props.isRevise?"":"none"}})))}};i([n.observable],d.prototype,"m_state",void 0),d=i([r.observer],d),e.default=d},function(t,e){t.exports=ReactDraggable},function(t,e,o){"use strict";var i=this&&this.__decorate||function(t,e,o,i){var s,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,o,r):s(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.ImgBtn=e.AudioBtn=e.ToggleBtn=void 0;const s=o(0),n=o(1),r=o(2);class a extends s.Component{constructor(t){super(t),this.m_pID=-1,this._inited=this._inited.bind(this),this._onClick=this._onClick.bind(this)}_inited(t){!this.m_el&&t&&(this.m_el=t,this.props.onRef&&this.props.onRef(t),t.setAttribute("touch-action","none"),t.addEventListener("pointerdown",e=>{if(!(this.m_pID>=0)){if(this.m_pID=e.pointerId,!this.props.disableCapture)try{t.setPointerCapture(this.m_pID)}catch(t){}this.props.onMouseDown&&this.props.onMouseDown(e)}}),t.addEventListener("pointerup",e=>{if(this.m_pID===e.pointerId){try{t.releasePointerCapture(this.m_pID)}catch(t){}this.m_pID=-1,this.props.onMouseUp&&this.props.onMouseUp(e)}}),t.addEventListener("pointerleave",e=>{if(this.props.disableCapture){if(this.m_pID!==e.pointerId)return;try{t.releasePointerCapture(this.m_pID)}catch(t){}this.m_pID=-1}this.props.onMouseLeave&&this.props.onMouseLeave(e)}),t.addEventListener("pointercancel",e=>{if(this.m_pID===e.pointerId){try{t.releasePointerCapture(this.m_pID)}catch(t){}this.m_pID=-1,this.props.onMouseLeave&&this.props.onMouseLeave(e)}}))}_onClick(t){this.props.onClick&&this.props.onClick(t),this.props.preventEvent&&(t.preventDefault(),t.stopPropagation())}componentDidUpdate(t){if((this.props.disabled&&!t.disabled||!this.props.view&&t.view)&&this.m_pID>=0){try{this.m_el&&this.m_el.releasePointerCapture(this.m_pID)}catch(t){}this.m_pID=-1}}}i([n.observable],a.prototype,"m_pID",void 0);let c=class extends a{constructor(t){super(t),this.m_on=!1,this.m_on=!0===t.on}componentWillReceiveProps(t){this.props.on!==t.on&&(this.m_on=!0===t.on)}render(){const t=[];this.props.className&&t.push(this.props.className),this.m_on&&t.push("on"),this.m_pID>0&&t.push("down");const e=t.join(" ");let o=this.props.style;return!1===this.props.view&&(o||(o={}),o.display="none"),s.createElement("button",{id:this.props.id,className:e,onClick:this._onClick,ref:this._inited,disabled:!0===this.props.disabled,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:o},this.props.children)}};i([n.observable],c.prototype,"m_on",void 0),c=i([r.observer],c),e.ToggleBtn=c;let d=class extends c{constructor(t){super(t)}play(){this.m_on||(this.m_on=!0,this.props.playFnc(this.props.src,t=>{this.m_on&&(this.m_on=!1,this.props.onPause&&this.props.onPause(t))}))}_onClick(t){this.m_on?(this.props.pauseFnc(),this.m_on=!1):this.play(),super._onClick(t)}};i([n.action],d.prototype,"play",null),i([n.action],d.prototype,"_onClick",null),d=i([r.observer],d),e.AudioBtn=d;let p=class extends a{constructor(t){super(t),this.m_on=!1,this.m_on=!0===t.on}componentWillReceiveProps(t){this.props.on!==t.on&&(this.m_on=!0===t.on)}render(){const t=[];this.props.className&&t.push(this.props.className),this.m_on&&t.push("on"),this.m_pID>0&&t.push("down"),!0===this.props.disabled&&t.push("disable");const e=t.join(" ");let o=this.props.style;return!1===this.props.view&&(o||(o={}),o.display="none"),s.createElement("img",{id:this.props.id,className:e,onClick:this._onClick,ref:this._inited,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:o,src:this.props.src,useMap:this.props.useMap})}};i([n.observable],p.prototype,"m_on",void 0),p=i([r.observer],p),e.ImgBtn=p},function(t,e,o){"use strict";var i=this&&this.__decorate||function(t,e,o,i){var s,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,o,r):s(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.AlertPopup=e.WarningPopup=e.StrategyPopup=void 0;const s=o(0),n=o(1),r=o(2),a=o(26),c=o(5),d=o(3);let p=class extends s.Component{componentDidUpdate(t){if(this.props.view&&!t.view){if(!this.props.button){let t=this.props.delay;t||(t=800),c.delay(()=>{this.props.onComplete&&this.props.onComplete()},t)}}else!this.props.view&&t.view}render(){const{type:t}=this.props;let e="";0===t?e="The teacher has stopped you from the activity. After 3 seconds, only the contents has been created so far will be submitted.":1===t?e="All students are already in progress. If you restart, existing data will be deleted. Are you sure you want to request the submission?":2===t?e="You can share a solution only in the problem solving state.":3===t?e="Do you want to save the current learning screen? If there is already saved data, the current data will be overwritten.":4===t?e="Picture not taken.\nYou have reached the maximum number of pictures available.":5===t&&(e="For this activity, We recommend students to wear a headset or an earphone with a microphone.");let o="exclamation";return 4===t?o="nocamera":5===t&&(o="headset"),s.createElement("div",{className:"alertpop strategy"+(this.props.view?" show":"")},s.createElement("div",{className:"alertpop-inner"},s.createElement("div",{className:o}),s.createElement("div",{className:"ment"},e),s.createElement("div",{className:"buttons"+(this.props.isSingle?" single":"")+(this.props.button?"":" hide")},s.createElement("button",{className:"btn cancel",onClick:this.props.onCancel},"Cancel"),s.createElement("button",{className:"btn ok",onClick:this.props.onOk},"Ok"))))}};p=i([r.observer],p),e.StrategyPopup=p;let u=class extends s.Component{constructor(){super(...arguments),this.second=3,this.interval=null}componentDidUpdate(t){if(this.props.view&&!t.view){if(this.second=3,!this.props.button){let t=this.props.delay;t||(t=800),this.interval=setInterval(()=>{this.second--,0===this.second&&(this.props.onComplete&&this.props.onComplete(),null!==this.interval&&clearInterval(this.interval))},1e3)}}else!this.props.view&&t.view&&(null!==this.interval&&clearInterval(this.interval),this.props.onComplete&&this.props.onComplete())}render(){const{type:t}=this.props;let e="";return 0===t&&(e=`Submit your answer within <strong>${this.second} seconds.</strong>`),s.createElement("div",{className:"warningpopup",style:{display:this.props.view?"":"none"}},s.createElement("div",{className:"msg",dangerouslySetInnerHTML:{__html:e}}))}};i([n.observable],u.prototype,"second",void 0),u=i([r.observer],u),e.WarningPopup=u;class l extends s.Component{constructor(){super(...arguments),this._onOk=()=>{this.props.onOk&&this.props.onOk()},this._onClose=()=>{this.props.onClose&&this.props.onClose()}}componentDidUpdate(t){this.props.view&&!t.view||!this.props.view&&t.view&&d.App.pub_playBtnTab()}render(){const{view:t,msg:e,isSingle:o,msgclass:i}=this.props;return s.createElement(a.CoverPopup,{className:"alert_popup",view:t,onClosed:this.props.isSingle?this._onOk:this._onClose},s.createElement("div",{className:"pop_box"},s.createElement("span",{className:"ico_alert"}),s.createElement("span",{className:"text"+(i&&""!==i?" "+i:""),dangerouslySetInnerHTML:{__html:e}}),s.createElement("div",{className:"btns"},s.createElement("button",{className:"btn_cancel",onClick:this._onClose,style:{display:o?"none":""}},s.createElement("span",null,"Cancel")),s.createElement("button",{className:"btn_ok",onClick:this._onOk},s.createElement("span",null,"OK")))))}}e.AlertPopup=l},function(t,e,o){"use strict";var i=this&&this.__decorate||function(t,e,o,i){var s,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(n<3?s(r):n>3?s(e,o,r):s(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r},s=this&&this.__awaiter||function(t,e,o,i){return new(o||(o=Promise))((function(s,n){function r(t){try{c(i.next(t))}catch(t){n(t)}}function a(t){try{c(i.throw(t))}catch(t){n(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,a)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.CoverPopup=void 0;const n=o(0),r=o(1),a=o(2),c=o(6);let d=class extends n.Component{constructor(){super(...arguments),this.m_state="closed",this._open=()=>s(this,void 0,void 0,(function*(){"closed"===this.m_state&&(this.m_state="opening",yield c.wait(100),this.m_state="open")})),this._close=()=>s(this,void 0,void 0,(function*(){"open"===this.m_state&&(this.m_state="closing",yield c.wait(400),this.props.onClosed(),this.m_state="closed")}))}componentDidUpdate(t){this.props.view!==t.view&&(this.props.view?this._open():this._close())}render(){return n.createElement("div",{className:this.props.className+" "+this.m_state},this.props.children)}};i([r.observable],d.prototype,"m_state",void 0),d=i([a.observer],d),e.CoverPopup=d},function(t,e){t.exports=ReactIdSwiper},function(t,e,o){"use strict";o.r(e)},function(t,e,o){"use strict";o.r(e)},function(t,e,o){"use strict";o.r(e)}]);