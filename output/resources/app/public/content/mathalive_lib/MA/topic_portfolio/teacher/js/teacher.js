!function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=15)}([function(t,e){t.exports=React},function(t,e){t.exports=mobx},function(t,e){t.exports=mobxReact},function(t,e){t.exports=_},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0;const s=i(11),o=i(5);function n(t){if(!t)return t;console.log("init student",t),t.displayMode=""+t.displayMode=="2"?"2":"1",t.gender=t.gender,""===t.nickname&&(t.nickname=t.name);let e=t.avatar&&""!==t.avatar?t.avatar:"";return""===e&&(e="f"===t.gender||"F"===t.gender?"/content/mathalive_lib/images/default_candy.png":"/content/mathalive_lib/images/default_cheese.png",t.avatar=e),t}class r{static get isMobile(){return r._isMobile}static get tempEl(){return r._tempEl}static pub_init(){const t=navigator.userAgent;r._isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t)||/android/i.test(t),r._tempBnd=document.createElement("div"),r._tempBnd.style.display="none",r._tempEl=document.createElement("div"),r._tempBnd.appendChild(r._tempEl),null===document.body?document.addEventListener("DOMContentLoaded",t=>{document.body.appendChild(r._tempBnd)}):document.body.appendChild(r._tempBnd)}static get students(){return r._students}static get student(){return r._student}static get lang(){return r._lang}static get isDvlp(){return r._isDvlp}static get data_url(){return r._data_url}static get lesson(){return r._lesson}static get book(){return r._book}static get nextBook(){return r._nextBook}static get prevBook(){return r._prevBook}static get addOnHost(){return r._addOnHost}static setaddOnHost(t){r._addOnHost=t}static pub_load(t,e,i,s,o,a,l){r._lesson=s,r._book=i,r._nextBook=a,r._prevBook=l,r._students=[],t&&Array.isArray(t)&&t.forEach((t,e)=>{r._students[e]=n(t)}),r._student=n(e),o&&""!==o&&(r._addOnHost=o)}static pub_reloadStudents(t){o.getStudents((e,i)=>{for(;r._students.length>0;)r._students.pop();for(;r._students_inited.length>0;)r._students_inited.pop();for(let t=0,i=e.length;t<i;t++)r.isDvlp?r._students[t]=n(e[t]):r._students[t]=n({id:e[t].id,name:e[t].name,thumb:e[t].defaultThumbnail,avatar:e[t].profileThumbnail,nickname:""!==e[t].nickName?e[t].nickName:e[t].name,displayMode:e[t].displayMode,gender:e[t].gender,inited:!0}),console.log("student",e[t]),r._students_inited.push(e[t].id);t()})}static pub_parseStyle(t){return r._tempEl.style.cssText=t,r._tempEl.style}static pub_initAudio(){r._common_audio=document.getElementById("common_audio"),r._ding_audio=document.getElementById("ding_audio"),r._dingend_audio=document.getElementById("dingend_audio"),r._btn_audio=document.getElementById("btn_audio"),r._correct_audio=document.getElementById("correct_audio"),r._wrong_audio=document.getElementById("wrong_audio"),r._topad_audio=document.getElementById("topad_audio"),r._goodjob_audio=document.getElementById("goodjob_audio"),r._btn_back_audio=document.getElementById("btn_back_audio"),r._btn_page_audio=document.getElementById("btn_page_audio"),r._popup_audio=document.getElementById("popup_audio"),r._clock_audio=document.getElementById("clock_audio"),r._ts_bgm_audio=document.getElementById("ts_bgm_audio"),r._bs_audio=document.getElementById("bs_audio"),r._bb_audio=document.getElementById("bb_audio"),r._cd_audio=document.getElementById("cd_audio"),r._tc_audio=document.getElementById("tc_audio"),r._te_audio=document.getElementById("te_audio"),r._trg_bgm_audio=document.getElementById("trg_bgm_audio"),r._afc_audio=document.getElementById("afc_audio"),r._trs_audio=document.getElementById("trs_audio"),r._btn_choice_audio=document.getElementById("btn_choice_audio"),r._retry_audio=document.getElementById("retry_audio"),r._sorry_audio=document.getElementById("sorry_audio"),r._great_audio=document.getElementById("great_audio"),r._memorygame_flipcard_audio=document.getElementById("flipcard_audio"),r._ispy_gameclick_audio=document.getElementById("gameclick_audio"),r._game_timesetting_start_audio=document.getElementById("game_timesetting_start"),r._solution_btn_audio=document.getElementById("solution_btn_audio"),r._game_result_audio=document.getElementById("game_result_audio"),r._open_problom_audio=document.getElementById("open_problom_audio"),r._quiz_done_audio=document.getElementById("quiz_done_audio"),r._hit_up_audio=document.getElementById("hu_audio"),r._hit_down_audio=document.getElementById("hd_audio"),r._hit_good_audio=document.getElementById("hg_audio"),r._hit_wrong_audio=document.getElementById("hw_audio"),r._pick_presenter=document.getElementById("pick_presenter"),r._game_good_audio=document.getElementById("gg_audio")}static pub_playClock(){r._clock_audio&&(r._clock_audio.currentTime=4.5,r._clock_audio.play())}static pub_playPopup(){r._popup_audio&&(r._popup_audio.currentTime=0,r._popup_audio.play())}static pub_playBtnPage(){r._btn_page_audio&&(r._btn_page_audio.currentTime=0,r._btn_page_audio.play())}static pub_playBtnBack(){r._btn_back_audio&&(r._btn_back_audio.currentTime=0,r._btn_back_audio.play())}static pub_playGoodjob(){r._goodjob_audio&&(r._goodjob_audio.currentTime=0,r._goodjob_audio.play())}static pub_playDing(){r._ding_audio&&(r._ding_audio.currentTime=0,r._ding_audio.play())}static pub_playDingend(){r._dingend_audio&&(r._dingend_audio.currentTime=0,r._dingend_audio.play())}static pub_playToPad(){r._topad_audio&&(r._topad_audio.currentTime=0,r._topad_audio.play())}static pub_playBtnTab(){r._btn_audio&&(r._btn_audio.currentTime=0,r._btn_audio.play())}static pub_playCorrect(){r._correct_audio&&(r._correct_audio.currentTime=0,r._correct_audio.play())}static pub_playWrong(){r._wrong_audio&&(r._wrong_audio.currentTime=0,r._wrong_audio.play())}static pub_playTeamSelectBgm(){r._ts_bgm_audio&&(r._ts_bgm_audio.currentTime=0,r._ts_bgm_audio.play())}static pub_stopTeamSelectBgm(){r._ts_bgm_audio&&(r._ts_bgm_audio.pause(),r._ts_bgm_audio.currentTime=0)}static pub_playStartButton(){r._bs_audio&&(r._bs_audio.currentTime=0,r._bs_audio.play())}static pub_playBasicButton(){r._bb_audio&&(r._bb_audio.currentTime=0,r._bb_audio.play())}static pub_playCountDown(){r._cd_audio&&(r._cd_audio.currentTime=0,r._cd_audio.play())}static pub_playTimerClock(){r._tc_audio&&(r._tc_audio.currentTime=0,r._tc_audio.play())}static pub_stopTimerClock(){r._tc_audio&&(r._tc_audio.pause(),r._tc_audio.currentTime=0)}static pub_playTimerEnd(){r._te_audio&&(r._te_audio.currentTime=0,r._te_audio.play())}static pub_playResultGraph(){r._trg_bgm_audio&&(r._trg_bgm_audio.currentTime=0,r._trg_bgm_audio.play())}static pub_playFireworksClapping(){r._afc_audio&&(r._afc_audio.currentTime=0,r._afc_audio.play())}static pub_playTotalResult(){r._trs_audio&&(r._trs_audio.currentTime=0,r._trs_audio.play())}static pub_playChoiceBtn(){r._btn_choice_audio&&(r._btn_choice_audio.currentTime=0,r._btn_choice_audio.play())}static pub_playsorry(){r._sorry_audio&&(r._sorry_audio.currentTime=0,r._sorry_audio.play())}static pub_playretry(){r._retry_audio&&(r._retry_audio.currentTime=0,r._retry_audio.play())}static pub_playgreat(){r._great_audio&&(r._great_audio.currentTime=0,r._great_audio.play())}static pub_playFlipCard(){r._memorygame_flipcard_audio&&(r._memorygame_flipcard_audio.currentTime=0,r._memorygame_flipcard_audio.play())}static pub_playGameClick(){r._ispy_gameclick_audio&&(r._ispy_gameclick_audio.currentTime=0,r._ispy_gameclick_audio.play())}static pub_game_timesetting_start(){r._game_timesetting_start_audio&&(r._game_timesetting_start_audio.currentTime=0,r._game_timesetting_start_audio.play())}static pub_solution_btn_click(){r._solution_btn_audio&&(r._solution_btn_audio.currentTime=0,r._solution_btn_audio.play())}static pub_playGameresult(){r._game_result_audio&&(r._game_result_audio.currentTime=0,r._game_result_audio.play())}static pub_openProblom(){r._open_problom_audio&&(r._open_problom_audio.currentTime=0,r._open_problom_audio.play())}static pub_quizDone(){r._quiz_done_audio&&(r._quiz_done_audio.currentTime=0,r._quiz_done_audio.play())}static pub_pick_presenter(){r._pick_presenter&&(r._pick_presenter.currentTime=0,r._pick_presenter.play())}static pub_stop(){null!=r._common_audio.onended&&r._common_audio.onended.call(r._common_audio,new Event("ended")),r._common_audio.oncanplaythrough=null,isNaN(r._common_audio.duration)||r._common_audio.paused||r._common_audio.pause()}static pub_play(t,e){r.pub_stop(),t=s.nteString(t,"");const i=s.nteString(r._common_audio.getAttribute("src"),"");if(""===t&&""===i)return void(null!=e&&e(!0));""!==t&&i!==t&&(r._common_audio.src=t);const o=t=>{r._common_audio.onended=null,null!==e&&e(!0),r._common_audio.removeEventListener("error",o)};r._common_audio.onended=t=>{r._common_audio.onended=null,null!==e&&e(!!t),r._common_audio.removeEventListener("error",o)},r._common_audio.addEventListener("error",o),isNaN(r._common_audio.duration)?(r._common_audio.oncanplaythrough=t=>{0!==r._common_audio.currentTime&&(r._common_audio.currentTime=0),r._common_audio.play(),r._common_audio.oncanplaythrough=null},r._common_audio.load()):(0!==r._common_audio.currentTime&&(r._common_audio.currentTime=0),r._common_audio.oncanplaythrough=null,r._common_audio.play())}static pub_set(t,e,i){r._isDvlp=e,r._lang=i,o.set(e)}static pub_addInitedStudent(t){let e=!0;for(let i=0,s=r._students_inited.length;i<s;i++){r._students_inited[i]===t.id&&(e=!1)}e&&r._students_inited.push(t.id);const i=r._start_idx>0&&r._students.length>0&&r._students_inited.length>=r._students.length;return i&&(window.clearTimeout(r._start_idx),r._start_idx=-1),i}static pub_start(t){0===r._students.length||r._students_inited.length>=r._students.length?t():r._start_idx=window.setTimeout(t,2e3)}static pub_clear(){for(;r._students.length>0;)r._students.pop();for(;r._students_inited.length>0;)r._students_inited.pop()}static pub_playHitup(){r._hit_up_audio&&(r._hit_up_audio.currentTime=0,r._hit_up_audio.play())}static pub_playHitdown(){r._hit_down_audio&&(r._hit_down_audio.currentTime=0,r._hit_down_audio.play())}static pub_playHitgood(){r._hit_good_audio&&(r._hit_good_audio.currentTime=0,r._hit_good_audio.play())}static pub_playHitwrong(){r._hit_wrong_audio&&(r._hit_wrong_audio.currentTime=0,r._hit_wrong_audio.play())}static pub_playGamegood(){r._game_good_audio&&(r._game_good_audio.currentTime=0,r._game_good_audio.play())}}e.App=r,r._isMobile=!1,r._students=[],r._students_inited=[],r._student=null,r._lang="ko",r._isDvlp=!1,r._data_url="../data/",r._lesson="",r._book="",r._nextBook=!1,r._prevBook=!1,r._start_idx=-1,r.isStarted=!1,r._addOnHost="https://addonsapi.fel40.com"},function(t,e,i){"use strict";var s=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(o,n){function r(t){try{l(s.next(t))}catch(t){n(t)}}function a(t){try{l(s.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.postAttention=e.postViewDiv=e.getPreviewDmsResult=e.getPreviewResult=e.showSGiftBox=e.showSLivePointPop=e.launchSTool=e.clearPenTool=e.hidePenTool=e.showPenTool=e.showRecordTool=e.showSendButton=e.alertToStudent=e.showSLoading=e.showSMathKit=e.clearSPenTool=e.takePicture=e.uploadInclassReport=e.stopVideoRecord=e.startVideoRecord=e.switchCamera=e.stopCamera=e.pauseRecordPlayer=e.playRecordPlayer=e.startCustomCamera=e.startCamera=e.getStudents=e.uploadFileToServerMulti=e.uploadImageToServer=e.uploadFileToServer=e.stopVoiceRecord=e.startVoiceRecord=e.sendTeacher=e.disableSoftwareKeyboard=e.sendPAD=e.sendPADToID=e.sendLauncher=e.uploadStudentReport=e.addStudentForStudentReportType6=e.hideStudentReportListPage=e.showStudentReportListPage=e.showStudentReportUI=e.hideStudentReportUI=e.startStudentReportProcess=e.finishContentPage=e.showTMathKit=e.alertToTeacher=e.showTLoading=e.clearTPenTool=e.getBookCaptureInfo=e.uploadTImageToServer=e.useFractionBar=e.logOut=e.exitClass=e.getNaviInfo=e.launchPadTool=e.launchTool=e.exitBook=e.gotoBookByKey=e.gotoBook=e.set=void 0;const o=i(3);let n=!1;e.set=function(t){n=t},e.gotoBook=function(t,e){if(console.log("felsocket gotoBook",t,e),!n)try{window.tsoc_o.gotoBook(t,e)}catch(t){}},e.gotoBookByKey=function(t){if(console.log("felsocket gotoBookByKey",t),!n)try{window.tsoc_o.gotoBookByKey(t)}catch(t){}},e.exitBook=function(){if(console.log("felsocket exitBook"),!n)try{window.tsoc_o.exitBook()}catch(t){}},e.launchTool=function(t){if(console.log("felsocket launchTool",t),!n)try{window.tsoc_o.launchTool(t)}catch(t){}},e.launchPadTool=function(t){if(console.log("felsocket launchPadTool",t),!n)try{window.tsoc_o.launchPadTool(t)}catch(t){}},e.getNaviInfo=function(t){if(console.log("felsocket getNaviInfo",t),!n)try{window.tsoc_o.getNaviInfo(t)}catch(t){}},e.exitClass=function(){if(console.log("felsocket exitClass"),!n)try{window.tsoc_o.exitClass()}catch(t){}},e.logOut=function(){if(console.log("felsocket logOut"),!n)try{window.tsoc_o.logOut()}catch(t){}},e.useFractionBar=function(){if(console.log("felsocket useFractionBar"),!n)try{window.tsoc_o.useFractionBar()}catch(t){}},e.uploadTImageToServer=function(t,e,i,s){if(console.log("felsocket uploadTImageToServer",e,i,s),!n)try{window.tsoc_o.uploadImageToServer(t,e,i,s)}catch(t){}},e.getBookCaptureInfo=function(t){if(console.log("felsocket getBookCaptureInfo"),!n)try{window.tsoc_o.getBookCaptureInfo(t)}catch(t){}},e.clearTPenTool=function(){if(console.log("felsocket clearTPenTool"),!n)try{window.tsoc_o.clearPenTool()}catch(t){}},e.showTLoading=function(t){if(console.log("felsocket showTLoading",t),!n)try{window.tsoc_o.showLoading(t)}catch(t){}},e.alertToTeacher=function(t){if(console.log("felsocket alertToTeacher",t),!n)try{window.tsoc_o.alert(t)}catch(t){}},e.showTMathKit=function(t){if(console.log("felsocket showTMathKit",t),!n)try{window.tsoc_o.showMathKit(t)}catch(t){}},e.finishContentPage=function(){if(!n)try{window.tsoc_o.finishContentPage()}catch(t){}},e.startStudentReportProcess=function(t,e,i){if(!n)try{window.tsoc_o.startStudentReportProcess(t,e,i)}catch(t){}},e.hideStudentReportUI=function(){if(!n)try{window.tsoc_o.hideStudentReportUI()}catch(t){}},e.showStudentReportUI=function(){if(!n)try{window.tsoc_o.showStudentReportUI()}catch(t){}},e.showStudentReportListPage=function(){if(!n)try{window.tsoc_o.showStudentReportListPage()}catch(t){}},e.hideStudentReportListPage=function(){if(!n)try{window.tsoc_o.hideStudentReportListPage()}catch(t){}},e.addStudentForStudentReportType6=function(t){if(!n)try{window.tsoc_o.addStudentForStudentReportType6(t)}catch(t){}},e.uploadStudentReport=function(t,e,i){if(!n)try{window.psoc_o.uploadStudentReport(t,e,i)}catch(t){}},e.sendLauncher=function(t,e){if(5!==t||n)if(6!==t||n)if(7!==t||n){if(8===t)if(console.log("felsocket gotoPrevBook"),n)try{window.top.tsoc_o.gotoPrevBook()}catch(t){}else try{window.tsoc_o.gotoPrevBook()}catch(t){}else if(9===t)if(console.log("felsocket gotoNextBook"),n)try{window.top.tsoc_o.gotoNextBook()}catch(t){}else try{window.tsoc_o.gotoNextBook()}catch(t){}}else try{window.tsoc_o.setTitleBar(e)}catch(t){}else try{window.tsoc_o.showTitleBar()}catch(t){}else try{window.tsoc_o.hideTitleBar()}catch(t){}},e.sendPADToID=function(t,e,i){const s={type:e,data:i};if(n)try{window.top.tsoc_o.sendPADToID(t,s)}catch(t){}else try{window.tsoc_o.sendPADToID(t,s)}catch(t){}},e.sendPAD=function(t,e){const i={type:t,data:e};if(n)try{window.top.tsoc_o.sendAll(i)}catch(t){}else try{window.tsoc_o.sendAll(i)}catch(t){}},e.disableSoftwareKeyboard=function(){try{window.psoc_o.disableSoftwareKeyboard()}catch(t){}},e.sendTeacher=function(t,e){const i={type:t,data:e};if(n)try{null!==window.opener&&window.opener.tsoc_o.sendTeacher(i)}catch(t){}else try{window.psoc_o.sendTeacher(i)}catch(t){}},e.startVoiceRecord=function(){try{window.psoc_o.startVoiceRecord()}catch(t){}},e.stopVoiceRecord=function(){try{window.psoc_o.stopVoiceRecord()}catch(t){}},e.uploadFileToServer=function(t){try{window.psoc_o.uploadFileToServer(t)}catch(t){}},e.uploadImageToServer=function(t,e,i,s){try{window.psoc_o.uploadImageToServer(t,e,i,s)}catch(t){}},e.uploadFileToServerMulti=function(t){try{window.psoc_o.uploadFileToServerMulti(t)}catch(t){}},e.getStudents=function(t){if(n)if(window.top.tsoc_o)try{window.top.tsoc_o.getStudents(t)}catch(t){}else t([],!1);else try{window.tsoc_o.getStudents(t)}catch(t){}},e.startCamera=function(t){if(!n)try{window.psoc_o.startCamera(t)}catch(t){}},e.startCustomCamera=function(t){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"startCustomCamera",msg:t},"*")},e.playRecordPlayer=function(){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"playRecordPlayer"},"*")},e.pauseRecordPlayer=function(){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"pauseRecordPlayer"},"*")},e.stopCamera=function(){if(!n)try{window.psoc_o.stopCamera()}catch(t){}},e.switchCamera=function(t){if(!n)try{window.psoc_o.switchCamera(t)}catch(t){}},e.startVideoRecord=function(){if(!n)try{window.psoc_o.startVideoRecord()}catch(t){}},e.stopVideoRecord=function(){if(!n)try{window.psoc_o.stopVideoRecord()}catch(t){}},e.uploadInclassReport=function(t){if(!n)try{window.tsoc_o.uploadInclassReport(t)}catch(t){}},e.takePicture=function(t){if(!n)try{window.psoc_o.takePicture(t)}catch(t){}},e.clearSPenTool=function(){if(console.log("felsocket clearPenTool"),!n)try{window.psoc_o.clearPenTool()}catch(t){}},e.showSMathKit=function(t){if(console.log("felsocket showSMathKit",t),!n)try{window.psoc_o.showMathKit(t)}catch(t){}},e.showSLoading=function(t){if(console.log("felsocket showSLoading",t),!n)try{window.psoc_o.showLoading(t)}catch(t){}},e.alertToStudent=function(t){if(console.log("felsocket alertToStudent",t),!n)try{window.psoc_o.alert(t)}catch(t){}},e.showSendButton=function(t,e){if(console.log("felsocket showSendButton"),!n)try{window.psoc_o.showSendButton(t,e)}catch(t){}},e.showRecordTool=function(t){if(console.log("felsocket showRecordTool",t),!n)try{window.psoc_o.showRecordTool(t)}catch(t){}},e.showPenTool=function(){if(console.log("felsocket showPentool"),!n)try{window.psoc_o.showPenTool()}catch(t){}},e.hidePenTool=function(){if(console.log("felsocket hidePentool"),!n)try{window.psoc_o.hidePenTool()}catch(t){}},e.clearPenTool=function(){if(console.log("felsocket clearPenTool"),!n)try{window.psoc_o.clearPenTool()}catch(t){}},e.launchSTool=function(t){if(console.log("felsocket launchTool",t),!n)try{window.psoc_o.launchTool(t)}catch(t){}},e.showSLivePointPop=function(t){if(console.log("felsocket showLivePointPop"),!n)try{window.psoc_o.showLivePointPop(t)}catch(t){}},e.showSGiftBox=function(t,e){if(console.log("felsocket showGiftBox"),!n)try{window.psoc_o.showGiftBox(t,e)}catch(t){}},e.getPreviewResult=function(t){return s(this,void 0,void 0,(function*(){return new Promise(e=>{if(n)e([]);else{let i=!1;const s=t=>{i||(i=!0,e(t))};window.tsoc_o.getPreviewResult(s,t),o.delay(()=>{i||(i=!0,e([]))},5e3)}})}))},e.getPreviewDmsResult=function(t){return s(this,void 0,void 0,(function*(){return new Promise(e=>{if(n)e([]);else{let i=!1;const s=t=>{i||(i=!0,e(t))};window.tsoc_o.getPreviewDmsResult(s,t),o.delay(()=>{i||(i=!0,e([]))},5e3)}})}))},e.postViewDiv=function(t){return s(this,void 0,void 0,(function*(){console.log("postViewDiv",t),window.top.postMessage({type:"viewDiv",msg:t,from:"content"},"*")}))},e.postAttention=function(t){return s(this,void 0,void 0,(function*(){console.log("postAttention",t),window.top.postMessage({type:"attention",msg:t,from:"content"},"*")}))}},function(t,e,i){"use strict";var s=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.ImgBtn=e.AudioBtn=e.ToggleBtn=void 0;const o=i(0),n=i(1),r=i(2);class a extends o.Component{constructor(t){super(t),this.m_pID=-1,this._inited=this._inited.bind(this),this._onClick=this._onClick.bind(this)}_inited(t){!this.m_el&&t&&(this.m_el=t,this.props.onRef&&this.props.onRef(t),t.setAttribute("touch-action","none"),t.addEventListener("pointerdown",e=>{if(!(this.m_pID>=0)){if(this.m_pID=e.pointerId,!this.props.disableCapture)try{t.setPointerCapture(this.m_pID)}catch(t){}this.props.onMouseDown&&this.props.onMouseDown(e)}}),t.addEventListener("pointerup",e=>{if(this.m_pID===e.pointerId){try{t.releasePointerCapture(this.m_pID)}catch(t){}this.m_pID=-1,this.props.onMouseUp&&this.props.onMouseUp(e)}}),t.addEventListener("pointerleave",e=>{if(this.props.disableCapture){if(this.m_pID!==e.pointerId)return;try{t.releasePointerCapture(this.m_pID)}catch(t){}this.m_pID=-1}this.props.onMouseLeave&&this.props.onMouseLeave(e)}),t.addEventListener("pointercancel",e=>{if(this.m_pID===e.pointerId){try{t.releasePointerCapture(this.m_pID)}catch(t){}this.m_pID=-1,this.props.onMouseLeave&&this.props.onMouseLeave(e)}}))}_onClick(t){this.props.onClick&&this.props.onClick(t),this.props.preventEvent&&(t.preventDefault(),t.stopPropagation())}componentDidUpdate(t){if((this.props.disabled&&!t.disabled||!this.props.view&&t.view)&&this.m_pID>=0){try{this.m_el&&this.m_el.releasePointerCapture(this.m_pID)}catch(t){}this.m_pID=-1}}}s([n.observable],a.prototype,"m_pID",void 0);let l=class extends a{constructor(t){super(t),this.m_on=!1,this.m_on=!0===t.on}componentWillReceiveProps(t){this.props.on!==t.on&&(this.m_on=!0===t.on)}render(){const t=[];this.props.className&&t.push(this.props.className),this.m_on&&t.push("on"),this.m_pID>0&&t.push("down");const e=t.join(" ");let i=this.props.style;return!1===this.props.view&&(i||(i={}),i.display="none"),o.createElement("button",{id:this.props.id,className:e,onClick:this._onClick,ref:this._inited,disabled:!0===this.props.disabled,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:i},this.props.children)}};s([n.observable],l.prototype,"m_on",void 0),l=s([r.observer],l),e.ToggleBtn=l;let p=class extends l{constructor(t){super(t)}play(){this.m_on||(this.m_on=!0,this.props.playFnc(this.props.src,t=>{this.m_on&&(this.m_on=!1,this.props.onPause&&this.props.onPause(t))}))}_onClick(t){this.m_on?(this.props.pauseFnc(),this.m_on=!1):this.play(),super._onClick(t)}};s([n.action],p.prototype,"play",null),s([n.action],p.prototype,"_onClick",null),p=s([r.observer],p),e.AudioBtn=p;let d=class extends a{constructor(t){super(t),this.m_on=!1,this.m_on=!0===t.on}componentWillReceiveProps(t){this.props.on!==t.on&&(this.m_on=!0===t.on)}render(){const t=[];this.props.className&&t.push(this.props.className),this.m_on&&t.push("on"),this.m_pID>0&&t.push("down"),!0===this.props.disabled&&t.push("disable");const e=t.join(" ");let i=this.props.style;return!1===this.props.view&&(i||(i={}),i.display="none"),o.createElement("img",{id:this.props.id,className:e,onClick:this._onClick,ref:this._inited,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:i,src:this.props.src,useMap:this.props.useMap})}};s([n.observable],d.prototype,"m_on",void 0),d=s([r.observer],d),e.ImgBtn=d},function(t,e,i){"use strict";var s=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(o,n){function r(t){try{l(s.next(t))}catch(t){n(t)}}function a(t){try{l(s.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.getBounds=e.getTimeStr=e.wait=void 0;const o=i(3);e.wait=function(t){return s(this,void 0,void 0,(function*(){return new Promise(e=>{o.delay(e,t)})}))},e.getTimeStr=function(t,e){const i=Math.round(e/1e3);let s=Math.round(t/1e3),o=Math.floor(s/60),n=Math.floor(o/60),r="";return s%=60,o%=60,n>0||i>=3600?(r=n+":",r+=o>=10?o+":":"0"+o+":"):i>=600?r+=o>=10?o+":":"0"+o+":":r=o+":",r+=s>=10?s:"0"+s,r},e.getBounds=function(t){const e={left:0,top:0,width:0,height:0};if(!t)return e;try{const i=t.getBoundingClientRect();e.left=i.left,e.top=i.top,e.width=i.width,e.height=i.height}catch(t){}const i=t.ownerDocument,s=i.body,o=i.documentElement;e.left=e.left-(o.clientLeft||s.clientLeft||0),e.top=e.top-(o.clientTop||s.clientTop||0);const n=i.defaultView;return e.left+=n.pageXOffset||o.scrollLeft||s.scrollLeft,e.top+=n.pageYOffset||o.scrollTop||s.scrollTop,e}},function(t,e){t.exports=ReactDraggable},function(t,e){t.exports=ReactIdSwiper},function(t,e,i){"use strict";t.exports=i(18)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._toStringTimestamp=e.getDateStr=e.nteArray=e.intToHTMLcolor=e.nteBool=e.nteString=e.nteFloat=e.nteInt=e.nteUInt=e.getUnicUrl=e.getUnicNum=e.getUnic=void 0,Date.now||(Date.now=function(){return(new Date).getTime()});let s=0;function o(){return n().toString(36)}function n(){const t=Date.now();return t>s?s=t:s+=1,s}e.getUnic=o,e.getUnicNum=n,e.getUnicUrl=function(t){if(!t)return"";let e=t=t.trim();return 0!==e.indexOf("http://")&&0!==e.indexOf("https://")||(e=e.indexOf("?")>0?e+"&t="+o():e+"?t="+o()),e},e.nteUInt=function(t,e){if(null==t)return e;if("number"==typeof t)return isNaN(t)||t<0?e:Math.round(t);{const i=parseInt(String(t),10);return isNaN(i)||i<0?e:i}},e.nteInt=function(t,e){if(null==t)return e;if("number"==typeof t)return Math.round(t);{const i=parseInt(String(t),10);return isNaN(i)?e:i}},e.nteFloat=function(t,e){if(null==t)return e;if("number"==typeof t)return t;{const i=parseFloat(String(t));return isNaN(i)?e:i}},e.nteString=function(t,e){return null==t?e:String(t)},e.nteBool=function(t,e){if(null==t)return e;if("boolean"==typeof t)return t;const i=String(t);return"true"===i||"false"!==i&&e},e.intToHTMLcolor=function(t){let e,i,s,o=t-0;e=(255&o)<<16,i=65280&o,s=(16711680&o)>>>16,o=e|i|s;let n=o.toString(16);return n="#000000".substring(0,7-n.length)+n,n},e.nteArray=function(t){if(t){if(Array.isArray(t))return t;if("string"==typeof t){const e=t;if(e.indexOf("[")>=0&&e.indexOf("]")>0)try{return JSON.parse(e)}catch(t){}}const e=[];return e.push(t),e}return[]},e.getDateStr=function(t="."){const e=new Date,i=e.getFullYear(),s=e.getMonth()+1,o=e.getDate();return i+t+(s<10?"0"+s:""+s)+t+(o<10?"0"+o:""+o)},e._toStringTimestamp=function(t){let e;const i=t.getFullYear();let s=t.getMonth()+1+"";parseInt(s,10)<10&&(s="0"+s);let o=t.getDate()+"";return parseInt(o,10)<10&&(o="0"+o),e=i+"-"+s+"-"+o+" "+t.toTimeString().substr(0,8),e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseClassColor=e.parseDept5SubDiv=e.parseDept5Div=e.parseDept4Div=e.parseDept3Div=void 0,e.parseDept3Div=function(t){return"M0301"===t?"Number&Operations":"M0302"===t?"Measurement&Date":"M0303"===t?"Operations&Algebra":"M0304"===t?"Geometry":"M0305"===t?"Topic":"M0306"===t?"Module Review":""},e.parseDept4Div=function(t){return"M0401"===t?"Concept":"M0402"===t?"Problem":"M0403"===t?"Strategy":"M0404"===t?"Number&Operations":"M0405"===t?"Measurement&Date":"M0406"===t?"Operations&Algebra":"M0407"===t?"Geometry":"M0408"===t?"Concept Learning":"M0409"===t?"Topic Learning":"M0410"===t?"Module Learning":"M0411"===t?"Module Test":""},e.parseDept5Div=function(t){return"M0501"===t?"Warm-Up":"M0502"===t?"Concept Learning":"M0503"===t?"Concept Learning 2":"M0504"===t?"Concept Learning 3":"M0505"===t?"Problem Solving":"M0506"===t?"Wrap-Up":"M0507"===t?"Topic Learning":"M0508"===t?"Module Learning":"M0509"===t?"Module Test":""},e.parseDept5SubDiv=function(t){return"M050101"===t?"Warm-Up Activity":"M050102"===t?"Learning Objectives":"M050103"===t?"Concept Summary":"M050201"===t?"Concept Learning":"M050202"===t?"Concept Activity":"M050203"===t?"Concept Tool":"M050204"===t?"Concept Summary":"M050301"===t?"Activity":"M050302"===t?"Concept Tool":"M050303"===t?"Summary":"M050304"===t?"Check":"M050401"===t?"Activity":"M050402"===t?"Concept Tool":"M050403"===t?"Summary":"M050404"===t?"Check":"M050501"===t?"Independent Practice":"M050502"===t?"Extended Practice":"M050503"===t?"Strategy":"M050504"===t?"Reasoning (2)":"M050505"===t?"Strategy":"M050601"===t?"Wrap-Up Activity":"M050602"===t?"Portfolio":"M050701"===t?"Topic Strategy":"M050702"===t?"Adaptive Learning":"M050801"===t?"Module Review":"M050802"===t?"Adaptive Learning":"M050803"===t?"Module Portfolio":"M050804"===t?"Module Strategy":"M050901"===t?"Assessment":"M050902"===t?"Module Portfolio":"M050903"===t?"Assessment Review":"M050904"===t?"STEAM Activity":"M050905"===t?"STEAM Portfolio":""},e.parseClassColor=function(t){return"B62001"===t?"Black":"White"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TRANSI=e.HIDE_ANI=e.NONE=e.HIDE=void 0;e.HIDE={opacity:0,pointerEvents:"none"};e.HIDE_ANI={opacity:0,pointerEvents:"none",transitionProperty:"opacity",transitionDuration:"0.6s"};e.NONE={display:"none"};e.TRANSI={opacity:0,pointerEvents:"none",transform:"translateX(65px)"}},function(t,e,i){"use strict";var s=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.MPRState=e.MConfig=e.MPlayer=void 0;const o=i(1);var n,r,a,l,p,d,h;!function(t){t.STRETCH="stretch",t.LETTERBOX="letterbox"}(n||(n={})),function(t){t.NONE="none",t.METADATA="metadata",t.AUTO="auto"}(r||(r={})),function(t){t.ORGIN="origin",t.TRANS="trans",t.ALL="all",t.NONE="none"}(a||(a={})),function(t){t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.PLAYBACK_ERROR=2]="PLAYBACK_ERROR",t[t.READY=3]="READY",t[t.STANDBY=4]="STANDBY",t[t.BUFFERING=5]="BUFFERING",t[t.PAUSED=6]="PAUSED",t[t.PLAYING=7]="PLAYING"}(l||(l={})),e.MPRState=l,function(t){t[t.UNSET=-1]="UNSET",t[t.CAN_NOT_ALL_DIR=1]="CAN_NOT_ALL_DIR",t[t.CAN_NOT_NEXT_DIR=2]="CAN_NOT_NEXT_DIR",t[t.CAN_ALL_DIR=10]="CAN_ALL_DIR"}(p||(p={})),function(t){t[t.HAVE_NOTHING=0]="HAVE_NOTHING",t[t.HAVE_METADATA=1]="HAVE_METADATA",t[t.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",t[t.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",t[t.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(d||(d={})),function(t){t[t.NETWORK_EMPTY=0]="NETWORK_EMPTY",t[t.NETWORK_IDLE=1]="NETWORK_IDLE",t[t.NETWORK_LOADING=2]="NETWORK_LOADING",t[t.NETWORK_NO_SOURCE=3]="NETWORK_NO_SOURCE"}(h||(h={}));class c{constructor(t){this.defaultVolume=100,this.lenOfFvlToFile=25165824,this.sections=[],this.isVideo=t,this.autoPlay=!1,this.controlBox=!0,this.typeOfPosByMouse=10,this.loop=1,this.preload="auto",this.scaleMode="stretch",this.bgColor=-1,this.initTime=0,this.startTime=0,this.endTime=0,this.chkTime=250,this.playBtn=!0,this.closeBtn=!1,this.popupBtn=!1,this.fullscreenBtn=!0,this.volumeBtn=!0,this.centerPlayBtn=!0,this.centerLoading=!0,this.mousePlayPause=!0,this.bDoFullscreen=!0,this.volumeBox=!0,this.speedBtn=!1,this.scroller=!0,this.togglePlayBtn=!0,this.autoBtn=!1,this.langBtn=!1,this.menuOverlap=!0,this.haveScript=!1,this.viewScriptBox=!1,this.bScriptBtn=!1,this.scriptViewLang="none",this.etcData=""}get isMobile(){return!1}get iskdmPC(){return!1}isLoadControls(t){return this.controlBox||t&&(this.centerPlayBtn||this.centerLoading||this.viewScriptBox)}pcGetURL(t){return t}clone(){const t=new c(this.isVideo);return t.copy(this),t}copy(t){this.autoPlay=t.autoPlay,this.controlBox=t.controlBox,this.typeOfPosByMouse=t.typeOfPosByMouse,this.loop=t.loop,this.preload=t.preload,this.scaleMode=t.scaleMode,this.bgColor=t.bgColor,this.initTime=t.initTime,this.startTime=t.startTime,this.endTime=t.endTime,this.chkTime=t.chkTime,this.playBtn=t.playBtn,this.closeBtn=t.closeBtn,this.popupBtn=t.popupBtn,this.fullscreenBtn=t.fullscreenBtn,this.volumeBtn=t.volumeBtn,this.centerPlayBtn=t.centerPlayBtn,this.centerLoading=t.centerLoading,this.mousePlayPause=t.mousePlayPause,this.volumeBox=t.volumeBox,this.speedBtn=t.speedBtn,this.scroller=t.scroller,this.togglePlayBtn=t.togglePlayBtn,this.autoBtn=t.autoBtn,this.langBtn=t.langBtn,this.menuOverlap=t.menuOverlap,this.haveScript=t.haveScript,this.viewScriptBox=t.viewScriptBox,this.bScriptBtn=t.bScriptBtn,this.scriptViewLang=t.scriptViewLang,this.defaultVolume=t.defaultVolume,this.etcData=t.etcData}}e.MConfig=c;class u{constructor(t){this.m_media=null,this.m_url=null,this.m_startTime=0,this.m_endTime=0,this.m_maxTime=0,this.m_seekTime=-1,this.m_onTimer=-1,this.m_playEnded=!1,this.m_standBy=!1,this.m_bPlay_temp=!1,this.m_startTime_temp=-1,this.m_endTime_temp=-1,this.m_loop_temp=-1,this.m_loopCnt_temp=-1,this.m_onstates=[],this.m_ontimes=[],this.m_onends=[],this.m_onendtemps=[],this.m_bPlay=!1,this.m_myState=0,this.m_duration=0,this.m_volume=1,this.m_currentTime=0,this.m_viewTime=0,this.fullscreen=!1,this.m_muted=!1,this.m_config=t,this.m_bPlay=t.autoPlay,this.m_startTime=t.startTime,this.m_endTime=t.endTime,this.mediaInited=this.mediaInited.bind(this),this._onTime=this._onTime.bind(this)}get bPlay(){return this.m_bPlay}get myState(){return this.m_myState}get duration(){return this.m_duration}get muted(){return this.m_muted}get viewTime(){return this.m_viewTime}get volume(){return this.m_volume}get media(){return this.m_media}get config(){return this.m_config}get currentTime(){return this.m_currentTime}setStartEndTime(t,e){this.m_startTime=t,this.m_endTime=e}setMuted(t){this.m_muted=t,this.m_media&&(this.m_media.muted=t)}setMutedTemp(t){this.m_media&&(this.m_media.muted=t)}setVolume(t){this.m_media&&(this.m_media.volume=t)}_initTemp(){this.m_standBy=!1,this.m_bPlay_temp=!1,this.m_startTime_temp=-1,this.m_endTime_temp=-1,this.m_loop_temp=-1,this.m_loopCnt_temp=0}play(){this.m_bPlay=!0,this._initTemp(),this.m_playEnded&&this.m_media&&this.m_myState>=3&&(this.m_media.currentTime=this.m_startTime/1e3),this.m_playEnded=!1,this._playOrPause()}pause(){this.m_bPlay=!1,this._initTemp(),this._playOrPause()}start(){this.seek(0),this.play()}seek(t){if(!this.m_media||this.m_myState<3)this.m_seekTime=t;else{if(this._initTemp(),this.m_seekTime=-1,isNaN(t)||t<0)t=0;else if(t>=this.m_duration-100)return t=this.m_duration,void this._playEnded();this.m_playEnded=!1,this.m_media.currentTime=(this.m_startTime+t)/1e3,this._onTimeUpdate(),this.m_viewTime=this.m_currentTime}}gotoAndPlay(t,e,i){if(this.m_standBy=!1,!this.m_media||this.m_duration<=0)return this._load(),this.m_bPlay_temp=!0,this.m_startTime_temp=t,this.m_endTime_temp=e,void(this.m_loop_temp=i);this.m_playEnded=!1,this.m_bPlay_temp=!1,this.m_startTime_temp=t,this.m_endTime_temp=e,t=t>=0?t:this.currentTime,e=e>=0&&e<this.m_duration?e:this.m_duration,this.m_bPlay=!0,t>=e||i<=0?(this.m_startTime_temp=-1,this.m_endTime_temp=-1,this.m_loop_temp=-1,this.m_loopCnt_temp=0):(this.m_endTime_temp>=this.m_duration&&(this.m_endTime_temp=-1),this.m_loop_temp=i,this.m_loopCnt_temp=0,this.m_startTime_temp>=0&&(this.m_media.currentTime=(t+this.m_startTime)/1e3,this._onTimeUpdate(),this.m_viewTime=this.m_currentTime)),this._playOrPause()}gotoAndPause(t){this.m_bPlay=!1,this._initTemp(),this.m_media&&(t=t>=0&&t<this.m_duration?t:this.currentTime,this.m_media.currentTime=(t+this.m_startTime)/1e3,this._onTimeUpdate(),this.m_viewTime=this.m_currentTime,this._playOrPause())}connect(){if(this.m_media){this.m_media;this.m_url&&this.m_myState>=1&&3===this.m_media.networkState&&0===this.m_media.readyState&&(this.m_media.src=this.m_url,this.m_media.load())}}unconnect(){this.m_media&&(this.m_media.paused||this.m_media.pause(),this.m_myState>=1&&(this.m_myState>=3&&(this.m_seekTime=1e3*this.m_media.currentTime-this.m_startTime),this.m_media.src="",this.m_media.load()))}_load(){this.m_media&&this.m_url&&this.m_myState<1&&(this._setState(1),this.m_media.src=this.m_url,this.m_media.load())}load(t){this.m_url=t,this._load()}unload(){this.m_media&&(this.m_media.paused||this.m_media.pause(),this.m_media.volume=1,this.m_myState>=1&&(this.m_media.src="",this.m_media.load())),this.m_url=null,this.m_bPlay=!1,this.m_bPlay_temp=!1,this.m_startTime=0,this.m_endTime=0,this.m_maxTime=0,this.m_seekTime=-1,this.m_onTimer=-1,this.m_playEnded=!1,this.m_standBy=!1,this.m_bPlay_temp=!1,this.m_startTime_temp=-1,this.m_endTime_temp=-1,this.m_loop_temp=-1,this.m_loopCnt_temp=-1,this.m_duration=0,this.m_currentTime=0,this.m_viewTime=0,this.fullscreen=!1,this.m_muted=!1,this.m_volume=1,this._setState(0)}destory(){this.unload(),this.m_media=null}_setState(t){if(this.m_myState===t)return;7===t?this.m_onTimer<0&&(this.m_onTimer=window.requestAnimationFrame(this._onTime)):6===t&&this.m_onTimer>=0&&(window.cancelAnimationFrame(this.m_onTimer),this.m_onTimer=-1);const e=this.m_myState;this.m_myState=t;for(let i=0,s=this.m_onstates.length;i<s;i++)this.m_onstates[i](t,e)}_playOrPause(){if(this.m_media&&!(this.m_myState<3))if(this.m_bPlay){if(this._setState(7),this.m_media.paused){const t=this.m_media.play();t&&t.then(t=>{!this.m_media||this.m_bPlay||this.m_media.paused||this.m_media.pause()}).catch(t=>{!this.m_media||this.m_bPlay||this.m_media.paused||this.m_media.pause()})}}else this._setState(6),this.m_media.paused||this.m_media.pause()}_onTimeUpdate(){if(!this.m_media)return;let t=1e3*this.m_media.currentTime;if(this.m_loop_temp>0&&this.m_bPlay)if(t<this.m_startTime)t=this.m_startTime;else if(this.m_endTime_temp>0&&t>=this.m_endTime_temp+this.m_startTime){this.m_currentTime=this.m_endTime_temp,this.m_viewTime=this.m_currentTime;for(let t=0,e=this.m_ontimes.length;t<e;t++)this.m_ontimes[t](this.m_currentTime);this._playEnded()}else{this.m_currentTime=t-this.m_startTime;for(let t=0,e=this.m_ontimes.length;t<e;t++)this.m_ontimes[t](this.m_currentTime)}else if(t<this.m_startTime)t=this.m_startTime;else{if(this.m_endTime>0&&t>=this.m_endTime){this.m_currentTime=this.m_endTime-this.m_startTime,this.m_viewTime=this.m_currentTime;for(let t=0,e=this.m_ontimes.length;t<e;t++)this.m_ontimes[t](this.m_currentTime);return void this._playEnded()}this.m_currentTime=t-this.m_startTime;for(let t=0,e=this.m_ontimes.length;t<e;t++)this.m_ontimes[t](this.m_currentTime)}}_playEnded(){if(this.m_media&&!this.m_playEnded)if(this.m_loop_temp>0&&this.m_bPlay){if(this.m_loopCnt_temp++,this.m_endTime_temp<=0){this.m_bPlay=!1;for(let t=0,e=this.m_onends.length;t<e;t++)this.m_onends[t]()}if(this.m_loopCnt_temp<this.m_loop_temp){const t=this.m_startTime_temp>=0&&this.m_startTime_temp<this.m_duration?this.m_startTime_temp:0;this.m_media.currentTime=(t+this.m_startTime)/1e3,this.m_media.paused&&this.m_media.play()}else{this.m_media.paused||this.m_media.pause(),this.m_bPlay=!1;for(let t=0,e=this.m_onendtemps.length;t<e;t++)this.m_onendtemps[t]()}}else{for(let t=0,e=this.m_onends.length;t<e;t++)this.m_onends[t]();0===this.m_config.loop&&this.m_bPlay?(this.m_media.currentTime=this.m_startTime/1e3,this.m_media.paused&&this.m_media.play()):(this.m_playEnded=!0,this.m_bPlay=!1,this.m_media.paused||this.m_media.pause(),1e3*this.m_media.currentTime<this.m_maxTime-100&&(this.m_media.currentTime=this.m_maxTime/1e3),this.m_currentTime=this.m_maxTime-this.m_startTime,this.m_viewTime=this.m_currentTime,this._setState(6))}}reset(){}_onTime(t){this.m_onTimer>=0&&(this._onTimeUpdate(),this.m_onTimer=window.requestAnimationFrame(this._onTime))}mediaInited(t){if(this.m_media||!t)return;this.m_media=t;const e=e=>{if(!this.m_media)return;this.m_config;if(t.duration>0){if(t.duration>1e6)return void(t.currentTime=1e6);this.m_maxTime<=0?(this.m_maxTime=1e3*t.duration,this.m_endTime>=this.m_maxTime?this.m_endTime=0:this.m_endTime>0&&(this.m_maxTime=this.m_endTime),(this.m_startTime<0||this.m_startTime>=this.m_maxTime)&&(this.m_startTime=0),this.m_duration=this.m_maxTime-this.m_startTime,this.m_bPlay_temp?(this._setState(3),this.gotoAndPlay(this.m_startTime_temp,this.m_endTime_temp,this.m_loop_temp)):this.m_seekTime>0&&this.m_seekTime<this.m_duration?(this._setState(3),this.m_media.currentTime=(this.m_seekTime+this.m_startTime)/1e3):0===this.m_startTime?(this.m_media.currentTime=0,this._setState(3),this._playOrPause()):this.m_media.currentTime=this.m_startTime/1e3,this.m_seekTime=-1):this.m_seekTime>=0&&(this.m_seekTime<this.m_duration&&(this.m_media.currentTime=(this.m_seekTime+this.m_startTime)/1e3),this.m_seekTime=-1)}};t.onabort=t=>{console.log("onabort")},t.oncanplay=e,t.oncanplaythrough=e,t.ondurationchange=e,t.onloadeddata=e,t.onloadedmetadata=e,t.onerror=t=>{1===this.m_myState&&this._setState(2)},t.onended=t=>{this.m_media&&(this.m_maxTime<=0||this.m_myState<3||this._playEnded())},t.onpause=t=>{this.m_media&&(this.m_maxTime<=0||this.m_myState<3||this._setState(6))},t.onplaying=t=>{this.m_media&&(this.m_maxTime<=0||this.m_myState<3||!this.m_bPlay?this.m_media.paused||this.m_media.pause():this._setState(7))},t.onseeking=t=>{!this.m_media||this.m_maxTime<=0||this.m_myState>=3&&this._setState(5)},t.onseeked=t=>{if(this.m_media&&!(this.m_maxTime<=0))if(this.m_myState>=3)this._playOrPause();else if(this.m_myState<3&&this.m_startTime>0){Math.abs(this.m_startTime-1e3*this.m_media.currentTime)<100?(this._setState(3),this._playOrPause()):this.m_media.currentTime=this.m_startTime/1e3}},t.ontimeupdate=t=>{this.m_myState<=2||(this._onTimeUpdate(),this.m_viewTime=this.m_currentTime)},t.onvolumechange=e=>{this.m_volume=t.volume},this._load()}addOnState(t){this.m_onstates.indexOf(t)>=0||this.m_onstates.push(t)}removeOnState(t){const e=this.m_onstates.indexOf(t);e<0||this.m_onstates.splice(e,1)}addOnTime(t){this.m_ontimes.indexOf(t)>=0||this.m_ontimes.push(t)}removeOnTime(t){const e=this.m_ontimes.indexOf(t);e<0||this.m_ontimes.splice(e,1)}addOnPlayEnd(t){this.m_onends.indexOf(t)>=0||this.m_onends.push(t)}removeOnPlayEnd(t){const e=this.m_onends.indexOf(t);e<0||this.m_onends.splice(e,1)}addOnPlayEndTemp(t){this.m_onendtemps.indexOf(t)>=0||this.m_onendtemps.push(t)}removeOnPlayEndTemp(t){const e=this.m_onendtemps.indexOf(t);e<0||this.m_onendtemps.splice(e,1)}}s([o.observable],u.prototype,"m_bPlay",void 0),s([o.observable],u.prototype,"m_myState",void 0),s([o.observable],u.prototype,"m_duration",void 0),s([o.observable],u.prototype,"m_volume",void 0),s([o.observable],u.prototype,"m_viewTime",void 0),s([o.observable],u.prototype,"fullscreen",void 0),s([o.observable],u.prototype,"m_muted",void 0),s([o.computed],u.prototype,"bPlay",null),s([o.computed],u.prototype,"myState",null),s([o.computed],u.prototype,"duration",null),s([o.computed],u.prototype,"muted",null),s([o.computed],u.prototype,"viewTime",null),s([o.computed],u.prototype,"volume",null),e.MPlayer=u},function(t,e,i){t.exports=i(16)},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const s=i(10),o=i(0),n=i(19),r=i(4),a=i(5),l=i(20);s.setConfig({ErrorOverlay:t=>o.createElement("div",null)});const p={clear:r.App.pub_clear,importLink:l.importLink,importHTML:l.importHTML};let d;d=i(21);let h=!1;const c=d,u=c.default,m=c.AppProvider,_=c.appContext;p.set=(t,e,i)=>{r.App.pub_set(t,e,i),_.setData(t)},p.render=()=>{r.App.pub_initAudio(),n.render(o.createElement(m,null,o.createElement(u,null)),document.getElementById("wrap"))},p.init=(t,e,i,s,o,n)=>{r.App.pub_load(t,null,e,i,s,o,n)},p.start=()=>{h=!0,setTimeout(()=>_.start(),500)},p.receive=t=>{if(4===t.type){const e=t.data;h?e&&e.id&&""!==e.id&&(r.App.isStarted?a.sendPADToID(e.id,0,null):a.sendPADToID(e.id,1,null)):r.App.pub_addInitedStudent(e)&&(h||(h=!0,_.start()))}else _.receive(t)},p.teachingTool=t=>{},p.notifyNaviInfo=(t,e,i,s,o,n)=>{_.notifyNaviInfo(t,e,i,s,o,n)},p.notifyBookCaptureInfo=t=>{_.notifyBookCaptureInfo(t)},p.notifyUploadToServerResult=t=>{_.uploaded(t)},p.notifyUploadToServerMultiResult=t=>{_.multiUploaded(t)},p.notifyAlert=t=>{_.notifyAlert(t)},p.notifyPenToolState=(t,e)=>{_.notifyPenToolState(t,e)},p.notifyHamburgerMenuClicked=t=>{_.notifyHamburgerMenuClicked(t)},p.callThreeminState=()=>{_.callThreeminState()},i(39),t.app_o=p}).call(this,i(17))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,o=(s=i(0))&&"object"==typeof s&&"default"in s?s.default:s;function n(t){return n.warnAboutHMRDisabled&&(n.warnAboutHMRDisabled=!0,console.error("React-Hot-Loader: misconfiguration detected, using production version in non-production environment."),console.error("React-Hot-Loader: Hot Module Replacement is not enabled.")),o.Children.only(t.children)}n.warnAboutHMRDisabled=!1;var r=function t(){return t.shouldWrapWithAppContainer?function(t){return function(e){return o.createElement(n,null,o.createElement(t,e))}}:function(t){return t}};r.shouldWrapWithAppContainer=!1;e.AppContainer=n,e.hot=r,e.areComponentsEqual=function(t,e){return t===e},e.setConfig=function(){},e.cold=function(t){return t},e.configureComponent=function(){}},function(t,e){t.exports=ReactDOM},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.importLink=e.importHTML=void 0,e.importHTML=function(t){return new Promise((e,i)=>{const s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="document",s.onload=t=>{if(!t)return;const o=s.response;o&&o.body&&o.body.firstElementChild?e(o.body.firstElementChild):o&&o.documentElement?e(o.documentElement):i("error")},s.onerror=t=>{i(t)},s.send(null)})},e.importLink=function(t,e){return new Promise((e,i)=>{const s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="document",s.onload=t=>{if(!t)return;const i=s.response;e(i)},s.onerror=t=>{i(t)},s.send(null)})}},function(t,e,i){"use strict";(function(t){var s=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.appContext=e.AppProvider=void 0;const o=i(0),n=i(2),r=i(10),a=i(23),l=i(24);i(25),i(26);const p=i(27),d=i(37);Object.defineProperty(e,"AppProvider",{enumerable:!0,get:function(){return d.TeacherProvider}}),Object.defineProperty(e,"appContext",{enumerable:!0,get:function(){return d.tContext}});let h=class extends o.Component{render(){const{state:t,actions:e}=this.props,i=t.viewDiv;return o.createElement(o.Fragment,null,o.createElement("div",{className:"content-container"},o.createElement("div",{className:"content-wrapper",style:{left:("direction"===i?0:-1280)+"px"}},o.createElement("div",null,o.createElement(a.default,{className:"video-direction",view:"direction"===i,on:t.directionON,isTeacher:!0,lesson:e.getCurriculum(),bookId:t.bookid,subtitle:"",poster_url:"/content/mathalive_lib/MA/topic_portfolio/common/bg_direction.jpg",video_url:"/content/mathalive_lib/MA/topic_portfolio/common/mv_topic_portfolio.mp4",video_frame:125,onEndStart:e.onDirectionEndStart,onEnd:e.onDirectionEnded},o.createElement("div",{className:"lesson"},""))),o.createElement("div",null,o.createElement(p.default,{view:"content"===i&&"portfolio"===t.prog,state:t,actions:e})))),o.createElement(l.Navi,Object.assign({},t.navi,{onLeftClick:e.naviLeft,onRightClick:e.naviRight})))}};h=s([n.observer],h);const c=d.useTeacher(t=>o.createElement(n.Observer,null,()=>o.createElement(h,{state:t.state,actions:t.actions})));e.default=r.hot(t)(c)}).call(this,i(22)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";var s=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r},o=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(o,n){function r(t){try{l(s.next(t))}catch(t){n(t)}}function a(t){try{l(s.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const n=i(0),r=i(1),a=i(2),l=i(7);let p=class extends n.Component{constructor(t){super(t),this.m_on=!1,this.m_showMathKit=!1,this.bookInfo=[],this.curIndex=0,this._list=[],this._onClick=()=>{this.props.isTeacher&&this._off()},this._off=()=>o(this,void 0,void 0,(function*(){this.props.view&&this.m_on&&(this.m_on=!1,this.props.onEndStart&&this.props.onEndStart(),yield l.wait(500),this.props.view&&!this.m_on&&this.props.onEnd&&this.props.onEnd())})),this.m_on=t.view&&t.on}_on(){return o(this,void 0,void 0,(function*(){this.m_on=!0}))}componentWillReceiveProps(t){if(t.lesson&&this.props.lesson!==t.lesson||this.props.view!==t.view){for(;this.bookInfo.length>0;)this.bookInfo.pop();t.lesson&&t.lesson.childrenList&&t.lesson.childrenList.length>0&&t.lesson.childrenList.map((e,i)=>{try{if(e.book){e.book.id===t.bookId&&(this.curIndex=this.bookInfo.length);let i=e.depth_name?e.depth_name:"";i=i.replace(/\&lt;/g,"<"),i=i.replace(/\&gt;/g,">"),this.bookInfo.push({bookName:e.name?e.name:"",id:e.id,lesson:t.lesson?t.lesson.name:"",subtitle:i})}}catch(t){alert("A ee  "+JSON.stringify(t))}})}}componentDidUpdate(t){this.props.view?t.view?this.props.on&&!t.on?this._on():!this.props.on&&t.on&&this._off():this.props.on?this._on():this.m_on=!1:this.m_on=!1}render(){const{isTeacher:t,subtitle:e}=this.props,i=[];i.push(this.props.className);const s=document.querySelector(".bgm");return this.props.view?(this.m_on&&i.push("on"),s&&s.play()):(i.push("hide"),s&&(s.pause(),s.currentTime=0)),n.createElement("div",{className:i.join(" "),onClick:this._onClick},t&&this.bookInfo&&n.createElement("span",{className:"concept_name"},this.bookInfo.length>0?this.bookInfo[this.curIndex].lesson:""),n.createElement("div",{className:"progress_dot"},t&&this.bookInfo&&this.bookInfo.map((t,e)=>n.createElement("span",{key:"q_"+e,className:this.curIndex===e?"on":""}))),n.createElement("div",{className:"video"},n.createElement("video",{muted:!0,autoPlay:!0,poster:this.props.poster_url?this.props.poster_url:void 0},n.createElement("source",{src:this.props.video_url,type:"video/mp4"}),n.createElement("strong",null,"Your browser does not support the video tag."))),n.createElement("div",{className:"text"},n.createElement("div",{className:"t1"},this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].bookName:""),t&&n.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].subtitle:""}}),!t&&n.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:0===e.length&&this.bookInfo[this.curIndex]?this.bookInfo[this.curIndex].subtitle:e}})),n.createElement("audio",{className:"bgm",autoPlay:!0,src:this.props.audio_url?this.props.audio_url:void 0}))}};s([r.observable],p.prototype,"m_on",void 0),s([r.observable],p.prototype,"_list",void 0),s([r.action],p.prototype,"_off",void 0),p=s([a.observer],p),e.default=p},function(t,e,i){"use strict";var s=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.Navi=void 0;const o=i(0),n=i(1),r=i(2),a=i(6);let l=class extends o.Component{constructor(t){super(t),this.m_on=!1,this.m_isStarted=!1,this._onClick=t=>{this.m_on=!0}}componentDidUpdate(t){this.m_isStarted||!this.props.view||t.view||(this.m_isStarted=!0,this.m_on=!0)}render(){const t=this.m_on?void 0:"off",e={visibility:this.props.view?"visible":"hidden"};return o.createElement(o.Fragment,null,o.createElement("div",{id:"common_navi_left",className:t,style:e},o.createElement("div",null,o.createElement("div",{onClick:this._onClick},o.createElement(a.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),o.createElement(a.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))),o.createElement("div",{id:"common_navi_right",className:t,style:e},o.createElement("div",null,o.createElement("div",{onClick:this._onClick},o.createElement(a.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),o.createElement(a.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))))}};s([n.observable],l.prototype,"m_on",void 0),l=s([r.observer],l),e.Navi=l},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";i.r(e)},function(t,e,i){"use strict";var s=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r},o=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(o,n){function r(t){try{l(s.next(t))}catch(t){n(t)}}function a(t){try{l(s.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const n=i(0),r=i(2),a=i(1),l=i(3),p=i(4),d=i(28),h=i(5),c=i(7),u=i(29),m=i(30),_=i(6);let g=class extends n.Component{constructor(t){super(t),this._curIdx=-1,this._quizs=[],this._mainQuizs=null,this.ifr=[],this._prog=[],this._viewResult=!1,this._submitStudents=[],this._displayMode=0,this.onExitBook=()=>{1===this._prog[this._curIdx]&&2===this._prog[this._curIdx]||(h.clearTPenTool(),h.exitBook())},this.onGotoBook=(t,e)=>{1===this._prog[this._curIdx]&&2===this._prog[this._curIdx]||(h.clearTPenTool(),h.gotoBook(t,e))},this.handlePostMessage=t=>{const e=t.data;if("macontent"===e.from&&"submit"===e.type){const t=this.props.actions.getData().quizs;if(this._quizs=[],this._quizs=t.filter(t=>t.isteacher&&t.ptype===e.msg.choicedValue).sort((t,e)=>t.step<e.step?-1:t.step>e.step?1:0),this._quizs.length>0){for(;this._prog.length>0;)this._prog.pop();for(this._prog.push(3);this._submitStudents.length>0;)this._submitStudents.pop();this._curIdx=1;for(let t=0;t<this._quizs.length;t++)this._prog.push(0),this._submitStudents.push([])}}},this._onQuizResult=t=>{if(!this.props.view)return;if(this._curIdx<=0||this._curIdx>this._quizs.length)return;const e=l.find(p.App.students,{id:t.id});if(!e)return;const i=this._submitStudents[this._curIdx-1].findIndex(t=>t.student.id===e.id);let s=0;if(i>-1)"penrecord"===t.kind?this._submitStudents[this._curIdx-1][i].penRecordData?(s=2,""!==t.pendata&&this._submitStudents[this._curIdx-1][i].penRecordData.push(t.pendata),this._submitStudents[this._curIdx-1][i].audios.push(t.audio),this._submitStudents[this._curIdx-1][i].images.push(t.image),this._submitStudents[this._curIdx-1][i].penimages.push(t.penimage)):(s=1,this._submitStudents[this._curIdx-1][i].penRecordData=[],this._submitStudents[this._curIdx-1][i].penRecordData.push(t.pendata),this._submitStudents[this._curIdx-1][i].audios=[],this._submitStudents[this._curIdx-1][i].audios.push(t.audio),this._submitStudents[this._curIdx-1][i].images=[],this._submitStudents[this._curIdx-1][i].images.push(t.image),this._submitStudents[this._curIdx-1][i].penimages=[],this._submitStudents[this._curIdx-1][i].penimages.push(t.penimage)):"image"===t.kind&&(this._submitStudents[this._curIdx-1][i].images?(s=2,""!==t.image&&this._submitStudents[this._curIdx-1][i].images.push(t.image)):(s=1,this._submitStudents[this._curIdx-1][i].images=[],this._submitStudents[this._curIdx-1][i].images.push(t.image)));else if("penrecord"===t.kind){let i={student:e,correct:!t.forced,trycnt:t.forced?0:1,images:[],audios:[],penimages:[],penRecordData:[],livePoint:0};s=1,i.penRecordData=[],i.penRecordData.push(t.pendata),i.audios=[],i.audios.push(t.audio),i.images=[],i.images.push(t.image),i.penimages=[],i.penimages.push(t.penimage),this._submitStudents[this._curIdx-1].push(i)}else if("image"===t.kind){let i={student:e,correct:!t.forced,trycnt:t.forced?0:1,images:[],livePoint:0};s=1,i.images=[],i.images.push(t.image),this._submitStudents[this._curIdx-1].push(i)}p.App.students.length===this._submitStudents[this._curIdx-1].length&&(this._prog[this._curIdx]=3)},this._onSend=()=>{if(!this.props.view)return;if(0!==this._prog[this._curIdx])return;this._prog[this._curIdx]=1,p.App.pub_playToPad();const t={msgtype:"portfolio_send",seq:this._quizs[this._curIdx-1].seq};h.sendPAD(10,t),this.props.actions.setQuizResultFnc(this._onQuizResult),p.App.pub_reloadStudents(()=>o(this,void 0,void 0,(function*(){this.props.view&&1===this._prog[this._curIdx]&&(yield c.wait(600),this.props.view&&1===this._prog[this._curIdx]&&(this._prog[this._curIdx]=2,this._setNavi(),this._viewResult=!0))})))},this._onSendStop=()=>{if(!this.props.view)return;if(2!==this._prog[this._curIdx])return;p.App.pub_playToPad();h.sendPAD(10,{msgtype:"portfolio_end"}),this._prog[this._curIdx]=3};const e=t.actions.getData().quizs;for(let t=0;t<e.length;t++)if("main"===e[t].ptype){this._mainQuizs=e[t];break}}componentDidMount(){window.addEventListener("message",this.handlePostMessage,!1)}componentWillUnmount(){window.removeEventListener("message",this.handlePostMessage,!1)}sendPostMessage(t,e){const i={from:"matemplate",to:"macontent",type:t,msg:e};this._curIdx>-1&&this.ifr[this._curIdx]&&this.ifr[this._curIdx].contentWindow.postMessage(i,"*")}initContent(){let t={idx:this._curIdx,quizmode:"portfolio",isTeacher:!0,content:0===this._curIdx?this._mainQuizs:this._quizs[this._curIdx-1]};this.sendPostMessage("init",t)}_setNavi(){this.props.actions.setNaviView(!0),this._curIdx>-1&&this._curIdx<this._prog.length&&this._prog[this._curIdx]>=1&&this._prog[this._curIdx]<=2?this.props.actions.setNavi(!1,!1):this.props.actions.setNavi(!0,!0),this.props.actions.setNaviFnc(()=>{h.clearTPenTool(),0===this._curIdx?this.props.actions.gotoDirection():(p.App.pub_playBtnPage(),this._viewResult?this._viewResult=!1:(this._curIdx=this._curIdx-1,0===this._curIdx?(this.initailize(),h.sendPAD(0,null)):this._submitStudents[this._curIdx-1].length>0&&(this._viewResult=!0)))},()=>{h.clearTPenTool(),this._curIdx>=this._quizs.length?this._curIdx>=1&&this._submitStudents[this._curIdx-1].length>0&&!this._viewResult?this._viewResult=!0:this.props.actions.gotoNextBook():(p.App.pub_playBtnPage(),this._viewResult?(this._viewResult=!1,this._curIdx=this._curIdx+1):this._submitStudents[this._curIdx-1].length>0?this._viewResult=!0:this._curIdx=this._curIdx+1)})}initailize(){this._quizs=[],this._prog=[],this._submitStudents=[],this._mainQuizs&&(this._curIdx=0,this._prog.push(3),this.initContent()),this.props.actions.setQuizResultFnc(null),this._viewResult=!1}componentDidUpdate(t){this.props.view&&!t.view?this.initailize():!this.props.view&&t.view&&(this._curIdx=-1,this._viewResult=!1,this.props.actions.setQuizResultFnc(null)),this.props.view&&this._setNavi()}render(){const{view:t,state:e,actions:i}=this.props;let s="image";return this._curIdx>0&&this._curIdx<=this._quizs.length&&2===this._quizs[this._curIdx-1].step&&(s="penrecord"),n.createElement("div",{className:"t_portfolio",style:{display:t?void 0:"none"}},n.createElement("div",{className:"portfolioContent"},n.createElement(u.MAHeader,{view:t,lesson:this.props.actions.getCurriculum(),bookid:e.bookid,onExitBook:this.onExitBook,onGotoBook:this.onGotoBook,onConceptLibrary:()=>{this.props.state.conceptLibiary.view=!0}}),n.createElement("div",{id:"contentWrap",className:"contentWrap",style:{display:this._viewResult&&this._curIdx>0?"none":void 0}},this._mainQuizs&&n.createElement("iframe",{src:p.App.data_url+this._mainQuizs.url+"?idx=0",style:{display:0===this._curIdx?void 0:"none"},ref:t=>{t&&(this.ifr[0]=t)}}),this._quizs.map((t,e)=>n.createElement("iframe",{key:e,src:p.App.data_url+t.url+"?idx="+(e+1),style:{display:this._curIdx===e+1?void 0:"none"},ref:t=>{t&&(this.ifr[e+1]=t)}}))),n.createElement(m.MAResult,{view:this._viewResult,type:s,sumbitMode:1,submitStudent:this._curIdx>0&&this._curIdx<=this._submitStudents.length?this._submitStudents[this._curIdx-1]:[],submitUsers:this._curIdx>0&&this._curIdx<=this._submitStudents.length?this._submitStudents[this._curIdx-1].length:0,displayMode:this._displayMode})),n.createElement(d.default,{view:this._curIdx>-1&&this._curIdx<this._prog.length&&0===this._prog[this._curIdx],type:"teacher",sended:this._curIdx>-1&&this._curIdx<this._prog.length&&this._prog[this._curIdx]>=2,originY:0,onSend:this._onSend}),n.createElement(_.ToggleBtn,{className:"fel_stop",view:this._curIdx>-1&&this._curIdx<this._prog.length&&2===this._prog[this._curIdx]&&this._viewResult,onClick:this._onSendStop}))}};s([a.observable],g.prototype,"_curIdx",void 0),s([a.observable],g.prototype,"_quizs",void 0),s([a.observable],g.prototype,"_prog",void 0),s([a.observable],g.prototype,"_viewResult",void 0),s([a.observable],g.prototype,"_submitStudents",void 0),s([a.observable],g.prototype,"_displayMode",void 0),g=s([r.observer],g),e.default=g},function(t,e,i){"use strict";var s=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(e,"__esModule",{value:!0});const o=i(0),n=i(1),r=i(2),a=i(8),l=i(11);let p=class extends o.Component{constructor(t){super(t),this.m_btnH=0,this.m_max=0,this.m_sy=-1,this.m_vy=-1,this.m_time=-1,this.m_bSend=!1,this.m_state={y:0,alpha:1,tDur:0,aDur:0,isOn:!1,disabled:!1},this._ref=t=>{if(this.m_max>0||!t)return;t.setAttribute("touch-action","none");const e=window.getComputedStyle(t),i=l.nteFloat(e.height,0),s=l.nteFloat(e.bottom,0);i>0&&(this.m_btnH=i,"pad"===this.props.type?this.m_max=s-i-35:this.m_max=i+s+10,this.props.view||(this.m_state.y=this.m_max))},this._down=t=>{this.m_state.isOn||this.m_state.disabled||void 0!==this.props.disable&&this.props.disable||(this.m_state.y=this.props.originY,this.m_state.alpha=1,this.m_state.tDur=0,this.m_state.aDur=0,this.m_state.isOn=!0,this.m_vy=0,this.m_time=Date.now())},this._start=(t,e)=>{this.m_sy=e.y,this.m_bSend=!0},this._drag=(t,e)=>{if(!this.m_state.isOn||this.m_state.disabled)return;let i=e.y-this.m_sy;"teacher"===this.props.type?(e.deltaY<-1?this.m_bSend=!1:e.deltaY>=0&&(this.m_bSend=!0),i<0&&(i=0)):(e.deltaY>1?this.m_bSend=!1:e.deltaY<=0&&(this.m_bSend=!0),i>0&&(i=0)),!1===this.props.preventDrag&&(this.m_state.y=i+this.props.originY);const s=Date.now();this.m_vy=e.deltaY/(s-this.m_time),this.m_time=s},this._stop=(t,e)=>{if(this.m_state.isOn&&!this.m_state.disabled)if(this.m_bSend){let t=.5*this.m_vy*1e3,i=e.y-this.m_sy;"teacher"===this.props.type?(t<this.m_btnH?t=this.m_btnH:t>4*this.m_btnH&&(t=4*this.m_btnH),i<0&&(i=0)):(-1*t<this.m_btnH?t=-this.m_btnH:-1*t>4*this.m_btnH&&(t=-4*this.m_btnH),i>0&&(i=0)),this.m_state.tDur=.5,this.m_state.aDur=.5,this.m_state.alpha=0,this.m_state.y=i+t+this.props.originY,this.props.onSend()}else this.m_state.isOn=!1,this.m_state.tDur=.3,this.m_state.aDur=0,this.m_state.y=this.props.originY},t.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):t.view?(this.m_state.y=t.originY,this.m_state.alpha=1,this.m_state.tDur=.3,this.m_state.aDur=0,this.m_state.isOn=!1,this.m_state.disabled=!1):t.view||(this.m_state.y=t.originY,this.m_state.alpha=0,this.m_state.tDur=.3,this.m_state.aDur=.3,this.m_state.isOn=!1,this.m_state.disabled=!0)}componentWillReceiveProps(t){t.sended&&!this.props.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):t.view&&!this.props.view?(this.m_state.y=t.originY,this.m_state.alpha=1,t.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=.3):(this.m_state.tDur=.3,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1):!t.view&&this.props.view?(this.m_state.y=this.m_max,this.m_state.alpha=0,this.m_state.tDur=.3,this.m_state.aDur=.3,this.m_state.isOn=!1,this.m_state.disabled=!0):!t.view||t.sended||this.m_state.isOn||t.originY===this.props.originY||(this.m_state.y=t.originY,this.m_state.tDur=.3,this.m_state.aDur=0),!this.props.isRetry&&t.isRetry&&(this.m_state.y=t.originY,this.m_state.alpha=1,t.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=.3):(this.m_state.tDur=.3,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1)}render(){const{y:t,tDur:e,aDur:i,alpha:s,isOn:n,disabled:r}=this.m_state;let l={transform:`translateY(${t}px)`,transition:`transform ${e}s, opacity ${i/2}s ${i/2}s`,opacity:s,pointerEvents:r||!this.props.view?"none":"auto"};this.props.preventDrag&&(l={});const p=[];return"pad"===this.props.type?p.push("fel_toteacher"):p.push("fel_topad"),n&&p.push("on"),this.props.isVisiblePenTool&&this.props.isVisiblePenTool&&p.push("up"),o.createElement(a.DraggableCore,{onMouseDown:this._down,onDrag:this._drag,onStart:this._start,onStop:this._stop},o.createElement("button",{ref:this._ref,className:p.join(" ")+(this.props.className?" "+this.props.className:""),style:l},o.createElement("span",{className:"revise"+(this.props.isRevise?" on":""),style:{display:this.props.isRevise?"":"none"}})))}};s([n.observable],p.prototype,"m_state",void 0),p=s([r.observer],p),e.default=p},function(t,e,i){"use strict";var s=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.MAHeader=void 0;const o=i(0),n=i(1),r=i(2),a=i(3),l=i(5),p=i(12),d=i(9).default;let h=class extends o.Component{constructor(t){super(t),this.lesson=void 0,this.curStep=void 0,this.step_groups=[],this.step_group_names=[],this.viewUnitSelectBox=!1,this._soption={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},this._refSwiper=t=>{!this._swiper&&t&&(this._swiper=t.swiper)},this.onExitBook=()=>{this.props.onExitBook?this.props.onExitBook():(l.clearTPenTool(),l.exitBook())},this.onConceptLibrary=()=>{this.props.onConceptLibrary&&this.props.onConceptLibrary()},this.onChoiceStep=t=>{if(this.lesson){const e=this.lesson.childrenList.find((e,i)=>e.id===t);let i=[];this.lesson.childrenList.map(t=>{const e=t.book?t.book.id:0;e>0&&i.push(e)}),e&&e.book&&(this.props.onGotoBook?this.props.onGotoBook(e.book.id,i):l.gotoBook(e.book.id,i))}},this.onViewSelectBox=()=>{this.viewUnitSelectBox=!this.viewUnitSelectBox,this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0)),a.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0))},300)}}select_box_parse(){if(this.lesson&&this.curStep&&void 0!==this.lesson.div)if("Concept"===p.parseDept4Div(this.lesson.div)){let t=this.lesson.childrenList.filter(t=>"Warm-Up"===p.parseDept5Div(t.div));t&&(this.step_groups.push(t),this.step_group_names.push("Warm-Up")),t=this.lesson.childrenList.filter(t=>"Concept Learning"===p.parseDept5Div(t.div)),t&&(this.step_groups.push(t),this.step_group_names.push("Concept Learning")),t=this.lesson.childrenList.filter(t=>"Concept Learning 2"===p.parseDept5Div(t.div)),t&&(this.step_groups.push(t),this.step_group_names.push("Concept Learning 2")),t=this.lesson.childrenList.filter(t=>"Concept Learning 3"===p.parseDept5Div(t.div)),t&&(this.step_groups.push(t),this.step_group_names.push("Concept Learning 3")),t=this.lesson.childrenList.filter(t=>"Wrap-Up"===p.parseDept5Div(t.div)),t&&(this.step_groups.push(t),this.step_group_names.push("Wrap-Up"))}else if("Problem"===p.parseDept4Div(this.lesson.div)){let t=this.lesson.childrenList.filter(t=>"Warm-Up"===p.parseDept5Div(t.div));t&&(this.step_groups.push(t),this.step_group_names.push("Warm-Up")),t=this.lesson.childrenList.filter(t=>"Problem Solving"===p.parseDept5Div(t.div)),t&&(this.step_groups.push(t),this.step_group_names.push("Problem Solving")),t=this.lesson.childrenList.filter(t=>"Wrap-Up"===p.parseDept5Div(t.div)),t&&(this.step_groups.push(t),this.step_group_names.push("Wrap-Up"))}}componentDidMount(){this.props.lesson&&(this.lesson=this.props.lesson,this.props.bookid&&this.lesson.childrenList.map(t=>{t.book&&t.book.id===this.props.bookid&&(this.curStep=t)})),this.select_box_parse()}componentDidUpdate(t){this.props.view&&!t.view&&(this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0)),a.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0))},300)),this.props.lesson!==t.lesson&&this.props.lesson&&(this.lesson=this.props.lesson,this.props.bookid&&this.lesson.childrenList.map(t=>{t.book&&t.book.id===this.props.bookid&&(this.curStep=t)}),this.select_box_parse())}render(){let t=[];return o.createElement("div",{className:"maheader"},o.createElement("button",{className:"btn_menu"}),o.createElement("div",{className:"user"},o.createElement("img",{src:"/content/mathalive_lib/images/temp_ico_submituser_01.png"}),o.createElement("span",{className:"name"},"Charlotee")),o.createElement("div",{className:"live_guage twinkle"},o.createElement("div",{className:"heart"}),o.createElement("div",{className:"bar_wrap"},o.createElement("div",{className:"bar",style:{width:"100%"}}),o.createElement("div",{className:"num overmax","data-value":"100"},"100"))),o.createElement("div",{style:{display:"none"}},o.createElement("div",{className:"pulldown"},o.createElement("div",{className:"tit",onClick:this.onViewSelectBox},this.curStep?this.curStep.name:""),o.createElement("button",{className:"btn_arrow",onClick:this.onViewSelectBox})),o.createElement("div",{className:"pulldown_content "+(this.viewUnitSelectBox?"on":"")}),o.createElement("div",null,o.createElement(d,Object.assign({},this._soption,{ref:this._refSwiper}),this.step_groups&&this.step_groups.map((e,i)=>o.createElement("div",{key:"grp"+i},o.createElement("div",{className:"tit"},this.step_group_names[i]),e.map((i,s)=>(this.curStep&&i.id===this.curStep.id&&(t=e),o.createElement("div",{key:"step"+s,className:"tit_sub",onClick:this.onChoiceStep.bind(this,i.id)},i.name))))))),o.createElement("div",{className:"class_name"},t.map((t,e)=>o.createElement("span",{key:"span"+t.id,className:this.curStep&&t.id===this.curStep.id?"now":void 0,onClick:this.onChoiceStep.bind(this,t.id)},t.name))),o.createElement("div",{className:"concept_library",onClick:this.onConceptLibrary},"Concept",o.createElement("br",null),"Library")))}};s([n.observable],h.prototype,"step_groups",void 0),s([n.observable],h.prototype,"step_group_names",void 0),s([n.observable],h.prototype,"viewUnitSelectBox",void 0),h=s([r.observer],h),e.MAHeader=h},function(t,e,i){"use strict";var s=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.MAResult=void 0;const o=i(0),n=i(1),r=i(2),a=i(4),l=i(3),p=i(31),d=i(32),h=i(6),c=i(33),u=i(34),m=i(5),_=i(35),g=i(9).default;let f=class extends o.Component{constructor(t){super(t),this.m_view=!1,this._curIdx=0,this._swiper=null,this._refSwiper=t=>{if(this._swiper||!t)return;const e=t.swiper;e.on("transitionStart",()=>{}),e.on("transitionEnd",()=>{this.props.view&&(m.clearTPenTool(),this._curIdx=e.activeIndex)}),this._swiper=e},this._onPrev=()=>{0!==this._curIdx&&(a.App.pub_playBtnTab(),this._swiper&&this._swiper.slidePrev())},this._onNext=()=>{a.App.pub_playBtnTab(),this._swiper&&this._swiper.slideNext()},this._onClose=()=>{a.App.pub_playBtnTab(),this.m_view=!1},this._onClick=t=>{this._curIdx!==t&&(this._curIdx=t)}}_updateSwiper(){this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),l.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize())},600))}componentDidUpdate(t){this.props.view&&!t.view?(this.m_view=!0,this._updateSwiper()):!this.props.view&&t.view&&(this.m_view=!1)}render(){const{returnStudent:t,displayMode:e}=this.props,i=t&&t.penRecordData?t.penRecordData:[],s=t?t.student:void 0;let n="",r="";return s&&(1===e?(n=s.thumb,r=s.name):(n=s.avatar,r=s.nickname)),o.createElement(p.CoverPopup,{className:"result_popup",view:this.m_view,onClosed:this.props.onClosed},o.createElement("div",{className:"penrecord_area"},o.createElement(g,{ref:this._refSwiper,direction:"horizontal",observer:!0},i.map((t,e)=>{let i="",s="",n="";this.props.returnStudent.audios&&e<this.props.returnStudent.audios.length&&(i=this.props.returnStudent.audios[e]),this.props.returnStudent.images&&e<this.props.returnStudent.images.length&&(s=this.props.returnStudent.images[e]),this.props.returnStudent.penimages&&e<this.props.returnStudent.penimages.length&&(n=this.props.returnStudent.penimages[e]);const r=JSON.parse(t);return o.createElement("div",{key:e},o.createElement(_.PenRecordPopup,{view:this.m_view&&this._curIdx===e,curIdx:e,on:this._curIdx===e,thumbSrc:n,bgSrc:s,audioSrc:i,data:r}))})),o.createElement(h.ToggleBtn,{className:"btn_prev",view:this._curIdx>0,onClick:this._onPrev}),o.createElement(h.ToggleBtn,{className:"btn_next",view:this._curIdx<i.length-1,onClick:this._onNext})))}};s([n.observable],f.prototype,"m_view",void 0),s([n.observable],f.prototype,"_curIdx",void 0),f=s([r.observer],f);let v=class extends o.Component{constructor(t){super(t),this.m_view=!1,this._curIdx=0,this._swiper=null,this._refSwiper=t=>{if(this._swiper||!t)return;const e=t.swiper;e.on("transitionStart",()=>{}),e.on("transitionEnd",()=>{this.props.view&&(m.clearTPenTool(),this._curIdx=e.activeIndex)}),this._swiper=e},this._onPrev=()=>{0!==this._curIdx&&(a.App.pub_playBtnTab(),this._swiper&&this._swiper.slidePrev())},this._onNext=()=>{a.App.pub_playBtnTab(),this._swiper&&this._swiper.slideNext()},this._onClose=()=>{a.App.pub_playBtnTab(),this.m_view=!1},this._onClick=t=>{this._curIdx!==t&&(this._curIdx=t)}}_updateSwiper(){this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),l.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize())},600))}componentDidUpdate(t){this.props.view&&!t.view?(this.m_view=!0,this._updateSwiper()):!this.props.view&&t.view&&(this.m_view=!1)}render(){const{returnStudent:t,displayMode:e}=this.props,i=t&&t.videos?t.videos:[],s=t?t.student:void 0;let n="",r="";return s&&(1===e?(n=s.thumb,r=s.name):(n=s.avatar,r=s.nickname)),o.createElement(p.CoverPopup,{className:"result_popup",view:this.m_view,onClosed:this.props.onClosed},o.createElement("div",{className:"top"},o.createElement("div",{className:"user_info"},o.createElement("img",{src:n}),o.createElement("span",{className:"name"},r)),o.createElement("div",{className:"page_navi"},i.map((t,e)=>o.createElement(c.NItem,{key:e,idx:e,on:this._curIdx===e,onClick:this._onClick}))),o.createElement(h.ToggleBtn,{className:"btn_close",onClick:this._onClose})),o.createElement("div",{className:"penrecord_area"},o.createElement(g,{ref:this._refSwiper,direction:"horizontal",observer:!0},i.map((t,e)=>o.createElement("div",{key:e},o.createElement(d.VideoPopup,{view:this.m_view,videoSrc:t,curIdx:e,on:this._curIdx===e})))),o.createElement(h.ToggleBtn,{className:"btn_prev",view:this._curIdx>0,onClick:this._onPrev}),o.createElement(h.ToggleBtn,{className:"btn_next",view:this._curIdx<i.length-1,onClick:this._onNext})))}};s([n.observable],v.prototype,"m_view",void 0),s([n.observable],v.prototype,"_curIdx",void 0),v=s([r.observer],v);let y=class extends o.Component{constructor(t){super(t),this.m_view=!1,this._curIdx=0,this._swiper=null,this._refSwiper=t=>{if(this._swiper||!t)return;const e=t.swiper;e.on("transitionStart",()=>{this._curIdx=-1}),e.on("transitionEnd",()=>{this.props.view&&(m.clearTPenTool(),this._curIdx=e.activeIndex)}),this._swiper=e},this._onClose=()=>{a.App.pub_playBtnTab(),this.m_view=!1},this._onClick=t=>{this._curIdx!==t&&(this._curIdx=t)},this._onPrev=()=>{0!==this._curIdx&&(a.App.pub_playBtnTab(),this._swiper&&this._swiper.slidePrev())},this._onNext=()=>{a.App.pub_playBtnTab(),this._swiper&&this._swiper.slideNext()}}_updateSwiper(){this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),l.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize())},600))}componentDidUpdate(t){this.props.view&&!t.view?(this.m_view=!0,this._updateSwiper()):!this.props.view&&t.view&&(this.m_view=!1)}render(){const{returnStudent:t,displayMode:e}=this.props,i=t&&t.images?t.images:[],s=t?t.student:void 0;let n="",r="";return s&&(1===e?(n=s.thumb,r=s.name):(n=s.avatar,r=s.nickname)),o.createElement(p.CoverPopup,{className:"result_popup",view:this.m_view,onClosed:this.props.onClosed},o.createElement("div",{className:"top"},o.createElement("div",{className:"user_info"},o.createElement("img",{src:n}),o.createElement("span",{className:"name"},r)),o.createElement("div",{className:"page_navi"},i.map((t,e)=>o.createElement(c.NItem,{key:e,idx:e,on:this._curIdx===e,onClick:this._onClick}))),o.createElement(h.ToggleBtn,{className:"btn_close",onClick:this._onClose})),o.createElement("div",{className:"image_area"},o.createElement(g,{ref:this._refSwiper,direction:"horizontal",observer:!0},i.map((t,e)=>o.createElement("img",{key:e,src:t}))),o.createElement(h.ToggleBtn,{className:"btn_prev",view:this._curIdx>0,onClick:this._onPrev}),o.createElement(h.ToggleBtn,{className:"btn_next",view:this._curIdx<i.length-1,onClick:this._onNext})))}};s([n.observable],y.prototype,"m_view",void 0),s([n.observable],y.prototype,"_curIdx",void 0),y=s([r.observer],y);let b=class extends o.Component{constructor(t){super(t),this._viewPenRecordPopup=!1,this._viewVideoPopup=!1,this._viewImagePopup=!1,this._selected=[],this._viewInfo=!0,this._viewSubmitList=!1,this.curIdx=-1,this._soption={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},this._refSwiper=t=>{!this._swiper&&t&&(this._swiper=t.swiper)},this.onOpenSubmitList=()=>{this._viewSubmitList=!0},this.onCloseSubmitList=()=>{this._viewSubmitList=!1},this._penrecordPopupClosed=()=>{this._viewPenRecordPopup=!1},this._videoPopupClosed=()=>{this._viewVideoPopup=!1},this._imagePopupClosed=()=>{this._viewImagePopup=!1},this._showPenRecordPopup=t=>{this.curIdx=t,this._viewPenRecordPopup=!this._viewPenRecordPopup},this._showVideoPopup=t=>{this.curIdx=t,this._viewVideoPopup=!this._viewVideoPopup},this._showImagePopup=t=>{this.curIdx=t,this._viewImagePopup=!this._viewImagePopup},this._showUserInfo=t=>{this._selected[t]?this._selected[t]=!1:this._selected[t]=!0},this._showViewInfo=()=>{0!==this.props.submitStudent.length&&(this._viewInfo=!this._viewInfo)}}_updateSwiper(){this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),l.delay(()=>{this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize())},600))}componentDidUpdate(t){if(this.props.view&&!t.view){for(let t=0;t<a.App.students.length;t++)this._selected.push(!1);this._updateSwiper()}this.props.submitUsers!==t.submitUsers&&this._updateSwiper()}render(){const{submitStudent:t,type:e,view:i,displayMode:s}=this.props;return o.createElement("div",{className:"resultlist",style:{display:i?void 0:"none"}},o.createElement("div",{className:"top_control"},o.createElement(u.MASubmitUsers,{view:i,submitusers:t.length,totalusers:a.App.students.length,onClick:this.onOpenSubmitList}),o.createElement(h.ToggleBtn,{className:"btn_viewInfo",on:this._viewInfo,onClick:this._showViewInfo})),o.createElement("div",{className:"list"},o.createElement(g,Object.assign({},this._soption,{ref:this._refSwiper}),o.createElement("div",{className:"listWrap"},o.createElement("ul",null,t.map((t,i)=>{let n="",r="";if(t&&(1===s?(n=t.student.thumb,r=t.student.name):(n=t.student.avatar,r=t.student.nickname)),"penrecord"===e){const e=t.penRecordData&&t.penRecordData.length>0&&""!==t.penRecordData[0],s=t.images&&t.images.length>0&&""!==t.images[0];return o.createElement("li",{key:i},o.createElement("div",{className:"cntBox"}," ",o.createElement("span",{className:"no_result",style:{display:e?"none":void 0}}),o.createElement("img",{className:"bg",src:t.images?t.images[0]:"",hidden:!this._viewInfo||!s||!e})," ",o.createElement("img",{className:"thumb",src:t.penimages?t.penimages[0]:"",hidden:!this._viewInfo||!s||!e})," ",o.createElement(h.ToggleBtn,{view:e,className:"btn_play",onClick:this._showPenRecordPopup.bind(this,i)})),o.createElement("div",{className:"user_info"},o.createElement(h.ToggleBtn,{className:"btn_info",style:{display:this._viewInfo?"none":void 0},onClick:this._showUserInfo.bind(this,i)})," ",o.createElement("div",{className:"user"+(this._viewInfo?"":" open"),style:{display:this._selected[i]||this._viewInfo?void 0:"none"}}," ",o.createElement("img",{src:n}),o.createElement("span",{className:"user_name"},r),o.createElement(h.ToggleBtn,{className:"btn_close",onClick:this._showUserInfo.bind(this,i)}))))}if("video"===e){const e=t.videos&&t.videos.length>0&&""!==t.videos[0];return o.createElement("li",{key:i},o.createElement("div",{className:"cntBox"}," ",o.createElement("span",{className:"no_result",style:{display:e?"none":void 0}}),o.createElement("video",{src:t.videos?t.videos[0]:"",hidden:!this._viewInfo||!e}),o.createElement(h.ToggleBtn,{view:e,className:"btn_play",onClick:this._showVideoPopup.bind(this,i)})),o.createElement("div",{className:"user_info"},o.createElement(h.ToggleBtn,{className:"btn_info",style:{display:this._viewInfo?"none":void 0},onClick:this._showUserInfo.bind(this,i)})," ",o.createElement("div",{className:"user"+(this._viewInfo?"":" open"),style:{display:this._selected[i]||this._viewInfo?void 0:"none"}}," ",o.createElement("img",{src:n}),o.createElement("span",{className:"user_name"},r),o.createElement(h.ToggleBtn,{className:"btn_close",onClick:this._showUserInfo.bind(this,i)}))))}{const e=t.images&&t.images.length>0&&""!==t.images[0];return o.createElement("li",{key:i},o.createElement("div",{className:"cntBox"}," ",o.createElement("span",{className:"no_result",style:{display:e?"none":void 0}}),o.createElement("img",{src:t.images?t.images[0]:"",hidden:!this._viewInfo||!e})," ",o.createElement(h.ToggleBtn,{view:e,className:"btn_view",onClick:this._showImagePopup.bind(this,i)})),o.createElement("div",{className:"user_info"},o.createElement(h.ToggleBtn,{className:"btn_info",style:{display:this._viewInfo?"none":void 0},onClick:this._showUserInfo.bind(this,i)})," ",o.createElement("div",{className:"user"+(this._viewInfo?"":" open"),style:{display:this._selected[i]||this._viewInfo?void 0:"none"}}," ",o.createElement("img",{src:n}),o.createElement("span",{className:"user_name"},r),o.createElement(h.ToggleBtn,{className:"btn_close",onClick:this._showUserInfo.bind(this,i)}))))}}))))),o.createElement("div",{className:"ready",style:{display:t.length>0?"none":void 0}}),o.createElement(f,{view:this._viewPenRecordPopup,curIdx:this.curIdx,returnStudent:this.props.submitStudent[this.curIdx],displayMode:s,onClosed:this._penrecordPopupClosed}),o.createElement(v,{view:this._viewVideoPopup,curIdx:this.curIdx,returnStudent:this.props.submitStudent[this.curIdx],displayMode:s,onClosed:this._videoPopupClosed}),o.createElement(y,{view:this._viewImagePopup,curIdx:this.curIdx,returnStudent:this.props.submitStudent[this.curIdx],displayMode:s,onClosed:this._imagePopupClosed}))}};s([n.observable],b.prototype,"_viewPenRecordPopup",void 0),s([n.observable],b.prototype,"_viewVideoPopup",void 0),s([n.observable],b.prototype,"_viewImagePopup",void 0),s([n.observable],b.prototype,"_selected",void 0),s([n.observable],b.prototype,"_viewInfo",void 0),s([n.observable],b.prototype,"_viewSubmitList",void 0),b=s([r.observer],b),e.MAResult=b},function(t,e,i){"use strict";var s=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r},o=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(o,n){function r(t){try{l(s.next(t))}catch(t){n(t)}}function a(t){try{l(s.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.CoverPopup=void 0;const n=i(0),r=i(1),a=i(2),l=i(7);let p=class extends n.Component{constructor(){super(...arguments),this.m_state="closed",this._open=()=>o(this,void 0,void 0,(function*(){"closed"===this.m_state&&(this.m_state="opening",yield l.wait(100),this.m_state="open")})),this._close=()=>o(this,void 0,void 0,(function*(){"open"===this.m_state&&(this.m_state="closing",yield l.wait(400),this.props.onClosed(),this.m_state="closed")}))}componentDidUpdate(t){this.props.view!==t.view&&(this.props.view?this._open():this._close())}render(){return n.createElement("div",{className:this.props.className+" "+this.m_state},this.props.children)}};s([r.observable],p.prototype,"m_state",void 0),p=s([a.observer],p),e.CoverPopup=p},function(t,e,i){"use strict";var s=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.VideoPopup=void 0;const o=i(0),n=i(1),r=i(2),a=i(4),l=i(3),p=i(13),d=i(14),h=i(6),c=i(8);function u(t,e){const i=Math.round(e/1e3);let s=Math.round(t/1e3),o=Math.floor(s/60),n=Math.floor(o/60),r="";return s%=60,o%=60,n>0||i>=3600?(r=n+":",r+=o>=10?o+":":"0"+o+":"):i>=600?r+=o>=10?o+":":"0"+o+":":r=o+":",r+=s>=10?s:"0"+s,r}let m=class extends o.Component{constructor(){super(...arguments),this.m_dragging=!1,this.m_bgW=0,this.m_s=0,this.m_dragLeft=0,this.m_dragLeft_s=0,this._seek=l.throttle(t=>{if(this.props.disable)return;const e=this.props.player;e.seek(e.duration*t/100)},300,{leading:!1}),this._refBG=t=>{!this.m_bg&&t&&(this.m_bg=t)},this._start=(t,e)=>{if(!this.m_bg||this.props.disable)return;if(this.props.player.duration<=0)return;if(this.m_bgW=this.m_bg.getBoundingClientRect().width,this.m_bgW<=0)return;let i=100*e.x/this.m_bgW;i<0?i=0:i>100&&(i=100),this.m_dragLeft_s=i,this.m_dragLeft=i,this.m_s=e.x,this.m_dragging=!0},this._drag=(t,e)=>{if(!this.m_dragging||this.props.disable)return;let i=this.m_dragLeft_s+100*(e.x-this.m_s)/this.m_bgW;i<0?i=0:i>100&&(i=100),this.m_dragLeft=i;this.props.player.bPlay||this._seek(i)},this._stop=(t,e)=>{if(!this.m_dragging||this.props.disable)return;this.m_dragging=!1;const i=this.props.player;i.seek(i.duration*this.m_dragLeft/100)}}render(){const t=this.props.player;let e=0;t.duration>0&&(e=t.viewTime/t.duration*100);let i=0,s=this.m_dragLeft;return i=this.m_dragging?s:e,o.createElement(o.Fragment,null,o.createElement("div",{className:"prog_box"},o.createElement(c.DraggableCore,{onDrag:this._drag,onStart:this._start,onStop:this._stop},o.createElement("div",{className:"prog_bg",ref:this._refBG},o.createElement("div",{className:"prog_bar",style:{width:e+"%"}}),o.createElement("div",{className:"prog_tmp"}),o.createElement(h.ToggleBtn,{className:"prog_btn",style:{left:i+"%"}})))),o.createElement("div",{className:"video_time"},o.createElement("span",null,u(t.viewTime,t.duration))," / ",o.createElement("span",null,u(t.duration,t.duration))))}};s([n.observable],m.prototype,"m_dragLeft",void 0),m=s([r.observer],m);let _=class extends o.Component{render(){const{player:t,disable:e}=this.props;return o.createElement("div",{className:"control_box"},o.createElement(h.ToggleBtn,{className:"video-play-pause",on:this.props.isPlay,onClick:this.props.togglePlay}),o.createElement(m,{player:t,disable:e}))}};_=s([r.observer],_);let g=class extends o.Component{constructor(t){super(t),this._refBox=t=>{!this.m_box&&t&&(this.m_box=t)},this._refVideo=t=>{if(!t)return;const e=this._player;e.media||e.mediaInited(t)},this._clickVideo=()=>{this._player.bPlay&&(a.App.pub_playBtnTab(),this._player.pause())},this._togglePlay=()=>{a.App.pub_playBtnTab(),this._player.bPlay?this._player.pause():this._player.play()},this._player=new d.MPlayer(new d.MConfig(!0))}componentDidUpdate(t){this.props.view&&!t.view?this._player.load(this.props.videoSrc):!this.props.view&&t.view&&(this._player.bPlay&&this._player.gotoAndPause(0),this._player.unload()),this.props.curIdx!==t.curIdx&&(this._player.unload(),this._player.load(this.props.videoSrc))}render(){const{view:t}=this.props;return o.createElement("div",{className:"t_video_popup",style:t?void 0:p.NONE},o.createElement("div",{className:"video_box",ref:this._refBox},o.createElement("div",{className:"video_play"},o.createElement("video",{controls:!1,ref:this._refVideo,onClick:this._clickVideo}),o.createElement(h.ToggleBtn,{className:"btn_play_video",view:!this._player.bPlay,onClick:this._togglePlay})),o.createElement(_,{player:this._player,disable:!1,isPlay:this._player.bPlay,togglePlay:this._togglePlay})))}};g=s([r.observer],g),e.VideoPopup=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NItem=void 0;const s=i(0);class o extends s.Component{constructor(){super(...arguments),this._click=()=>{this.props.onClick(this.props.idx)}}render(){const{on:t}=this.props;return s.createElement("span",{className:t?"on":"",onClick:this._click})}}e.NItem=o},function(t,e,i){"use strict";var s=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.MASubmitUsers=e.MASubmitUserList=void 0;const o=i(0),n=i(1),r=i(2),a=i(4),l=i(3),p=i(9).default;let d=class extends o.Component{constructor(t){super(t),this.allStudents=[],this.heartTwoStudents=[],this.heartOneStudents=[],this.wrongStudents=[],this.notsubmitUsers=[],this.submitusersCnt=0,this._soption={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},this._refSwiper=t=>{!this._swiper&&t&&(this._swiper=t.swiper)},this.clickTab=(t,e)=>{switch(this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0)),l.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0))},300),t){case"1":if(this.heartTwoStudents.length<1)return;break;case"2":if(this.heartOneStudents.length<1)return;break;case"3":if(this.wrongStudents.length<1)return;break;case"4":if(this.notsubmitUsers.length<1)return}a.App.pub_playBtnTab(),this.props.onType&&this.props.onType(t,e)}}componentDidUpdate(t){if(this.props.view&&!t.view){for(this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0)),l.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0))},300),a.App.students&&(this.allStudents=a.App.students);this.heartTwoStudents.length>0;)this.heartTwoStudents.pop();for(;this.heartOneStudents.length>0;)this.heartOneStudents.pop();for(;this.wrongStudents.length>0;)this.wrongStudents.pop();for(;this.notsubmitUsers.length>0;)this.notsubmitUsers.pop();this.props.isAssessment?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let i=this.props.submitusers.find(e=>e.student.id===t.id);i?this.heartTwoStudents.push(i.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:3===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let i=this.props.submitusers.find(e=>e.student.id===t.id);i&&0!==i.trycnt?i.correct?1===i.trycnt?this.heartTwoStudents.push(i.student):this.heartOneStudents.push(i.student):this.wrongStudents.push(i.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:2===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let i=this.props.submitusers.find(e=>e.student.id===t.id);i?i.correct?this.heartOneStudents.push(i.student):this.wrongStudents.push(i.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:4===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let i=this.props.submitusers.find(e=>e.student.id===t.id);i&&0!==i.trycnt?i.correct?1===i.trycnt&&this.heartTwoStudents.push(i.student):this.wrongStudents.push(i.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:this.props.submitusers.length>0?this.allStudents.map((t,e)=>{this.props.submitusers.find(e=>e.student.id===t.id)||this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents,this.submitusersCnt=this.props.submitusers.length,this.props.isStrategy&&this.props.onType&&(this.heartTwoStudents.length>0?this.props.onType("1",this.props.quizIdx):this.heartOneStudents.length>0?this.props.onType("2",this.props.quizIdx):this.wrongStudents.length>0?this.props.onType("3",this.props.quizIdx):this.notsubmitUsers.length>0&&this.props.onType("4",this.props.quizIdx)),this.heartTwoStudents.length>0?this.clickTab("1",this.props.quizIdx):this.heartOneStudents.length>0?this.clickTab("2",this.props.quizIdx):this.wrongStudents.length>0?this.clickTab("3",this.props.quizIdx):this.notsubmitUsers.length>0&&this.clickTab("4",this.props.quizIdx)}else if(this.props.view&&t.view&&this.props.submitusers.length!==this.submitusersCnt){for(this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0)),l.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0))},300),a.App.students&&(this.allStudents=a.App.students);this.heartTwoStudents.length>0;)this.heartTwoStudents.pop();for(;this.heartOneStudents.length>0;)this.heartOneStudents.pop();for(;this.wrongStudents.length>0;)this.wrongStudents.pop();for(;this.notsubmitUsers.length>0;)this.notsubmitUsers.pop();this.props.isAssessment?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let i=this.props.submitusers.find(e=>e.student.id===t.id);i?this.heartTwoStudents.push(i.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:3===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let i=this.props.submitusers.find(e=>e.student.id===t.id);i&&0!==i.trycnt?i.correct?1===i.trycnt?this.heartTwoStudents.push(i.student):this.heartOneStudents.push(i.student):this.wrongStudents.push(i.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:2===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let i=this.props.submitusers.find(e=>e.student.id===t.id);i?i.correct?this.heartOneStudents.push(i.student):this.wrongStudents.push(i.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:4===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let i=this.props.submitusers.find(e=>e.student.id===t.id);i&&0!==i.trycnt?i.correct?1===i.trycnt&&this.heartTwoStudents.push(i.student):this.wrongStudents.push(i.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:this.props.submitusers.length>0?this.allStudents.map((t,e)=>{this.props.submitusers.find(e=>e.student.id===t.id)||this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents,this.submitusersCnt=this.props.submitusers.length,this.props.isStrategy&&this.props.onType&&(this.heartTwoStudents.length>0?this.props.onType("1",this.props.quizIdx):this.heartOneStudents.length>0?this.props.onType("2",this.props.quizIdx):this.wrongStudents.length>0?this.props.onType("3",this.props.quizIdx):this.notsubmitUsers.length>0&&this.props.onType("4",this.props.quizIdx))}}render(){const{view:t,onClose:e,isNoNum:i,isAssessment:s,quizIdx:n,isStrategy:r,submitusers:a}=this.props;let l="";return i&&(l+=" nonum"),s&&(l+=" assessment"),o.createElement(o.Fragment,null,o.createElement("div",{className:"submituserlist_bg"+(t?" show":"")}),o.createElement("div",{className:"submituserlist"+(t?" show":"")+l},o.createElement("div",{className:"header"},o.createElement("div",{className:"quiz_tit"},"Q"+(n+1)),o.createElement("div",{className:"score_set"},o.createElement("ul",null,o.createElement("li",{className:"type01"+("1"===this.props.type?" arrow":"")+(this.heartTwoStudents.length>0?" on":""),style:{cursor:this.heartTwoStudents.length>0?"pointer":"default"},onClick:this.clickTab.bind(this,"1",n)},this.heartTwoStudents.length),this.props.mode<4&&o.createElement("li",{className:"type02"+("2"===this.props.type?" arrow":"")+(this.heartOneStudents.length>0?" on":""),style:{cursor:this.heartOneStudents.length>0?"pointer":"default"},onClick:this.clickTab.bind(this,"2",n)},this.heartOneStudents.length),o.createElement("li",{className:"type03"+("3"===this.props.type?" arrow":"")+(this.wrongStudents.length>0?" on":""),style:{cursor:this.wrongStudents.length>0?"pointer":"default"},onClick:this.clickTab.bind(this,"3",n)},this.wrongStudents.length),o.createElement("li",{className:"type04"+("4"===this.props.type?" arrow":"")+(this.notsubmitUsers.length>0?" on":""),style:{cursor:this.notsubmitUsers.length>0?"pointer":"default"},onClick:this.clickTab.bind(this,"4",n)},this.notsubmitUsers.length))),o.createElement("div",{className:"submitter"},"Submitter",o.createElement("span",null,o.createElement("strong",null,this.heartTwoStudents.length)," / ",this.allStudents.length)),o.createElement("button",{className:"btn_close",onClick:e})),o.createElement("div",{className:"list_box"},o.createElement("div",{className:"innerbox"},o.createElement(p,Object.assign({},this._soption,{ref:this._refSwiper}),o.createElement("div",{className:"inner"},o.createElement("ul",null,"1"===this.props.type&&this.heartTwoStudents.map((t,e)=>{const i="2"===t.displayMode&&t.nickname?t.nickname:t.name,s="2"===t.displayMode?t.avatar:t.thumb;return o.createElement("li",{key:e},""===s&&o.createElement("div",{className:"F"===t.gender?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,i.substring(0,2).toUpperCase())),""!==s&&o.createElement("img",{src:s}),o.createElement("span",{className:"name"},i))}),"2"===this.props.type&&this.heartOneStudents.map((t,e)=>{const i="2"===t.displayMode&&t.nickname?t.nickname:t.name,s="2"===t.displayMode?t.avatar:t.thumb;return o.createElement("li",{key:e},""===s&&o.createElement("div",{className:"F"===t.gender?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,i.substring(0,2).toUpperCase())),""!==s&&o.createElement("img",{src:s}),o.createElement("span",{className:"name"},i))}),"3"===this.props.type&&this.wrongStudents.map((t,e)=>{const i="2"===t.displayMode&&t.nickname?t.nickname:t.name,s="2"===t.displayMode?t.avatar:t.thumb;return o.createElement("li",{key:e},""===s&&o.createElement("div",{className:"F"===t.gender?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,i.substring(0,2).toUpperCase())),""!==s&&o.createElement("img",{src:s}),o.createElement("span",{className:"name"},i))}),"4"===this.props.type&&this.notsubmitUsers.map((t,e)=>{const i="2"===t.displayMode&&t.nickname?t.nickname:t.name,s="2"===t.displayMode?t.avatar:t.thumb;return o.createElement("li",{key:e},""===s&&o.createElement("div",{className:"F"===t.gender?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,i.substring(0,2).toUpperCase())),""!==s&&o.createElement("img",{src:s}),o.createElement("span",{className:"name"},i))}))))))))}};s([n.observable],d.prototype,"allStudents",void 0),s([n.observable],d.prototype,"heartTwoStudents",void 0),s([n.observable],d.prototype,"heartOneStudents",void 0),s([n.observable],d.prototype,"wrongStudents",void 0),s([n.observable],d.prototype,"notsubmitUsers",void 0),s([n.observable],d.prototype,"submitusersCnt",void 0),d=s([r.observer],d),e.MASubmitUserList=d;let h=class extends o.Component{constructor(t){super(t)}render(){const{view:t,submitusers:e,totalusers:i,onClick:s}=this.props;return o.createElement("div",{className:"submitusers"+(t?"":" hide"),onClick:s||void 0},e," / ",i)}};h=s([r.observer],h),e.MASubmitUsers=h},function(t,e,i){"use strict";var s=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.PenRecordPopup=void 0;const o=i(0),n=i(1),r=i(2),a=i(4),l=i(3),p=i(13),d=i(6),h=i(8),c=i(36);function u(t,e){const i=Math.round(e/1e3);let s=Math.round(t/1e3),o=Math.floor(s/60),n=Math.floor(o/60),r="";return s%=60,o%=60,n>0||i>=3600?(r=n+":",r+=o>=10?o+":":"0"+o+":"):i>=600?r+=o>=10?o+":":"0"+o+":":r=o+":",r+=s>=10?s:"0"+s,r}let m=class extends o.Component{constructor(){super(...arguments),this.m_dragging=!1,this.m_bgW=0,this.m_s=0,this.m_dragLeft=0,this.m_dragLeft_s=0,this._seek=l.throttle(t=>{if(this.props.disable)return;const e=this.props.player;e.seek(e.duration*t/100)},300,{leading:!1}),this._refBG=t=>{!this.m_bg&&t&&(this.m_bg=t)},this._start=(t,e)=>{if(!this.m_bg||this.props.disable)return;if(this.props.player.duration<=0)return;if(this.m_bgW=this.m_bg.getBoundingClientRect().width,this.m_bgW<=0)return;let i=100*e.x/this.m_bgW;i<0?i=0:i>100&&(i=100),this.m_dragLeft_s=i,this.m_dragLeft=i,this.m_s=e.x,this.m_dragging=!0},this._drag=(t,e)=>{if(!this.m_dragging||this.props.disable)return;let i=this.m_dragLeft_s+100*(e.x-this.m_s)/this.m_bgW;i<0?i=0:i>100&&(i=100),this.m_dragLeft=i;this.props.player.bPlay||this._seek(i)},this._stop=(t,e)=>{if(!this.m_dragging||this.props.disable)return;this.m_dragging=!1;const i=this.props.player;i.seek(i.duration*this.m_dragLeft/100)}}render(){const t=this.props.player;let e=0;t&&t.duration>0&&(e=t.viewTime/t.duration*100);let i=0,s=this.m_dragLeft;return i=this.m_dragging?s:e,o.createElement(o.Fragment,null,o.createElement("div",{className:"prog_box"},o.createElement(h.DraggableCore,{onDrag:this._drag,onStart:this._start,onStop:this._stop},o.createElement("div",{className:"prog_bg",ref:this._refBG},o.createElement("div",{className:"prog_bar",style:{width:e+"%"}}),o.createElement("div",{className:"prog_tmp"}),o.createElement(d.ToggleBtn,{className:"prog_btn",style:{left:i+"%"}}),o.createElement("div",{className:"preview"},o.createElement("div",{className:"video"}),o.createElement("div",{className:"time"},"11:56"))))),o.createElement("div",{className:"volume"},o.createElement("button",{className:"btn_volume"}),o.createElement("div",{className:"progress"},o.createElement("div",{className:"bg_progress"},o.createElement("div",{className:"bar",style:{width:"50%"}}),o.createElement("button",{className:"btn_progress",style:{left:"50%"}})))),o.createElement("div",{className:"video_time"},o.createElement("span",null,u(t?t.viewTime:0,t?t.duration:0))," ",o.createElement("span",null," / ",u(t?t.duration:0,t?t.duration:0))),o.createElement("div",{className:"subtitle"}))}};s([n.observable],m.prototype,"m_dragLeft",void 0),m=s([r.observer],m);let _=class extends o.Component{render(){const{player:t,disable:e}=this.props;return o.createElement("div",{className:"control_box"},o.createElement(d.ToggleBtn,{className:"video-play-pause",on:this.props.isPlay,onClick:this.props.togglePlay}),o.createElement(m,{player:t,disable:e}))}};_=s([r.observer],_);let g=class extends o.Component{constructor(t){super(t),this._cel=null,this._ctx=null,this._ratio=1,this.m_loaded=!1,this._refCanvas=t=>{if(this._cel||!t)return;this._cel=t;const e=t.getContext("2d"),i=t.getAttribute("hidpi");let s=1;if(i&&!/^off|false$/.test(i)){window.devicePixelRatio;const t=e.webkitBackingStorePixelRatio||e.backingStorePixelRatio||1;s=devicePixelRatio/t,e.scale(s,s)}this._ctx=e,this._ratio=s,this._penplayer=new c.default(this._ctx)},this._togglePlay=()=>{this._penplayer&&(a.App.pub_playBtnTab(),this._penplayer.bPlay?this._penplayer.pause(!1):this._penplayer.play())}}componentDidUpdate(t){if(this.props.view&&!t.view){if(this._penplayer){let t=[];t.push(this.props.audioSrc),this._penplayer.load(t,this.props.data),this._audioplayer=this._penplayer.player,this.m_loaded=!0}}else!this.props.view&&t.view&&(this._audioplayer&&(this._audioplayer.bPlay&&this._audioplayer.gotoAndPause(0),this._audioplayer.unload()),this.m_loaded=!1);if(this.props.view)if(this.props.on&&!t.on){if(this._penplayer&&!this.m_loaded){let t=[];this._penplayer.load(t,this.props.data),this._audioplayer=this._penplayer.player,this.m_loaded=!0}}else!this.props.on&&t.on&&this._audioplayer&&this._audioplayer.bPlay&&this._audioplayer.pause()}render(){const{view:t,on:e,thumbSrc:i,bgSrc:s}=this.props;let n=!!this._audioplayer&&this._audioplayer.bPlay;return o.createElement("div",{className:"t_penrecord_popup",style:t?void 0:p.NONE},o.createElement("div",{className:"penrecord_box"},o.createElement("div",{className:"penrecord_play"},o.createElement("div",{className:"penrecord_bg"}),o.createElement("div",{className:"video_basis_img",style:{zIndex:n?-1:0}},o.createElement("img",{src:s,draggable:!1})),o.createElement("div",{className:"video_thumb_img",style:{display:n?"none":"block"}},o.createElement("img",{src:i,draggable:!1})),o.createElement("canvas",{ref:this._refCanvas,width:1280,height:800,style:{zIndex:n?10:-1}}),o.createElement(d.ToggleBtn,{className:"btn_play",view:this.m_loaded&&!n,onClick:this._togglePlay})),o.createElement(_,{player:this._audioplayer,disable:!this.m_loaded,isPlay:n,togglePlay:this._togglePlay})))}};s([n.observable],g.prototype,"m_loaded",void 0),g=s([r.observer],g),e.PenRecordPopup=g},function(t,e,i){"use strict";var s=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r},o=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(o,n){function r(t){try{l(s.next(t))}catch(t){n(t)}}function a(t){try{l(s.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const n=i(3),r=i(14),a=i(7),l=i(1);class p{constructor(t){this._duration=0,this._aniIdx=-1,this._aniLast=-1,this._bClear=!0,this._ridx=0,this._pidx=0,this._pidx_sub=0,this._lastTime=0,this._viewTime=0,this._timeStr="00:00",this._bPlay=!1,this._played=!1,this._ctx=t,this._player=new r.MPlayer(new r.MConfig(!1)),this._player.mediaInited(document.createElement("audio"));this._player.addOnPlayEnd(()=>o(this,void 0,void 0,(function*(){if(!this._records)return;if(!this._data)return;if(!this._bPlay)return;const{ridxs:t,starts:e,ends:i,erases:s,colors:o,thicks:r,arrX:l,arrY:p}=this._data;for(;this._aniIdx>=0;)yield a.wait(10);for(let e=this._pidx;e<t.length;e++)t[e]===this._ridx&&(this._pidx=e+1,this._draw(0,0,0,s[e],o[e],r[e],l[e],p[e]));this._ridx<this._records.length-1?(this._player.bPlay&&this._player.pause(),n.defer(()=>{if(!this._records)return;const t=this._player.muted,e=this._player.volume;this._player.unload(),this._player.load(this._records[++this._ridx]),this._player.play(),this._player.setVolume(e),this._player.setMuted(t)})):(this._player.bPlay&&this._player.pause(),this._bPlay=!1,this._bClear=!0)}))),this._player.addOnTime(t=>{if(!this._player.bPlay)return;if(!this._data)return;const{ridxs:e,starts:i,ends:s,erases:o,colors:n,thicks:r,arrX:l,arrY:p}=this._data;this._viewTime=this._lastTime+t,this._viewTime>this._duration&&(this._viewTime=this._duration),this._timeStr=a.getTimeStr(this._viewTime,6e5);for(let a=this._pidx;a<e.length&&(!(this._aniIdx>=0)&&this._bPlay);a++)e[a]===this._ridx&&i[a]<t&&(this._pidx=a+1,this._draw(i[a],s[a],t,o[a],n[a],r[a],l[a],p[a]))})}get timeStr(){return this._timeStr}get bPlay(){return this._bPlay}get played(){return this._played}get viewTime(){return this._viewTime}get duration(){return this._duration}get muted(){return this._player.muted}get volume(){return this._player.volume}get player(){return this._player}seek(t){if(t<0||t>this._duration)return;if(!this._bPlay)return;if(!this._data)return;if(!this._records)return;this._aniIdx>=0&&(window.cancelAnimationFrame(this._aniIdx),this._aniIdx=-1);const e=this._ctx.canvas;this._ctx.clearRect(0,0,e.width,e.height)}setMuted(t){this._player.setMuted(t)}setVolume(t){this._player.setVolume(t)}_draw(t,e,i,s,n,r,a,l){return o(this,void 0,void 0,(function*(){const o=this._ctx,p=a.length;if(!(p<1))if(o.beginPath(),o.lineCap="round",o.lineJoin="round",o.strokeStyle=n,o.globalCompositeOperation=1===s?"destination-out":"source-over",o.lineWidth=r,o.moveTo(a[0]*(926/1280),l[0]*(477/725)),i>=t&&i<e){const s=(e-t)/p;let n=(i-t)/s|0,r=1;for(let t=1;t<=n&&t<p;t++)o.lineTo(a[t]*(926/1280),l[t]*(477/725)),o.stroke(),r+=1;let d=r;this._aniLast=Date.now(),this._aniFnc=t=>{if(this._bPlay){if(n=(Date.now()-this._aniLast)/s|0,n>0){r=d;for(let t=d;t<=d+n&&t<p;t++)o.lineTo(a[t]*(926/1280),l[t]*(477/725)),o.stroke(),r+=1;this._aniLast=this._aniLast+(r-d)*s,d=r}d<p?this._aniFnc&&(this._aniIdx=window.requestAnimationFrame(this._aniFnc)):(o.closePath(),this._aniIdx=-1)}},this._aniIdx=window.requestAnimationFrame(this._aniFnc)}else{for(let t=1;t<p;t++)o.lineTo(a[t]*(926/1280),l[t]*(477/725));o.stroke(),o.closePath()}}))}load(t,e){this._player.setMuted(!1),this._player.setVolume(1),this._viewTime=0,this._lastTime=0,this._timeStr="00:00",this._records=t,this._data=e,this._bPlay=!1,this._bClear=!0,this._played=!1,this._player.load(this._records[0]),this._duration=1e3*this._player.duration}play(){if(!this._records)return;if(!this._data)return;const t=this._player.muted,e=this._player.volume;this._bClear?(this._timeStr="00:00",this._viewTime=0,this._lastTime=0,this._aniIdx=-1,this._player.unload(),this._player.load(this._records[0]),this._ridx=0,this._bClear=!1,this._player.setMuted(t)):this._aniIdx>=0&&(this._aniFnc?(this._aniLast=Date.now(),this._aniIdx=window.requestAnimationFrame(this._aniFnc)):(window.cancelAnimationFrame(this._aniIdx),this._aniIdx=-1));const i=this._ctx.canvas;this._ctx.clearRect(0,0,i.width,i.height);const{ridxs:s,starts:o,ends:n,erases:r,colors:a,thicks:l,arrX:p,arrY:d}=this._data;this._pidx=0;for(let t=0;t<s.length&&(s[t]<this._ridx||s[t]===this._ridx&&n[t]<this._player.currentTime);t++)this._pidx=t+1,this._draw(0,0,0,r[t],a[t],l[t],p[t],d[t]);this._played=!0,this._bPlay=!0,this._player.setVolume(e),this._player.setMuted(t),this._player.play()}pause(t,e){if(this._aniIdx>=0&&(window.cancelAnimationFrame(this._aniIdx),this._aniIdx=-1),t&&(this._bClear=!0,this._played=!1,e)){const t=this._ctx.canvas;this._ctx.clearRect(0,0,t.width,t.height)}this._bPlay=!1,this._player.bPlay&&this._player.pause()}}s([l.observable],p.prototype,"_duration",void 0),s([l.observable],p.prototype,"_viewTime",void 0),s([l.observable],p.prototype,"_timeStr",void 0),s([l.computed],p.prototype,"timeStr",null),s([l.observable],p.prototype,"_bPlay",void 0),s([l.computed],p.prototype,"bPlay",null),s([l.observable],p.prototype,"_played",void 0),s([l.computed],p.prototype,"played",null),s([l.computed],p.prototype,"viewTime",null),s([l.computed],p.prototype,"duration",null),s([l.computed],p.prototype,"muted",null),s([l.computed],p.prototype,"volume",null),s([l.computed],p.prototype,"player",null),e.default=p},function(t,e,i){"use strict";var s=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.SENDPROG=e.useTeacher=e.tContext=e.TeacherConsumer=e.TeacherProvider=e.TeacherContext=void 0;const o=i(0),n=i(1),r=i(5),a=i(38);var l;!function(t){t[t.READY=0]="READY",t[t.SENDING=1]="SENDING",t[t.SENDED=2]="SENDED",t[t.COMPLETE=3]="COMPLETE"}(l||(l={})),e.SENDPROG=l;class p extends a.TeacherContextBase{constructor(){super(),this._quizResultFnc=null,this.state.prog="portfolio",this.actions.getData=()=>this._data,this.actions.getCurriculum=()=>this._curriculum,this.actions.gotoDirection=()=>this._setViewDiv("direction"),this.actions.gotoNextBook=()=>{r.sendLauncher(9,null)},this.actions.setQuizResultFnc=t=>{this._quizResultFnc=t}}_setViewDiv(t){super._setViewDiv(t)}receive(t){if(super.receive(t),11===t.type&&t.data){const e=t.data;if("portfolio_result"===e.msgtype){const t=e;this._quizResultFnc&&this._quizResultFnc(t)}}}setData(t){this._data=t}notifyNaviInfo(t,e,i,s,o,n){this._curriculum=t,this.state.bookid=e,this.state.classid=i}}s([n.observable],p.prototype,"state",void 0),s([n.action],p.prototype,"_setViewDiv",null),e.TeacherContext=p;const d=new p;e.tContext=d;const{Provider:h,Consumer:c}=o.createContext(d);e.TeacherConsumer=c;class u extends o.Component{render(){return o.createElement(h,{value:d},this.props.children)}}e.TeacherProvider=u,e.useTeacher=function(t){return function(e){return o.createElement(c,null,e=>o.createElement(t,Object.assign({},e)))}}},function(t,e,i){"use strict";var s=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.TeacherContextBase=void 0;const o=i(1),n=i(4),r=i(5),a=i(12);class l{constructor(){this._naviLeftFnc=null,this._naviRightFnc=null,this.state={viewDiv:"direction",directionON:!1,navi:{view:!1,enableLeft:!1,enableRight:!1},svg_bg:{view:!0,bPlay:!1,viewCharactor:!0},loading:!1,retCnt:0,numOfStudent:0,bookid:0,bookkey:0,curriculumid:0,classid:0,unitid:0,lessonid:0,conceptLibiary:{view:!1,datatype:"grade",resultmode:!1}},this.actions={onDirectionEndStart:()=>{"direction"===this.state.viewDiv&&r.sendPAD(3,null)},onDirectionEnded:()=>{"direction"===this.state.viewDiv&&this._setViewDiv("content"),n.App.isStarted=!0},setNaviView:t=>{this.state.navi.view=t},setNavi:(t,e)=>{this.state.navi.enableLeft=t,this.state.navi.enableRight=e},setNaviFnc:(t,e)=>{this._naviLeftFnc=t,this._naviRightFnc=e},naviLeft:()=>{"direction"===this.state.viewDiv?r.sendLauncher(8,null):(n.App.pub_playBtnPage(),this._naviLeftFnc?this._naviLeftFnc():this._setViewDiv("direction"))},naviRight:()=>{"direction"===this.state.viewDiv?(n.App.pub_playBtnPage(),this.state.directionON=!1):(n.App.pub_playBtnPage(),this._naviRightFnc?this._naviRightFnc():r.sendLauncher(9,null))},setRetCnt:t=>{t>this.state.numOfStudent&&(t=this.state.numOfStudent),this.state.retCnt=t},setNumOfStudent:t=>{this.state.numOfStudent=t},setConcepLibaryView:t=>{this.state.conceptLibiary.view=t},setConcepLibaryDataType:t=>{this.state.conceptLibiary.datatype=t},setConcepLibaryResultMode:t=>{this.state.conceptLibiary.resultmode=t},setLoading:t=>{r.showTLoading(t)}},this.notifyBookCaptureInfo=t=>{},this.clickSendButton=()=>{},this.notifyRecordData=(t,e)=>{}}_setViewDiv(t,e){this.state.viewDiv!==t&&(e||n.App.pub_stop(),"direction"===t?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0,r.sendLauncher(5,null),r.sendPAD(1,null),this.state.navi.view=!0,this.state.navi.enableLeft=n.App.prevBook,this.state.navi.enableRight=!0,this._naviLeftFnc=null,this._naviRightFnc=null,this.state.conceptLibiary.view=!1,this.state.conceptLibiary.datatype="grade",this.state.conceptLibiary.resultmode=!1):(this.state.directionON=!1,this.state.svg_bg.bPlay=!1,this.state.svg_bg.viewCharactor=!1,r.sendLauncher(6,null),r.sendPAD(0,null)),this._naviLeftFnc=null,this._naviRightFnc=null,this.state.numOfStudent=0,this.state.retCnt=0,this.state.viewDiv=t)}start(){if("direction"===this.state.viewDiv&&(this.state.directionON=!0,this.state.navi.view=!0,this.state.navi.enableLeft=n.App.prevBook,this.state.navi.enableRight=!0,this.state.svg_bg.bPlay=!0,r.sendLauncher(5,null),r.sendPAD(1,null)),n.App.isDvlp){0;let t="";if(t="M0402",""===t)return;let e={id:1e3,code:"",depth:4,depth_name:a.parseDept4Div(t),info:"",div:t,subDiv:"",name:"M0408"===t?"Identify the Number 0, Read and Write 0":"",thumbnail:"",cmsLevel:"",childrenList:[]},i="",s="",o="";if("Concept"===a.parseDept4Div(t))for(let t=0;t<3;t++){0===t?(i="M0503",s="M050303",o=a.parseDept5SubDiv("M050303")):1===t?(i="M0503",s="M050304",o=a.parseDept5SubDiv("M050304")):2===t&&(i="M0506",s="M050601",o=a.parseDept5SubDiv("M050601"));let n={id:16815+t,code:"",depth:5,depth_name:o,info:"",div:i,subDiv:s,name:o,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:9e4+t,path:"/content/"+(5787+t),viewMode:2,key:5280+t,cmsKey:5787+t,completed:0,updatetime:""}};e.childrenList.push(n)}else if("Problem"===a.parseDept4Div(t))for(let t=0;t<3;t++){0===t?(i="M0505",s="M050504",o="Reasoning (1)"):1===t?(i="M0505",s="M050504",o=a.parseDept5SubDiv("M050504")):2===t&&(i="M0506",s="M050602",o=a.parseDept5SubDiv("M050602"));let n={id:16815+t,code:"",depth:5,depth_name:o,info:"",div:i,subDiv:s,name:o,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:8e4+t,path:"/content/"+(5787+t),viewMode:2,key:5280+t,cmsKey:5787+t,completed:0,updatetime:""}};e.childrenList.push(n)}else if("Concept Learning"===a.parseDept4Div(t))for(let t=0;t<12;t++){0===t?(i="M0501",s="M050101",o="WarmUp Quiz"):1===t?(i="M0501",s="M050101",o="I SPY"):2===t?(i="M0501",s="M050101",o="Hit a Mole"):3===t?(i="M0506",s="M050601",o="Memory Game"):4===t?(i="M0506",s="M050601",o="Math Talk"):5===t?(i="M0501",s="M050102",o="Learning Objectives"):6===t?(i="M0502",s="M050202",o="Concept Acivity"):7===t?(i="M0502",s="M050203",o="Concept Tool"):8===t?(i="M0502",s="M050204",o="Concept Summary"):9===t?(i="M0505",s="M050501",o="Independent Practice"):10===t?(i="M0505",s="M050502",o="Extended Practice"):11===t&&(i="M0505",s="M050505",o="CL Strategy");let n={id:16815+t,code:"",depth:5,depth_name:o,info:"",div:i,subDiv:s,name:o,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:1e4+t,path:"/content/"+(5787+t),viewMode:2,key:5280+t,cmsKey:5787+t,completed:0,updatetime:""}};e.childrenList.push(n)}else if("Topic Learning"===a.parseDept4Div(t))for(let t=0;t<1;t++){0===t&&(i="M0507",s="M050701",o=a.parseDept5SubDiv("M050701"));let n={id:16815+t,code:"",depth:5,depth_name:o,info:"",div:i,subDiv:s,name:o,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:2e4+t,path:"/content/"+(5787+t),viewMode:2,key:5280+t,cmsKey:5787+t,completed:0,updatetime:""}};e.childrenList.push(n)}else if("Module Learning"===a.parseDept4Div(t))for(let t=0;t<3;t++){0===t?(i="M0508",s="M050801",o=a.parseDept5SubDiv("M050801")):1===t?(i="M0508",s="M050803",o=a.parseDept5SubDiv("M050803")):2===t&&(i="M0508",s="M050804",o=a.parseDept5SubDiv("M050804"));let n={id:16815+t,code:"",depth:5,depth_name:o,info:"",div:i,subDiv:s,name:o,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:3e4+t,path:"/content/"+(5787+t),viewMode:2,key:5280+t,cmsKey:5787+t,completed:0,updatetime:""}};e.childrenList.push(n)}else if("Module Test"===a.parseDept4Div(t))for(let t=0;t<1;t++){0===t&&(i="M0509",s="M050905",o=a.parseDept5SubDiv("M050905"));let n={id:16815+t,code:"",depth:5,depth_name:o,info:"",div:i,subDiv:s,name:o,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:4e4+t,path:"/content/"+(5787+t),viewMode:2,key:5280+t,cmsKey:5787+t,completed:0,updatetime:""}};e.childrenList.push(n)}let n=1e4;n=80002,this.notifyNaviInfo(e,n,1)}else{let t="";0,r.getNaviInfo(t)}}receive(t){}uploaded(t){}multiUploaded(t){}notify(t){}notifyRecorded(t){}notifyVideoRecord(t){}notifyNaviInfo(t,e,i,s,o,n){}notifyPenToolState(t,e){}notifyLiveGivePopupClose(){}notifyAlert(t){}notifyHamburgerMenuClicked(t){}callThreeminState(){}}s([o.observable],l.prototype,"state",void 0),s([o.action],l.prototype,"_setViewDiv",null),s([o.action],l.prototype,"start",null),e.TeacherContextBase=l},function(t,e,i){"use strict";i.r(e)}]);