!function(e){var t={};function o(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(i,s,function(t){return e[t]}.bind(null,s));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=17)}([function(e,t){e.exports=React},function(e,t){e.exports=mobxReact},function(e,t){e.exports=mobx},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const i=o(9),s=o(6);function n(e){if(!e)return e;console.log("init student",e),e.displayMode=""+e.displayMode=="2"?"2":"1",e.gender=e.gender,""===e.nickname&&(e.nickname=e.name);let t=e.avatar&&""!==e.avatar?e.avatar:"";return""===t&&(t="f"===e.gender||"F"===e.gender?"/content/mathalive_lib/images/default_candy.png":"/content/mathalive_lib/images/default_cheese.png",e.avatar=t),e}class a{static get isMobile(){return a._isMobile}static get tempEl(){return a._tempEl}static pub_init(){const e=navigator.userAgent;a._isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e)||/android/i.test(e),a._tempBnd=document.createElement("div"),a._tempBnd.style.display="none",a._tempEl=document.createElement("div"),a._tempBnd.appendChild(a._tempEl),null===document.body?document.addEventListener("DOMContentLoaded",e=>{document.body.appendChild(a._tempBnd)}):document.body.appendChild(a._tempBnd)}static get students(){return a._students}static get student(){return a._student}static get lang(){return a._lang}static get isDvlp(){return a._isDvlp}static get data_url(){return a._data_url}static get lesson(){return a._lesson}static get book(){return a._book}static get nextBook(){return a._nextBook}static get prevBook(){return a._prevBook}static get addOnHost(){return a._addOnHost}static setaddOnHost(e){a._addOnHost=e}static pub_load(e,t,o,i,s,r,l){a._lesson=i,a._book=o,a._nextBook=r,a._prevBook=l,a._students=[],e&&Array.isArray(e)&&e.forEach((e,t)=>{a._students[t]=n(e)}),a._student=n(t),s&&""!==s&&(a._addOnHost=s)}static pub_reloadStudents(e){s.getStudents((t,o)=>{for(;a._students.length>0;)a._students.pop();for(;a._students_inited.length>0;)a._students_inited.pop();for(let e=0,o=t.length;e<o;e++)a.isDvlp?a._students[e]=n(t[e]):a._students[e]=n({id:t[e].id,name:t[e].name,thumb:t[e].defaultThumbnail,avatar:t[e].profileThumbnail,nickname:""!==t[e].nickName?t[e].nickName:t[e].name,displayMode:t[e].displayMode,gender:t[e].gender,inited:!0}),console.log("student",t[e]),a._students_inited.push(t[e].id);e()})}static pub_parseStyle(e){return a._tempEl.style.cssText=e,a._tempEl.style}static pub_initAudio(){a._common_audio=document.getElementById("common_audio"),a._ding_audio=document.getElementById("ding_audio"),a._dingend_audio=document.getElementById("dingend_audio"),a._btn_audio=document.getElementById("btn_audio"),a._correct_audio=document.getElementById("correct_audio"),a._wrong_audio=document.getElementById("wrong_audio"),a._topad_audio=document.getElementById("topad_audio"),a._goodjob_audio=document.getElementById("goodjob_audio"),a._btn_back_audio=document.getElementById("btn_back_audio"),a._btn_page_audio=document.getElementById("btn_page_audio"),a._popup_audio=document.getElementById("popup_audio"),a._clock_audio=document.getElementById("clock_audio"),a._ts_bgm_audio=document.getElementById("ts_bgm_audio"),a._bs_audio=document.getElementById("bs_audio"),a._bb_audio=document.getElementById("bb_audio"),a._cd_audio=document.getElementById("cd_audio"),a._tc_audio=document.getElementById("tc_audio"),a._te_audio=document.getElementById("te_audio"),a._trg_bgm_audio=document.getElementById("trg_bgm_audio"),a._afc_audio=document.getElementById("afc_audio"),a._trs_audio=document.getElementById("trs_audio"),a._btn_choice_audio=document.getElementById("btn_choice_audio"),a._retry_audio=document.getElementById("retry_audio"),a._sorry_audio=document.getElementById("sorry_audio"),a._great_audio=document.getElementById("great_audio"),a._memorygame_flipcard_audio=document.getElementById("flipcard_audio"),a._ispy_gameclick_audio=document.getElementById("gameclick_audio"),a._game_timesetting_start_audio=document.getElementById("game_timesetting_start"),a._solution_btn_audio=document.getElementById("solution_btn_audio"),a._game_result_audio=document.getElementById("game_result_audio"),a._open_problom_audio=document.getElementById("open_problom_audio"),a._quiz_done_audio=document.getElementById("quiz_done_audio"),a._hit_up_audio=document.getElementById("hu_audio"),a._hit_down_audio=document.getElementById("hd_audio"),a._hit_good_audio=document.getElementById("hg_audio"),a._hit_wrong_audio=document.getElementById("hw_audio"),a._pick_presenter=document.getElementById("pick_presenter"),a._game_good_audio=document.getElementById("gg_audio")}static pub_playClock(){a._clock_audio&&(a._clock_audio.currentTime=4.5,a._clock_audio.play())}static pub_playPopup(){a._popup_audio&&(a._popup_audio.currentTime=0,a._popup_audio.play())}static pub_playBtnPage(){a._btn_page_audio&&(a._btn_page_audio.currentTime=0,a._btn_page_audio.play())}static pub_playBtnBack(){a._btn_back_audio&&(a._btn_back_audio.currentTime=0,a._btn_back_audio.play())}static pub_playGoodjob(){a._goodjob_audio&&(a._goodjob_audio.currentTime=0,a._goodjob_audio.play())}static pub_playDing(){a._ding_audio&&(a._ding_audio.currentTime=0,a._ding_audio.play())}static pub_playDingend(){a._dingend_audio&&(a._dingend_audio.currentTime=0,a._dingend_audio.play())}static pub_playToPad(){a._topad_audio&&(a._topad_audio.currentTime=0,a._topad_audio.play())}static pub_playBtnTab(){a._btn_audio&&(a._btn_audio.currentTime=0,a._btn_audio.play())}static pub_playCorrect(){a._correct_audio&&(a._correct_audio.currentTime=0,a._correct_audio.play())}static pub_playWrong(){a._wrong_audio&&(a._wrong_audio.currentTime=0,a._wrong_audio.play())}static pub_playTeamSelectBgm(){a._ts_bgm_audio&&(a._ts_bgm_audio.currentTime=0,a._ts_bgm_audio.play())}static pub_stopTeamSelectBgm(){a._ts_bgm_audio&&(a._ts_bgm_audio.pause(),a._ts_bgm_audio.currentTime=0)}static pub_playStartButton(){a._bs_audio&&(a._bs_audio.currentTime=0,a._bs_audio.play())}static pub_playBasicButton(){a._bb_audio&&(a._bb_audio.currentTime=0,a._bb_audio.play())}static pub_playCountDown(){a._cd_audio&&(a._cd_audio.currentTime=0,a._cd_audio.play())}static pub_playTimerClock(){a._tc_audio&&(a._tc_audio.currentTime=0,a._tc_audio.play())}static pub_stopTimerClock(){a._tc_audio&&(a._tc_audio.pause(),a._tc_audio.currentTime=0)}static pub_playTimerEnd(){a._te_audio&&(a._te_audio.currentTime=0,a._te_audio.play())}static pub_playResultGraph(){a._trg_bgm_audio&&(a._trg_bgm_audio.currentTime=0,a._trg_bgm_audio.play())}static pub_playFireworksClapping(){a._afc_audio&&(a._afc_audio.currentTime=0,a._afc_audio.play())}static pub_playTotalResult(){a._trs_audio&&(a._trs_audio.currentTime=0,a._trs_audio.play())}static pub_playChoiceBtn(){a._btn_choice_audio&&(a._btn_choice_audio.currentTime=0,a._btn_choice_audio.play())}static pub_playsorry(){a._sorry_audio&&(a._sorry_audio.currentTime=0,a._sorry_audio.play())}static pub_playretry(){a._retry_audio&&(a._retry_audio.currentTime=0,a._retry_audio.play())}static pub_playgreat(){a._great_audio&&(a._great_audio.currentTime=0,a._great_audio.play())}static pub_playFlipCard(){a._memorygame_flipcard_audio&&(a._memorygame_flipcard_audio.currentTime=0,a._memorygame_flipcard_audio.play())}static pub_playGameClick(){a._ispy_gameclick_audio&&(a._ispy_gameclick_audio.currentTime=0,a._ispy_gameclick_audio.play())}static pub_game_timesetting_start(){a._game_timesetting_start_audio&&(a._game_timesetting_start_audio.currentTime=0,a._game_timesetting_start_audio.play())}static pub_solution_btn_click(){a._solution_btn_audio&&(a._solution_btn_audio.currentTime=0,a._solution_btn_audio.play())}static pub_playGameresult(){a._game_result_audio&&(a._game_result_audio.currentTime=0,a._game_result_audio.play())}static pub_openProblom(){a._open_problom_audio&&(a._open_problom_audio.currentTime=0,a._open_problom_audio.play())}static pub_quizDone(){a._quiz_done_audio&&(a._quiz_done_audio.currentTime=0,a._quiz_done_audio.play())}static pub_pick_presenter(){a._pick_presenter&&(a._pick_presenter.currentTime=0,a._pick_presenter.play())}static pub_stop(){null!=a._common_audio.onended&&a._common_audio.onended.call(a._common_audio,new Event("ended")),a._common_audio.oncanplaythrough=null,isNaN(a._common_audio.duration)||a._common_audio.paused||a._common_audio.pause()}static pub_play(e,t){a.pub_stop(),e=i.nteString(e,"");const o=i.nteString(a._common_audio.getAttribute("src"),"");if(""===e&&""===o)return void(null!=t&&t(!0));""!==e&&o!==e&&(a._common_audio.src=e);const s=e=>{a._common_audio.onended=null,null!==t&&t(!0),a._common_audio.removeEventListener("error",s)};a._common_audio.onended=e=>{a._common_audio.onended=null,null!==t&&t(!!e),a._common_audio.removeEventListener("error",s)},a._common_audio.addEventListener("error",s),isNaN(a._common_audio.duration)?(a._common_audio.oncanplaythrough=e=>{0!==a._common_audio.currentTime&&(a._common_audio.currentTime=0),a._common_audio.play(),a._common_audio.oncanplaythrough=null},a._common_audio.load()):(0!==a._common_audio.currentTime&&(a._common_audio.currentTime=0),a._common_audio.oncanplaythrough=null,a._common_audio.play())}static pub_set(e,t,o){a._isDvlp=t,a._lang=o,s.set(t)}static pub_addInitedStudent(e){let t=!0;for(let o=0,i=a._students_inited.length;o<i;o++){a._students_inited[o]===e.id&&(t=!1)}t&&a._students_inited.push(e.id);const o=a._start_idx>0&&a._students.length>0&&a._students_inited.length>=a._students.length;return o&&(window.clearTimeout(a._start_idx),a._start_idx=-1),o}static pub_start(e){0===a._students.length||a._students_inited.length>=a._students.length?e():a._start_idx=window.setTimeout(e,2e3)}static pub_clear(){for(;a._students.length>0;)a._students.pop();for(;a._students_inited.length>0;)a._students_inited.pop()}static pub_playHitup(){a._hit_up_audio&&(a._hit_up_audio.currentTime=0,a._hit_up_audio.play())}static pub_playHitdown(){a._hit_down_audio&&(a._hit_down_audio.currentTime=0,a._hit_down_audio.play())}static pub_playHitgood(){a._hit_good_audio&&(a._hit_good_audio.currentTime=0,a._hit_good_audio.play())}static pub_playHitwrong(){a._hit_wrong_audio&&(a._hit_wrong_audio.currentTime=0,a._hit_wrong_audio.play())}static pub_playGamegood(){a._game_good_audio&&(a._game_good_audio.currentTime=0,a._game_good_audio.play())}}t.App=a,a._isMobile=!1,a._students=[],a._students_inited=[],a._student=null,a._lang="ko",a._isDvlp=!1,a._data_url="../data/",a._lesson="",a._book="",a._nextBook=!1,a._prevBook=!1,a._start_idx=-1,a.isStarted=!1,a._addOnHost="https://addonsapi.fel40.com"},function(e,t){e.exports=_},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(s,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function r(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayScoreAddSound=t.PlayBussorSound=t.PlayCorrectSound=t.PlayWrongSound=t.PlayCurtainSound=t.PlayWinnerSound=t.PlayGraphSound=t.PlaySelectRepresentorSound=t.PlayQuizSelectSound=t.PlayBasicButtonSound=t.PlayPlayButtonSound=t.PlaySoundAllStop=t.fnIsVisibleComponent=void 0;const s=o(4),n=o(3);t.fnIsVisibleComponent=e=>!1===e?{display:"block",opacity:0,pointerEvents:"none"}:{};let a=null;t.PlaySoundAllStop=e=>i(void 0,void 0,void 0,(function*(){const t=document.getElementById("common_audio"),o=document.getElementById("bb_audio"),i=document.getElementById("bs_audio"),n=document.getElementById("tc_audio"),r=document.getElementById("te_audio"),l=document.getElementById("cd_audio"),p=document.getElementById("afc_audio"),c=document.getElementById("wrong_audio"),u=document.getElementById("correct_audio"),d=document.getElementById("ding_audio"),h=document.getElementById("trs_audio");yield(t.pause(),o.pause(),i.pause(),n.pause(),r.pause(),l.pause(),p.pause(),c.pause(),u.pause(),d.pause(),h.pause(),void(a=!1)),s.delay(()=>{e()},100)})),t.PlayPlayButtonSound=()=>{a=!0,t.PlaySoundAllStop(n.App.pub_playBtnPage)},t.PlayBasicButtonSound=()=>{t.PlaySoundAllStop(n.App.pub_playBasicButton)},t.PlayQuizSelectSound=()=>{t.PlaySoundAllStop(n.App.pub_playStartButton)},t.PlaySelectRepresentorSound=()=>{t.PlaySoundAllStop(n.App.pub_playTimerClock)},t.PlayGraphSound=()=>{t.PlaySoundAllStop(n.App.pub_playTimerEnd)},t.PlayWinnerSound=()=>{t.PlaySoundAllStop(n.App.pub_playCountDown)},t.PlayCurtainSound=e=>{t.PlaySoundAllStop(n.App.pub_playFireworksClapping),a=null,s.delay(()=>{null===a&&(console.log("crutainSound",a),e())},2e3)},t.PlayWrongSound=()=>{t.PlaySoundAllStop(n.App.pub_playWrong)},t.PlayCorrectSound=()=>{t.PlaySoundAllStop(n.App.pub_playCorrect)},t.PlayBussorSound=()=>{console.log("PlayBussorSound"),t.PlaySoundAllStop(n.App.pub_playDing)},t.PlayScoreAddSound=()=>{t.PlaySoundAllStop(n.App.pub_playTotalResult)}},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(s,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function r(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.postAttention=t.postViewDiv=t.getPreviewDmsResult=t.getPreviewResult=t.showSGiftBox=t.showSLivePointPop=t.launchSTool=t.clearPenTool=t.hidePenTool=t.showPenTool=t.showRecordTool=t.showSendButton=t.alertToStudent=t.showSLoading=t.showSMathKit=t.clearSPenTool=t.takePicture=t.uploadInclassReport=t.stopVideoRecord=t.startVideoRecord=t.switchCamera=t.stopCamera=t.pauseRecordPlayer=t.playRecordPlayer=t.startCustomCamera=t.startCamera=t.getStudents=t.uploadFileToServerMulti=t.uploadImageToServer=t.uploadFileToServer=t.stopVoiceRecord=t.startVoiceRecord=t.sendTeacher=t.disableSoftwareKeyboard=t.sendPAD=t.sendPADToID=t.sendLauncher=t.uploadStudentReport=t.addStudentForStudentReportType6=t.hideStudentReportListPage=t.showStudentReportListPage=t.showStudentReportUI=t.hideStudentReportUI=t.startStudentReportProcess=t.finishContentPage=t.showTMathKit=t.alertToTeacher=t.showTLoading=t.clearTPenTool=t.getBookCaptureInfo=t.uploadTImageToServer=t.useFractionBar=t.logOut=t.exitClass=t.getNaviInfo=t.launchPadTool=t.launchTool=t.exitBook=t.gotoBookByKey=t.gotoBook=t.set=void 0;const s=o(4);let n=!1;t.set=function(e){n=e},t.gotoBook=function(e,t){if(console.log("felsocket gotoBook",e,t),!n)try{window.tsoc_o.gotoBook(e,t)}catch(e){}},t.gotoBookByKey=function(e){if(console.log("felsocket gotoBookByKey",e),!n)try{window.tsoc_o.gotoBookByKey(e)}catch(e){}},t.exitBook=function(){if(console.log("felsocket exitBook"),!n)try{window.tsoc_o.exitBook()}catch(e){}},t.launchTool=function(e){if(console.log("felsocket launchTool",e),!n)try{window.tsoc_o.launchTool(e)}catch(e){}},t.launchPadTool=function(e){if(console.log("felsocket launchPadTool",e),!n)try{window.tsoc_o.launchPadTool(e)}catch(e){}},t.getNaviInfo=function(e){if(console.log("felsocket getNaviInfo",e),!n)try{window.tsoc_o.getNaviInfo(e)}catch(e){}},t.exitClass=function(){if(console.log("felsocket exitClass"),!n)try{window.tsoc_o.exitClass()}catch(e){}},t.logOut=function(){if(console.log("felsocket logOut"),!n)try{window.tsoc_o.logOut()}catch(e){}},t.useFractionBar=function(){if(console.log("felsocket useFractionBar"),!n)try{window.tsoc_o.useFractionBar()}catch(e){}},t.uploadTImageToServer=function(e,t,o,i){if(console.log("felsocket uploadTImageToServer",t,o,i),!n)try{window.tsoc_o.uploadImageToServer(e,t,o,i)}catch(e){}},t.getBookCaptureInfo=function(e){if(console.log("felsocket getBookCaptureInfo"),!n)try{window.tsoc_o.getBookCaptureInfo(e)}catch(e){}},t.clearTPenTool=function(){if(console.log("felsocket clearTPenTool"),!n)try{window.tsoc_o.clearPenTool()}catch(e){}},t.showTLoading=function(e){if(console.log("felsocket showTLoading",e),!n)try{window.tsoc_o.showLoading(e)}catch(e){}},t.alertToTeacher=function(e){if(console.log("felsocket alertToTeacher",e),!n)try{window.tsoc_o.alert(e)}catch(e){}},t.showTMathKit=function(e){if(console.log("felsocket showTMathKit",e),!n)try{window.tsoc_o.showMathKit(e)}catch(e){}},t.finishContentPage=function(){if(!n)try{window.tsoc_o.finishContentPage()}catch(e){}},t.startStudentReportProcess=function(e,t,o){if(!n)try{window.tsoc_o.startStudentReportProcess(e,t,o)}catch(e){}},t.hideStudentReportUI=function(){if(!n)try{window.tsoc_o.hideStudentReportUI()}catch(e){}},t.showStudentReportUI=function(){if(!n)try{window.tsoc_o.showStudentReportUI()}catch(e){}},t.showStudentReportListPage=function(){if(!n)try{window.tsoc_o.showStudentReportListPage()}catch(e){}},t.hideStudentReportListPage=function(){if(!n)try{window.tsoc_o.hideStudentReportListPage()}catch(e){}},t.addStudentForStudentReportType6=function(e){if(!n)try{window.tsoc_o.addStudentForStudentReportType6(e)}catch(e){}},t.uploadStudentReport=function(e,t,o){if(!n)try{window.psoc_o.uploadStudentReport(e,t,o)}catch(e){}},t.sendLauncher=function(e,t){if(5!==e||n)if(6!==e||n)if(7!==e||n){if(8===e)if(console.log("felsocket gotoPrevBook"),n)try{window.top.tsoc_o.gotoPrevBook()}catch(e){}else try{window.tsoc_o.gotoPrevBook()}catch(e){}else if(9===e)if(console.log("felsocket gotoNextBook"),n)try{window.top.tsoc_o.gotoNextBook()}catch(e){}else try{window.tsoc_o.gotoNextBook()}catch(e){}}else try{window.tsoc_o.setTitleBar(t)}catch(e){}else try{window.tsoc_o.showTitleBar()}catch(e){}else try{window.tsoc_o.hideTitleBar()}catch(e){}},t.sendPADToID=function(e,t,o){const i={type:t,data:o};if(n)try{window.top.tsoc_o.sendPADToID(e,i)}catch(e){}else try{window.tsoc_o.sendPADToID(e,i)}catch(e){}},t.sendPAD=function(e,t){const o={type:e,data:t};if(n)try{window.top.tsoc_o.sendAll(o)}catch(e){}else try{window.tsoc_o.sendAll(o)}catch(e){}},t.disableSoftwareKeyboard=function(){try{window.psoc_o.disableSoftwareKeyboard()}catch(e){}},t.sendTeacher=function(e,t){const o={type:e,data:t};if(n)try{null!==window.opener&&window.opener.tsoc_o.sendTeacher(o)}catch(e){}else try{window.psoc_o.sendTeacher(o)}catch(e){}},t.startVoiceRecord=function(){try{window.psoc_o.startVoiceRecord()}catch(e){}},t.stopVoiceRecord=function(){try{window.psoc_o.stopVoiceRecord()}catch(e){}},t.uploadFileToServer=function(e){try{window.psoc_o.uploadFileToServer(e)}catch(e){}},t.uploadImageToServer=function(e,t,o,i){try{window.psoc_o.uploadImageToServer(e,t,o,i)}catch(e){}},t.uploadFileToServerMulti=function(e){try{window.psoc_o.uploadFileToServerMulti(e)}catch(e){}},t.getStudents=function(e){if(n)if(window.top.tsoc_o)try{window.top.tsoc_o.getStudents(e)}catch(e){}else e([],!1);else try{window.tsoc_o.getStudents(e)}catch(e){}},t.startCamera=function(e){if(!n)try{window.psoc_o.startCamera(e)}catch(e){}},t.startCustomCamera=function(e){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"startCustomCamera",msg:e},"*")},t.playRecordPlayer=function(){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"playRecordPlayer"},"*")},t.pauseRecordPlayer=function(){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"pauseRecordPlayer"},"*")},t.stopCamera=function(){if(!n)try{window.psoc_o.stopCamera()}catch(e){}},t.switchCamera=function(e){if(!n)try{window.psoc_o.switchCamera(e)}catch(e){}},t.startVideoRecord=function(){if(!n)try{window.psoc_o.startVideoRecord()}catch(e){}},t.stopVideoRecord=function(){if(!n)try{window.psoc_o.stopVideoRecord()}catch(e){}},t.uploadInclassReport=function(e){if(!n)try{window.tsoc_o.uploadInclassReport(e)}catch(e){}},t.takePicture=function(e){if(!n)try{window.psoc_o.takePicture(e)}catch(e){}},t.clearSPenTool=function(){if(console.log("felsocket clearPenTool"),!n)try{window.psoc_o.clearPenTool()}catch(e){}},t.showSMathKit=function(e){if(console.log("felsocket showSMathKit",e),!n)try{window.psoc_o.showMathKit(e)}catch(e){}},t.showSLoading=function(e){if(console.log("felsocket showSLoading",e),!n)try{window.psoc_o.showLoading(e)}catch(e){}},t.alertToStudent=function(e){if(console.log("felsocket alertToStudent",e),!n)try{window.psoc_o.alert(e)}catch(e){}},t.showSendButton=function(e,t){if(console.log("felsocket showSendButton"),!n)try{window.psoc_o.showSendButton(e,t)}catch(e){}},t.showRecordTool=function(e){if(console.log("felsocket showRecordTool",e),!n)try{window.psoc_o.showRecordTool(e)}catch(e){}},t.showPenTool=function(){if(console.log("felsocket showPentool"),!n)try{window.psoc_o.showPenTool()}catch(e){}},t.hidePenTool=function(){if(console.log("felsocket hidePentool"),!n)try{window.psoc_o.hidePenTool()}catch(e){}},t.clearPenTool=function(){if(console.log("felsocket clearPenTool"),!n)try{window.psoc_o.clearPenTool()}catch(e){}},t.launchSTool=function(e){if(console.log("felsocket launchTool",e),!n)try{window.psoc_o.launchTool(e)}catch(e){}},t.showSLivePointPop=function(e){if(console.log("felsocket showLivePointPop"),!n)try{window.psoc_o.showLivePointPop(e)}catch(e){}},t.showSGiftBox=function(e,t){if(console.log("felsocket showGiftBox"),!n)try{window.psoc_o.showGiftBox(e,t)}catch(e){}},t.getPreviewResult=function(e){return i(this,void 0,void 0,(function*(){return new Promise(t=>{if(n)t([]);else{let o=!1;const i=e=>{o||(o=!0,t(e))};window.tsoc_o.getPreviewResult(i,e),s.delay(()=>{o||(o=!0,t([]))},5e3)}})}))},t.getPreviewDmsResult=function(e){return i(this,void 0,void 0,(function*(){return new Promise(t=>{if(n)t([]);else{let o=!1;const i=e=>{o||(o=!0,t(e))};window.tsoc_o.getPreviewDmsResult(i,e),s.delay(()=>{o||(o=!0,t([]))},5e3)}})}))},t.postViewDiv=function(e){return i(this,void 0,void 0,(function*(){console.log("postViewDiv",e),window.top.postMessage({type:"viewDiv",msg:e,from:"content"},"*")}))},t.postAttention=function(e){return i(this,void 0,void 0,(function*(){console.log("postAttention",e),window.top.postMessage({type:"attention",msg:e,from:"content"},"*")}))}},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(s,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function r(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.useTeacher=t.tContext=t.TeacherConsumer=t.TeacherProvider=t.TeacherContext=void 0;const n=o(0),a=o(4),r=o(2),l=o(3),p=o(6),c=o(27),u=o(5);var d;!function(e){e[e.READY=0]="READY",e[e.SENDING=1]="SENDING",e[e.SENDED=2]="SENDED",e[e.COMPLETE=3]="COMPLETE"}(d||(d={}));class h extends c.TeacherContextBase{constructor(){super(),this._checkStudent=null,this.teamSetting=()=>{},this.is_quizsolving=!1,this.resetTeamInfo=()=>{let e=null,t=null;if(this.state.teamsinfo.map(o=>{"red"===o.name&&(e=o),"green"===o.name&&(t=o)}),null===e||null===t)return;let o=e.teams,i=t.teams,s=[],n=[];l.App.students.map((e,t)=>{const a=o.findIndex(t=>t.id+""==e.id+""),r=i.findIndex(t=>t.id+""==e.id+"");-1!==a&&s.push(e),-1!==r&&n.push(e),-1===r&&-1===a&&(s.push(e),n.push(e))}),e.teams=[...s],t.teams=[...n]},this.state.prog="",this.state.movefast="",this.state.teamsinfo=[],this.state.team_red=[],this.state.team_green=[],this.state.isend=!1,this.prepareQuiz(),this.actions.getData=()=>this._data,this.actions.setProg=e=>this.setProg(e),this.actions.getCurriculum=()=>this._curriculum,this.actions.gotoDirection=()=>this._setViewDiv("direction"),this.actions.gotoNextBook=()=>{p.sendLauncher(9,null)},this.actions.onShuffle=e=>{this.teamSetting=e},this.actions.startQuiz=()=>{this.is_quizsolving=!0},this.actions.endQuiz=()=>{this.is_quizsolving=!1},this.actions.toggleNavi=e=>{this.state.navi=Object.assign(Object.assign({},this.state.navi),{view:e})},this.actions.onDirectionEnded=()=>{"direction"===this.state.viewDiv&&(this._setViewDiv("content"),this.setProg("teamselect"),null===this._checkStudent&&(this._checkStudent=setInterval(()=>{l.App.pub_reloadStudents(()=>{this.resetTeamInfo()})},5e3))),l.App.isStarted=!0},this.actions.naviLeft=()=>{"direction"!==this.state.viewDiv&&("teamquiz"===this.state.prog||"teamselect"===this.state.prog||(document.getElementsByTagName("body")[0].className="movingTeams")),a.delay(()=>{if(this.state.movefast="",u.PlayPlayButtonSound(),"direction"===this.state.viewDiv)p.sendLauncher(8,null);else if("teamquiz"===this.state.prog)this.setProg("teamselect");else if("teamselect"===this.state.prog)this.setProg(""),this.actions.gotoDirection();else{if("end"===this.state.prog){this.state.movefast="move_fast";let e={msgtype:"show_team",teamsinfo:JSON.stringify(this.state.teamsinfo),team_red:JSON.stringify(this.state.team_red),team_green:JSON.stringify(this.state.team_green)};l.App.pub_reloadStudents(()=>s(this,void 0,void 0,(function*(){p.sendPAD(10,JSON.stringify(e))})))}this.setProg("teamselect")}},10)},this.actions.naviRight=()=>{a.delay(()=>{this.state.movefast="",u.PlayPlayButtonSound(),"direction"===this.state.viewDiv?this.state.directionON=!1:"teamquiz"===this.state.prog||"end"===this.state.prog||"teamselect"===this.state.prog?p.sendLauncher(9,null):this.setProg("end")},10)},this.actions.getQuizs=e=>({quizs:this._data.quizs.map(t=>(e&&(t.is_solved=!1),t))}),this.actions.setQuizReceiver=e=>{this.quizReceiver={},this.quizReceiver.data=null,this.quizReceiver.quizIdx=e,this.state.quiz=this._data.quizs[e],this.state.quiz.quizIdx=e}}_setViewDiv(e){super._setViewDiv(e)}receive(e){if(super.receive(e),e.data&&11===e.type)if("connected_pad"===e.data.msgtype){if(0!==this.state.bookid&&this._curriculum){let e={msgtype:"curriculum",curriculum:JSON.stringify(this._curriculum),bookid:this.state.bookid+0};l.App.pub_reloadStudents(()=>s(this,void 0,void 0,(function*(){p.sendPAD(10,JSON.stringify(e))})))}}else{const t=JSON.parse(e.data);if("quiz_solve"===t.msgtype){const e=Object.assign(Object.assign({},t.solved),{selected:0});this.is_quizsolving&&e.teamname&&l.App.students.map(t=>{t.id+""==e.id+""&&e.quizIdx+""==this.quizReceiver.quizIdx+""&&this.state.teamsinfo.map(o=>{if(-1!==e.teamname.indexOf(o.name)){const i=o.solved[this.quizReceiver.quizIdx].findIndex(e=>e.id===t.id);console.log("hasStudent :: ",i),-1===i&&o.solved[this.quizReceiver.quizIdx].push(Object.assign(Object.assign({},e),t))}})})}}if(1===e.type||3===e.type||0===e.type){let t=10;const o=e.data;0===this.state.bookid&&(t=3e3),a.delay(()=>{let t={};if("direction"===this.state.viewDiv)t={msgtype:"curriculum",curriculum:JSON.stringify(this._curriculum),bookid:this.state.bookid+0};else if("teamquiz_setting"===this.state.prog){if(t={msgtype:"quiz_prepare",curriculum:JSON.stringify(this._curriculum),bookid:this.state.bookid+0,quizIdx:this.state.quiz?this.state.quiz.quizIdx:0},o&&o.id){let e=!1;this.state.teamsinfo.map(t=>{-1!==t.teams.map(e=>e.id+"").indexOf(o.id)&&(e=!0)}),this.resetTeamInfo()}}else"teamquiz"===this.state.prog&&(t={msgtype:"quiz_start",quiz:this.state.quiz.question,curriculum:JSON.stringify(this._curriculum),bookid:this.state.bookid+0,quizIdx:this.state.quiz?this.state.quiz.quizIdx:0,quizpoint:this.state.quiz.point},this.resetTeamInfo());l.App.pub_reloadStudents(()=>s(this,void 0,void 0,(function*(){e.data&&e.data.id&&p.sendPADToID(e.data.id,10,JSON.stringify(t))})))},t)}}setData(e){let t=e.quizs.map(e=>{let t="";""!==e.q_image_s&&(t=e.q_image_s),""!==e.q_image_b&&(t=e.q_image_b);return{type:e.type,question:{text:e.q_text,audio:e.q_audio,image_s:e.q_image_s,image_b:e.q_image_b},solution_question:{text:e.q_text,audio:e.q_audio,image:t},solution_solution:{text:e.ss_text,image:e.ss_image}}});this._data={quizs:t}}prepareQuiz(){this.state.teamsinfo.map(e=>{e.solved=[],e.livePoint=0,this._data.quizs.map(t=>{e.solved.push([])})})}setProg(e){l.App.pub_reloadStudents(()=>s(this,void 0,void 0,(function*(){"teamselect"===e&&(this.state.navi=Object.assign(Object.assign({},this.state.navi),{view:!0}),this.state.isend=!1),"teamquiz"===e&&("end"!==this.state.prog&&(!1===this.state.isend&&this.actions&&this.actions.getQuizs&&this.actions.getQuizs(!0),this.prepareQuiz()),this.state.navi=Object.assign(Object.assign({},this.state.navi),{view:!0})),"end"===e&&(this.state.navi=Object.assign(Object.assign({},this.state.navi),{view:!1}),this.state.isend=!0),this.state.prog=e})))}notifyNaviInfo(e,t,o,i,n,a){this._curriculum=e,this.state.bookid=t,this.state.classid=o;let r={msgtype:"curriculum",curriculum:JSON.stringify(e),bookid:t+0};l.App.pub_reloadStudents(()=>s(this,void 0,void 0,(function*(){p.sendPAD(10,JSON.stringify(r))})))}}i([r.observable],h.prototype,"state",void 0),i([r.observable],h.prototype,"is_quizsolving",void 0),i([r.action],h.prototype,"_setViewDiv",null),t.TeacherContext=h;const m=new h;t.tContext=m;const{Provider:_,Consumer:v}=n.createContext(m);t.TeacherConsumer=v;class f extends n.Component{render(){return n.createElement(_,{value:m},this.props.children)}}t.TeacherProvider=f,t.useTeacher=function(e){return function(t){return n.createElement(v,null,t=>n.createElement(e,Object.assign({},t)))}}},function(e,t,o){"use strict";e.exports=o(20)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._toStringTimestamp=t.getDateStr=t.nteArray=t.intToHTMLcolor=t.nteBool=t.nteString=t.nteFloat=t.nteInt=t.nteUInt=t.getUnicUrl=t.getUnicNum=t.getUnic=void 0,Date.now||(Date.now=function(){return(new Date).getTime()});let i=0;function s(){return n().toString(36)}function n(){const e=Date.now();return e>i?i=e:i+=1,i}t.getUnic=s,t.getUnicNum=n,t.getUnicUrl=function(e){if(!e)return"";let t=e=e.trim();return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")||(t=t.indexOf("?")>0?t+"&t="+s():t+"?t="+s()),t},t.nteUInt=function(e,t){if(null==e)return t;if("number"==typeof e)return isNaN(e)||e<0?t:Math.round(e);{const o=parseInt(String(e),10);return isNaN(o)||o<0?t:o}},t.nteInt=function(e,t){if(null==e)return t;if("number"==typeof e)return Math.round(e);{const o=parseInt(String(e),10);return isNaN(o)?t:o}},t.nteFloat=function(e,t){if(null==e)return t;if("number"==typeof e)return e;{const o=parseFloat(String(e));return isNaN(o)?t:o}},t.nteString=function(e,t){return null==e?t:String(e)},t.nteBool=function(e,t){if(null==e)return t;if("boolean"==typeof e)return e;const o=String(e);return"true"===o||"false"!==o&&t},t.intToHTMLcolor=function(e){let t,o,i,s=e-0;t=(255&s)<<16,o=65280&s,i=(16711680&s)>>>16,s=t|o|i;let n=s.toString(16);return n="#000000".substring(0,7-n.length)+n,n},t.nteArray=function(e){if(e){if(Array.isArray(e))return e;if("string"==typeof e){const t=e;if(t.indexOf("[")>=0&&t.indexOf("]")>0)try{return JSON.parse(t)}catch(e){}}const t=[];return t.push(e),t}return[]},t.getDateStr=function(e="."){const t=new Date,o=t.getFullYear(),i=t.getMonth()+1,s=t.getDate();return o+e+(i<10?"0"+i:""+i)+e+(s<10?"0"+s:""+s)},t._toStringTimestamp=function(e){let t;const o=e.getFullYear();let i=e.getMonth()+1+"";parseInt(i,10)<10&&(i="0"+i);let s=e.getDate()+"";return parseInt(s,10)<10&&(s="0"+s),t=o+"-"+i+"-"+s+" "+e.toTimeString().substr(0,8),t}},function(e,t){e.exports=ReactIdSwiper},function(e,t,o){"use strict";var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(s,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function r(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getBounds=t.getTimeStr=t.wait=void 0;const s=o(4);t.wait=function(e){return i(this,void 0,void 0,(function*(){return new Promise(t=>{s.delay(t,e)})}))},t.getTimeStr=function(e,t){const o=Math.round(t/1e3);let i=Math.round(e/1e3),s=Math.floor(i/60),n=Math.floor(s/60),a="";return i%=60,s%=60,n>0||o>=3600?(a=n+":",a+=s>=10?s+":":"0"+s+":"):o>=600?a+=s>=10?s+":":"0"+s+":":a=s+":",a+=i>=10?i:"0"+i,a},t.getBounds=function(e){const t={left:0,top:0,width:0,height:0};if(!e)return t;try{const o=e.getBoundingClientRect();t.left=o.left,t.top=o.top,t.width=o.width,t.height=o.height}catch(e){}const o=e.ownerDocument,i=o.body,s=o.documentElement;t.left=t.left-(s.clientLeft||i.clientLeft||0),t.top=t.top-(s.clientTop||i.clientTop||0);const n=o.defaultView;return t.left+=n.pageXOffset||s.scrollLeft||i.scrollLeft,t.top+=n.pageYOffset||s.scrollTop||i.scrollTop,t}},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(s,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function r(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CoverPopup=void 0;const n=o(0),a=o(2),r=o(1),l=o(11);let p=class extends n.Component{constructor(){super(...arguments),this.m_state="closed",this._open=()=>s(this,void 0,void 0,(function*(){"closed"===this.m_state&&(this.m_state="opening",yield l.wait(100),this.m_state="open")})),this._close=()=>s(this,void 0,void 0,(function*(){"open"===this.m_state&&(this.m_state="closing",yield l.wait(400),this.props.onClosed(),this.m_state="closed")}))}componentDidUpdate(e){this.props.view!==e.view&&(this.props.view?this._open():this._close())}render(){return n.createElement("div",{className:this.props.className+" "+this.m_state},this.props.children)}};i([a.observable],p.prototype,"m_state",void 0),p=i([r.observer],p),t.CoverPopup=p},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.AlertPopup=t.WarningPopup=t.StrategyPopup=void 0;const s=o(0),n=o(2),a=o(1),r=o(12),l=o(4),p=o(3);let c=class extends s.Component{componentDidUpdate(e){if(this.props.view&&!e.view){if(!this.props.button){let e=this.props.delay;e||(e=800),l.delay(()=>{this.props.onComplete&&this.props.onComplete()},e)}}else!this.props.view&&e.view}render(){const{type:e}=this.props;let t="";0===e?t="The teacher has stopped you from the activity. After 3 seconds, only the contents has been created so far will be submitted.":1===e?t="All students are already in progress. If you restart, existing data will be deleted. Are you sure you want to request the submission?":2===e?t="You can share a solution only in the problem solving state.":3===e?t="Do you want to save the current learning screen? If there is already saved data, the current data will be overwritten.":4===e?t="Picture not taken.\nYou have reached the maximum number of pictures available.":5===e&&(t="For this activity, We recommend students to wear a headset or an earphone with a microphone.");let o="exclamation";return 4===e?o="nocamera":5===e&&(o="headset"),s.createElement("div",{className:"alertpop strategy"+(this.props.view?" show":"")},s.createElement("div",{className:"alertpop-inner"},s.createElement("div",{className:o}),s.createElement("div",{className:"ment"},t),s.createElement("div",{className:"buttons"+(this.props.isSingle?" single":"")+(this.props.button?"":" hide")},s.createElement("button",{className:"btn cancel",onClick:this.props.onCancel},"Cancel"),s.createElement("button",{className:"btn ok",onClick:this.props.onOk},"Ok"))))}};c=i([a.observer],c),t.StrategyPopup=c;let u=class extends s.Component{constructor(){super(...arguments),this.second=3,this.interval=null}componentDidUpdate(e){if(this.props.view&&!e.view){if(this.second=3,!this.props.button){let e=this.props.delay;e||(e=800),this.interval=setInterval(()=>{this.second--,0===this.second&&(this.props.onComplete&&this.props.onComplete(),null!==this.interval&&clearInterval(this.interval))},1e3)}}else!this.props.view&&e.view&&(null!==this.interval&&clearInterval(this.interval),this.props.onComplete&&this.props.onComplete())}render(){const{type:e}=this.props;let t="";return 0===e&&(t=`Submit your answer within <strong>${this.second} seconds.</strong>`),s.createElement("div",{className:"warningpopup",style:{display:this.props.view?"":"none"}},s.createElement("div",{className:"msg",dangerouslySetInnerHTML:{__html:t}}))}};i([n.observable],u.prototype,"second",void 0),u=i([a.observer],u),t.WarningPopup=u;class d extends s.Component{constructor(){super(...arguments),this._onOk=()=>{this.props.onOk&&this.props.onOk()},this._onClose=()=>{this.props.onClose&&this.props.onClose()}}componentDidUpdate(e){this.props.view&&!e.view||!this.props.view&&e.view&&p.App.pub_playBtnTab()}render(){const{view:e,msg:t,isSingle:o,msgclass:i}=this.props;return s.createElement(r.CoverPopup,{className:"alert_popup",view:e,onClosed:this.props.isSingle?this._onOk:this._onClose},s.createElement("div",{className:"pop_box"},s.createElement("span",{className:"ico_alert"}),s.createElement("span",{className:"text"+(i&&""!==i?" "+i:""),dangerouslySetInnerHTML:{__html:t}}),s.createElement("div",{className:"btns"},s.createElement("button",{className:"btn_cancel",onClick:this._onClose,style:{display:o?"none":""}},s.createElement("span",null,"Cancel")),s.createElement("button",{className:"btn_ok",onClick:this._onOk},s.createElement("span",null,"OK")))))}}t.AlertPopup=d},function(e,t,o){"use strict";o.r(t)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=o(0),s=o(3);class n extends i.Component{componentDidUpdate(e){this.props.url!==e.url&&this.props.changePlay(!1),this.props.play!==e.play&&(this.props.play?s.App.pub_play(this.props.url,()=>{}):s.App.pub_stop())}onClick(){this.props.changePlay(!this.props.play)}render(){return i.createElement("button",{className:"sound_button",onClick:()=>this.onClick()})}}t.default=n},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=o(0);t.default=e=>{const[t,o]=i.useState(i.createElement(i.Fragment,null)),[s,n]=i.useState("defaultImg_f");return i.useEffect(()=>{let t=i.createElement(i.Fragment,null);const s="1"===e.displayMode&&(""===e.thumbnail||!e.thumbnail),a="2"===e.displayMode&&(""===e.avatar||!e.avatar);t=(s||a)&&e.name&&e.name.length>=2?i.createElement("span",{className:"text"},e.name[0].toUpperCase()+e.name[1].toUpperCase()):"1"===e.displayMode&&""!==e.thumbnail?i.createElement("img",{src:e.thumbnail}):i.createElement("img",{src:e.avatar}),o(t),"1"!==e.displayMode||""!==e.thumbnail&&e.thumbnail?n(""):n("F"===e.gender?"defaultImg_f":"defaultImg_m")},[e.displayMode,e.name,e.thumbnail,e.avatar,e.gender]),i.createElement("div",{className:"custom_thumbnail "+e.className+" "+s+(""!==e.thumbnail?" no-bold":""),onClick:t=>{e.onClick&&e.onClick(t)}},t)}},function(e,t,o){e.exports=o(18)},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const i=o(8),s=o(0),n=o(21),a=o(3),r=o(6),l=o(22);i.setConfig({ErrorOverlay:e=>s.createElement("div",null)});const p={clear:a.App.pub_clear,importLink:l.importLink,importHTML:l.importHTML};let c;c=o(23);let u=!1;const d=c,h=d.default,m=d.AppProvider,_=d.appContext;p.set=(e,t,o)=>{a.App.pub_set(e,t,o),_.setData(e)},p.render=()=>{a.App.pub_initAudio(),n.render(s.createElement(m,null,s.createElement(h,null)),document.getElementById("wrap"))},p.init=(e,t,o,i,s,n)=>{a.App.pub_load(e,null,t,o,i,s,n)},p.start=()=>{u=!0,setTimeout(()=>_.start(),500)},p.receive=e=>{if(4===e.type){const t=e.data;u?t&&t.id&&""!==t.id&&(a.App.isStarted?r.sendPADToID(t.id,0,null):r.sendPADToID(t.id,1,null)):a.App.pub_addInitedStudent(t)&&(u||(u=!0,_.start()))}else _.receive(e)},p.teachingTool=e=>{},p.notifyNaviInfo=(e,t,o,i,s,n)=>{_.notifyNaviInfo(e,t,o,i,s,n)},p.notifyBookCaptureInfo=e=>{_.notifyBookCaptureInfo(e)},p.notifyUploadToServerResult=e=>{_.uploaded(e)},p.notifyUploadToServerMultiResult=e=>{_.multiUploaded(e)},p.notifyAlert=e=>{_.notifyAlert(e)},p.notifyPenToolState=(e,t)=>{_.notifyPenToolState(e,t)},p.notifyHamburgerMenuClicked=e=>{_.notifyHamburgerMenuClicked(e)},p.callThreeminState=()=>{_.callThreeminState()},o(60),e.app_o=p}).call(this,o(19))},function(e,t){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(e){"object"==typeof window&&(o=window)}e.exports=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,s=(i=o(0))&&"object"==typeof i&&"default"in i?i.default:i;function n(e){return n.warnAboutHMRDisabled&&(n.warnAboutHMRDisabled=!0,console.error("React-Hot-Loader: misconfiguration detected, using production version in non-production environment."),console.error("React-Hot-Loader: Hot Module Replacement is not enabled.")),s.Children.only(e.children)}n.warnAboutHMRDisabled=!1;var a=function e(){return e.shouldWrapWithAppContainer?function(e){return function(t){return s.createElement(n,null,s.createElement(e,t))}}:function(e){return e}};a.shouldWrapWithAppContainer=!1;t.AppContainer=n,t.hot=a,t.areComponentsEqual=function(e,t){return e===t},t.setConfig=function(){},t.cold=function(e){return e},t.configureComponent=function(){}},function(e,t){e.exports=ReactDOM},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importLink=t.importHTML=void 0,t.importHTML=function(e){return new Promise((t,o)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="document",i.onload=e=>{if(!e)return;const s=i.response;s&&s.body&&s.body.firstElementChild?t(s.body.firstElementChild):s&&s.documentElement?t(s.documentElement):o("error")},i.onerror=e=>{o(e)},i.send(null)})},t.importLink=function(e,t){return new Promise((t,o)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="document",i.onload=e=>{if(!e)return;const o=i.response;t(o)},i.onerror=e=>{o(e)},i.send(null)})}},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.appContext=t.AppProvider=void 0;const i=o(0),s=o(8);o(10).default;o(25),o(26);const n=o(7);Object.defineProperty(t,"appContext",{enumerable:!0,get:function(){return n.tContext}}),Object.defineProperty(t,"AppProvider",{enumerable:!0,get:function(){return n.TeacherProvider}});const a=o(29),r=o(31),l=o(34),p=o(53),c=o(56);class u extends i.Component{render(){return i.createElement(i.Fragment,null,i.createElement("div",{id:"preload_hidden"}),i.createElement("div",{className:"content-container"},i.createElement(a.default,null),i.createElement(r.default,null),i.createElement(l.default,null),i.createElement(c.default,null)),i.createElement(p.default,null))}}t.default=s.hot(e)(u)}).call(this,o(24)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,o){"use strict";o.r(t)},function(e,t,o){"use strict";o.r(t)},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.TeacherContextBase=void 0;const s=o(2),n=o(3),a=o(6),r=o(28);class l{constructor(){this._naviLeftFnc=null,this._naviRightFnc=null,this.state={viewDiv:"direction",directionON:!1,navi:{view:!1,enableLeft:!1,enableRight:!1},svg_bg:{view:!0,bPlay:!1,viewCharactor:!0},loading:!1,retCnt:0,numOfStudent:0,bookid:0,bookkey:0,curriculumid:0,classid:0,unitid:0,lessonid:0,conceptLibiary:{view:!1,datatype:"grade",resultmode:!1}},this.actions={onDirectionEndStart:()=>{"direction"===this.state.viewDiv&&a.sendPAD(3,null)},onDirectionEnded:()=>{"direction"===this.state.viewDiv&&this._setViewDiv("content"),n.App.isStarted=!0},setNaviView:e=>{this.state.navi.view=e},setNavi:(e,t)=>{this.state.navi.enableLeft=e,this.state.navi.enableRight=t},setNaviFnc:(e,t)=>{this._naviLeftFnc=e,this._naviRightFnc=t},naviLeft:()=>{"direction"===this.state.viewDiv?a.sendLauncher(8,null):(n.App.pub_playBtnPage(),this._naviLeftFnc?this._naviLeftFnc():this._setViewDiv("direction"))},naviRight:()=>{"direction"===this.state.viewDiv?(n.App.pub_playBtnPage(),this.state.directionON=!1):(n.App.pub_playBtnPage(),this._naviRightFnc?this._naviRightFnc():a.sendLauncher(9,null))},setRetCnt:e=>{e>this.state.numOfStudent&&(e=this.state.numOfStudent),this.state.retCnt=e},setNumOfStudent:e=>{this.state.numOfStudent=e},setConcepLibaryView:e=>{this.state.conceptLibiary.view=e},setConcepLibaryDataType:e=>{this.state.conceptLibiary.datatype=e},setConcepLibaryResultMode:e=>{this.state.conceptLibiary.resultmode=e},setLoading:e=>{a.showTLoading(e)}},this.notifyBookCaptureInfo=e=>{},this.clickSendButton=()=>{},this.notifyRecordData=(e,t)=>{}}_setViewDiv(e,t){this.state.viewDiv!==e&&(t||n.App.pub_stop(),"direction"===e?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0,a.sendLauncher(5,null),a.sendPAD(1,null),this.state.navi.view=!0,this.state.navi.enableLeft=n.App.prevBook,this.state.navi.enableRight=!0,this._naviLeftFnc=null,this._naviRightFnc=null,this.state.conceptLibiary.view=!1,this.state.conceptLibiary.datatype="grade",this.state.conceptLibiary.resultmode=!1):(this.state.directionON=!1,this.state.svg_bg.bPlay=!1,this.state.svg_bg.viewCharactor=!1,a.sendLauncher(6,null),a.sendPAD(0,null)),this._naviLeftFnc=null,this._naviRightFnc=null,this.state.numOfStudent=0,this.state.retCnt=0,this.state.viewDiv=e)}start(){if("direction"===this.state.viewDiv&&(this.state.directionON=!0,this.state.navi.view=!0,this.state.navi.enableLeft=n.App.prevBook,this.state.navi.enableRight=!0,this.state.svg_bg.bPlay=!0,a.sendLauncher(5,null),a.sendPAD(1,null)),n.App.isDvlp){0;let e="";if(e="M0410",""===e)return;let t={id:1e3,code:"",depth:4,depth_name:r.parseDept4Div(e),info:"",div:e,subDiv:"",name:"M0408"===e?"Identify the Number 0, Read and Write 0":"",thumbnail:"",cmsLevel:"",childrenList:[]},o="",i="",s="";if("Concept"===r.parseDept4Div(e))for(let e=0;e<3;e++){0===e?(o="M0503",i="M050303",s=r.parseDept5SubDiv("M050303")):1===e?(o="M0503",i="M050304",s=r.parseDept5SubDiv("M050304")):2===e&&(o="M0506",i="M050601",s=r.parseDept5SubDiv("M050601"));let n={id:16815+e,code:"",depth:5,depth_name:s,info:"",div:o,subDiv:i,name:s,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:9e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(n)}else if("Problem"===r.parseDept4Div(e))for(let e=0;e<3;e++){0===e?(o="M0505",i="M050504",s="Reasoning (1)"):1===e?(o="M0505",i="M050504",s=r.parseDept5SubDiv("M050504")):2===e&&(o="M0506",i="M050602",s=r.parseDept5SubDiv("M050602"));let n={id:16815+e,code:"",depth:5,depth_name:s,info:"",div:o,subDiv:i,name:s,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:8e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(n)}else if("Concept Learning"===r.parseDept4Div(e))for(let e=0;e<12;e++){0===e?(o="M0501",i="M050101",s="WarmUp Quiz"):1===e?(o="M0501",i="M050101",s="I SPY"):2===e?(o="M0501",i="M050101",s="Hit a Mole"):3===e?(o="M0506",i="M050601",s="Memory Game"):4===e?(o="M0506",i="M050601",s="Math Talk"):5===e?(o="M0501",i="M050102",s="Learning Objectives"):6===e?(o="M0502",i="M050202",s="Concept Acivity"):7===e?(o="M0502",i="M050203",s="Concept Tool"):8===e?(o="M0502",i="M050204",s="Concept Summary"):9===e?(o="M0505",i="M050501",s="Independent Practice"):10===e?(o="M0505",i="M050502",s="Extended Practice"):11===e&&(o="M0505",i="M050505",s="CL Strategy");let n={id:16815+e,code:"",depth:5,depth_name:s,info:"",div:o,subDiv:i,name:s,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:1e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(n)}else if("Topic Learning"===r.parseDept4Div(e))for(let e=0;e<1;e++){0===e&&(o="M0507",i="M050701",s=r.parseDept5SubDiv("M050701"));let n={id:16815+e,code:"",depth:5,depth_name:s,info:"",div:o,subDiv:i,name:s,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:2e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(n)}else if("Module Learning"===r.parseDept4Div(e))for(let e=0;e<3;e++){0===e?(o="M0508",i="M050801",s=r.parseDept5SubDiv("M050801")):1===e?(o="M0508",i="M050803",s=r.parseDept5SubDiv("M050803")):2===e&&(o="M0508",i="M050804",s=r.parseDept5SubDiv("M050804"));let n={id:16815+e,code:"",depth:5,depth_name:s,info:"",div:o,subDiv:i,name:s,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:3e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(n)}else if("Module Test"===r.parseDept4Div(e))for(let e=0;e<1;e++){0===e&&(o="M0509",i="M050905",s=r.parseDept5SubDiv("M050905"));let n={id:16815+e,code:"",depth:5,depth_name:s,info:"",div:o,subDiv:i,name:s,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:4e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(n)}let n=1e4;n=3e4,this.notifyNaviInfo(t,n,1)}else{let e="";0,a.getNaviInfo(e)}}receive(e){}uploaded(e){}multiUploaded(e){}notify(e){}notifyRecorded(e){}notifyVideoRecord(e){}notifyNaviInfo(e,t,o,i,s,n){}notifyPenToolState(e,t){}notifyLiveGivePopupClose(){}notifyAlert(e){}notifyHamburgerMenuClicked(e){}callThreeminState(){}}i([s.observable],l.prototype,"state",void 0),i([s.action],l.prototype,"_setViewDiv",null),i([s.action],l.prototype,"start",null),t.TeacherContextBase=l},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseClassColor=t.parseDept5SubDiv=t.parseDept5Div=t.parseDept4Div=t.parseDept3Div=void 0,t.parseDept3Div=function(e){return"M0301"===e?"Number&Operations":"M0302"===e?"Measurement&Date":"M0303"===e?"Operations&Algebra":"M0304"===e?"Geometry":"M0305"===e?"Topic":"M0306"===e?"Module Review":""},t.parseDept4Div=function(e){return"M0401"===e?"Concept":"M0402"===e?"Problem":"M0403"===e?"Strategy":"M0404"===e?"Number&Operations":"M0405"===e?"Measurement&Date":"M0406"===e?"Operations&Algebra":"M0407"===e?"Geometry":"M0408"===e?"Concept Learning":"M0409"===e?"Topic Learning":"M0410"===e?"Module Learning":"M0411"===e?"Module Test":""},t.parseDept5Div=function(e){return"M0501"===e?"Warm-Up":"M0502"===e?"Concept Learning":"M0503"===e?"Concept Learning 2":"M0504"===e?"Concept Learning 3":"M0505"===e?"Problem Solving":"M0506"===e?"Wrap-Up":"M0507"===e?"Topic Learning":"M0508"===e?"Module Learning":"M0509"===e?"Module Test":""},t.parseDept5SubDiv=function(e){return"M050101"===e?"Warm-Up Activity":"M050102"===e?"Learning Objectives":"M050103"===e?"Concept Summary":"M050201"===e?"Concept Learning":"M050202"===e?"Concept Activity":"M050203"===e?"Concept Tool":"M050204"===e?"Concept Summary":"M050301"===e?"Activity":"M050302"===e?"Concept Tool":"M050303"===e?"Summary":"M050304"===e?"Check":"M050401"===e?"Activity":"M050402"===e?"Concept Tool":"M050403"===e?"Summary":"M050404"===e?"Check":"M050501"===e?"Independent Practice":"M050502"===e?"Extended Practice":"M050503"===e?"Strategy":"M050504"===e?"Reasoning (2)":"M050505"===e?"Strategy":"M050601"===e?"Wrap-Up Activity":"M050602"===e?"Portfolio":"M050701"===e?"Topic Strategy":"M050702"===e?"Adaptive Learning":"M050801"===e?"Module Review":"M050802"===e?"Adaptive Learning":"M050803"===e?"Module Portfolio":"M050804"===e?"Module Strategy":"M050901"===e?"Assessment":"M050902"===e?"Module Portfolio":"M050903"===e?"Assessment Review":"M050904"===e?"STEAM Activity":"M050905"===e?"STEAM Portfolio":""},t.parseClassColor=function(e){return"B62001"===e?"Black":"White"}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=o(0),s=o(1),n=o(7),a=o(30);class r extends i.Component{render(){const{state:e,actions:t}=this.props,o=e.viewDiv;return i.createElement(i.Fragment,null,i.createElement("div",{className:"content-wrapper",style:{left:("direction"===o?0:-1280)+"px",zIndex:2}},i.createElement("div",null,i.createElement(a.default,{className:"video-direction",view:"direction"===o,on:e.directionON,isTeacher:!0,lesson:t.getCurriculum(),bookId:e.bookid,poster_url:"/content/mathalive_lib/MA/module_review/common/bg_direction.jpg",video_url:"/content/mathalive_lib/MA/module_review/common/10.Module_Reivew.mp4",video_frame:125,onEndStart:t.onDirectionEndStart,onEnd:t.onDirectionEnded,subtitle:"",audio_url:"/content/mathalive_lib/mp3/10_Module_Reivew.mp3"},i.createElement("div",{className:"lesson"},"")))))}}const l=n.useTeacher(e=>i.createElement(s.Observer,null,()=>i.createElement(r,{state:Object.assign({},e.state),actions:e.actions})));t.default=l},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(s,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function r(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),a=o(2),r=o(1),l=o(11);let p=class extends n.Component{constructor(e){super(e),this.m_on=!1,this.m_showMathKit=!1,this.bookInfo=[],this.curIndex=0,this._list=[],this._onClick=()=>{this.props.isTeacher&&this._off()},this._off=()=>s(this,void 0,void 0,(function*(){this.props.view&&this.m_on&&(this.m_on=!1,this.props.onEndStart&&this.props.onEndStart(),yield l.wait(500),this.props.view&&!this.m_on&&this.props.onEnd&&this.props.onEnd())})),this.m_on=e.view&&e.on}_on(){return s(this,void 0,void 0,(function*(){this.m_on=!0}))}componentWillReceiveProps(e){if(e.lesson&&this.props.lesson!==e.lesson||this.props.view!==e.view){for(;this.bookInfo.length>0;)this.bookInfo.pop();e.lesson&&e.lesson.childrenList&&e.lesson.childrenList.length>0&&e.lesson.childrenList.map((t,o)=>{try{if(t.book){t.book.id===e.bookId&&(this.curIndex=this.bookInfo.length);let o=t.depth_name?t.depth_name:"";o=o.replace(/\&lt;/g,"<"),o=o.replace(/\&gt;/g,">"),this.bookInfo.push({bookName:t.name?t.name:"",id:t.id,lesson:e.lesson?e.lesson.name:"",subtitle:o})}}catch(e){alert("A ee  "+JSON.stringify(e))}})}}componentDidUpdate(e){this.props.view?e.view?this.props.on&&!e.on?this._on():!this.props.on&&e.on&&this._off():this.props.on?this._on():this.m_on=!1:this.m_on=!1}render(){const{isTeacher:e,subtitle:t}=this.props,o=[];o.push(this.props.className);const i=document.querySelector(".bgm");return this.props.view?(this.m_on&&o.push("on"),i&&i.play()):(o.push("hide"),i&&(i.pause(),i.currentTime=0)),n.createElement("div",{className:o.join(" "),onClick:this._onClick},e&&this.bookInfo&&n.createElement("span",{className:"concept_name"},this.bookInfo.length>0?this.bookInfo[this.curIndex].lesson:""),n.createElement("div",{className:"progress_dot"},e&&this.bookInfo&&this.bookInfo.map((e,t)=>n.createElement("span",{key:"q_"+t,className:this.curIndex===t?"on":""}))),n.createElement("div",{className:"video"},n.createElement("video",{muted:!0,autoPlay:!0,poster:this.props.poster_url?this.props.poster_url:void 0},n.createElement("source",{src:this.props.video_url,type:"video/mp4"}),n.createElement("strong",null,"Your browser does not support the video tag."))),n.createElement("div",{className:"text"},n.createElement("div",{className:"t1"},this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].bookName:""),e&&n.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].subtitle:""}}),!e&&n.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:0===t.length&&this.bookInfo[this.curIndex]?this.bookInfo[this.curIndex].subtitle:t}})),n.createElement("audio",{className:"bgm",autoPlay:!0,src:this.props.audio_url?this.props.audio_url:void 0}))}};i([a.observable],p.prototype,"m_on",void 0),i([a.observable],p.prototype,"_list",void 0),i([a.action],p.prototype,"_off",void 0),p=i([r.observer],p),t.default=p},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(s,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function r(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),a=o(1),r=o(6),l=o(7),p=o(3),c=o(32);o(14);const u=o(5),d=o(2),h=o(4);let m=class extends n.Component{constructor(){super(...arguments),this.view=!1,this.movto=!1}componentDidUpdate(e){this.props.state.prog!==e.state.prog&&"teamselect"!==this.props.state.prog&&h.delay(()=>{this.view=!1},300),this.props.state.prog!==e.state.prog&&"teamselect"===this.props.state.prog&&(this.view=!0),""===this.props.state.prog?this.movto=!0:this.movto=!1}moveTo(){return this.movto?{left:1280,zindex:this.view?2:1}:{left:-1280,zindex:this.view?2:3}}render(){const{state:e,actions:t}=this.props;e.viewDiv;return n.createElement(n.Fragment,null,n.createElement("div",{className:"content-wrapper teamselect "+e.movefast,style:{left:("teamselect"!==e.prog?this.moveTo().left:0)+"px",zIndex:"teamselect"!==e.prog?this.moveTo().zindex:3}},n.createElement(c.default,{view:this.view,state:e,actions:t,teamsize:2,setShuffled:e=>{e&&e[0]&&(this.props.state.team_red=e[0]),e&&e[1]&&(this.props.state.team_green=e[1]);let t={msgtype:"show_team",teamsinfo:JSON.stringify(this.props.state.teamsinfo),team_red:JSON.stringify(this.props.state.team_red),team_green:JSON.stringify(this.props.state.team_green)};u.PlayBasicButtonSound(),p.App.pub_reloadStudents(()=>s(this,void 0,void 0,(function*(){r.sendPAD(10,JSON.stringify(t))})))},startAction:()=>{let e={msgtype:"start_quiz"};u.PlayBasicButtonSound(),p.App.pub_reloadStudents(()=>s(this,void 0,void 0,(function*(){r.sendPAD(10,JSON.stringify(e))}))),t.setProg("teamquiz")},onShuffle:e=>{this.props.actions.onShuffle(e)}})))}};i([d.observable],m.prototype,"view",void 0),i([d.observable],m.prototype,"movto",void 0),m=i([a.observer],m);const _=l.useTeacher(e=>n.createElement(a.Observer,null,()=>n.createElement(m,{state:Object.assign({},e.state),actions:e.actions})));t.default=_},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(s,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function r(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),a=o(1),r=o(2),l=o(4),p=o(3),c=o(12);o(33);const u=o(13),d=e=>{const[t,o]=n.useState(n.createElement(n.Fragment,null)),[i,s]=n.useState("defaultImg_f");return n.useEffect(()=>{let t=n.createElement(n.Fragment,null);const i="1"===e.displayMode&&(""===e.thumbnail||!e.thumbnail),a="2"===e.displayMode&&(""===e.avatar||!e.avatar);t=(i||a)&&e.name&&e.name.length>=2?n.createElement("span",{className:"text"},e.name[0].toUpperCase()+e.name[1].toUpperCase()):"1"===e.displayMode&&""!==e.thumbnail?n.createElement("img",{src:e.thumbnail}):n.createElement("img",{src:e.avatar}),o(t),s("F"===e.gender?"defaultImg_f":"defaultImg_m")},[e.displayMode,e.name,e.thumbnail,e.avatar,e.gender]),n.createElement("div",{className:"custom_thumbnail "+e.className+" "+i+(""!==e.thumbnail?" no-bold":"")},t)},h=(o(10).default,(e,t,o,i,s,n)=>{let a=0;a=Math.ceil(p.App.students.length/e);return!1===s?i.map((o,i)=>{t[i%e]&&(o.isLest=0,t[i%e].push(JSON.parse(JSON.stringify(o))))}):t.map((e,t)=>{if(o[t]&&e.length<a){i.slice(0,a-e.length).map(t=>{e.push(JSON.parse(JSON.stringify(t)))})}}),!1===s&&p.App.students.length<e-1?(t.map((e,o)=>{if(0===t[o].length&&t[o-1]&&t[o-1].length>0){let e=Object.assign({},t[o-1][0]);e.isLest=1,t[o]=[JSON.parse(JSON.stringify(e))]}}),t):t[t.length-1].length===a?t:((e,t,o,i,s)=>{let n=[],a=[],r=0;e.map((e,o)=>{n.push(t-e.length),a.push([])}),0===i.length&&(i=p.App.students),i=[...s,...i];for(let t=0;t<e.length;t++)if(n.length>t&&0!==n[t])for(let o=0;o<n[t];o++){let o=i[r],s=0;void 0!==e[t]&&0!==e[t].length&&(s=e[t].map(e=>e.id).indexOf(o.id)),s&&(o=i[r]),o&&(o.isLest=1,a[t].push(o)),r++}Math.floor(Math.random()*a.length-1);let l=null;a.map(e=>{e.length>0&&null===l&&null===l&&(l=e[0]);for(let t=0;t<e.length;t++)e[t]=l}),e.forEach((e,t)=>{a[t]&&a[t].map(t=>{t&&(0===s.length||-1!==s.indexOf(t)?(t.isLest=2,e.unshift(JSON.parse(JSON.stringify(t)))):(t.isLest=2,e.push(JSON.parse(JSON.stringify(t)))))})});let c=[],u=0;return o.map((t,o)=>{void 0===c[o]&&(c[o]=[]),t&&(c[o]=e[u],u++)}),c})(t,a,o,i,n)});let m=class extends n.Component{render(){const{index:e}=this.props;return this.props.student?n.createElement("div",{className:"student "+(this.props.isLest>0?"on":"")},n.createElement(d,{thumbnail:this.props.student.thumb,avatar:this.props.student.avatar,displayMode:this.props.student.displayMode,name:"1"===this.props.student.displayMode?this.props.student.name:this.props.student.nickname,gender:this.props.student.gender,className:""}),n.createElement("span",null,e+1+".  "+("1"===this.props.student.displayMode?this.props.student.name:this.props.student.nickname))):n.createElement(n.Fragment,null)}};m=i([a.observer],m);let _=class extends n.Component{constructor(){super(...arguments),this.m_view=!1,this.teamGroup=[],this.teamActivate=[!0,!0,!0],this.lastMinusedStudent=[],this._pluse=!1,this.viewAlertPopup=!1,this._onSubmit=()=>{p.App.pub_quizDone(),this.props.state.teamNum=this.teamActivate.length,this.props.onStartTeamQuiz(),this.m_view=!1,this.props.state.prog="timesetting"},this._onShuffle=e=>{p.App.pub_playFlipCard(),this.teamUp()}}teamUp(){p.App.pub_playFlipCard(),this.teamActivate.map((e,t)=>{t<this.props.teamsize?this.teamActivate[t]=!0:this.teamActivate[t]=!1}),p.App.students&&0===p.App.students.length?this.teamGroup=[[],[]]:p.App.students&&p.App.students.length>0&&(this.teamGroup=((e,t,o)=>{e.sort(()=>Math.random()-.5);const i=[];for(let e=0;e<3;e++)i.push([]);return h(t.filter(e=>!0===e).length,i,t,e,!1,o)})(p.App.students,this.teamActivate,this.lastMinusedStudent));let e=[];e.push({name:"red",thumb:"/content/mathalive_lib/MA/module_review/teacher/images/team_char01.png",hearts:0,livePoint:0}),e.push({name:"green",thumb:"/content/mathalive_lib/MA/module_review/teacher/images/team_char02.png",hearts:0,livePoint:0}),e.push({name:"yellow",thumb:"/content/mathalive_lib/MA/module_review/teacher/images/team_char03.png",hearts:0,livePoint:0}),e.forEach((e,t)=>{this.props.state.teamsinfo[t]=e})}componentDidUpdate(e){this.props.view&&!e.view?(this.viewAlertPopup=!1,this.props.toggleNavi&&this.props.toggleNavi(!0),p.App.students&&0===p.App.students.length&&(this.teamGroup=[[],[]]),l.delay(()=>{this.m_view=!0,this._onShuffle(!1),this.teamGroup.map((e,t)=>{this.props.state.teamsinfo&&this.props.state.teamsinfo[t]&&(this.props.state.teamsinfo[t].teams=e,this.props.state.teamsinfo[t].solved=[])}),this.props.teamSetting(this.teamGroup)},300*this.props.state.teamsinfo.length)):!this.props.view&&e.view&&(this.m_view=!1)}componentDidMount(){this.props.onShuffle(()=>{this.teamGroup.map((e,t)=>{this.props.state.teamsinfo&&this.props.state.teamsinfo.length>t&&(this.props.state.teamsinfo[t].teams=e,this.props.state.teamsinfo[t].solved=[])}),this.props.teamSetting(this.teamGroup),this._onSubmit()})}printTeam(e,t){if(void 0===e||t>this.props.teamsize-1)return n.createElement(n.Fragment,{key:"group"+t});let o=[];return this.teamGroup.map(e=>{e.map(e=>{o.push(e)})}),n.createElement("div",{className:"teamtype "+["red","green","yellow"][t],key:"group"+t},n.createElement("div",{className:"title"},["Red","Green","Yellow"][t],"(",e.length,")",n.createElement("button",{className:"btn_plus",style:{display:this._pluse?"":"none"},onClick:()=>{const e=this.teamActivate.findIndex(e=>!e);this.teamActivate[e]=!0,this.teamUp(),this._pluse=!1}}),n.createElement("button",{className:"btn_minus",style:{display:this._pluse?"none":""},onClick:()=>{this.teamActivate[t]=!1,this.teamUp(),this._pluse=!0}})),n.createElement("div",{className:"crew"},e.map((e,t)=>n.createElement(m,{key:t,student:e,index:t,isLest:o.filter(t=>t.id===e.id).length-1}))))}render(){const{state:e,_onClosed:t}=this.props;return n.createElement(c.CoverPopup,{className:"setting_popup open",view:this.props.view,onClosed:t},n.createElement("div",{className:"popContainer"},n.createElement("div",{className:"tit"},"Team Setting"),n.createElement("div",{className:"list_team"},this.teamGroup.map((e,t)=>this.printTeam(e,t))),n.createElement("div",{className:"btn_btm"},n.createElement("button",{className:"btn_random",disabled:p.App.students&&0===p.App.students.length,onClick:()=>{this._onShuffle(!1),this.teamGroup.map((e,t)=>{this.props.state.teamsinfo&&this.props.state.teamsinfo.length>t&&(this.props.state.teamsinfo[t].teams=e,this.props.state.teamsinfo[t].solved=[])}),this.props.teamSetting(this.teamGroup)}}),n.createElement("button",{className:"btn_done",onClick:()=>{p.App.students&&0===p.App.students.length?(this.viewAlertPopup=!0,this.props.toggleNavi&&this.props.toggleNavi(!1)):this._onSubmit()}}))),n.createElement(u.AlertPopup,{view:this.viewAlertPopup,msg:"There are no team members available.<br />Team Quiz requires a student log-in.<br />Would you still like to proceed?",onClose:()=>{this.viewAlertPopup=!1,this.props.toggleNavi&&this.props.toggleNavi(!0)},onOk:()=>{this._onSubmit()}}))}};i([r.observable],_.prototype,"m_view",void 0),i([r.observable],_.prototype,"teamGroup",void 0),i([r.observable],_.prototype,"teamActivate",void 0),i([r.observable],_.prototype,"lastMinusedStudent",void 0),i([r.observable],_.prototype,"_pluse",void 0),i([r.observable],_.prototype,"viewAlertPopup",void 0),_=i([a.observer],_);let v=class extends n.Component{constructor(e){super(e),this._onClosed=()=>{},this.onStartTeam=()=>s(this,void 0,void 0,(function*(){p.App.pub_playStartButton(),this.props.startAction()}))}_setNavi(){}componentDidUpdate(e){this.props.view&&!e.view&&(this.props.state.selection="team"),this.props.view&&this._setNavi()}render(){const{view:e,actions:t,state:o}=this.props;return n.createElement(n.Fragment,null,n.createElement("div",{className:"t_teamselect",style:{display:e?void 0:"none"}},n.createElement(_,{teamSetting:e=>{e.map((e,t)=>{o["team"+(t+1)]=e}),this.props.setShuffled(e)},view:this.props.view,state:o,_onClosed:this._onClosed,onStartTeamQuiz:()=>this.onStartTeam(),teamsize:this.props.teamsize,onShuffle:e=>this.props.onShuffle(e),toggleNavi:t.toggleNavi?t.toggleNavi:void 0})))}};v=i([a.observer],v),t.default=v},function(e,t,o){"use strict";o.r(t)},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(s,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function r(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),a=o(1),r=o(6),l=o(7),p=o(5),c=o(2),u=o(4),d=o(35),h=o(37),m=o(43),_=o(45),v=o(50),f=o(3);o(52);let g=class extends n.Component{constructor(){super(...arguments),this.view=!1,this.movto=!1,this.quizs={quizs:[]},this.active_qidx=0,this.prog="none"}componentDidUpdate(e){this.props.state.prog!==e.state.prog&&"teamquiz"===this.props.state.prog?(this.prog="select",!1===this.props.state.isend&&(this.quizs=u.clone(this.props.actions.getQuizs()))):""===this.props.state.prog&&(this.view=!1),"teamselect"===this.props.state.prog?"none"===this.prog&&(this.movto=!0,this.prog="select",this.active_qidx=0,this.view=!0):(this.movto=!1,u.delay(()=>{this.view=!1},300))}componentDidMount(){this.prog="none",!1===this.props.state.isend&&(this.quizs=u.clone(this.props.actions.getQuizs()))}moveTo(){return this.movto||"end"!==this.props.state.prog?{left:1280,zindex:this.view?2:3}:{left:0,zindex:(this.view,0)}}goToQuiz(e,t){this.active_qidx=e,this.quizs.quizs[e].point=t}renderQuizs(){const{state:e,actions:t}=this.props;if(this.quizs.quizs.length>0&&e.teamsinfo){let t=this.props.state.teamsinfo.filter(e=>"red"===e.name)[0],o=this.props.state.teamsinfo.filter(e=>"green"===e.name)[0];return n.createElement(n.Fragment,null,n.createElement(d.default,{active:"select"===this.prog,isend:e.isend,quizs:this.quizs,teaminfo:e.teamsinfo,goToQuiz:(e,t)=>{this.props.actions.toggleNavi(!0),p.PlayQuizSelectSound(),this.active_qidx=e,this.props.actions.setQuizReceiver(this.active_qidx),this.props.actions.startQuiz(),this.goToQuiz(e,t),this.prog="solving"},goToEnd:t=>{p.PlayBasicButtonSound(),this.props.actions.endQuiz(),this.prog="none",this.props.actions.setProg("end"),e.prog="teamselect"},toggleNavi:e=>{this.props.actions.toggleNavi(e)}}),n.createElement(h.default,{view:"solving"===this.prog||"checking"===this.prog||"pointcheck"===this.prog,pointUpdateStop:"pointcheck"===this.prog,quiz:this.quizs.quizs[this.active_qidx],teaminfo:e.teamsinfo,quizIdx:this.active_qidx,goToSolve:()=>{p.PlayBasicButtonSound(),this.props.actions.toggleNavi(!1),this.prog="checking"},goToBack:()=>{let e={msgtype:"quiz_end"};f.App.pub_playToPad(),f.App.pub_reloadStudents(()=>s(this,void 0,void 0,(function*(){r.sendPAD(10,JSON.stringify(e))}))),this.prog="select"},toggleNavi:e=>{this.props.actions.toggleNavi(e)},isend:this.props.state.isend},n.createElement(_.default,{isend:this.props.state.isend,reset:"teamselect"===e.prog,view:"solving"===this.prog||"checking"===this.prog||"pointcheck"===this.prog,teaminfo:this.props.state.teamsinfo,quiz:this.quizs.quizs[this.active_qidx],quizIdx:this.active_qidx,point:this.quizs.quizs[this.active_qidx].point,naviToggle:e=>{this.props.actions.toggleNavi(e)},goToPointBoard:e=>{this.prog="pointcheck",this.props.actions.toggleNavi(!1),u.delay(()=>{e(),u.delay(()=>{this.prog="solving"},2e3)},10)}}),n.createElement(v.default,{view:"pointcheck"===this.prog,redPoint:t?t.livePoint:0,greenPoint:o?o.livePoint:0})),n.createElement(m.default,{view:"checking"===this.prog,quiz:this.quizs.quizs[this.active_qidx],goToQuiz:()=>{p.PlayBasicButtonSound(),this.prog="solving"}}))}return n.createElement(d.default,{active:"select"===this.prog,isend:e.isend,quizs:this.quizs,teaminfo:e.teamsinfo,goToQuiz:(e,t)=>{p.PlayQuizSelectSound(),this.active_qidx=e,this.props.actions.setQuizReceiver(this.active_qidx),this.props.actions.startQuiz(),this.goToQuiz(e,t),this.prog="solving"},goToEnd:t=>{p.PlayBasicButtonSound(),this.props.actions.endQuiz(),this.prog="none",this.props.actions.setProg("end"),e.prog="teamselect"},toggleNavi:e=>{this.props.actions.toggleNavi(e)}})}render(){const{state:e,actions:t}=this.props,o="teamquiz"!==e.prog;return n.createElement(n.Fragment,null,n.createElement("div",{className:"content-wrapper teamquiz  "+e.movefast,style:{left:(o?this.moveTo().left:0)+"px",zIndex:o?this.moveTo().zindex:0}},this.renderQuizs()))}};i([c.observable],g.prototype,"view",void 0),i([c.observable],g.prototype,"movto",void 0),i([c.observable],g.prototype,"quizs",void 0),i([c.observable],g.prototype,"active_qidx",void 0),i([c.observable],g.prototype,"prog",void 0),g=i([a.observer],g);const y=l.useTeacher(e=>n.createElement(a.Observer,null,()=>n.createElement(g,{state:Object.assign({},e.state),actions:e.actions})));t.default=y},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0});const s=o(0),n=o(1),a=o(5),r=o(2),l=o(13);o(36);let p=class extends s.Component{constructor(){super(...arguments),this.viewAlertPopup=!1,this.viewNoticePopup=!1}get vocaQuizs(){return this.props.quizs.quizs.filter(e=>"voca"===e.type)}get wordQuizs(){return this.props.quizs.quizs.filter(e=>"word"===e.type)}get teamInfoRed(){return this.props.teaminfo.find(e=>"red"===e.name)}get teamInfoGreen(){return this.props.teaminfo.find(e=>"green"===e.name)}goToQuiz(e,t){this.props.goToQuiz(e,t),this.ele=null}render(){const e=this.teamInfoRed,t=this.teamInfoGreen;return void 0===e||void 0===t?s.createElement(s.Fragment,null):s.createElement("div",{className:"select_quiz",ref:e=>this.ele=e},s.createElement("div",{className:"score red"},s.createElement("h2",null,e.name),s.createElement("strong",null,e.livePoint)),s.createElement("div",{className:"score green"},s.createElement("h2",null,t.name),s.createElement("strong",null,t.livePoint)),s.createElement("div",{className:"board"},s.createElement("button",{id:"notice",onClick:()=>{this.props.toggleNavi(!1),this.viewNoticePopup=!0}}),s.createElement("div",{className:"teams"},s.createElement("h2",null,"Vocabulary"),s.createElement("ul",{className:"voca"},this.vocaQuizs.map((e,t)=>s.createElement("li",{key:"voca"+t},s.createElement("button",{className:"point_list "+(e.is_solved&&this.props.isend||e.is_solved?"did":""),onClick:()=>this.goToQuiz(t,100*(t+1))},e.is_winner+""+100*(t+1)))))),s.createElement("div",{className:"teams"},s.createElement("h2",null,"Word Problem"),s.createElement("ul",{className:"word"},this.wordQuizs.map((e,t)=>s.createElement("li",{key:"word"+t},s.createElement("button",{className:"point_list "+(e.is_solved&&this.props.isend||e.is_solved?"did":""),onClick:()=>this.goToQuiz(t+3,100*(t+1))},e.is_winner+""+100*(t+1))))))),s.createElement("button",{id:"end_quiz",disabled:this.props.isend,onClick:()=>{a.PlayBasicButtonSound(),this.viewAlertPopup=!0,this.props.toggleNavi(!1)}},"End Quiz Show"),(()=>{let e=!1,t="",o=()=>{},i=()=>{};return this.viewAlertPopup?(e=!0,t="Do you want to check<br />the Quiz Show Results?",o=()=>{this.viewAlertPopup=!1,!1===this.props.isend&&this.props.toggleNavi(!0)},i=()=>{this.props.goToEnd(this.ele),this.props.toggleNavi(!1),this.viewAlertPopup=!1}):this.viewNoticePopup&&(e=!0,t="Finished quizzes<br />cannot be redone.<br />(Quiz time is limited.)",o=()=>{this.viewNoticePopup=!1,this.props.toggleNavi(!0)},i=()=>{this.viewNoticePopup=!1,this.props.toggleNavi(!0)}),s.createElement(l.AlertPopup,{view:e,isSingle:!0,msg:t,onClose:o,onOk:i})})())}};i([r.computed],p.prototype,"vocaQuizs",null),i([r.computed],p.prototype,"wordQuizs",null),i([r.computed],p.prototype,"teamInfoRed",null),i([r.computed],p.prototype,"teamInfoGreen",null),i([r.observable],p.prototype,"viewAlertPopup",void 0),i([r.observable],p.prototype,"viewNoticePopup",void 0),p=i([n.observer],p),t.default=p},function(e,t,o){"use strict";o.r(t)},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(s,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function r(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),a=o(1),r=o(6),l=o(5),p=o(2),c=o(4),u=o(38),d=o(3);o(40);const h=o(41),m=o(5);let _=class extends n.Component{shouldComponentUpdate(e,t){return!0!==e.pointUpdateStop}componentDidUpdate(e){!1===e.pointUpdateStop&&!0===this.props.pointUpdateStop&&l.PlayGraphSound()}printTeamBG(e){let t=Math.floor(e.livePoint/1e3*514);return n.createElement("i",{className:e.name+" bgbar",style:{width:t<514?t+"px":"514px"}})}render(){return void 0===this.props.teamRed||void 0===this.props.teamRed.solved||void 0===this.props.teamRed.solved[this.props.quizIdx]?n.createElement(n.Fragment,null):n.createElement("div",{className:"score-box"},n.createElement("div",{className:"score-bar"},n.createElement("span",{className:"bgbar-box"},this.printTeamBG(this.props.teamRed),n.createElement("em",null,this.props.teamRed.livePoint)),n.createElement("span",{className:"bgbar-box"},this.printTeamBG(this.props.teamGreen),n.createElement("em",null,this.props.teamGreen.livePoint))),n.createElement("div",{className:"holder-bar"},n.createElement("strong",{className:"red team"},this.props.teamRed.solved[this.props.quizIdx].length+" / "+this.props.teamRed.teams.length),n.createElement("button",{className:"score"},n.createElement("i",null,this.props.quizPoint),n.createElement("span",null,"Points")),n.createElement("strong",{className:"green team"},this.props.teamGreen.solved[this.props.quizIdx].length+" / "+this.props.teamGreen.teams.length)))}};_=i([a.observer],_);let v=class extends n.Component{constructor(){super(...arguments),this.quiz_prog="loading"}componentDidUpdate(e){if(!0===this.props.view&&!1===e.view){let e=!1;this.props.teaminfo.map(t=>{t.solved&&t.solved[this.props.quizIdx]&&t.solved[this.props.quizIdx].length>0&&!1===this.props.isend&&(e=!0)}),this.quiz_prog=!1===e?"solving":"solved",this.props.toggleNavi(!1)}!1===this.props.view&&!0===e.view&&(this.quiz_prog="loading")}sendQuizUI(){return this.props.isend?n.createElement(n.Fragment,null):n.createElement(u.default,{type:"teacher",view:"solving"===this.quiz_prog&&!this.props.isend,sended:"solved"===this.quiz_prog,className:"solving",originY:0,preventUpWhenView:!0,preventDrag:!0,onSend:()=>{d.App.pub_playToPad(),c.delay(()=>{this.quiz_prog="solved",this.props.quiz.is_solved=!0},10);let e={msgtype:"quiz_start",quiz:this.props.quiz.question,quizIdx:this.props.quizIdx,quizpoint:this.props.quiz.point};d.App.pub_reloadStudents(()=>s(this,void 0,void 0,(function*(){r.sendPAD(10,JSON.stringify(e))})))}})}sendBackUI(){return this.props.isend?n.createElement("button",{className:"common_back",onClick:()=>{l.PlayBasicButtonSound(),c.delay(()=>{this.props.goToBack()},500),c.delay(()=>{this.quiz_prog="loading"},510)}}):n.createElement(u.default,{type:"teacher",view:this.props.isend||"solved"===this.quiz_prog,sended:!this.props.isend&&"loading"===this.quiz_prog,className:"solved",originY:0,preventUpWhenView:!0,preventDrag:!0,onSend:()=>{l.PlayBasicButtonSound(),c.delay(()=>{this.props.goToBack()},500),c.delay(()=>{this.quiz_prog="loading"},510)}})}render(){return n.createElement("div",{className:"popup_quiz "+this.quiz_prog,style:m.fnIsVisibleComponent(this.props.view)},n.createElement("h2",{className:"quiz_type"},"voca"===this.props.quiz.type?"Vocabulary":"Word Problem"),n.createElement("button",{className:"close_btn",onClick:()=>{l.PlayBasicButtonSound(),c.delay(()=>{this.props.goToBack()},500),c.delay(()=>{this.quiz_prog="loading"},510)}}),n.createElement(h.default,{quiz_prog:this.quiz_prog,quiz:this.props.quiz,goToSolve:this.props.goToSolve,setDom:e=>{}}),(()=>this.props.teaminfo.length>1?n.createElement(_,{teamRed:this.props.teaminfo[0],teamGreen:this.props.teaminfo[1],quizIdx:this.props.quizIdx,quizPoint:this.props.quiz.point,pointUpdateStop:this.props.pointUpdateStop}):n.createElement(n.Fragment,null))(),this.sendBackUI(),this.sendQuizUI(),this.props.children)}};i([p.observable],v.prototype,"quiz_prog",void 0),v=i([a.observer],v),t.default=v},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0});const s=o(0),n=o(2),a=o(1),r=o(39),l=o(9);let p=class extends s.Component{constructor(e){super(e),this.m_btnH=0,this.m_max=0,this.m_sy=-1,this.m_vy=-1,this.m_time=-1,this.m_bSend=!1,this.m_state={y:0,alpha:1,tDur:0,aDur:0,isOn:!1,disabled:!1},this._ref=e=>{if(this.m_max>0||!e)return;e.setAttribute("touch-action","none");const t=window.getComputedStyle(e),o=l.nteFloat(t.height,0),i=l.nteFloat(t.bottom,0);o>0&&(this.m_btnH=o,"pad"===this.props.type?this.m_max=i-o-35:this.m_max=o+i+10,this.props.view||(this.m_state.y=this.m_max))},this._down=e=>{this.m_state.isOn||this.m_state.disabled||void 0!==this.props.disable&&this.props.disable||(this.m_state.y=this.props.originY,this.m_state.alpha=1,this.m_state.tDur=0,this.m_state.aDur=0,this.m_state.isOn=!0,this.m_vy=0,this.m_time=Date.now())},this._start=(e,t)=>{this.m_sy=t.y,this.m_bSend=!0},this._drag=(e,t)=>{if(!this.m_state.isOn||this.m_state.disabled)return;let o=t.y-this.m_sy;"teacher"===this.props.type?(t.deltaY<-1?this.m_bSend=!1:t.deltaY>=0&&(this.m_bSend=!0),o<0&&(o=0)):(t.deltaY>1?this.m_bSend=!1:t.deltaY<=0&&(this.m_bSend=!0),o>0&&(o=0)),!1===this.props.preventDrag&&(this.m_state.y=o+this.props.originY);const i=Date.now();this.m_vy=t.deltaY/(i-this.m_time),this.m_time=i},this._stop=(e,t)=>{if(this.m_state.isOn&&!this.m_state.disabled)if(this.m_bSend){let e=.5*this.m_vy*1e3,o=t.y-this.m_sy;"teacher"===this.props.type?(e<this.m_btnH?e=this.m_btnH:e>4*this.m_btnH&&(e=4*this.m_btnH),o<0&&(o=0)):(-1*e<this.m_btnH?e=-this.m_btnH:-1*e>4*this.m_btnH&&(e=-4*this.m_btnH),o>0&&(o=0)),this.m_state.tDur=.5,this.m_state.aDur=.5,this.m_state.alpha=0,this.m_state.y=o+e+this.props.originY,this.props.onSend()}else this.m_state.isOn=!1,this.m_state.tDur=.3,this.m_state.aDur=0,this.m_state.y=this.props.originY},e.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):e.view?(this.m_state.y=e.originY,this.m_state.alpha=1,this.m_state.tDur=.3,this.m_state.aDur=0,this.m_state.isOn=!1,this.m_state.disabled=!1):e.view||(this.m_state.y=e.originY,this.m_state.alpha=0,this.m_state.tDur=.3,this.m_state.aDur=.3,this.m_state.isOn=!1,this.m_state.disabled=!0)}componentWillReceiveProps(e){e.sended&&!this.props.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):e.view&&!this.props.view?(this.m_state.y=e.originY,this.m_state.alpha=1,e.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=.3):(this.m_state.tDur=.3,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1):!e.view&&this.props.view?(this.m_state.y=this.m_max,this.m_state.alpha=0,this.m_state.tDur=.3,this.m_state.aDur=.3,this.m_state.isOn=!1,this.m_state.disabled=!0):!e.view||e.sended||this.m_state.isOn||e.originY===this.props.originY||(this.m_state.y=e.originY,this.m_state.tDur=.3,this.m_state.aDur=0),!this.props.isRetry&&e.isRetry&&(this.m_state.y=e.originY,this.m_state.alpha=1,e.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=.3):(this.m_state.tDur=.3,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1)}render(){const{y:e,tDur:t,aDur:o,alpha:i,isOn:n,disabled:a}=this.m_state;let l={transform:`translateY(${e}px)`,transition:`transform ${t}s, opacity ${o/2}s ${o/2}s`,opacity:i,pointerEvents:a||!this.props.view?"none":"auto"};this.props.preventDrag&&(l={});const p=[];return"pad"===this.props.type?p.push("fel_toteacher"):p.push("fel_topad"),n&&p.push("on"),this.props.isVisiblePenTool&&this.props.isVisiblePenTool&&p.push("up"),s.createElement(r.DraggableCore,{onMouseDown:this._down,onDrag:this._drag,onStart:this._start,onStop:this._stop},s.createElement("button",{ref:this._ref,className:p.join(" ")+(this.props.className?" "+this.props.className:""),style:l},s.createElement("span",{className:"revise"+(this.props.isRevise?" on":""),style:{display:this.props.isRevise?"":"none"}})))}};i([n.observable],p.prototype,"m_state",void 0),p=i([a.observer],p),t.default=p},function(e,t){e.exports=ReactDraggable},function(e,t,o){"use strict";o.r(t)},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0});const s=o(0),n=o(1),a=o(2),r=o(15),l=o(3);o(42);let p=class extends s.Component{constructor(){super(...arguments),this.opend=!0,this.play=!1}changePlay(e){this.play=e}componentWillReceiveProps(e){this.props.quiz_prog!==e.quiz_prog&&"solving"===e.quiz_prog?this.opend=!0:this.props.quiz_prog!==e.quiz_prog&&"solving"!==e.quiz_prog&&(this.opend=!1),this.props.view!==e.view&&e.view&&this.props.onLoad&&this.props.onLoad(!0),this.props.view!==e.view&&!1===e.view&&this.props.onLoad&&this.props.onLoad(!1)}render(){const e=""!==this.props.quiz.question.image_s?s.createElement("img",{src:l.App.data_url+this.props.quiz.question.image_s}):s.createElement("img",{src:l.App.data_url+this.props.quiz.question.image_b}),t=""!==this.props.quiz.question.image_s?"small":"big",o=this.props.quiz.question.image_s+this.props.quiz.question.image_b;return s.createElement("div",{className:"quiz-board opend_"+this.opend+(o?" hasimg":" none")},s.createElement("div",{ref:e=>{null!==e&&this.props.setDom(e)},className:"question_side"},""!==this.props.quiz.question.audio?s.createElement(r.default,{url:l.App.data_url+this.props.quiz.question.audio,play:this.play,changePlay:e=>this.changePlay(e)}):"",s.createElement("p",{className:"text"},this.props.quiz.question.text),this.props.goToSolve?s.createElement("button",{className:"solution_btn",onClick:()=>this.props.goToSolve()}):"",""!==o?s.createElement("div",{className:"imagebox "+t},e):s.createElement(s.Fragment,null)),(()=>""!==o?s.createElement("button",{className:"open_btn",onClick:()=>this.opend=!this.opend}):s.createElement(s.Fragment,null))())}};i([a.observable],p.prototype,"opend",void 0),i([a.observable],p.prototype,"play",void 0),p=i([n.observer],p),t.default=p},function(e,t,o){"use strict";o.r(t)},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0});const s=o(0),n=o(1),a=o(2),r=o(15),l=o(3);o(44);const p=o(5);let c=class extends s.Component{constructor(){super(...arguments),this.play=!1}changePlay(e){this.play=e}componentDidUpdate(e){this.props.view!==e.view&&!1===this.props.view&&(this.play=this.props.view)}render(){return void 0===this.props.quiz.solution_question||void 0===this.props.quiz.solution_solution?s.createElement(s.Fragment,null):s.createElement("div",{className:"popup_solution",style:p.fnIsVisibleComponent(this.props.view)},s.createElement("div",{className:"question"},""!==this.props.quiz.solution_question.audio?s.createElement(r.default,{url:l.App.data_url+this.props.quiz.solution_question.audio,play:this.play,changePlay:e=>this.changePlay(e)}):"",s.createElement("div",{className:"p",dangerouslySetInnerHTML:{__html:this.props.quiz.solution_question.text+""}}),""!==this.props.quiz.solution_question.image?s.createElement("div",{className:"p"},s.createElement("img",{src:l.App.data_url+this.props.quiz.solution_question.image})):s.createElement(s.Fragment,null)),s.createElement("div",{className:"solution "+(0===this.props.quiz.solution_solution.text.length?" only_image":"")+(0===this.props.quiz.solution_solution.image.length?" only_text":"")},0!==this.props.quiz.solution_solution.text.length?s.createElement("div",{className:"p",dangerouslySetInnerHTML:{__html:this.props.quiz.solution_solution.text+""}}):s.createElement(s.Fragment,null),""!==this.props.quiz.solution_solution.image?s.createElement("div",{className:"p"},s.createElement("img",{src:l.App.data_url+this.props.quiz.solution_solution.image})):s.createElement(s.Fragment,null),s.createElement("button",{className:"btn_goquiz",onClick:()=>this.props.goToQuiz()})))}};i([a.observable],c.prototype,"play",void 0),c=i([n.observer],c),t.default=c},function(e,t,o){"use strict";o.r(t)},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(s,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function r(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),a=o(1),r=o(6),l=o(5),p=o(2),c=o(4),u=o(3);o(46);const d=o(47),h=o(16);let m=class extends n.Component{constructor(){super(...arguments),this.select_team="none",this.select_user=[],this.on_checkpage=!1,this.on_checkpage_type="none",this.select_students={red:[],green:[]},this.stu_idx_onresult=0,this.selected_mvp=[""]}pointCheck(e,t,o,i){this.props.goToPointBoard(()=>{if("both"===e){let e=null,s=null;this.props.teaminfo.map(i=>{"red"===i.name&&(e=i),"green"===i.name&&(s=i),o?i.livePoint+=t:i.livePoint-=t,i.livePoint<0&&(i.livePoint=0)}),null!==e&&null!==s&&i(e.livePoint,s.livePoint)}else{let s=e,n="green";"green"===s&&(n="red");let a=null,r=null;if(this.props.teaminfo.map(e=>{e.name===s?a=e:e.name===n&&(r=e)}),null!==a&&null!==r)if(o){a.livePoint+=t}else{const e=a,o=r;e.livePoint-t<0?o.livePoint+=t:e.livePoint-=t}"green"===s&&null!==r&&null!==a?i(r.livePoint,a.livePoint):null!==r&&null!==a&&i(a.livePoint,r.livePoint)}})}componentDidUpdate(e){!1===this.props.view&&!0===e.view&&(this.select_team="none",this.on_checkpage=!1,this.props.naviToggle(!this.on_checkpage),this.stu_idx_onresult=0,clearTimeout(this.delay_result)),!1===this.props.reset&&!0===e.reset&&(this.selected_mvp=["","","","","",""])}componentWillMount(){this.selected_mvp=["","","","","",""]}noticeRepresentor(e,t,o,i,n){"resolved"===o?c.delay(()=>{l.PlaySelectRepresentorSound()},10):l.PlayBasicButtonSound(),"resolved"===o&&(this.select_team=e.getAttribute("data-team"),this.select_students[this.select_team].unshift(n)),this.delay_result=c.delay(()=>{if("resolved"===o){let e={msgtype:"viewing-representor",solved:Object.assign(Object.assign({},n),{teamname:this.select_team})};u.App.pub_reloadStudents(()=>s(this,void 0,void 0,(function*(){r.sendPAD(10,JSON.stringify(e))})))}t.solved[this.props.quizIdx][i]&&(this.select_team=t.name,this.on_checkpage=!0),this.props.naviToggle(!1)},10)}printTeamInner(e){if(void 0===e.solved||e.solved.length<this.props.quizIdx)return n.createElement(n.Fragment,{key:"pTI"});if(void 0===e.teams&&(e.teams=[]),void 0===e.solved[this.props.quizIdx])return n.createElement(n.Fragment,{key:"pTII"});let t;return e.solved[this.props.quizIdx].map((o,i)=>n.createElement("li",{className:"solved select_type"+o.selected,key:"student_"+o.id+i,"data-team":e.name,ref:e=>t=e,onClick:s=>{this.stu_idx_onresult=i,o.selected?(this.on_checkpage_type="none",clearTimeout(this.delay_result),this.noticeRepresentor(t,e,e.name,this.stu_idx_onresult,e.solved[this.props.quizIdx][i])):""!==this.selected_mvp[this.props.quizIdx]?(this.on_checkpage_type="none",clearTimeout(this.delay_result),this.noticeRepresentor(t,e,e.name,i,o)):(this.on_checkpage_type="representor",clearTimeout(this.delay_result),this.noticeRepresentor(t,e,"resolved",i,o))}},n.createElement(h.default,{thumbnail:o.thumb,avatar:o.avatar,displayMode:o.displayMode,name:"1"===o.displayMode?o.name:o.nickname,className:"",gender:o.gender}),n.createElement("span",{className:"name"},"1"===o.displayMode?o.name:o.nickname)))}printTeam(){return this.props.teaminfo.map((e,t)=>{if("yellow"!==e.name&&!(void 0===e||void 0===e.teams||void 0===e.solved||e.solved.length<this.props.quizIdx))return n.createElement("li",{key:"board_"+e.name+t,onClick:t=>(t.stopPropagation(),this.selectTeam(e.name),!1)},n.createElement("ul",null,this.printTeamInner(e)))})}printTeamSubmitBtn(){return this.props.teaminfo.map((e,t)=>{if("yellow"!==e.name&&!(void 0===e||void 0===e.teams||void 0===e.solved||e.solved.length<this.props.quizIdx))return n.createElement("button",{key:"temsubmit_btn"+t,className:"solvedlist_btn "+e.name,onClick:t=>{t.stopPropagation(),void 0!==e.solved[this.props.quizIdx][0]&&(this.on_checkpage_type="none",clearTimeout(this.delay_result),this.stu_idx_onresult=0,this.noticeRepresentor(t,e,e.name,this.stu_idx_onresult,e.solved[this.props.quizIdx][0]))}})})}selectTeam(e){this.select_team=e}selectUser(e){let t,o="none";if(this.props.teaminfo.map(i=>{i.solved[this.props.quizIdx].filter(s=>!(!s||s.id!==e)&&(t=s,o=i.name,!0))}),void 0!==t){const e=o;-1===this.select_user.findIndex(e=>e.teamname===o)&&this.select_user.push({teamname:e,student:t})}}render(){return void 0===this.props.teaminfo?n.createElement(n.Fragment,{key:"Ti"}):n.createElement(n.Fragment,null,n.createElement("div",{className:"select_"+this.select_team}),n.createElement("div",{className:"popup_teamboard"},n.createElement("span",{className:"wait "+(()=>{let e="";return this.props.teaminfo.map(t=>{t.solved&&t.solved[this.props.quizIdx]&&t.solved[this.props.quizIdx].length>0&&(e="have_solved")}),e})(),hidden:this.props.isend},"Waiting for students to",n.createElement("strong",null,"press the button"),"..."),n.createElement("ul",null,this.printTeam())),this.printTeamSubmitBtn(),n.createElement(d.TStudentResultList,{view:this.on_checkpage,type:this.on_checkpage_type,teamsinfo:this.props.teaminfo,quizIdx:this.props.quizIdx,stuIdxOnResult:this.stu_idx_onresult,quizPoint:this.props.point,teamname:this.select_team,student_list:this.select_students,busserClick:(e,t)=>{this.props.teaminfo.map(e=>{e.solved.map((e,o)=>{o===this.props.quizIdx&&e.map(e=>{e&&t===e.id&&(e.selected=2)})})}),e&&this.select_students[this.select_team]&&""===this.selected_mvp[this.props.quizIdx]&&(this.selected_mvp[this.props.quizIdx]=t,this.select_students[this.select_team].map(e=>{e&&this.selected_mvp[this.props.quizIdx]===e.id&&(e.selected=1,this.props.quiz.is_winner=!0)}))},pointcheck:(e,t,o,i)=>{this.on_checkpage=!1,this.props.naviToggle(!1),this.pointCheck(e,t,o,(e,t)=>i(e,t))},onToggle:e=>{this.on_checkpage=!1,"none"===e&&(this.select_team="none")},onPrevNext:e=>{this.stu_idx_onresult=e}}))}};i([p.observable],m.prototype,"select_team",void 0),i([p.observable],m.prototype,"select_user",void 0),i([p.observable],m.prototype,"on_checkpage",void 0),i([p.observable],m.prototype,"on_checkpage_type",void 0),i([p.observable],m.prototype,"select_students",void 0),i([p.observable],m.prototype,"stu_idx_onresult",void 0),i([p.observable],m.prototype,"selected_mvp",void 0),m=i([a.observer],m),t.default=m},function(e,t,o){"use strict";o.r(t)},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(s,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function r(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TStudentResultList=void 0;const n=o(0),a=o(1),r=o(2),l=o(6),p=o(5),c=o(4);o(48),o(49);const u=o(3),d=o(16),h=o(5);let m=class extends n.Component{constructor(){super(...arguments),this.view_student=!1,this.busser_type=0,this.student_list=[]}getCurrentQuizResults(e){let t=[];return this.props.teamsinfo.map(o=>{-1!==o.name.indexOf(this.props.teamname)&&o.solved&&(t=[...o.solved[e]])}),t}getStudentResultByQuizs(e,t){const o=this.getCurrentQuizResults(e);let i=null;return o.map((e,t)=>{t===this.props.stuIdxOnResult&&(i=e)}),i}componentDidUpdate(e){!1===this.props.view&&!0===e.view&&(this.view_student=!1,this.student_list=[],this.busser_type=0),!0===this.props.view&&!1===e.view&&(this.student_list=this.getCurrentQuizResults(this.props.quizIdx),"representor"===this.props.type&&(this.view_student=!0,c.delay(()=>{this.view_student=!1},2e3)))}render(){let e=this.getStudentResultByQuizs(this.props.quizIdx,this.props.student_list);if(null===e)return n.createElement(n.Fragment,null);let t=e;return n.createElement("div",{className:"student_result_popup "+this.props.teamname,style:h.fnIsVisibleComponent(this.props.view),"data-view":this.props.view},n.createElement("div",{className:"representor_pop "+(this.view_student?"open":"")},n.createElement(d.default,{thumbnail:t.thumb,avatar:t.avatar,displayMode:t.displayMode,name:"1"===t.displayMode?t.name:t.nickname,className:"",gender:t.gender}),n.createElement("span",null,n.createElement("i",{className:this.props.teamname})," ",n.createElement("span",null,"1"===t.displayMode?t.name:t.nickname))),n.createElement("div",{className:"detail"},n.createElement("div",{className:"stuinfo"},n.createElement(d.default,{thumbnail:t.thumb,avatar:t.avatar,displayMode:t.displayMode,name:"1"===t.displayMode?t.name:t.nickname,className:"",gender:t.gender}),n.createElement("i",{className:this.props.teamname}),n.createElement("span",null,"1"===t.displayMode?t.name:t.nickname)),n.createElement("div",{className:"answer"},n.createElement("img",{src:t.answer}))),n.createElement("button",{className:"check_btn right"+(1===this.busser_type?" press":""),hidden:"none"===this.props.type,onClick:()=>{1!==this.busser_type&&(this.busser_type=1,p.PlayCorrectSound(),c.delay(()=>{this.props.pointcheck(this.props.teamname,this.props.quizPoint,!0,(e,o)=>{let i={msgtype:"quiz_checked",solved:!0,id:t.id,red_point:e,green_point:o};u.App.pub_reloadStudents(()=>s(this,void 0,void 0,(function*(){l.sendPAD(10,JSON.stringify(i))}))),this.props.busserClick(!0,t.id)})},1e3))}},"on"),n.createElement("button",{className:"check_btn wrong"+(2===this.busser_type?" press":""),hidden:"none"===this.props.type,onClick:()=>{2!==this.busser_type&&(this.busser_type=2,p.PlayWrongSound(),c.delay(()=>{this.props.pointcheck(this.props.teamname,this.props.quizPoint,!1,(e,o)=>{let i={msgtype:"quiz_checked",solved:!1,id:t.id,red_point:e,green_point:o};u.App.pub_reloadStudents(()=>s(this,void 0,void 0,(function*(){l.sendPAD(10,JSON.stringify(i))}))),this.props.busserClick(!1,t.id)})},1e3))}},"off"),n.createElement("div",{className:"toggle_btn_list",hidden:"representor"===this.props.type},n.createElement("button",{className:"btn_prev",disabled:0===this.props.stuIdxOnResult,onClick:()=>{this.props.onPrevNext(this.props.stuIdxOnResult-1)}},"btn_prev"),n.createElement("button",{className:"list_toggle",onClick:()=>{this.props.onToggle(this.props.type)}},"list_toggle"),n.createElement("button",{className:"btn_next",disabled:this.props.stuIdxOnResult===this.student_list.length-1||0===this.student_list.length,onClick:()=>{this.props.onPrevNext(this.props.stuIdxOnResult+1)}},"btn_next_test ",this.student_list.length)))}};i([r.observable],m.prototype,"view_student",void 0),i([r.observable],m.prototype,"busser_type",void 0),i([r.observable],m.prototype,"student_list",void 0),m=i([a.observer],m),t.TStudentResultList=m},function(e,t,o){"use strict";o.r(t)},function(e,t,o){"use strict";o.r(t)},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0});const s=o(0),n=o(1),a=o(5);o(51);const r=o(5);let l=class extends s.Component{componentDidUpdate(e){!1===e.view&&!0===this.props.view&&a.PlayScoreAddSound()}render(){return s.createElement("div",{className:"pointBoard",style:r.fnIsVisibleComponent(this.props.view)},s.createElement("div",{className:"score red"},s.createElement("h2",null,"red"),s.createElement("strong",null,this.props.redPoint)),s.createElement("span",{className:"vs"},"VS"),s.createElement("div",{className:"score green"},s.createElement("h2",null,"green"),s.createElement("strong",null,this.props.greenPoint)))}};l=i([n.observer],l),t.default=l},function(e,t,o){"use strict";o.r(t)},function(e,t,o){"use strict";o.r(t)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=o(0),s=o(1),n=o(7),a=o(54);o(14);class r extends i.Component{render(){const{state:e,actions:t}=this.props;e.viewDiv;return i.createElement(i.Fragment,null,i.createElement(a.Navi,Object.assign({},e.navi,{onLeftClick:t.naviLeft,onRightClick:t.naviRight})))}}const l=n.useTeacher(e=>i.createElement(s.Observer,null,()=>i.createElement(r,{state:Object.assign({},e.state),actions:e.actions})));t.default=l},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Navi=void 0;const s=o(0),n=o(2),a=o(1),r=o(55);let l=class extends s.Component{constructor(e){super(e),this.m_on=!1,this.m_isStarted=!1,this._onClick=e=>{this.m_on=!0}}componentDidUpdate(e){this.m_isStarted||!this.props.view||e.view||(this.m_isStarted=!0,this.m_on=!0)}render(){const e=this.m_on?void 0:"off",t={visibility:this.props.view?"visible":"hidden"};return s.createElement(s.Fragment,null,s.createElement("div",{id:"common_navi_left",className:e,style:t},s.createElement("div",null,s.createElement("div",{onClick:this._onClick},s.createElement(r.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),s.createElement(r.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))),s.createElement("div",{id:"common_navi_right",className:e,style:t},s.createElement("div",null,s.createElement("div",{onClick:this._onClick},s.createElement(r.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),s.createElement(r.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))))}};i([n.observable],l.prototype,"m_on",void 0),l=i([a.observer],l),t.Navi=l},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.ImgBtn=t.AudioBtn=t.ToggleBtn=void 0;const s=o(0),n=o(2),a=o(1);class r extends s.Component{constructor(e){super(e),this.m_pID=-1,this._inited=this._inited.bind(this),this._onClick=this._onClick.bind(this)}_inited(e){!this.m_el&&e&&(this.m_el=e,this.props.onRef&&this.props.onRef(e),e.setAttribute("touch-action","none"),e.addEventListener("pointerdown",t=>{if(!(this.m_pID>=0)){if(this.m_pID=t.pointerId,!this.props.disableCapture)try{e.setPointerCapture(this.m_pID)}catch(e){}this.props.onMouseDown&&this.props.onMouseDown(t)}}),e.addEventListener("pointerup",t=>{if(this.m_pID===t.pointerId){try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1,this.props.onMouseUp&&this.props.onMouseUp(t)}}),e.addEventListener("pointerleave",t=>{if(this.props.disableCapture){if(this.m_pID!==t.pointerId)return;try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1}this.props.onMouseLeave&&this.props.onMouseLeave(t)}),e.addEventListener("pointercancel",t=>{if(this.m_pID===t.pointerId){try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1,this.props.onMouseLeave&&this.props.onMouseLeave(t)}}))}_onClick(e){this.props.onClick&&this.props.onClick(e),this.props.preventEvent&&(e.preventDefault(),e.stopPropagation())}componentDidUpdate(e){if((this.props.disabled&&!e.disabled||!this.props.view&&e.view)&&this.m_pID>=0){try{this.m_el&&this.m_el.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1}}}i([n.observable],r.prototype,"m_pID",void 0);let l=class extends r{constructor(e){super(e),this.m_on=!1,this.m_on=!0===e.on}componentWillReceiveProps(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}render(){const e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down");const t=e.join(" ");let o=this.props.style;return!1===this.props.view&&(o||(o={}),o.display="none"),s.createElement("button",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,disabled:!0===this.props.disabled,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:o},this.props.children)}};i([n.observable],l.prototype,"m_on",void 0),l=i([a.observer],l),t.ToggleBtn=l;let p=class extends l{constructor(e){super(e)}play(){this.m_on||(this.m_on=!0,this.props.playFnc(this.props.src,e=>{this.m_on&&(this.m_on=!1,this.props.onPause&&this.props.onPause(e))}))}_onClick(e){this.m_on?(this.props.pauseFnc(),this.m_on=!1):this.play(),super._onClick(e)}};i([n.action],p.prototype,"play",null),i([n.action],p.prototype,"_onClick",null),p=i([a.observer],p),t.AudioBtn=p;let c=class extends r{constructor(e){super(e),this.m_on=!1,this.m_on=!0===e.on}componentWillReceiveProps(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}render(){const e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down"),!0===this.props.disabled&&e.push("disable");const t=e.join(" ");let o=this.props.style;return!1===this.props.view&&(o||(o={}),o.display="none"),s.createElement("img",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:o,src:this.props.src,useMap:this.props.useMap})}};i([n.observable],c.prototype,"m_on",void 0),c=i([a.observer],c),t.ImgBtn=c},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(t,"__esModule",{value:!0});const s=o(0),n=o(1),a=o(7);o(57);const r=o(2),l=o(4),p=o(58),c=o(3);let u=class extends s.Component{constructor(){super(...arguments),this.view=!1,this.movto=!1}componentDidUpdate(e){this.props.state.prog!==e.state.prog&&"end"!==this.props.state.prog&&l.delay(()=>{this.view=!1},300),this.props.state.prog!==e.state.prog&&"end"===this.props.state.prog&&(this.view=!0),""===this.props.state.prog?this.movto=!0:this.movto=!1}moveTo(){return this.movto,{left:1280,zindex:this.view?1:-2}}winnerCheck(){let e=0,t=0,o="tie",i=[];return this.props.state.teamsinfo.map(o=>{"red"===o.name&&(e=o.livePoint),"green"===o.name&&(t=o.livePoint)}),e<t&&(o="green",this.props.state.teamsinfo.map(e=>{"green"===e.name&&e.teams&&(i=e.teams.map(e=>e.id))})),t<e&&(o="red",this.props.state.teamsinfo.map(e=>{"red"===e.name&&e.teams&&(i=e.teams.map(e=>e.id))})),e===t&&(o="tie",this.props.state.teamsinfo.map(e=>{e.teams&&(i=e.teams.map(e=>e.id))})),o}render(){const{state:e,actions:t}=this.props;return s.createElement(s.Fragment,null,s.createElement("div",{className:"content-wrapper end_"+("end"!==e.prog?"out":"in")+e.movefast,style:{left:("end"!==e.prog?this.moveTo().left:0)+"px",zIndex:"end"!==e.prog?this.moveTo().zindex:0}},s.createElement(p.default,{view:"end"===e.prog,winner:this.winnerCheck(),mode:"teacher"}),s.createElement("button",{className:"common_back",onClick:()=>{c.App.pub_playBtnBack(),t.setProg("teamquiz")}})))}};i([r.observable],u.prototype,"view",void 0),i([r.observable],u.prototype,"movto",void 0),u=i([n.observer],u);const d=a.useTeacher(e=>s.createElement(n.Observer,null,()=>s.createElement(u,{state:Object.assign({},e.state),actions:e.actions})));t.default=d},function(e,t,o){"use strict";o.r(t)},function(e,t,o){"use strict";var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,o,a):s(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(s,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function r(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),a=o(1),r=o(5),l=o(4),p=o(6),c=o(3);o(59);let u=class extends n.Component{componentDidUpdate(e){this.props.view!==e.view&&"teacher"===this.props.mode&&!0===this.props.view&&l.delay(()=>{let e={msgtype:"winner-page",winner:this.props.winner};c.App.pub_reloadStudents(()=>s(this,void 0,void 0,(function*(){p.sendPAD(10,JSON.stringify(e))})))},500),this.props.view!==e.view&&!0===this.props.view&&r.PlayCurtainSound(r.PlayWinnerSound)}render(){return n.createElement("div",{className:"end-quiz "+(this.props.view?" active ":"")+" winner_"+this.props.winner},n.createElement("i",{className:"shine"}),n.createElement("i",{className:"curtain_l"}),n.createElement("span",{className:"tropy"}),n.createElement("span",{className:"twinkle"}),n.createElement("span",{className:"confetty"}),n.createElement("i",{className:"curtain_r"}))}};u=i([a.observer],u),t.default=u},function(e,t,o){"use strict";o.r(t)},function(e,t,o){"use strict";o.r(t)}]);