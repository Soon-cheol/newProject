!function(e){var t={};function i(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(o,s,function(t){return e[t]}.bind(null,s));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=9)}([function(e,t){e.exports=React},function(e,t){e.exports=mobx},function(e,t){e.exports=mobxReact},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const o=i(14),s=i(5);function n(e){if(!e)return e;console.log("init student",e),e.displayMode=""+e.displayMode=="2"?"2":"1",e.gender=e.gender,""===e.nickname&&(e.nickname=e.name);let t=e.avatar&&""!==e.avatar?e.avatar:"";return""===t&&(t="f"===e.gender||"F"===e.gender?"/content/mathalive_lib/images/default_candy.png":"/content/mathalive_lib/images/default_cheese.png",e.avatar=t),e}class r{static get isMobile(){return r._isMobile}static get tempEl(){return r._tempEl}static pub_init(){const e=navigator.userAgent;r._isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e)||/android/i.test(e),r._tempBnd=document.createElement("div"),r._tempBnd.style.display="none",r._tempEl=document.createElement("div"),r._tempBnd.appendChild(r._tempEl),null===document.body?document.addEventListener("DOMContentLoaded",e=>{document.body.appendChild(r._tempBnd)}):document.body.appendChild(r._tempBnd)}static get students(){return r._students}static get student(){return r._student}static get lang(){return r._lang}static get isDvlp(){return r._isDvlp}static get data_url(){return r._data_url}static get lesson(){return r._lesson}static get book(){return r._book}static get nextBook(){return r._nextBook}static get prevBook(){return r._prevBook}static get addOnHost(){return r._addOnHost}static setaddOnHost(e){r._addOnHost=e}static pub_load(e,t,i,o,s,a,l){r._lesson=o,r._book=i,r._nextBook=a,r._prevBook=l,r._students=[],e&&Array.isArray(e)&&e.forEach((e,t)=>{r._students[t]=n(e)}),r._student=n(t),s&&""!==s&&(r._addOnHost=s)}static pub_reloadStudents(e){s.getStudents((t,i)=>{for(;r._students.length>0;)r._students.pop();for(;r._students_inited.length>0;)r._students_inited.pop();for(let e=0,i=t.length;e<i;e++)r.isDvlp?r._students[e]=n(t[e]):r._students[e]=n({id:t[e].id,name:t[e].name,thumb:t[e].defaultThumbnail,avatar:t[e].profileThumbnail,nickname:""!==t[e].nickName?t[e].nickName:t[e].name,displayMode:t[e].displayMode,gender:t[e].gender,inited:!0}),console.log("student",t[e]),r._students_inited.push(t[e].id);e()})}static pub_parseStyle(e){return r._tempEl.style.cssText=e,r._tempEl.style}static pub_initAudio(){r._common_audio=document.getElementById("common_audio"),r._ding_audio=document.getElementById("ding_audio"),r._dingend_audio=document.getElementById("dingend_audio"),r._btn_audio=document.getElementById("btn_audio"),r._correct_audio=document.getElementById("correct_audio"),r._wrong_audio=document.getElementById("wrong_audio"),r._topad_audio=document.getElementById("topad_audio"),r._goodjob_audio=document.getElementById("goodjob_audio"),r._btn_back_audio=document.getElementById("btn_back_audio"),r._btn_page_audio=document.getElementById("btn_page_audio"),r._popup_audio=document.getElementById("popup_audio"),r._clock_audio=document.getElementById("clock_audio"),r._ts_bgm_audio=document.getElementById("ts_bgm_audio"),r._bs_audio=document.getElementById("bs_audio"),r._bb_audio=document.getElementById("bb_audio"),r._cd_audio=document.getElementById("cd_audio"),r._tc_audio=document.getElementById("tc_audio"),r._te_audio=document.getElementById("te_audio"),r._trg_bgm_audio=document.getElementById("trg_bgm_audio"),r._afc_audio=document.getElementById("afc_audio"),r._trs_audio=document.getElementById("trs_audio"),r._btn_choice_audio=document.getElementById("btn_choice_audio"),r._retry_audio=document.getElementById("retry_audio"),r._sorry_audio=document.getElementById("sorry_audio"),r._great_audio=document.getElementById("great_audio"),r._memorygame_flipcard_audio=document.getElementById("flipcard_audio"),r._ispy_gameclick_audio=document.getElementById("gameclick_audio"),r._game_timesetting_start_audio=document.getElementById("game_timesetting_start"),r._solution_btn_audio=document.getElementById("solution_btn_audio"),r._game_result_audio=document.getElementById("game_result_audio"),r._open_problom_audio=document.getElementById("open_problom_audio"),r._quiz_done_audio=document.getElementById("quiz_done_audio"),r._hit_up_audio=document.getElementById("hu_audio"),r._hit_down_audio=document.getElementById("hd_audio"),r._hit_good_audio=document.getElementById("hg_audio"),r._hit_wrong_audio=document.getElementById("hw_audio"),r._pick_presenter=document.getElementById("pick_presenter"),r._game_good_audio=document.getElementById("gg_audio")}static pub_playClock(){r._clock_audio&&(r._clock_audio.currentTime=4.5,r._clock_audio.play())}static pub_playPopup(){r._popup_audio&&(r._popup_audio.currentTime=0,r._popup_audio.play())}static pub_playBtnPage(){r._btn_page_audio&&(r._btn_page_audio.currentTime=0,r._btn_page_audio.play())}static pub_playBtnBack(){r._btn_back_audio&&(r._btn_back_audio.currentTime=0,r._btn_back_audio.play())}static pub_playGoodjob(){r._goodjob_audio&&(r._goodjob_audio.currentTime=0,r._goodjob_audio.play())}static pub_playDing(){r._ding_audio&&(r._ding_audio.currentTime=0,r._ding_audio.play())}static pub_playDingend(){r._dingend_audio&&(r._dingend_audio.currentTime=0,r._dingend_audio.play())}static pub_playToPad(){r._topad_audio&&(r._topad_audio.currentTime=0,r._topad_audio.play())}static pub_playBtnTab(){r._btn_audio&&(r._btn_audio.currentTime=0,r._btn_audio.play())}static pub_playCorrect(){r._correct_audio&&(r._correct_audio.currentTime=0,r._correct_audio.play())}static pub_playWrong(){r._wrong_audio&&(r._wrong_audio.currentTime=0,r._wrong_audio.play())}static pub_playTeamSelectBgm(){r._ts_bgm_audio&&(r._ts_bgm_audio.currentTime=0,r._ts_bgm_audio.play())}static pub_stopTeamSelectBgm(){r._ts_bgm_audio&&(r._ts_bgm_audio.pause(),r._ts_bgm_audio.currentTime=0)}static pub_playStartButton(){r._bs_audio&&(r._bs_audio.currentTime=0,r._bs_audio.play())}static pub_playBasicButton(){r._bb_audio&&(r._bb_audio.currentTime=0,r._bb_audio.play())}static pub_playCountDown(){r._cd_audio&&(r._cd_audio.currentTime=0,r._cd_audio.play())}static pub_playTimerClock(){r._tc_audio&&(r._tc_audio.currentTime=0,r._tc_audio.play())}static pub_stopTimerClock(){r._tc_audio&&(r._tc_audio.pause(),r._tc_audio.currentTime=0)}static pub_playTimerEnd(){r._te_audio&&(r._te_audio.currentTime=0,r._te_audio.play())}static pub_playResultGraph(){r._trg_bgm_audio&&(r._trg_bgm_audio.currentTime=0,r._trg_bgm_audio.play())}static pub_playFireworksClapping(){r._afc_audio&&(r._afc_audio.currentTime=0,r._afc_audio.play())}static pub_playTotalResult(){r._trs_audio&&(r._trs_audio.currentTime=0,r._trs_audio.play())}static pub_playChoiceBtn(){r._btn_choice_audio&&(r._btn_choice_audio.currentTime=0,r._btn_choice_audio.play())}static pub_playsorry(){r._sorry_audio&&(r._sorry_audio.currentTime=0,r._sorry_audio.play())}static pub_playretry(){r._retry_audio&&(r._retry_audio.currentTime=0,r._retry_audio.play())}static pub_playgreat(){r._great_audio&&(r._great_audio.currentTime=0,r._great_audio.play())}static pub_playFlipCard(){r._memorygame_flipcard_audio&&(r._memorygame_flipcard_audio.currentTime=0,r._memorygame_flipcard_audio.play())}static pub_playGameClick(){r._ispy_gameclick_audio&&(r._ispy_gameclick_audio.currentTime=0,r._ispy_gameclick_audio.play())}static pub_game_timesetting_start(){r._game_timesetting_start_audio&&(r._game_timesetting_start_audio.currentTime=0,r._game_timesetting_start_audio.play())}static pub_solution_btn_click(){r._solution_btn_audio&&(r._solution_btn_audio.currentTime=0,r._solution_btn_audio.play())}static pub_playGameresult(){r._game_result_audio&&(r._game_result_audio.currentTime=0,r._game_result_audio.play())}static pub_openProblom(){r._open_problom_audio&&(r._open_problom_audio.currentTime=0,r._open_problom_audio.play())}static pub_quizDone(){r._quiz_done_audio&&(r._quiz_done_audio.currentTime=0,r._quiz_done_audio.play())}static pub_pick_presenter(){r._pick_presenter&&(r._pick_presenter.currentTime=0,r._pick_presenter.play())}static pub_stop(){null!=r._common_audio.onended&&r._common_audio.onended.call(r._common_audio,new Event("ended")),r._common_audio.oncanplaythrough=null,isNaN(r._common_audio.duration)||r._common_audio.paused||r._common_audio.pause()}static pub_play(e,t){r.pub_stop(),e=o.nteString(e,"");const i=o.nteString(r._common_audio.getAttribute("src"),"");if(""===e&&""===i)return void(null!=t&&t(!0));""!==e&&i!==e&&(r._common_audio.src=e);const s=e=>{r._common_audio.onended=null,null!==t&&t(!0),r._common_audio.removeEventListener("error",s)};r._common_audio.onended=e=>{r._common_audio.onended=null,null!==t&&t(!!e),r._common_audio.removeEventListener("error",s)},r._common_audio.addEventListener("error",s),isNaN(r._common_audio.duration)?(r._common_audio.oncanplaythrough=e=>{0!==r._common_audio.currentTime&&(r._common_audio.currentTime=0),r._common_audio.play(),r._common_audio.oncanplaythrough=null},r._common_audio.load()):(0!==r._common_audio.currentTime&&(r._common_audio.currentTime=0),r._common_audio.oncanplaythrough=null,r._common_audio.play())}static pub_set(e,t,i){r._isDvlp=t,r._lang=i,s.set(t)}static pub_addInitedStudent(e){let t=!0;for(let i=0,o=r._students_inited.length;i<o;i++){r._students_inited[i]===e.id&&(t=!1)}t&&r._students_inited.push(e.id);const i=r._start_idx>0&&r._students.length>0&&r._students_inited.length>=r._students.length;return i&&(window.clearTimeout(r._start_idx),r._start_idx=-1),i}static pub_start(e){0===r._students.length||r._students_inited.length>=r._students.length?e():r._start_idx=window.setTimeout(e,2e3)}static pub_clear(){for(;r._students.length>0;)r._students.pop();for(;r._students_inited.length>0;)r._students_inited.pop()}static pub_playHitup(){r._hit_up_audio&&(r._hit_up_audio.currentTime=0,r._hit_up_audio.play())}static pub_playHitdown(){r._hit_down_audio&&(r._hit_down_audio.currentTime=0,r._hit_down_audio.play())}static pub_playHitgood(){r._hit_good_audio&&(r._hit_good_audio.currentTime=0,r._hit_good_audio.play())}static pub_playHitwrong(){r._hit_wrong_audio&&(r._hit_wrong_audio.currentTime=0,r._hit_wrong_audio.play())}static pub_playGamegood(){r._game_good_audio&&(r._game_good_audio.currentTime=0,r._game_good_audio.play())}}t.App=r,r._isMobile=!1,r._students=[],r._students_inited=[],r._student=null,r._lang="ko",r._isDvlp=!1,r._data_url="../data/",r._lesson="",r._book="",r._nextBook=!1,r._prevBook=!1,r._start_idx=-1,r.isStarted=!1,r._addOnHost="https://addonsapi.fel40.com"},function(e,t){e.exports=_},function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{l(o.next(e))}catch(e){n(e)}}function a(e){try{l(o.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.postAttention=t.postViewDiv=t.getPreviewDmsResult=t.getPreviewResult=t.showSGiftBox=t.showSLivePointPop=t.launchSTool=t.clearPenTool=t.hidePenTool=t.showPenTool=t.showRecordTool=t.showSendButton=t.alertToStudent=t.showSLoading=t.showSMathKit=t.clearSPenTool=t.takePicture=t.uploadInclassReport=t.stopVideoRecord=t.startVideoRecord=t.switchCamera=t.stopCamera=t.pauseRecordPlayer=t.playRecordPlayer=t.startCustomCamera=t.startCamera=t.getStudents=t.uploadFileToServerMulti=t.uploadImageToServer=t.uploadFileToServer=t.stopVoiceRecord=t.startVoiceRecord=t.sendTeacher=t.disableSoftwareKeyboard=t.sendPAD=t.sendPADToID=t.sendLauncher=t.uploadStudentReport=t.addStudentForStudentReportType6=t.hideStudentReportListPage=t.showStudentReportListPage=t.showStudentReportUI=t.hideStudentReportUI=t.startStudentReportProcess=t.finishContentPage=t.showTMathKit=t.alertToTeacher=t.showTLoading=t.clearTPenTool=t.getBookCaptureInfo=t.uploadTImageToServer=t.useFractionBar=t.logOut=t.exitClass=t.getNaviInfo=t.launchPadTool=t.launchTool=t.exitBook=t.gotoBookByKey=t.gotoBook=t.set=void 0;const s=i(4);let n=!1;t.set=function(e){n=e},t.gotoBook=function(e,t){if(console.log("felsocket gotoBook",e,t),!n)try{window.tsoc_o.gotoBook(e,t)}catch(e){}},t.gotoBookByKey=function(e){if(console.log("felsocket gotoBookByKey",e),!n)try{window.tsoc_o.gotoBookByKey(e)}catch(e){}},t.exitBook=function(){if(console.log("felsocket exitBook"),!n)try{window.tsoc_o.exitBook()}catch(e){}},t.launchTool=function(e){if(console.log("felsocket launchTool",e),!n)try{window.tsoc_o.launchTool(e)}catch(e){}},t.launchPadTool=function(e){if(console.log("felsocket launchPadTool",e),!n)try{window.tsoc_o.launchPadTool(e)}catch(e){}},t.getNaviInfo=function(e){if(console.log("felsocket getNaviInfo",e),!n)try{window.tsoc_o.getNaviInfo(e)}catch(e){}},t.exitClass=function(){if(console.log("felsocket exitClass"),!n)try{window.tsoc_o.exitClass()}catch(e){}},t.logOut=function(){if(console.log("felsocket logOut"),!n)try{window.tsoc_o.logOut()}catch(e){}},t.useFractionBar=function(){if(console.log("felsocket useFractionBar"),!n)try{window.tsoc_o.useFractionBar()}catch(e){}},t.uploadTImageToServer=function(e,t,i,o){if(console.log("felsocket uploadTImageToServer",t,i,o),!n)try{window.tsoc_o.uploadImageToServer(e,t,i,o)}catch(e){}},t.getBookCaptureInfo=function(e){if(console.log("felsocket getBookCaptureInfo"),!n)try{window.tsoc_o.getBookCaptureInfo(e)}catch(e){}},t.clearTPenTool=function(){if(console.log("felsocket clearTPenTool"),!n)try{window.tsoc_o.clearPenTool()}catch(e){}},t.showTLoading=function(e){if(console.log("felsocket showTLoading",e),!n)try{window.tsoc_o.showLoading(e)}catch(e){}},t.alertToTeacher=function(e){if(console.log("felsocket alertToTeacher",e),!n)try{window.tsoc_o.alert(e)}catch(e){}},t.showTMathKit=function(e){if(console.log("felsocket showTMathKit",e),!n)try{window.tsoc_o.showMathKit(e)}catch(e){}},t.finishContentPage=function(){if(!n)try{window.tsoc_o.finishContentPage()}catch(e){}},t.startStudentReportProcess=function(e,t,i){if(!n)try{window.tsoc_o.startStudentReportProcess(e,t,i)}catch(e){}},t.hideStudentReportUI=function(){if(!n)try{window.tsoc_o.hideStudentReportUI()}catch(e){}},t.showStudentReportUI=function(){if(!n)try{window.tsoc_o.showStudentReportUI()}catch(e){}},t.showStudentReportListPage=function(){if(!n)try{window.tsoc_o.showStudentReportListPage()}catch(e){}},t.hideStudentReportListPage=function(){if(!n)try{window.tsoc_o.hideStudentReportListPage()}catch(e){}},t.addStudentForStudentReportType6=function(e){if(!n)try{window.tsoc_o.addStudentForStudentReportType6(e)}catch(e){}},t.uploadStudentReport=function(e,t,i){if(!n)try{window.psoc_o.uploadStudentReport(e,t,i)}catch(e){}},t.sendLauncher=function(e,t){if(5!==e||n)if(6!==e||n)if(7!==e||n){if(8===e)if(console.log("felsocket gotoPrevBook"),n)try{window.top.tsoc_o.gotoPrevBook()}catch(e){}else try{window.tsoc_o.gotoPrevBook()}catch(e){}else if(9===e)if(console.log("felsocket gotoNextBook"),n)try{window.top.tsoc_o.gotoNextBook()}catch(e){}else try{window.tsoc_o.gotoNextBook()}catch(e){}}else try{window.tsoc_o.setTitleBar(t)}catch(e){}else try{window.tsoc_o.showTitleBar()}catch(e){}else try{window.tsoc_o.hideTitleBar()}catch(e){}},t.sendPADToID=function(e,t,i){const o={type:t,data:i};if(n)try{window.top.tsoc_o.sendPADToID(e,o)}catch(e){}else try{window.tsoc_o.sendPADToID(e,o)}catch(e){}},t.sendPAD=function(e,t){const i={type:e,data:t};if(n)try{window.top.tsoc_o.sendAll(i)}catch(e){}else try{window.tsoc_o.sendAll(i)}catch(e){}},t.disableSoftwareKeyboard=function(){try{window.psoc_o.disableSoftwareKeyboard()}catch(e){}},t.sendTeacher=function(e,t){const i={type:e,data:t};if(n)try{null!==window.opener&&window.opener.tsoc_o.sendTeacher(i)}catch(e){}else try{window.psoc_o.sendTeacher(i)}catch(e){}},t.startVoiceRecord=function(){try{window.psoc_o.startVoiceRecord()}catch(e){}},t.stopVoiceRecord=function(){try{window.psoc_o.stopVoiceRecord()}catch(e){}},t.uploadFileToServer=function(e){try{window.psoc_o.uploadFileToServer(e)}catch(e){}},t.uploadImageToServer=function(e,t,i,o){try{window.psoc_o.uploadImageToServer(e,t,i,o)}catch(e){}},t.uploadFileToServerMulti=function(e){try{window.psoc_o.uploadFileToServerMulti(e)}catch(e){}},t.getStudents=function(e){if(n)if(window.top.tsoc_o)try{window.top.tsoc_o.getStudents(e)}catch(e){}else e([],!1);else try{window.tsoc_o.getStudents(e)}catch(e){}},t.startCamera=function(e){if(!n)try{window.psoc_o.startCamera(e)}catch(e){}},t.startCustomCamera=function(e){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"startCustomCamera",msg:e},"*")},t.playRecordPlayer=function(){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"playRecordPlayer"},"*")},t.pauseRecordPlayer=function(){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"pauseRecordPlayer"},"*")},t.stopCamera=function(){if(!n)try{window.psoc_o.stopCamera()}catch(e){}},t.switchCamera=function(e){if(!n)try{window.psoc_o.switchCamera(e)}catch(e){}},t.startVideoRecord=function(){if(!n)try{window.psoc_o.startVideoRecord()}catch(e){}},t.stopVideoRecord=function(){if(!n)try{window.psoc_o.stopVideoRecord()}catch(e){}},t.uploadInclassReport=function(e){if(!n)try{window.tsoc_o.uploadInclassReport(e)}catch(e){}},t.takePicture=function(e){if(!n)try{window.psoc_o.takePicture(e)}catch(e){}},t.clearSPenTool=function(){if(console.log("felsocket clearPenTool"),!n)try{window.psoc_o.clearPenTool()}catch(e){}},t.showSMathKit=function(e){if(console.log("felsocket showSMathKit",e),!n)try{window.psoc_o.showMathKit(e)}catch(e){}},t.showSLoading=function(e){if(console.log("felsocket showSLoading",e),!n)try{window.psoc_o.showLoading(e)}catch(e){}},t.alertToStudent=function(e){if(console.log("felsocket alertToStudent",e),!n)try{window.psoc_o.alert(e)}catch(e){}},t.showSendButton=function(e,t){if(console.log("felsocket showSendButton"),!n)try{window.psoc_o.showSendButton(e,t)}catch(e){}},t.showRecordTool=function(e){if(console.log("felsocket showRecordTool",e),!n)try{window.psoc_o.showRecordTool(e)}catch(e){}},t.showPenTool=function(){if(console.log("felsocket showPentool"),!n)try{window.psoc_o.showPenTool()}catch(e){}},t.hidePenTool=function(){if(console.log("felsocket hidePentool"),!n)try{window.psoc_o.hidePenTool()}catch(e){}},t.clearPenTool=function(){if(console.log("felsocket clearPenTool"),!n)try{window.psoc_o.clearPenTool()}catch(e){}},t.launchSTool=function(e){if(console.log("felsocket launchTool",e),!n)try{window.psoc_o.launchTool(e)}catch(e){}},t.showSLivePointPop=function(e){if(console.log("felsocket showLivePointPop"),!n)try{window.psoc_o.showLivePointPop(e)}catch(e){}},t.showSGiftBox=function(e,t){if(console.log("felsocket showGiftBox"),!n)try{window.psoc_o.showGiftBox(e,t)}catch(e){}},t.getPreviewResult=function(e){return o(this,void 0,void 0,(function*(){return new Promise(t=>{if(n)t([]);else{let i=!1;const o=e=>{i||(i=!0,t(e))};window.tsoc_o.getPreviewResult(o,e),s.delay(()=>{i||(i=!0,t([]))},5e3)}})}))},t.getPreviewDmsResult=function(e){return o(this,void 0,void 0,(function*(){return new Promise(t=>{if(n)t([]);else{let i=!1;const o=e=>{i||(i=!0,t(e))};window.tsoc_o.getPreviewDmsResult(o,e),s.delay(()=>{i||(i=!0,t([]))},5e3)}})}))},t.postViewDiv=function(e){return o(this,void 0,void 0,(function*(){console.log("postViewDiv",e),window.top.postMessage({type:"viewDiv",msg:e,from:"content"},"*")}))},t.postAttention=function(e){return o(this,void 0,void 0,(function*(){console.log("postAttention",e),window.top.postMessage({type:"attention",msg:e,from:"content"},"*")}))}},function(e,t,i){"use strict";var o=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{l(o.next(e))}catch(e){n(e)}}function a(e){try{l(o.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getBounds=t.getTimeStr=t.wait=void 0;const s=i(4);t.wait=function(e){return o(this,void 0,void 0,(function*(){return new Promise(t=>{s.delay(t,e)})}))},t.getTimeStr=function(e,t){const i=Math.round(t/1e3);let o=Math.round(e/1e3),s=Math.floor(o/60),n=Math.floor(s/60),r="";return o%=60,s%=60,n>0||i>=3600?(r=n+":",r+=s>=10?s+":":"0"+s+":"):i>=600?r+=s>=10?s+":":"0"+s+":":r=s+":",r+=o>=10?o:"0"+o,r},t.getBounds=function(e){const t={left:0,top:0,width:0,height:0};if(!e)return t;try{const i=e.getBoundingClientRect();t.left=i.left,t.top=i.top,t.width=i.width,t.height=i.height}catch(e){}const i=e.ownerDocument,o=i.body,s=i.documentElement;t.left=t.left-(s.clientLeft||o.clientLeft||0),t.top=t.top-(s.clientTop||o.clientTop||0);const n=i.defaultView;return t.left+=n.pageXOffset||s.scrollLeft||o.scrollLeft,t.top+=n.pageYOffset||s.scrollTop||o.scrollTop,t}},function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.ImgBtn=t.AudioBtn=t.ToggleBtn=void 0;const s=i(0),n=i(1),r=i(2);class a extends s.Component{constructor(e){super(e),this.m_pID=-1,this._inited=this._inited.bind(this),this._onClick=this._onClick.bind(this)}_inited(e){!this.m_el&&e&&(this.m_el=e,this.props.onRef&&this.props.onRef(e),e.setAttribute("touch-action","none"),e.addEventListener("pointerdown",t=>{if(!(this.m_pID>=0)){if(this.m_pID=t.pointerId,!this.props.disableCapture)try{e.setPointerCapture(this.m_pID)}catch(e){}this.props.onMouseDown&&this.props.onMouseDown(t)}}),e.addEventListener("pointerup",t=>{if(this.m_pID===t.pointerId){try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1,this.props.onMouseUp&&this.props.onMouseUp(t)}}),e.addEventListener("pointerleave",t=>{if(this.props.disableCapture){if(this.m_pID!==t.pointerId)return;try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1}this.props.onMouseLeave&&this.props.onMouseLeave(t)}),e.addEventListener("pointercancel",t=>{if(this.m_pID===t.pointerId){try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1,this.props.onMouseLeave&&this.props.onMouseLeave(t)}}))}_onClick(e){this.props.onClick&&this.props.onClick(e),this.props.preventEvent&&(e.preventDefault(),e.stopPropagation())}componentDidUpdate(e){if((this.props.disabled&&!e.disabled||!this.props.view&&e.view)&&this.m_pID>=0){try{this.m_el&&this.m_el.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1}}}o([n.observable],a.prototype,"m_pID",void 0);let l=class extends a{constructor(e){super(e),this.m_on=!1,this.m_on=!0===e.on}componentWillReceiveProps(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}render(){const e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down");const t=e.join(" ");let i=this.props.style;return!1===this.props.view&&(i||(i={}),i.display="none"),s.createElement("button",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,disabled:!0===this.props.disabled,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:i},this.props.children)}};o([n.observable],l.prototype,"m_on",void 0),l=o([r.observer],l),t.ToggleBtn=l;let c=class extends l{constructor(e){super(e)}play(){this.m_on||(this.m_on=!0,this.props.playFnc(this.props.src,e=>{this.m_on&&(this.m_on=!1,this.props.onPause&&this.props.onPause(e))}))}_onClick(e){this.m_on?(this.props.pauseFnc(),this.m_on=!1):this.play(),super._onClick(e)}};o([n.action],c.prototype,"play",null),o([n.action],c.prototype,"_onClick",null),c=o([r.observer],c),t.AudioBtn=c;let p=class extends a{constructor(e){super(e),this.m_on=!1,this.m_on=!0===e.on}componentWillReceiveProps(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}render(){const e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down"),!0===this.props.disabled&&e.push("disable");const t=e.join(" ");let i=this.props.style;return!1===this.props.view&&(i||(i={}),i.display="none"),s.createElement("img",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:i,src:this.props.src,useMap:this.props.useMap})}};o([n.observable],p.prototype,"m_on",void 0),p=o([r.observer],p),t.ImgBtn=p},function(e,t,i){"use strict";e.exports=i(12)},function(e,t,i){e.exports=i(10)},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const o=i(8),s=i(0),n=i(13),r=i(3),a=i(5),l=i(15);o.setConfig({ErrorOverlay:e=>s.createElement("div",null)});const c={clear:r.App.pub_clear,importLink:l.importLink,importHTML:l.importHTML};let p;p=i(16);let u=!1;const d=p,h=d.default,m=d.AppProvider,_=d.appContext;c.set=(e,t,i)=>{r.App.pub_set(e,t,i),_.setData(e)},c.render=()=>{r.App.pub_initAudio(),n.render(s.createElement(m,null,s.createElement(h,null)),document.getElementById("wrap"))},c.init=(e,t,i,o,s,n)=>{r.App.pub_load(e,null,t,i,o,s,n)},c.start=()=>{u=!0,setTimeout(()=>_.start(),500)},c.receive=e=>{if(4===e.type){const t=e.data;u?t&&t.id&&""!==t.id&&(r.App.isStarted?a.sendPADToID(t.id,0,null):a.sendPADToID(t.id,1,null)):r.App.pub_addInitedStudent(t)&&(u||(u=!0,_.start()))}else _.receive(e)},c.teachingTool=e=>{},c.notifyNaviInfo=(e,t,i,o,s,n)=>{_.notifyNaviInfo(e,t,i,o,s,n)},c.notifyBookCaptureInfo=e=>{_.notifyBookCaptureInfo(e)},c.notifyUploadToServerResult=e=>{_.uploaded(e)},c.notifyUploadToServerMultiResult=e=>{_.multiUploaded(e)},c.notifyAlert=e=>{_.notifyAlert(e)},c.notifyPenToolState=(e,t)=>{_.notifyPenToolState(e,t)},c.notifyHamburgerMenuClicked=e=>{_.notifyHamburgerMenuClicked(e)},c.callThreeminState=()=>{_.callThreeminState()},i(38),e.app_o=c}).call(this,i(11))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,s=(o=i(0))&&"object"==typeof o&&"default"in o?o.default:o;function n(e){return n.warnAboutHMRDisabled&&(n.warnAboutHMRDisabled=!0,console.error("React-Hot-Loader: misconfiguration detected, using production version in non-production environment."),console.error("React-Hot-Loader: Hot Module Replacement is not enabled.")),s.Children.only(e.children)}n.warnAboutHMRDisabled=!1;var r=function e(){return e.shouldWrapWithAppContainer?function(e){return function(t){return s.createElement(n,null,s.createElement(e,t))}}:function(e){return e}};r.shouldWrapWithAppContainer=!1;t.AppContainer=n,t.hot=r,t.areComponentsEqual=function(e,t){return e===t},t.setConfig=function(){},t.cold=function(e){return e},t.configureComponent=function(){}},function(e,t){e.exports=ReactDOM},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._toStringTimestamp=t.getDateStr=t.nteArray=t.intToHTMLcolor=t.nteBool=t.nteString=t.nteFloat=t.nteInt=t.nteUInt=t.getUnicUrl=t.getUnicNum=t.getUnic=void 0,Date.now||(Date.now=function(){return(new Date).getTime()});let o=0;function s(){return n().toString(36)}function n(){const e=Date.now();return e>o?o=e:o+=1,o}t.getUnic=s,t.getUnicNum=n,t.getUnicUrl=function(e){if(!e)return"";let t=e=e.trim();return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")||(t=t.indexOf("?")>0?t+"&t="+s():t+"?t="+s()),t},t.nteUInt=function(e,t){if(null==e)return t;if("number"==typeof e)return isNaN(e)||e<0?t:Math.round(e);{const i=parseInt(String(e),10);return isNaN(i)||i<0?t:i}},t.nteInt=function(e,t){if(null==e)return t;if("number"==typeof e)return Math.round(e);{const i=parseInt(String(e),10);return isNaN(i)?t:i}},t.nteFloat=function(e,t){if(null==e)return t;if("number"==typeof e)return e;{const i=parseFloat(String(e));return isNaN(i)?t:i}},t.nteString=function(e,t){return null==e?t:String(e)},t.nteBool=function(e,t){if(null==e)return t;if("boolean"==typeof e)return e;const i=String(e);return"true"===i||"false"!==i&&t},t.intToHTMLcolor=function(e){let t,i,o,s=e-0;t=(255&s)<<16,i=65280&s,o=(16711680&s)>>>16,s=t|i|o;let n=s.toString(16);return n="#000000".substring(0,7-n.length)+n,n},t.nteArray=function(e){if(e){if(Array.isArray(e))return e;if("string"==typeof e){const t=e;if(t.indexOf("[")>=0&&t.indexOf("]")>0)try{return JSON.parse(t)}catch(e){}}const t=[];return t.push(e),t}return[]},t.getDateStr=function(e="."){const t=new Date,i=t.getFullYear(),o=t.getMonth()+1,s=t.getDate();return i+e+(o<10?"0"+o:""+o)+e+(s<10?"0"+s:""+s)},t._toStringTimestamp=function(e){let t;const i=e.getFullYear();let o=e.getMonth()+1+"";parseInt(o,10)<10&&(o="0"+o);let s=e.getDate()+"";return parseInt(s,10)<10&&(s="0"+s),t=i+"-"+o+"-"+s+" "+e.toTimeString().substr(0,8),t}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importLink=t.importHTML=void 0,t.importHTML=function(e){return new Promise((t,i)=>{const o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="document",o.onload=e=>{if(!e)return;const s=o.response;s&&s.body&&s.body.firstElementChild?t(s.body.firstElementChild):s&&s.documentElement?t(s.documentElement):i("error")},o.onerror=e=>{i(e)},o.send(null)})},t.importLink=function(e,t){return new Promise((t,i)=>{const o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="document",o.onload=e=>{if(!e)return;const i=o.response;t(i)},o.onerror=e=>{i(e)},o.send(null)})}},function(e,t,i){"use strict";(function(e){var o=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.appContext=t.AppProvider=void 0;const s=i(0),n=i(1),r=i(2),a=i(8);i(18).default;i(19),i(20);const l=i(21);Object.defineProperty(t,"appContext",{enumerable:!0,get:function(){return l.tContext}}),Object.defineProperty(t,"AppProvider",{enumerable:!0,get:function(){return l.TeacherProvider}});const c=i(24),p=i(25),u=i(26);let d=class extends s.Component{constructor(){super(...arguments),this.bgm_playing=!1,this.pop_view=!1,this._openPop=()=>{this.pop_view=!0}}render(){const{state:e,actions:t}=this.props,i=e.viewDiv;return s.createElement(s.Fragment,null,s.createElement("div",{className:"content-container"},s.createElement("div",{className:"content-wrapper",style:{left:("direction"===i?0:-1280)+"px"}},s.createElement("div",null,s.createElement(c.default,{className:"video-direction",view:"direction"===i,on:e.directionON,isTeacher:!0,lesson:t.getCurriculum(),bookId:e.bookid,subtitle:e.subtitle?e.subtitle:"",poster_url:e.iswarmup?"/content/mathalive_lib/images/directions/bg_warmup_direction.jpg":"/content/mathalive_lib/images/directions/bg_direction_wrap_up.jpg",video_url:e.iswarmup?"/content/mathalive_lib/images/directions/warmup_video.mp4":"/content/mathalive_lib/images/directions/wrap_up_video.mp4",audio_url:"/content/mathalive_lib/mp3/1_Warm_up.mp3",video_frame:125,onEndStart:t.onDirectionEndStart,onEnd:t.onDirectionEnded,offMathKit:!0},s.createElement("div",{className:"lesson"},""))),s.createElement(u.default,{view:"content"===i,state:e,actions:t}))),s.createElement(p.Navi,Object.assign({},e.navi,{onLeftClick:t.naviLeft,onRightClick:t.naviRight})))}};o([n.observable],d.prototype,"bgm_playing",void 0),o([n.observable],d.prototype,"pop_view",void 0),d=o([r.observer],d);const h=l.useTeacher(e=>s.createElement(r.Observer,null,()=>s.createElement(d,{state:e.state,actions:e.actions})));t.default=a.hot(e)(h)}).call(this,i(17)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=ReactIdSwiper},function(e,t,i){"use strict";i.r(t)},function(e,t,i){"use strict";i.r(t)},function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.SENDPROG=t.useTeacher=t.tContext=t.TeacherConsumer=t.TeacherProvider=t.TeacherContext=void 0;const s=i(0),n=i(1),r=i(5),a=i(22);var l;!function(e){e[e.READY=0]="READY",e[e.SENDING=1]="SENDING",e[e.SENDED=2]="SENDED",e[e.STOPED=3]="STOPED",e[e.COMPLETE=4]="COMPLETE"}(l||(l={})),t.SENDPROG=l;class c extends a.TeacherContextBase{constructor(){super(),this._onQuizResultFnc=null,this.state.prog="page",this.state.process="READY",this.state.quizResult=[],this.state.question=0,this.state.iswarmup=!1,this.state.subtitle="",this.state.url="",this.actions.getData=()=>this._data,this.actions.gotoDirection=()=>this._setViewDiv("direction"),this.actions.setQuizResultFnc=e=>{this._onQuizResultFnc=e},this.actions.getCurriculum=()=>this._curriculum,this.actions.gotoNextBook=()=>{r.sendLauncher(9,null)}}_setViewDiv(e){super._setViewDiv(e)}receive(e){if(super.receive(e),11===e.type&&e.data){const t=e.data;if("hiddenpicture_result"===t.msgtype){const e=t,i=JSON.parse(e.result);this.state.quizResult.push(i),this._onQuizResultFnc&&this._onQuizResultFnc(e)}}}setData(e){this._data=e,this.state.iswarmup=this._data.iswarmup,this.state.url=this._data.url,this.state.subtitle=this._data.subtitle}notifyNaviInfo(e,t,i){this._curriculum=e,this.state.bookid=t,this.state.classid=i,this._curriculum.childrenList.map((e,i)=>{e.book&&e.book.id===t&&(this.state.curriculumid=e.id)})}}o([n.observable],c.prototype,"state",void 0),o([n.action],c.prototype,"_setViewDiv",null),t.TeacherContext=c;const p=new c;t.tContext=p;const{Provider:u,Consumer:d}=s.createContext(p);t.TeacherConsumer=d;class h extends s.Component{render(){return s.createElement(u,{value:p},this.props.children)}}t.TeacherProvider=h,t.useTeacher=function(e){return function(t){return s.createElement(d,null,t=>s.createElement(e,Object.assign({},t)))}}},function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.TeacherContextBase=void 0;const s=i(1),n=i(3),r=i(5),a=i(23);class l{constructor(){this._naviLeftFnc=null,this._naviRightFnc=null,this.state={viewDiv:"direction",directionON:!1,navi:{view:!1,enableLeft:!1,enableRight:!1},svg_bg:{view:!0,bPlay:!1,viewCharactor:!0},loading:!1,retCnt:0,numOfStudent:0,bookid:0,bookkey:0,curriculumid:0,classid:0,unitid:0,lessonid:0,conceptLibiary:{view:!1,datatype:"grade",resultmode:!1}},this.actions={onDirectionEndStart:()=>{"direction"===this.state.viewDiv&&r.sendPAD(3,null)},onDirectionEnded:()=>{"direction"===this.state.viewDiv&&this._setViewDiv("content"),n.App.isStarted=!0},setNaviView:e=>{this.state.navi.view=e},setNavi:(e,t)=>{this.state.navi.enableLeft=e,this.state.navi.enableRight=t},setNaviFnc:(e,t)=>{this._naviLeftFnc=e,this._naviRightFnc=t},naviLeft:()=>{"direction"===this.state.viewDiv?r.sendLauncher(8,null):(n.App.pub_playBtnPage(),this._naviLeftFnc?this._naviLeftFnc():this._setViewDiv("direction"))},naviRight:()=>{"direction"===this.state.viewDiv?(n.App.pub_playBtnPage(),this.state.directionON=!1):(n.App.pub_playBtnPage(),this._naviRightFnc?this._naviRightFnc():r.sendLauncher(9,null))},setRetCnt:e=>{e>this.state.numOfStudent&&(e=this.state.numOfStudent),this.state.retCnt=e},setNumOfStudent:e=>{this.state.numOfStudent=e},setConcepLibaryView:e=>{this.state.conceptLibiary.view=e},setConcepLibaryDataType:e=>{this.state.conceptLibiary.datatype=e},setConcepLibaryResultMode:e=>{this.state.conceptLibiary.resultmode=e},setLoading:e=>{r.showTLoading(e)}},this.notifyBookCaptureInfo=e=>{},this.clickSendButton=()=>{},this.notifyRecordData=(e,t)=>{}}_setViewDiv(e,t){this.state.viewDiv!==e&&(t||n.App.pub_stop(),"direction"===e?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0,r.sendLauncher(5,null),r.sendPAD(1,null),this.state.navi.view=!0,this.state.navi.enableLeft=n.App.prevBook,this.state.navi.enableRight=!0,this._naviLeftFnc=null,this._naviRightFnc=null,this.state.conceptLibiary.view=!1,this.state.conceptLibiary.datatype="grade",this.state.conceptLibiary.resultmode=!1):(this.state.directionON=!1,this.state.svg_bg.bPlay=!1,this.state.svg_bg.viewCharactor=!1,r.sendLauncher(6,null),r.sendPAD(0,null)),this._naviLeftFnc=null,this._naviRightFnc=null,this.state.numOfStudent=0,this.state.retCnt=0,this.state.viewDiv=e)}start(){if("direction"===this.state.viewDiv&&(this.state.directionON=!0,this.state.navi.view=!0,this.state.navi.enableLeft=n.App.prevBook,this.state.navi.enableRight=!0,this.state.svg_bg.bPlay=!0,r.sendLauncher(5,null),r.sendPAD(1,null)),n.App.isDvlp){0;let e="";if(e="M0408",""===e)return;let t={id:1e3,code:"",depth:4,depth_name:a.parseDept4Div(e),info:"",div:e,subDiv:"",name:"M0408"===e?"Identify the Number 0, Read and Write 0":"",thumbnail:"",cmsLevel:"",childrenList:[]},i="",o="",s="";if("Concept"===a.parseDept4Div(e))for(let e=0;e<3;e++){0===e?(i="M0503",o="M050303",s=a.parseDept5SubDiv("M050303")):1===e?(i="M0503",o="M050304",s=a.parseDept5SubDiv("M050304")):2===e&&(i="M0506",o="M050601",s=a.parseDept5SubDiv("M050601"));let n={id:16815+e,code:"",depth:5,depth_name:s,info:"",div:i,subDiv:o,name:s,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:9e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(n)}else if("Problem"===a.parseDept4Div(e))for(let e=0;e<3;e++){0===e?(i="M0505",o="M050504",s="Reasoning (1)"):1===e?(i="M0505",o="M050504",s=a.parseDept5SubDiv("M050504")):2===e&&(i="M0506",o="M050602",s=a.parseDept5SubDiv("M050602"));let n={id:16815+e,code:"",depth:5,depth_name:s,info:"",div:i,subDiv:o,name:s,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:8e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(n)}else if("Concept Learning"===a.parseDept4Div(e))for(let e=0;e<12;e++){0===e?(i="M0501",o="M050101",s="WarmUp Quiz"):1===e?(i="M0501",o="M050101",s="I SPY"):2===e?(i="M0501",o="M050101",s="Hit a Mole"):3===e?(i="M0506",o="M050601",s="Memory Game"):4===e?(i="M0506",o="M050601",s="Math Talk"):5===e?(i="M0501",o="M050102",s="Learning Objectives"):6===e?(i="M0502",o="M050202",s="Concept Acivity"):7===e?(i="M0502",o="M050203",s="Concept Tool"):8===e?(i="M0502",o="M050204",s="Concept Summary"):9===e?(i="M0505",o="M050501",s="Independent Practice"):10===e?(i="M0505",o="M050502",s="Extended Practice"):11===e&&(i="M0505",o="M050505",s="CL Strategy");let n={id:16815+e,code:"",depth:5,depth_name:s,info:"",div:i,subDiv:o,name:s,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:1e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(n)}else if("Topic Learning"===a.parseDept4Div(e))for(let e=0;e<1;e++){0===e&&(i="M0507",o="M050701",s=a.parseDept5SubDiv("M050701"));let n={id:16815+e,code:"",depth:5,depth_name:s,info:"",div:i,subDiv:o,name:s,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:2e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(n)}else if("Module Learning"===a.parseDept4Div(e))for(let e=0;e<3;e++){0===e?(i="M0508",o="M050801",s=a.parseDept5SubDiv("M050801")):1===e?(i="M0508",o="M050803",s=a.parseDept5SubDiv("M050803")):2===e&&(i="M0508",o="M050804",s=a.parseDept5SubDiv("M050804"));let n={id:16815+e,code:"",depth:5,depth_name:s,info:"",div:i,subDiv:o,name:s,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:3e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(n)}else if("Module Test"===a.parseDept4Div(e))for(let e=0;e<1;e++){0===e&&(i="M0509",o="M050905",s=a.parseDept5SubDiv("M050905"));let n={id:16815+e,code:"",depth:5,depth_name:s,info:"",div:i,subDiv:o,name:s,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:4e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(n)}let n=1e4;n=10001,this.notifyNaviInfo(t,n,1)}else{let e="";0,r.getNaviInfo(e)}}receive(e){}uploaded(e){}multiUploaded(e){}notify(e){}notifyRecorded(e){}notifyVideoRecord(e){}notifyNaviInfo(e,t,i,o,s,n){}notifyPenToolState(e,t){}notifyLiveGivePopupClose(){}notifyAlert(e){}notifyHamburgerMenuClicked(e){}callThreeminState(){}}o([s.observable],l.prototype,"state",void 0),o([s.action],l.prototype,"_setViewDiv",null),o([s.action],l.prototype,"start",null),t.TeacherContextBase=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseClassColor=t.parseDept5SubDiv=t.parseDept5Div=t.parseDept4Div=t.parseDept3Div=void 0,t.parseDept3Div=function(e){return"M0301"===e?"Number&Operations":"M0302"===e?"Measurement&Date":"M0303"===e?"Operations&Algebra":"M0304"===e?"Geometry":"M0305"===e?"Topic":"M0306"===e?"Module Review":""},t.parseDept4Div=function(e){return"M0401"===e?"Concept":"M0402"===e?"Problem":"M0403"===e?"Strategy":"M0404"===e?"Number&Operations":"M0405"===e?"Measurement&Date":"M0406"===e?"Operations&Algebra":"M0407"===e?"Geometry":"M0408"===e?"Concept Learning":"M0409"===e?"Topic Learning":"M0410"===e?"Module Learning":"M0411"===e?"Module Test":""},t.parseDept5Div=function(e){return"M0501"===e?"Warm-Up":"M0502"===e?"Concept Learning":"M0503"===e?"Concept Learning 2":"M0504"===e?"Concept Learning 3":"M0505"===e?"Problem Solving":"M0506"===e?"Wrap-Up":"M0507"===e?"Topic Learning":"M0508"===e?"Module Learning":"M0509"===e?"Module Test":""},t.parseDept5SubDiv=function(e){return"M050101"===e?"Warm-Up Activity":"M050102"===e?"Learning Objectives":"M050103"===e?"Concept Summary":"M050201"===e?"Concept Learning":"M050202"===e?"Concept Activity":"M050203"===e?"Concept Tool":"M050204"===e?"Concept Summary":"M050301"===e?"Activity":"M050302"===e?"Concept Tool":"M050303"===e?"Summary":"M050304"===e?"Check":"M050401"===e?"Activity":"M050402"===e?"Concept Tool":"M050403"===e?"Summary":"M050404"===e?"Check":"M050501"===e?"Independent Practice":"M050502"===e?"Extended Practice":"M050503"===e?"Strategy":"M050504"===e?"Reasoning (2)":"M050505"===e?"Strategy":"M050601"===e?"Wrap-Up Activity":"M050602"===e?"Portfolio":"M050701"===e?"Topic Strategy":"M050702"===e?"Adaptive Learning":"M050801"===e?"Module Review":"M050802"===e?"Adaptive Learning":"M050803"===e?"Module Portfolio":"M050804"===e?"Module Strategy":"M050901"===e?"Assessment":"M050902"===e?"Module Portfolio":"M050903"===e?"Assessment Review":"M050904"===e?"STEAM Activity":"M050905"===e?"STEAM Portfolio":""},t.parseClassColor=function(e){return"B62001"===e?"Black":"White"}},function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{l(o.next(e))}catch(e){n(e)}}function a(e){try{l(o.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(0),r=i(1),a=i(2),l=i(6);let c=class extends n.Component{constructor(e){super(e),this.m_on=!1,this.m_showMathKit=!1,this.bookInfo=[],this.curIndex=0,this._list=[],this._onClick=()=>{this.props.isTeacher&&this._off()},this._off=()=>s(this,void 0,void 0,(function*(){this.props.view&&this.m_on&&(this.m_on=!1,this.props.onEndStart&&this.props.onEndStart(),yield l.wait(500),this.props.view&&!this.m_on&&this.props.onEnd&&this.props.onEnd())})),this.m_on=e.view&&e.on}_on(){return s(this,void 0,void 0,(function*(){this.m_on=!0}))}componentWillReceiveProps(e){if(e.lesson&&this.props.lesson!==e.lesson||this.props.view!==e.view){for(;this.bookInfo.length>0;)this.bookInfo.pop();e.lesson&&e.lesson.childrenList&&e.lesson.childrenList.length>0&&e.lesson.childrenList.map((t,i)=>{try{if(t.book){t.book.id===e.bookId&&(this.curIndex=this.bookInfo.length);let i=t.depth_name?t.depth_name:"";i=i.replace(/\&lt;/g,"<"),i=i.replace(/\&gt;/g,">"),this.bookInfo.push({bookName:t.name?t.name:"",id:t.id,lesson:e.lesson?e.lesson.name:"",subtitle:i})}}catch(e){alert("A ee  "+JSON.stringify(e))}})}}componentDidUpdate(e){this.props.view?e.view?this.props.on&&!e.on?this._on():!this.props.on&&e.on&&this._off():this.props.on?this._on():this.m_on=!1:this.m_on=!1}render(){const{isTeacher:e,subtitle:t}=this.props,i=[];i.push(this.props.className);const o=document.querySelector(".bgm");return this.props.view?(this.m_on&&i.push("on"),o&&o.play()):(i.push("hide"),o&&(o.pause(),o.currentTime=0)),n.createElement("div",{className:i.join(" "),onClick:this._onClick},e&&this.bookInfo&&n.createElement("span",{className:"concept_name"},this.bookInfo.length>0?this.bookInfo[this.curIndex].lesson:""),n.createElement("div",{className:"progress_dot"},e&&this.bookInfo&&this.bookInfo.map((e,t)=>n.createElement("span",{key:"q_"+t,className:this.curIndex===t?"on":""}))),n.createElement("div",{className:"video"},n.createElement("video",{muted:!0,autoPlay:!0,poster:this.props.poster_url?this.props.poster_url:void 0},n.createElement("source",{src:this.props.video_url,type:"video/mp4"}),n.createElement("strong",null,"Your browser does not support the video tag."))),n.createElement("div",{className:"text"},n.createElement("div",{className:"t1"},this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].bookName:""),e&&n.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].subtitle:""}}),!e&&n.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:0===t.length&&this.bookInfo[this.curIndex]?this.bookInfo[this.curIndex].subtitle:t}})),n.createElement("audio",{className:"bgm",autoPlay:!0,src:this.props.audio_url?this.props.audio_url:void 0}))}};o([r.observable],c.prototype,"m_on",void 0),o([r.observable],c.prototype,"_list",void 0),o([r.action],c.prototype,"_off",void 0),c=o([a.observer],c),t.default=c},function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.Navi=void 0;const s=i(0),n=i(1),r=i(2),a=i(7);let l=class extends s.Component{constructor(e){super(e),this.m_on=!1,this.m_isStarted=!1,this._onClick=e=>{this.m_on=!0}}componentDidUpdate(e){this.m_isStarted||!this.props.view||e.view||(this.m_isStarted=!0,this.m_on=!0)}render(){const e=this.m_on?void 0:"off",t={visibility:this.props.view?"visible":"hidden"};return s.createElement(s.Fragment,null,s.createElement("div",{id:"common_navi_left",className:e,style:t},s.createElement("div",null,s.createElement("div",{onClick:this._onClick},s.createElement(a.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),s.createElement(a.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))),s.createElement("div",{id:"common_navi_right",className:e,style:t},s.createElement("div",null,s.createElement("div",{onClick:this._onClick},s.createElement(a.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),s.createElement(a.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))))}};o([n.observable],l.prototype,"m_on",void 0),l=o([r.observer],l),t.Navi=l},function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{l(o.next(e))}catch(e){n(e)}}function a(e){try{l(o.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(0),r=i(2),a=i(1),l=i(4),c=i(3),p=i(5),u=i(6),d=i(27),h=i(28),m=i(29),_=i(31);i(33);const g=i(34),f=i(36);let v=class extends n.Component{constructor(e){super(e),this._curIdx=0,this._quizUrl="",this._prog=0,this.viewResult=!1,this.viewStopBtn=!1,this.viewResultBtn=!1,this.isComplete=!1,this.viewAlertPopup=!1,this.msgAlertPopup="",this.viewIntro=!1,this.viewIntroOpen=!1,this.curIframe=void 0,this.goldStudents=[],this.silverStudents=[],this.bronzeStudents=[],this.otherStudents=[],this.signx=null,this.quizItems=[],this.timeSec=30,this.curQuestion=0,this.elLeft=void 0,this.elRight=void 0,this.elTarget=void 0,this.questions=[],this.objects=[],this.answer_objects=[],this.problemCnt=0,this.timerState=new _.TimerState(0),this.viewTimer=!1,this._totalUsers=0,this.onQuizResult=e=>{if(!this.props.view)return;if(this._curIdx<0)return;const t=JSON.parse(e.result);if(!l.find(c.App.students,{id:t.studentid}))return;const i=this.props.state.quizResult.length;if(c.App.students.length===i){this.isComplete=!0,this.viewTimer=!1,this.timerState.pause(),this.props.state.process="FINISH";const e=this.props.state.quizResult;let t=l.clone(e);t.sort((e,t)=>e.score>t.score?1:-1);const i=[];t.map(e=>{-1===i.indexOf(e.score)&&i.push(e.score)}),i.sort((e,t)=>e<t?1:-1),t.map((e,t)=>{i[0]>0&&i[0]>10*this.problemCnt&&e.score===i[0]?this.goldStudents.push(e):i[1]>0&&i[1]>10*this.problemCnt&&e.score===i[1]?this.silverStudents.push(e):i[2]>0&&i[2]>10*this.problemCnt&&e.score===i[2]?this.bronzeStudents.push(e):this.otherStudents.push(e)}),this.viewResult=!0,this.onSendResult()}},this.onSendResult=()=>s(this,void 0,void 0,(function*(){this.props.view&&(this._prog=1,c.App.pub_playToPad(),c.App.students.map((e,t)=>{let i="other",o=0,s=this.props.state.quizResult.find((t,i)=>t.studentid===e.id);if(!s)return;this.goldStudents.find((t,i)=>t.studentid===e.id)?(i="gold",o=100):this.silverStudents.find((t,i)=>t.studentid===e.id)?(i="silver",o=50):this.bronzeStudents.find((t,i)=>t.studentid===e.id)&&(i="bronze",o=20),s.level=i,s.level_bonus=o;const n={msgtype:"hiddenpicture_result",seq:this._curIdx,result:JSON.stringify(s)};p.sendPADToID(e.id,10,n)}),yield u.wait(600),this._prog=4,c.App.pub_reloadStudents(()=>s(this,void 0,void 0,(function*(){this.props.view&&1===this._prog&&(this._totalUsers=c.App.students?c.App.students.length:0,yield u.wait(600),this.props.view&&1===this._prog&&(this._prog=2))}))))})),this.onSendStart=e=>s(this,void 0,void 0,(function*(){if(!this.props.view)return;if(-1===this._curIdx)return;this._prog=1,c.App.pub_playToPad();const t={msgtype:"hiddenpicture_send",seq:this._curIdx,seconds:e,curriculumid:this.props.state.curriculumid,classid:this.props.state.classid};p.sendPAD(10,t),this.props.state.process="START",this.props.state.prog="pagefromtime",this.viewIntro=!0,setTimeout(()=>{this.viewIntroOpen=!0,setTimeout(()=>{this.viewIntroOpen=!1,setTimeout(()=>{this.viewIntro=!1,this.timerState.setMax(e),this.viewTimer=!0,this.timerState.start()},1e3)},1e3)},500),c.App.pub_reloadStudents(()=>s(this,void 0,void 0,(function*(){this.props.view&&1===this._prog&&(this._totalUsers=c.App.students?c.App.students.length:0,yield u.wait(600),this.props.view&&1===this._prog&&(this._prog=2))})))})),this.onViewAlertPopup=()=>{this.isComplete?this.msgAlertPopup="Retry?":this.msgAlertPopup="Force Quit?",this.viewAlertPopup=!0},this.onCloseAlertPopup=()=>{this.viewAlertPopup=!1},this.onOkAlertPopup=()=>{this.viewAlertPopup=!1,this.isComplete?this.props.state.prog="timesetting":this.onSendStop()},this.onSendStop=()=>s(this,void 0,void 0,(function*(){if(!this.props.view)return;if(-1===this._curIdx)return;if(this.isComplete)return;if(!this.timerState.isRunning)return;this.props.state.process="STOP",this.viewTimer=!1,this.timerState.pause(),0===c.App.students.length&&(this.isComplete=!0),this._prog=1,c.App.pub_playToPad();p.sendPAD(10,{msgtype:"hiddenpicture_stop"}),yield u.wait(600),this._prog=4})),this.onSendRestart=e=>s(this,void 0,void 0,(function*(){if(!this.props.view)return;if(-1===this._curIdx)return;if(this.props.state.prog="pagefromtime",this.isComplete=!1,this.goldStudents)for(;this.goldStudents.length>0;)this.goldStudents.pop();if(this.silverStudents)for(;this.silverStudents.length>0;)this.silverStudents.pop();if(this.bronzeStudents)for(;this.bronzeStudents.length>0;)this.bronzeStudents.pop();if(this.otherStudents)for(;this.otherStudents.length>0;)this.otherStudents.pop();if(this.props.state.quizResult)for(;this.props.state.quizResult.length>0;)this.props.state.quizResult.pop();this._prog=1,this.props.state.process="START",this.timerState.setMax(e),this.timerState.reset(),setTimeout(()=>{this.viewTimer=!0,this.timerState.start()},1e3),c.App.pub_playToPad();const t={msgtype:"hiddenpicture_restart",seq:this._curIdx,seconds:e,curriculumid:this.props.state.curriculumid,classid:this.props.state.classid};p.sendPAD(10,t),yield u.wait(600),this._prog=4})),this.handlePostMessage=e=>{let t=e.data;"macontent"===t.from&&t.type},this.onChangeQuestion=()=>{this.quizItems.map(e=>{let t=e;t.correct=!1,t.el.style.visibility="hidden",t.el.getElementsByTagName("span")[0].className="sign",t.answerimg.className=t.answerimg.className.replace(/incorrect/gi,""),t.answerimg.className=t.answerimg.className.trim()});let e=this.elLeft.getElementsByClassName("bt_answer")[0];e&&(e.className="bt_answer");let t=this.elLeft.getElementsByClassName("bt_problem")[0];t&&(t.className="bt_problem hide"),0===this.curQuestion?this.questions.map((e,t)=>{0!==t&&e.className.indexOf("hide")<0&&(e.className+=" hide");let i=e.getElementsByClassName("question_box")[0];i.className=i.className.replace(/view_example/gi,""),i.className=i.className.trim()}):1===this.curQuestion&&this.questions.map(e=>{e.className.indexOf("hide")>0&&(e.className=e.className.replace(/hide/gi,""),e.className=e.className.trim());let t=e.getElementsByClassName("question_box")[0];t.className=t.className.replace(/view_example/gi,""),t.className=t.className.trim()})},this.onOpen=e=>{c.App.pub_playBtnTab(),this.curQuestion},this.onAnswer=e=>{c.App.pub_solution_btn_click(),e.className="bt_answer hide";const t=this.elLeft.getElementsByClassName("bt_problem")[0];t&&setTimeout(()=>{t.className="bt_problem"},1),this.elTarget.className="target grayscale";let i=this.questions[this.curQuestion].getElementsByClassName("question_box")[0];i.className.indexOf("view_example")<0&&(i.className+=" view_example",i.className=i.className.trim());this.quizItems.filter(e=>e.question===this.curQuestion).map(e=>{let t=e;t.correct=!0,t.el.style.visibility="visible",t.el.getElementsByTagName("span")[0].className="sign",t.answerimg.className+=" incorrect"})},this.onProblem=e=>{c.App.pub_playBtnTab(),e.className="bt_problem hide";const t=this.elLeft.getElementsByClassName("bt_answer")[0];t&&setTimeout(()=>{t.className="bt_answer"},1),this.elTarget.className="target";let i=this.questions[this.curQuestion].getElementsByClassName("question_box")[0];i.className=i.className.replace(/view_example/gi,""),i.className=i.className.trim();this.quizItems.filter(e=>e.question===this.curQuestion).map((e,t)=>{let i=e;i.correct=!1,i.el.style.visibility="hidden",i.el.getElementsByTagName("span")[0].className="sign",i.answerimg.className=i.answerimg.className.replace(/incorrect/gi,""),i.answerimg.className=i.answerimg.className.trim()})},this.onSend=()=>{c.App.pub_playToPad(),"START"!==this.props.state.process&&(this.props.state.prog="timesetting",this.props.state.question=this.curQuestion)},this.onCloseResult=()=>{this.viewResult=!1},this.onShowResult=()=>{this.viewResult=!0,this.viewResultBtn=!0},this.onSelectAnimal=(e,t)=>{const i=e,o=t;c.App.pub_playGameClick();const s=this.quizItems.filter(e=>e.question===this.curQuestion);let n=[];if(s.map(e=>{i>e.left&&i<e.left+e.width&&o>e.top&&o<e.top+e.height&&n.push(e)}),n.length>0){let e=n[0];e.correct=!0,e.el.style.visibility="visible",e.el.getElementsByTagName("span")[0].className="sign o",e.answerimg.className+=" incorrect",c.App.pub_playGamegood()}else this.signx&&(this.signx.style.left=i+"px",this.signx.style.top=o+"px",this.signx.style.display="block",setTimeout(()=>{this.signx&&(this.signx.style.display="none")},500))},this._onSelectAnimal=e=>{e.stopPropagation()},this.timeComplete=()=>s(this,void 0,void 0,(function*(){})),this.timeStart=()=>{},this.onIfmLoaded=()=>{if(this.curIframe){let e=this.curIframe.contentDocument;if(e){let t=e.createElement("style");t.innerHTML="*{-ms-overflow-style: none;} ::-webkit-scrollbar {display: none;}",e.head.appendChild(t);let i=e.getElementsByClassName("content_page")[0];if(i){const t=e.getElementsByClassName("sign");for(let e=0;e<t.length;e++){t.item(e).style.display="none"}this.elLeft=i.getElementsByClassName("left")[0];let o=this.elLeft.getElementsByClassName("question");for(;this.questions.length>0;)this.questions.pop();let s=0,n=[];for(let e=0;e<o.length;e++){let t=o.item(e);this.questions.push(t);let i=t.getElementsByClassName("question_box")[0];i.className=i.className.replace(/view_example/gi,""),i.className=i.className.trim(),i.style.cursor="pointer",i.addEventListener("click",e=>{e.target.className.indexOf("view_example")<0&&(i.className+=" view_example",i.className=i.className.trim()),c.App.pub_openProblom()},!1);let r=i.getElementsByTagName("img");for(let t=0;t<r.length;t++){let i=r.item(t);i&&0===i.className.indexOf("obj")&&(0===e&&s++,i.className.indexOf("incorrect")>0&&(i.className=i.className.replace(/incorrect/gi,""),i.className=i.className.trim()),n.push(i))}}2===o.length&&this.questions[1].className.indexOf("hide")<0&&(this.questions[1].className+=" hide");let r=this.elLeft.getElementsByClassName("bt_answer")[0];r&&(r.className="bt_answer",r.addEventListener("click",e=>{const t=e.target;this.onAnswer(t)},!1));let a=this.elLeft.getElementsByClassName("bt_problem")[0];a&&(a.className="bt_problem hide",a.addEventListener("click",e=>{const t=e.target;this.onProblem(t)},!1)),this.elRight=i.getElementsByClassName("right")[0],this.elRight.style.position="absolute",this.elRight.style.left="425px",this.elRight.style.backgroundColor="#18836b";let l=document.createElement("div");l.id="signx",l.className="sign x",l.style.display="none",this.elRight.appendChild(l),this.signx=e.getElementById("signx"),this.elTarget=this.elRight.getElementsByClassName("target")[0],this.elTarget.className="target";let p=this.elRight.getElementsByClassName("object");if(p){for(;this.objects.length>0;)this.objects.pop();for(let e=0;e<p.length;e++){let t=p.item(e);if(t){t.className=t.className.replace(/show/gi,""),t.className=t.className.trim(),t.addEventListener("click",e=>{e.stopPropagation()},!1);let i=t.getElementsByTagName("span")[0];i&&(i.className="sign",i.style.display="",i.addEventListener("click",e=>{let t=e.target.getBoundingClientRect();e.pageX,t.left,e.pageY,t.top},!1)),this.objects.push(t);let o=window.getComputedStyle(t,null).getPropertyValue("left").replace("px",""),r=window.getComputedStyle(t,null).getPropertyValue("top").replace("px",""),a=window.getComputedStyle(t,null).getPropertyValue("width").replace("px",""),l=window.getComputedStyle(t,null).getPropertyValue("height").replace("px",""),c={question:e<s?0:1,left:Number(o),top:Number(r),width:Number(a),height:Number(l),el:t,answerimg:n[e],correct:!1};this.quizItems.push(c)}}this.problemCnt=this.quizItems.length}this.elTarget.addEventListener("click",e=>{let t=e.target.getBoundingClientRect();const i=e.pageX-t.left,o=e.pageY-t.top;this.onSelectAnimal(i,o)},!1)}}}}}init(){this._prog=0,this.viewResult=!1,this.isComplete=!1,this.viewTimer=!1,this.goldStudents=[],this.silverStudents=[],this.bronzeStudents=[],this.otherStudents=[];const e=document.getElementsByClassName("fel_topad")[0];e&&(e.style.display="inline-block"),this.viewStopBtn=!1,this.viewResultBtn=!1,this.curQuestion=0,this.props.state.prog="page",this.props.state.process="READY",this.props.state.quizResult=[]}_setNavi(){this.props.actions.setNaviView(!0),"START"===this.props.state.process?0===this.curQuestion?this.props.actions.setNavi(!1,!0):this.props.actions.setNavi(!0,!1):"timesetting"===this.props.state.prog?this.props.actions.setNavi(!0,!1):(this.curQuestion,this.props.actions.setNavi(!0,!0)),this.props.actions.setNaviFnc(()=>{if("timesetting"===this.props.state.prog)this.props.state.prog="page";else if(1===this.curQuestion)this.curQuestion=0,this.onChangeQuestion();else{this.init(),p.clearTPenTool();const e={msgtype:"hiddenpicture_end"};p.sendPAD(10,e),setTimeout(()=>{this.props.actions.gotoDirection()},1e3)}},()=>{0===this.curQuestion&&2===this.questions.length?(this.curQuestion=1,this.onChangeQuestion()):(p.clearTPenTool(),this.props.actions.gotoNextBook())})}componentDidMount(){window.addEventListener("message",this.handlePostMessage,!1),this.props.actions.setQuizResultFnc(this.onQuizResult),this.timeSec=this.props.actions.getData().seconds,this._quizUrl=this.props.actions.getData().url}componentWillUnmount(){window.removeEventListener("message",this.handlePostMessage,!1),this.props.actions.setQuizResultFnc(null)}sendPostMessage(e,t,i){const o={from:"matemplate",to:"macontent",type:e,msg:t};window.postMessage(o,"*")}initContent(){if(this._curIdx<0)return;const e=this.props.actions.getData();let t={idx:this._curIdx,quizmode:"quiz",isTeacher:!0,content:e};this.sendPostMessage("init",t,this._curIdx)}initContentAll(){this.initContent()}completeContentAll(){const e=this.props.actions.getData();let t={idx:this._curIdx,quizmode:"quiz",isTeacher:!0,content:e};this.sendPostMessage("completed",t,this._curIdx)}componentDidUpdate(e){if(this.props.view&&!e.view?this._prog=0:!this.props.view&&e.view,"pagefromtime"===this.props.state.prog){if("START"===this.props.state.process){const e=document.getElementsByClassName("fel_topad")[0];e&&(e.style.display="none"),this.viewStopBtn=!0}this.props.state.prog="page"}this.props.view&&this._setNavi()}render(){const{view:e,state:t}=this.props,i=c.App.data_url+this._quizUrl;let o=!1;return o=t.quizResult.length>0&&t.quizResult.length===(c.App.students?c.App.students.length:0),0===c.App.students.length&&(o="STOP"===t.process),n.createElement(n.Fragment,null,n.createElement("div",{style:{display:"timesetting"!==t.prog?void 0:"none"}},n.createElement("div",{className:"content_page",style:{display:e?"":"none"}},n.createElement("div",{style:{display:""}},n.createElement("iframe",{src:i,onLoad:this.onIfmLoaded,style:{display:""},ref:e=>{e&&(this.curIframe=e)}})),n.createElement("div",{className:"timer"},n.createElement(_.Timer,{state:this.timerState,view:this.viewTimer,onComplete:this.timeComplete,onStart:this.timeStart,isFullSec:!0})),2===this.questions.length&&n.createElement("div",{className:"pagination"},n.createElement("span",{className:0===this.curQuestion?"on":""}),n.createElement("span",{className:1===this.curQuestion?"on":""})),n.createElement("div",{className:"intro_hiddenpicture "+(this.viewIntroOpen?"open":""),style:{display:this.viewIntro?void 0:"none"}},n.createElement("div",{className:"inner"},n.createElement("div",{className:"glass"},n.createElement("span",{className:"img"})),n.createElement("div",{className:"intro_img"}))),n.createElement("button",{className:"fel_topad",style:{display:this.viewStopBtn?"none":""},onClick:this.onSend}),n.createElement(d.BtnProgress,{view:this.viewStopBtn,isEnd:o,totalStudents:this._totalUsers,submitStudents:t.quizResult.length,onClick:this.onViewAlertPopup}),n.createElement(h.RankingBtn,{view:t.quizResult.length>0&&("FINISH"===t.process||"STOP"===t.process),onClick:this.onShowResult}),n.createElement(m.AlertPopup,{view:this.viewAlertPopup,msg:this.msgAlertPopup,onClose:this.onCloseAlertPopup,onOk:this.onOkAlertPopup}),n.createElement(g.default,{view:this.viewResult,onClose:this.onCloseResult,gold:this.goldStudents,silver:this.silverStudents,bronze:this.bronzeStudents,other:this.otherStudents}))),n.createElement(f.default,{view:"timesetting"===t.prog,onStart:this.isComplete?this.onSendRestart:this.onSendStart,timeSec:this.timeSec}))}};o([a.observable],v.prototype,"_curIdx",void 0),o([a.observable],v.prototype,"_quizUrl",void 0),o([a.observable],v.prototype,"_prog",void 0),o([a.observable],v.prototype,"viewResult",void 0),o([a.observable],v.prototype,"viewStopBtn",void 0),o([a.observable],v.prototype,"viewResultBtn",void 0),o([a.observable],v.prototype,"isComplete",void 0),o([a.observable],v.prototype,"viewAlertPopup",void 0),o([a.observable],v.prototype,"msgAlertPopup",void 0),o([a.observable],v.prototype,"viewIntro",void 0),o([a.observable],v.prototype,"viewIntroOpen",void 0),o([a.observable],v.prototype,"curQuestion",void 0),o([a.observable],v.prototype,"elLeft",void 0),o([a.observable],v.prototype,"elRight",void 0),o([a.observable],v.prototype,"elTarget",void 0),o([a.observable],v.prototype,"questions",void 0),o([a.observable],v.prototype,"objects",void 0),o([a.observable],v.prototype,"answer_objects",void 0),o([a.observable],v.prototype,"problemCnt",void 0),o([a.observable],v.prototype,"viewTimer",void 0),o([a.observable],v.prototype,"_totalUsers",void 0),v=o([r.observer],v),t.default=v},function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.BtnProgress=void 0;const s=i(0),n=i(2),r=i(1),a=i(4),l=i(7),c=i(3);let p=class extends s.Component{constructor(e){super(e),this.isHide=!1,this.timerid=-1,this._onClick=()=>{c.App.pub_playBtnTab(),this.props.onClick()},this.props.isEnd&&a.delay(()=>{this.isHide=!0},2500)}componentDidUpdate(e){this.props.isEnd&&!e.isEnd?this.timerid=a.delay(()=>{this.isHide=!0},2500):!this.props.isEnd&&e.isEnd&&(this.isHide=!1,clearTimeout(this.timerid))}render(){const{submitStudents:e,totalStudents:t,noFinishView:i}=this.props;return s.createElement("div",{className:"progressWrap"+(this.props.isEnd?" end":"")+(this.props.view?" on":"")},(()=>this.props.noRetryView&&this.props.isEnd?s.createElement(s.Fragment,null):s.createElement(l.ToggleBtn,{className:"btn_progress",view:this.props.view,onClick:this._onClick},s.createElement("span",null,`${e}/${t}`)))(),s.createElement("div",{className:"msg"+(this.isHide||i?" hide":"")},"Finish",s.createElement("span",null),s.createElement("span",null),s.createElement("span",null),s.createElement("span",null),s.createElement("span",null)))}};o([r.observable],p.prototype,"isHide",void 0),p=o([n.observer],p),t.BtnProgress=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RankingBtn=void 0;const o=i(0),s=i(7);class n extends o.Component{render(){return o.createElement(s.ToggleBtn,{className:"btn_ranking",style:{display:this.props.view?"":"none"},onClick:this.props.onClick})}}t.RankingBtn=n},function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.AlertPopup=t.WarningPopup=t.StrategyPopup=void 0;const s=i(0),n=i(1),r=i(2),a=i(30),l=i(4),c=i(3);let p=class extends s.Component{componentDidUpdate(e){if(this.props.view&&!e.view){if(!this.props.button){let e=this.props.delay;e||(e=800),l.delay(()=>{this.props.onComplete&&this.props.onComplete()},e)}}else!this.props.view&&e.view}render(){const{type:e}=this.props;let t="";0===e?t="The teacher has stopped you from the activity. After 3 seconds, only the contents has been created so far will be submitted.":1===e?t="All students are already in progress. If you restart, existing data will be deleted. Are you sure you want to request the submission?":2===e?t="You can share a solution only in the problem solving state.":3===e?t="Do you want to save the current learning screen? If there is already saved data, the current data will be overwritten.":4===e?t="Picture not taken.\nYou have reached the maximum number of pictures available.":5===e&&(t="For this activity, We recommend students to wear a headset or an earphone with a microphone.");let i="exclamation";return 4===e?i="nocamera":5===e&&(i="headset"),s.createElement("div",{className:"alertpop strategy"+(this.props.view?" show":"")},s.createElement("div",{className:"alertpop-inner"},s.createElement("div",{className:i}),s.createElement("div",{className:"ment"},t),s.createElement("div",{className:"buttons"+(this.props.isSingle?" single":"")+(this.props.button?"":" hide")},s.createElement("button",{className:"btn cancel",onClick:this.props.onCancel},"Cancel"),s.createElement("button",{className:"btn ok",onClick:this.props.onOk},"Ok"))))}};p=o([r.observer],p),t.StrategyPopup=p;let u=class extends s.Component{constructor(){super(...arguments),this.second=3,this.interval=null}componentDidUpdate(e){if(this.props.view&&!e.view){if(this.second=3,!this.props.button){let e=this.props.delay;e||(e=800),this.interval=setInterval(()=>{this.second--,0===this.second&&(this.props.onComplete&&this.props.onComplete(),null!==this.interval&&clearInterval(this.interval))},1e3)}}else!this.props.view&&e.view&&(null!==this.interval&&clearInterval(this.interval),this.props.onComplete&&this.props.onComplete())}render(){const{type:e}=this.props;let t="";return 0===e&&(t=`Submit your answer within <strong>${this.second} seconds.</strong>`),s.createElement("div",{className:"warningpopup",style:{display:this.props.view?"":"none"}},s.createElement("div",{className:"msg",dangerouslySetInnerHTML:{__html:t}}))}};o([n.observable],u.prototype,"second",void 0),u=o([r.observer],u),t.WarningPopup=u;class d extends s.Component{constructor(){super(...arguments),this._onOk=()=>{this.props.onOk&&this.props.onOk()},this._onClose=()=>{this.props.onClose&&this.props.onClose()}}componentDidUpdate(e){this.props.view&&!e.view||!this.props.view&&e.view&&c.App.pub_playBtnTab()}render(){const{view:e,msg:t,isSingle:i,msgclass:o}=this.props;return s.createElement(a.CoverPopup,{className:"alert_popup",view:e,onClosed:this.props.isSingle?this._onOk:this._onClose},s.createElement("div",{className:"pop_box"},s.createElement("span",{className:"ico_alert"}),s.createElement("span",{className:"text"+(o&&""!==o?" "+o:""),dangerouslySetInnerHTML:{__html:t}}),s.createElement("div",{className:"btns"},s.createElement("button",{className:"btn_cancel",onClick:this._onClose,style:{display:i?"none":""}},s.createElement("span",null,"Cancel")),s.createElement("button",{className:"btn_ok",onClick:this._onOk},s.createElement("span",null,"OK")))))}}t.AlertPopup=d},function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{l(o.next(e))}catch(e){n(e)}}function a(e){try{l(o.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CoverPopup=void 0;const n=i(0),r=i(1),a=i(2),l=i(6);let c=class extends n.Component{constructor(){super(...arguments),this.m_state="closed",this._open=()=>s(this,void 0,void 0,(function*(){"closed"===this.m_state&&(this.m_state="opening",yield l.wait(100),this.m_state="open")})),this._close=()=>s(this,void 0,void 0,(function*(){"open"===this.m_state&&(this.m_state="closing",yield l.wait(400),this.props.onClosed(),this.m_state="closed")}))}componentDidUpdate(e){this.props.view!==e.view&&(this.props.view?this._open():this._close())}render(){return n.createElement("div",{className:this.props.className+" "+this.m_state},this.props.children)}};o([r.observable],c.prototype,"m_state",void 0),c=o([a.observer],c),t.CoverPopup=c},function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.CountDown2=t.Timer=t.TimerState=void 0;const s=i(0),n=i(1),r=i(2),a=i(4),l=i(3),c=i(32);var p;!function(e){e[e.INIT=0]="INIT",e[e.RUNNING=1]="RUNNING",e[e.PAUSE=2]="PAUSE",e[e.END=3]="END"}(p||(p={}));class u{constructor(e){this.m_runState=0,this.m_max=60,this.m_playSound=!0,this.start=()=>{this.m_runState=1},this.reset=()=>{this.m_runState=0},this.pause=()=>{this.m_runState=2},this.end=()=>{this.m_runState=3},this.m_max=e}get runState(){return this.m_runState}get isRunning(){return 1===this.m_runState}get max(){return this.m_max}get playSound(){return this.m_playSound}setPlaySound(e){this.m_playSound=e}setMax(e){this.m_max=e}}function d(e,t,i,o){let s=(o-90)*Math.PI/180;return{x:e+i*Math.cos(s),y:t+i*Math.sin(s)}}function h(e,t,i,o,s){let n={d:"",p:{x:0,y:0}};if(s-o>=360)n.d=["M",e,t,"m",-i,0,"a",i,i,0,"1",0,2*i,0,"a",i,i,0,"1",0,2*-i,0].join(" ");else{let r=s-o<=180?"0":"1",a=d(e,t,i,s),l=d(e,t,i,o);(function(e,t,i,o){Math.cos(o),Math.sin(o)})(e,t,i,o);n.d=["M",a.x,a.y,"A",i,i,0,r,0,l.x,l.y].join(" "),n.p.x=a.x,n.p.y=a.y}return n}o([n.observable],u.prototype,"m_runState",void 0),o([n.computed],u.prototype,"runState",null),o([n.observable],u.prototype,"m_max",void 0),o([n.computed],u.prototype,"max",null),o([n.action],u.prototype,"start",void 0),o([n.action],u.prototype,"reset",void 0),o([n.action],u.prototype,"pause",void 0),o([n.action],u.prototype,"end",void 0),t.TimerState=u;let m=class extends s.Component{constructor(e){super(e),this.m_runState=0,this.m_sec=0,this.m_stime=0,this.m_text="",this.m_d="",this.m_px=30,this.m_py=6,this.m_progress=0,this.m_initmax=0,this._start=()=>{this.m_sec=this.props.state.max,this.props.isAssessment?this.m_text=Math.ceil(this.m_sec/60)+"":this.m_text=this._getTime(this.m_sec),this.props.state.max>0&&0===this.m_initmax&&(this.m_initmax=this.props.state.max),this.m_d="",this.m_px=30,this.m_py=6,this.m_stime=Date.now(),this._run(0),this.props.onStart&&this.props.onStart(),l.App.pub_playTimerClock()},this._run=e=>{if(!this.props||1!==this.m_runState)return;const t=this.props.state.max,i=Date.now()-this.m_stime,o=t-Math.floor(i/1e3);if(this.m_sec!==o&&(this.props.getTime||(this.props.isAssessment?this.m_text=Math.ceil(o/60)+"":this.m_text=this._getTime(o)),0===o?this.props.state.playSound&&l.App.pub_playDingend():o<5?this.props.state.playSound&&l.App.pub_playDing():o>=5&&o<=10&&this.props.state.playSound&&l.App.pub_playClock()),this.m_sec=o,o>0)this._drawArc(i),window.requestAnimationFrame(this._run),this.props.isAssessment&&this.progresTimer(o);else{let e;this._drawArc.cancel(),e=h(10,10,37,0,1),this.m_d=e.d,this.m_px=e.p.x,this.m_py=e.p.y,this.props.onComplete(),l.App.pub_stopTimerClock(),l.App.pub_playTimerEnd()}},this.progresTimer=e=>{let t=100-Math.floor(100*e/this.m_initmax);this.m_progress!==t&&(this.m_progress=t)},this.m_text=this._getTime(this.props.state.max),this.m_d="",this.m_px=30,this.m_py=6,n.autorun(()=>{if(!this.props)return;const e=this.props.state,t=e.max;if(1===e.runState&&1!==this.m_runState)this.m_runState=1,this._start();else if(0===e.runState)this.m_text=this._getTime(t),this.m_d="",this.m_px=30,this.m_py=6;else if(3===e.runState){this._drawArc.cancel();let e=h(10,10,37,0,1);this.m_d=e.d,this.m_px=e.p.x,this.m_py=e.p.y}else 2===e.runState&&(l.App.pub_stopTimerClock(),l.App.pub_playTimerEnd());this.m_runState=e.runState}),this._drawArc=a.throttle(e=>{if(!this.props||1!==this.m_runState)return;const t=1e3*this.props.state.max;let i,o=0;if(this.m_sec<=5){const t=e%1e3;o=0===e?0:0===t?1:t/1e3}else o=e/t;o*=360,i=h(10,10,37,0,o),this.m_d=i.d,this.m_px=i.p.x,this.m_py=i.p.y},50,{trailing:!0})}_getTime(e){Math.floor(e/60);let t=e%60;if(this.props.isFullSec&&(t=e),t>99){const e=document.getElementsByClassName("timer")[0];if(e){const t=e.getElementsByClassName("m_text")[0];t&&(t.style.fontSize="30px",t.style.paddingTop="50px")}}else{const e=document.getElementsByClassName("timer")[0];if(e){const t=e.getElementsByClassName("m_text")[0];t&&(t.style.fontSize="38px",t.style.paddingTop="48px")}}let i="";return i+=t,i}getCurrentSec(){return this.m_sec}setInitMax(e){this.m_initmax=e}setProgress(e){this.m_progress=e}render(){if(this.props.isAssessment){let e=this.m_sec<=300&&this.m_sec>297;this.m_progress;return s.createElement("div",{className:"q_timer assess"+(e?" swing":""),hidden:!this.props.view,style:{zIndex:this.props.isBonus?21:20}},s.createElement("div",{className:"watch"}),s.createElement(c.ProgressCircle,{watch:{text:this.m_text,progress:this.m_progress},paint:null}),s.createElement("div",{className:"minute"},"Minute"),s.createElement("div",{className:"alert_notice"+(e?" show":"")},s.createElement("strong",null,"5 minutes")," remaining."))}{const{livePoint:e,isTeam:t}=this.props;this.m_sec;const i=this.props.livePoint?this.props.livePoint:0;let o=Math.floor(i/40*100);return o>100&&(o=100),s.createElement("div",{className:"q_timer",hidden:!this.props.view,style:{zIndex:this.props.isBonus?21:20}},s.createElement("div",{className:"watch"}),s.createElement(c.ProgressCircle,{watch:null,paint:{arcWH:20,px:this.m_px,py:this.m_py,r:6,d:this.m_d,fill:"#aa41f5"}}),s.createElement("div",{className:"m_text"},this.m_text),s.createElement("div",{className:"live_guage"+(t?"":" individual")},s.createElement("span",{className:"ico_heart"}),s.createElement("div",{className:"bar_wrap"},s.createElement("div",{className:"bar",style:{width:o+"%"}}),s.createElement("div",{className:"text "+(this.props.livePoint&&this.props.livePoint>40?"overmax":""),"data-value":this.props.livePoint},this.props.livePoint)),s.createElement("div",{className:"team_name "+this.props.teamName,style:{display:this.props.isTeam?"":"none"}})))}}};o([n.observable],m.prototype,"m_text",void 0),o([n.observable],m.prototype,"m_d",void 0),o([n.observable],m.prototype,"m_px",void 0),o([n.observable],m.prototype,"m_py",void 0),o([n.observable],m.prototype,"m_progress",void 0),o([n.observable],m.prototype,"m_initmax",void 0),m=o([r.observer],m),t.Timer=m;const _=-.5*Math.PI;let g=class extends s.Component{constructor(e){super(e),this.m_runState=0,this.m_sec=0,this.m_text="",this.m_stime=0,this.m_r=0,this.m_view=!1,this._start=()=>{this.m_sec=this.props.state.max,this.m_stime=Date.now(),this._run(0),this.props.onStart&&this.props.onStart()},this._run=e=>{if(!this.props||1!==this.m_runState)return;const t=Date.now()-this.m_stime,i=this.props.state.max-Math.floor(t/1e3);this.m_sec!==i&&(this.m_sec=i,this.m_text=this.m_sec.toString(),0===i?(this.props.state.playSound&&l.App.pub_playDingend(),this.m_text="start",this.props.onComplete()):i<=5&&this.props.state.playSound&&l.App.pub_playDing()),i>0&&window.requestAnimationFrame(this._run)},this._refCanvas=e=>{!this.m_canvas&&e&&(this.m_canvas=e,this.m_r=e.width/2,this.m_ctx=e.getContext("2d"))},this._onTransEnd=()=>{this.props.view||(this.m_view=!1)},this.m_sec=this.props.state.max,this.m_view=e.view,n.autorun(()=>{if(!this.props)return;const e=this.props.state;if(1===e.runState&&1!==this.m_runState)this.m_runState=1,this._start();else if(0===e.runState&&0!==this.m_runState&&(this.m_sec=e.max,this.m_ctx)){const e=this.m_r;this.m_ctx.clearRect(0,0,2*e,2*e)}this.m_runState=e.runState}),this._drawArc=a.throttle(e=>{if(!this.m_canvas||!this.props||1!==this.m_runState)return;const t=2*Math.PI*e/1e3,i=this.m_r;this.m_ctx.clearRect(0,0,2*i,2*i),this.m_ctx.beginPath(),this.m_ctx.fillStyle="#5538EB",this.m_ctx.moveTo(i,i),this.m_ctx.arc(i,i,i,_,t+_),this.m_ctx.fill()},50)}componentDidUpdate(e){e.view!==this.props.view&&this.props.view&&(this.m_view=!0)}render(){return s.createElement("div",{className:"countdown2 "+(this.m_view?"":"hide")},s.createElement("div",{className:"countdown "+(this.props.view?"view":"hide"),onTransitionEnd:this._onTransEnd},s.createElement("div",{className:"start"},s.createElement("div",{className:"text"},this.m_text))))}};o([n.observable],g.prototype,"m_sec",void 0),o([n.observable],g.prototype,"m_text",void 0),o([n.observable],g.prototype,"m_view",void 0),g=o([r.observer],g),t.CountDown2=g},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressCircle=t._dArc=t._cToP=t._pToC=void 0;const o=i(0);t._pToC=(e,t,i,o)=>{let s=(o-90)*Math.PI/180;return{x:e+i*Math.cos(s),y:t+i*Math.sin(s)}},t._cToP=(e,t,i,o)=>({x:e+i*Math.cos(o),y:t+i*Math.sin(o)}),t._dArc=(e,i,o,s,n,r)=>{let a={d:"",p:{x:0,y:0}};if(o-=r/2,n-s>=360)a.d=["M",e,i,"m",-o,0,"a",o,o,0,"1",0,2*o,0,"a",o,o,0,"1",0,2*-o,0].join(" ");else{let r=n-s<=180?"0":"1",l=t._pToC(e,i,o,n),c=t._pToC(e,i,o,s);t._cToP(e,i,o,s);a.d=["M",l.x,l.y,"A",o,o,0,r,0,c.x,c.y].join(" "),a.p.x=l.x,a.p.y=l.y}return a};class s extends o.Component{constructor(e){super(e),this._drawArc=e=>{if(void 0!==e&&null!==this.props.paint){const i=this.props.paint.arcWH/2,o=this.props.paint.arcWH/2;let s,n=e/100;n*=360,s=t._dArc(o,o,i,0,n,this.props.paint.strokeWidth?this.props.paint.strokeWidth:0),this.setState({d:s.d,px:s.p.x,py:s.p.y})}},this.state={d:"",px:0,py:0}}componentWillReceiveProps(e){null===e.paint||this.state.d===e.paint.d&&this.state.py===e.paint.py&&this.state.px===e.paint.px||(this.setState({d:e.paint.d,px:e.paint.px,py:e.paint.py}),this._drawArc(e.percent)),this.props.percent!==e.percent&&this._drawArc(e.percent)}componentDidMount(){null!==this.props.paint&&(this.setState({d:this.props.paint.d,px:this.props.paint.px,py:this.props.paint.py}),this._drawArc(this.props.percent))}render(){if(null!==this.props.paint){const{arcWH:e,d:t,px:i,py:s,r:n,fill:r,fillsize:a}=this.props.paint,l=r.length>10?"url(#pattern)":r;return o.createElement(o.Fragment,null,o.createElement("svg",{id:"findsvg",style:{overflow:"visible"},width:e,height:e,viewBox:"0 0 "+e+" "+e},o.createElement("path",{strokeLinecap:this.props.paint.lineCarving?"butt":"round",strokeWidth:this.props.paint.strokeWidth?this.props.paint.strokeWidth:5,stroke:l,fill:"none",d:this.state.d+""}),o.createElement("circle",{className:"circle",cx:0===this.state.px?e/2:this.state.px,cy:this.state.py,r:n,fill:l}),this.props.zeropoint?o.createElement("circle",{className:"circle",cx:e/2,cy:1,r:n,fill:l}):"",o.createElement("pattern",{id:"pattern",patternUnits:"userSpaceOnUse",x:0-n,y:0-n,width:a?a+2*n:100,height:a?a+2*n:100},o.createElement("image",{xlinkHref:this.props.paint.fill,x:0,y:0,width:a?a+2*n:100,height:a?a+2*n:100}))),this.props.children?this.props.children:"")}return null!==this.props.watch?o.createElement(o.Fragment,null,o.createElement("div",{className:"circle"},o.createElement("div",{className:"progress-circle progress-"+this.props.watch.progress}),o.createElement("div",{className:"m_text"},this.props.watch.text)),this.props.children?this.props.children:""):o.createElement(o.Fragment,null)}}t.ProgressCircle=s},function(e,t,i){"use strict";i.r(t)},function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),n=i(2),r=i(1),a=i(3);i(35);let l=class extends s.Component{constructor(e){super(e),this._prog=0}componentDidMount(){}componentWillUnmount(){}componentDidUpdate(e){if(this.props.view&&!e.view){let e=document.getElementsByClassName("confetti")[0];if(e){const t="/content/mathalive_lib/images/ani_effect_result_850.gif?"+(new Date).getTime();e.style.backgroundImage="url('"+t+"')",e.style.display="",setTimeout(()=>{e.style.display="none"},3100)}a.App.pub_playGameresult()}else if(!this.props.view&&e.view){let e=document.getElementsByClassName("confetti")[0];e&&(e.style.display="")}}render(){const{view:e,onClose:t,gold:i,silver:o,bronze:n,other:r}=this.props;let l=i.length+o.length+n.length;const c=[...r].reverse();return s.createElement("div",{className:"quizContent",style:{display:e?void 0:"none"}},s.createElement("div",{id:"contentWrap",className:"contentWrap"},s.createElement("div",{className:"result_ranking"},s.createElement("div",{className:"btn_close",onClick:t}),s.createElement("div",{className:"high_rank_list"},s.createElement("div",{className:"scroll"},l>0&&s.createElement(s.Fragment,null,s.createElement("div",{className:"title"},"High Ranking"),s.createElement("ul",null,i.map((e,t)=>{const i=e.score,o=a.App.students.find((t,i)=>t.id===e.studentid);if(o){const n="2"===o.displayMode&&o.nickname?o.nickname:o.name,r="2"===o.displayMode?o.avatar:o.thumb;return s.createElement("li",{key:"gold"+t,className:"gold"},""!==r&&s.createElement("img",{src:r}),""===r&&s.createElement("div",{className:o.gender&&"F"===o.gender?"defaultImg_f":"defaultImg_m"},s.createElement("div",null,n.substring(0,2).toUpperCase())),s.createElement("div",{className:"score"},i,s.createElement("span",{className:"heart"},e.score-e.bonus),s.createElement("span",{className:"plus"},e.bonus)),s.createElement("div",{className:"name"},n))}return null}),o.map((e,t)=>{const i=e.score,o=a.App.students.find((t,i)=>t.id===e.studentid);if(o){const n="2"===o.displayMode&&o.nickname?o.nickname:o.name,r="2"===o.displayMode?o.avatar:o.thumb;return s.createElement("li",{key:"silver"+t,className:"silver"},""!==r&&s.createElement("img",{src:r}),""===r&&s.createElement("div",{className:o.gender&&"F"===o.gender?"defaultImg_f":"defaultImg_m"},s.createElement("div",null,n.substring(0,2).toUpperCase())),s.createElement("div",{className:"score"},i,s.createElement("span",{className:"heart"},e.score-e.bonus),s.createElement("span",{className:"plus"},e.bonus)),s.createElement("div",{className:"name"},n))}return null}),n.map((e,t)=>{const i=e.score,o=a.App.students.find((t,i)=>t.id===e.studentid);if(o){const n="2"===o.displayMode&&o.nickname?o.nickname:o.name,r="2"===o.displayMode?o.avatar:o.thumb;return s.createElement("li",{key:"bronze"+t,className:"bronze"},""!==r&&s.createElement("img",{src:r}),""===r&&s.createElement("div",{className:o.gender&&"F"===o.gender?"defaultImg_f":"defaultImg_m"},s.createElement("div",null,n.substring(0,2).toUpperCase())),s.createElement("div",{className:"score"},i,s.createElement("span",{className:"heart"},e.score-e.bonus),s.createElement("span",{className:"plus"},e.bonus)),s.createElement("div",{className:"name"},n))}return null}))),r.length>0&&s.createElement(s.Fragment,null,s.createElement("div",{className:"title"},"Result"),s.createElement("ul",null,c.map((e,t)=>{const i=e.score,o=a.App.students.find((t,i)=>t.id===e.studentid);if(o){const n="2"===o.displayMode&&o.nickname?o.nickname:o.name,r="2"===o.displayMode?o.avatar:o.thumb;return s.createElement("li",{key:"other"+t},""!==r&&s.createElement("img",{src:r}),""===r&&s.createElement("div",{className:o.gender&&"F"===o.gender?"defaultImg_f":"defaultImg_m"},s.createElement("div",null,n.substring(0,2).toUpperCase())),s.createElement("div",{className:"score"},i,s.createElement("span",{className:"heart"},e.score-e.bonus),s.createElement("span",{className:"plus"},e.bonus)),s.createElement("div",{className:"name"},n))}return null})))),s.createElement("div",{className:"confetti"})))))}};o([r.observable],l.prototype,"_prog",void 0),l=o([n.observer],l),t.default=l},function(e,t,i){"use strict";i.r(t)},function(e,t,i){"use strict";var o=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{l(o.next(e))}catch(e){n(e)}}function a(e){try{l(o.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(0),r=i(2),a=i(1);i(37);const l=i(3);let c=class extends n.Component{constructor(e){super(e),this.timeSec=0,this._onSendStart=()=>s(this,void 0,void 0,(function*(){this.props.view})),this.onStart=()=>{l.App.pub_game_timesetting_start(),this.props.onStart(this.timeSec)},this.onPlusTime=()=>{l.App.pub_playBtnTab(),this.timeSec=this.timeSec+5,this.timeSec>600&&(this.timeSec=600)},this.onMinusTime=()=>{l.App.pub_playBtnTab(),this.timeSec=this.timeSec-5,this.timeSec<5&&(this.timeSec=5)}}componentDidMount(){}componentWillUnmount(){}componentDidUpdate(e){this.props.view&&!e.view?this.timeSec=this.props.timeSec:!this.props.view&&e.view}render(){const{view:e}=this.props;return n.createElement("div",{className:"t_timesetting",style:{display:e?void 0:"none"}},l.App.isDvlp?n.createElement("button",{className:"btn_menu"}):void 0,n.createElement("div",{className:"tit"},"Time Setting"),n.createElement("div",{className:"settingTimer"},n.createElement("span",{className:"num"},this.timeSec),n.createElement("button",{className:"btn_minus",onClick:this.onMinusTime}),n.createElement("button",{className:"btn_plus",onClick:this.onPlusTime})),n.createElement("button",{className:"btn_start",onClick:this.onStart.bind(this)}))}};o([a.observable],c.prototype,"timeSec",void 0),c=o([r.observer],c),t.default=c},function(e,t,i){"use strict";i.r(t)},function(e,t,i){"use strict";i.r(t)}]);