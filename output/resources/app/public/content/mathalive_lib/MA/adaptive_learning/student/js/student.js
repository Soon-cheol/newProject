!function(e){var t={};function i(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(s,o,function(t){return e[t]}.bind(null,o));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=22)}([function(e,t){e.exports=React},function(e,t,i){"use strict";var s=i(14),o=Object.prototype.toString;function n(e){return"[object Array]"===o.call(e)}function a(e){return void 0===e}function r(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===o.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),n(e))for(var i=0,s=e.length;i<s;i++)t.call(null,e[i],i,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:n,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:r,isUndefined:a,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:c,isStream:function(e){return r(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function e(){var t={};function i(i,s){"object"==typeof t[s]&&"object"==typeof i?t[s]=e(t[s],i):t[s]=i}for(var s=0,o=arguments.length;s<o;s++)l(arguments[s],i);return t},deepMerge:function e(){var t={};function i(i,s){"object"==typeof t[s]&&"object"==typeof i?t[s]=e(t[s],i):t[s]="object"==typeof i?e({},i):i}for(var s=0,o=arguments.length;s<o;s++)l(arguments[s],i);return t},extend:function(e,t,i){return l(t,(function(t,o){e[o]=i&&"function"==typeof t?s(t,i):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){e.exports=mobx},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const s=i(9),o=i(6);function n(e){if(!e)return e;console.log("init student",e),e.displayMode=""+e.displayMode=="2"?"2":"1",e.gender=e.gender,""===e.nickname&&(e.nickname=e.name);let t=e.avatar&&""!==e.avatar?e.avatar:"";return""===t&&(t="f"===e.gender||"F"===e.gender?"/content/mathalive_lib/images/default_candy.png":"/content/mathalive_lib/images/default_cheese.png",e.avatar=t),e}class a{static get isMobile(){return a._isMobile}static get tempEl(){return a._tempEl}static pub_init(){const e=navigator.userAgent;a._isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e)||/android/i.test(e),a._tempBnd=document.createElement("div"),a._tempBnd.style.display="none",a._tempEl=document.createElement("div"),a._tempBnd.appendChild(a._tempEl),null===document.body?document.addEventListener("DOMContentLoaded",e=>{document.body.appendChild(a._tempBnd)}):document.body.appendChild(a._tempBnd)}static get students(){return a._students}static get student(){return a._student}static get lang(){return a._lang}static get isDvlp(){return a._isDvlp}static get data_url(){return a._data_url}static get lesson(){return a._lesson}static get book(){return a._book}static get nextBook(){return a._nextBook}static get prevBook(){return a._prevBook}static get addOnHost(){return a._addOnHost}static setaddOnHost(e){a._addOnHost=e}static pub_load(e,t,i,s,o,r,c){a._lesson=s,a._book=i,a._nextBook=r,a._prevBook=c,a._students=[],e&&Array.isArray(e)&&e.forEach((e,t)=>{a._students[t]=n(e)}),a._student=n(t),o&&""!==o&&(a._addOnHost=o)}static pub_reloadStudents(e){o.getStudents((t,i)=>{for(;a._students.length>0;)a._students.pop();for(;a._students_inited.length>0;)a._students_inited.pop();for(let e=0,i=t.length;e<i;e++)a.isDvlp?a._students[e]=n(t[e]):a._students[e]=n({id:t[e].id,name:t[e].name,thumb:t[e].defaultThumbnail,avatar:t[e].profileThumbnail,nickname:""!==t[e].nickName?t[e].nickName:t[e].name,displayMode:t[e].displayMode,gender:t[e].gender,inited:!0}),console.log("student",t[e]),a._students_inited.push(t[e].id);e()})}static pub_parseStyle(e){return a._tempEl.style.cssText=e,a._tempEl.style}static pub_initAudio(){a._common_audio=document.getElementById("common_audio"),a._ding_audio=document.getElementById("ding_audio"),a._dingend_audio=document.getElementById("dingend_audio"),a._btn_audio=document.getElementById("btn_audio"),a._correct_audio=document.getElementById("correct_audio"),a._wrong_audio=document.getElementById("wrong_audio"),a._topad_audio=document.getElementById("topad_audio"),a._goodjob_audio=document.getElementById("goodjob_audio"),a._btn_back_audio=document.getElementById("btn_back_audio"),a._btn_page_audio=document.getElementById("btn_page_audio"),a._popup_audio=document.getElementById("popup_audio"),a._clock_audio=document.getElementById("clock_audio"),a._ts_bgm_audio=document.getElementById("ts_bgm_audio"),a._bs_audio=document.getElementById("bs_audio"),a._bb_audio=document.getElementById("bb_audio"),a._cd_audio=document.getElementById("cd_audio"),a._tc_audio=document.getElementById("tc_audio"),a._te_audio=document.getElementById("te_audio"),a._trg_bgm_audio=document.getElementById("trg_bgm_audio"),a._afc_audio=document.getElementById("afc_audio"),a._trs_audio=document.getElementById("trs_audio"),a._btn_choice_audio=document.getElementById("btn_choice_audio"),a._retry_audio=document.getElementById("retry_audio"),a._sorry_audio=document.getElementById("sorry_audio"),a._great_audio=document.getElementById("great_audio"),a._memorygame_flipcard_audio=document.getElementById("flipcard_audio"),a._ispy_gameclick_audio=document.getElementById("gameclick_audio"),a._game_timesetting_start_audio=document.getElementById("game_timesetting_start"),a._solution_btn_audio=document.getElementById("solution_btn_audio"),a._game_result_audio=document.getElementById("game_result_audio"),a._open_problom_audio=document.getElementById("open_problom_audio"),a._quiz_done_audio=document.getElementById("quiz_done_audio"),a._hit_up_audio=document.getElementById("hu_audio"),a._hit_down_audio=document.getElementById("hd_audio"),a._hit_good_audio=document.getElementById("hg_audio"),a._hit_wrong_audio=document.getElementById("hw_audio"),a._pick_presenter=document.getElementById("pick_presenter"),a._game_good_audio=document.getElementById("gg_audio")}static pub_playClock(){a._clock_audio&&(a._clock_audio.currentTime=4.5,a._clock_audio.play())}static pub_playPopup(){a._popup_audio&&(a._popup_audio.currentTime=0,a._popup_audio.play())}static pub_playBtnPage(){a._btn_page_audio&&(a._btn_page_audio.currentTime=0,a._btn_page_audio.play())}static pub_playBtnBack(){a._btn_back_audio&&(a._btn_back_audio.currentTime=0,a._btn_back_audio.play())}static pub_playGoodjob(){a._goodjob_audio&&(a._goodjob_audio.currentTime=0,a._goodjob_audio.play())}static pub_playDing(){a._ding_audio&&(a._ding_audio.currentTime=0,a._ding_audio.play())}static pub_playDingend(){a._dingend_audio&&(a._dingend_audio.currentTime=0,a._dingend_audio.play())}static pub_playToPad(){a._topad_audio&&(a._topad_audio.currentTime=0,a._topad_audio.play())}static pub_playBtnTab(){a._btn_audio&&(a._btn_audio.currentTime=0,a._btn_audio.play())}static pub_playCorrect(){a._correct_audio&&(a._correct_audio.currentTime=0,a._correct_audio.play())}static pub_playWrong(){a._wrong_audio&&(a._wrong_audio.currentTime=0,a._wrong_audio.play())}static pub_playTeamSelectBgm(){a._ts_bgm_audio&&(a._ts_bgm_audio.currentTime=0,a._ts_bgm_audio.play())}static pub_stopTeamSelectBgm(){a._ts_bgm_audio&&(a._ts_bgm_audio.pause(),a._ts_bgm_audio.currentTime=0)}static pub_playStartButton(){a._bs_audio&&(a._bs_audio.currentTime=0,a._bs_audio.play())}static pub_playBasicButton(){a._bb_audio&&(a._bb_audio.currentTime=0,a._bb_audio.play())}static pub_playCountDown(){a._cd_audio&&(a._cd_audio.currentTime=0,a._cd_audio.play())}static pub_playTimerClock(){a._tc_audio&&(a._tc_audio.currentTime=0,a._tc_audio.play())}static pub_stopTimerClock(){a._tc_audio&&(a._tc_audio.pause(),a._tc_audio.currentTime=0)}static pub_playTimerEnd(){a._te_audio&&(a._te_audio.currentTime=0,a._te_audio.play())}static pub_playResultGraph(){a._trg_bgm_audio&&(a._trg_bgm_audio.currentTime=0,a._trg_bgm_audio.play())}static pub_playFireworksClapping(){a._afc_audio&&(a._afc_audio.currentTime=0,a._afc_audio.play())}static pub_playTotalResult(){a._trs_audio&&(a._trs_audio.currentTime=0,a._trs_audio.play())}static pub_playChoiceBtn(){a._btn_choice_audio&&(a._btn_choice_audio.currentTime=0,a._btn_choice_audio.play())}static pub_playsorry(){a._sorry_audio&&(a._sorry_audio.currentTime=0,a._sorry_audio.play())}static pub_playretry(){a._retry_audio&&(a._retry_audio.currentTime=0,a._retry_audio.play())}static pub_playgreat(){a._great_audio&&(a._great_audio.currentTime=0,a._great_audio.play())}static pub_playFlipCard(){a._memorygame_flipcard_audio&&(a._memorygame_flipcard_audio.currentTime=0,a._memorygame_flipcard_audio.play())}static pub_playGameClick(){a._ispy_gameclick_audio&&(a._ispy_gameclick_audio.currentTime=0,a._ispy_gameclick_audio.play())}static pub_game_timesetting_start(){a._game_timesetting_start_audio&&(a._game_timesetting_start_audio.currentTime=0,a._game_timesetting_start_audio.play())}static pub_solution_btn_click(){a._solution_btn_audio&&(a._solution_btn_audio.currentTime=0,a._solution_btn_audio.play())}static pub_playGameresult(){a._game_result_audio&&(a._game_result_audio.currentTime=0,a._game_result_audio.play())}static pub_openProblom(){a._open_problom_audio&&(a._open_problom_audio.currentTime=0,a._open_problom_audio.play())}static pub_quizDone(){a._quiz_done_audio&&(a._quiz_done_audio.currentTime=0,a._quiz_done_audio.play())}static pub_pick_presenter(){a._pick_presenter&&(a._pick_presenter.currentTime=0,a._pick_presenter.play())}static pub_stop(){null!=a._common_audio.onended&&a._common_audio.onended.call(a._common_audio,new Event("ended")),a._common_audio.oncanplaythrough=null,isNaN(a._common_audio.duration)||a._common_audio.paused||a._common_audio.pause()}static pub_play(e,t){a.pub_stop(),e=s.nteString(e,"");const i=s.nteString(a._common_audio.getAttribute("src"),"");if(""===e&&""===i)return void(null!=t&&t(!0));""!==e&&i!==e&&(a._common_audio.src=e);const o=e=>{a._common_audio.onended=null,null!==t&&t(!0),a._common_audio.removeEventListener("error",o)};a._common_audio.onended=e=>{a._common_audio.onended=null,null!==t&&t(!!e),a._common_audio.removeEventListener("error",o)},a._common_audio.addEventListener("error",o),isNaN(a._common_audio.duration)?(a._common_audio.oncanplaythrough=e=>{0!==a._common_audio.currentTime&&(a._common_audio.currentTime=0),a._common_audio.play(),a._common_audio.oncanplaythrough=null},a._common_audio.load()):(0!==a._common_audio.currentTime&&(a._common_audio.currentTime=0),a._common_audio.oncanplaythrough=null,a._common_audio.play())}static pub_set(e,t,i){a._isDvlp=t,a._lang=i,o.set(t)}static pub_addInitedStudent(e){let t=!0;for(let i=0,s=a._students_inited.length;i<s;i++){a._students_inited[i]===e.id&&(t=!1)}t&&a._students_inited.push(e.id);const i=a._start_idx>0&&a._students.length>0&&a._students_inited.length>=a._students.length;return i&&(window.clearTimeout(a._start_idx),a._start_idx=-1),i}static pub_start(e){0===a._students.length||a._students_inited.length>=a._students.length?e():a._start_idx=window.setTimeout(e,2e3)}static pub_clear(){for(;a._students.length>0;)a._students.pop();for(;a._students_inited.length>0;)a._students_inited.pop()}static pub_playHitup(){a._hit_up_audio&&(a._hit_up_audio.currentTime=0,a._hit_up_audio.play())}static pub_playHitdown(){a._hit_down_audio&&(a._hit_down_audio.currentTime=0,a._hit_down_audio.play())}static pub_playHitgood(){a._hit_good_audio&&(a._hit_good_audio.currentTime=0,a._hit_good_audio.play())}static pub_playHitwrong(){a._hit_wrong_audio&&(a._hit_wrong_audio.currentTime=0,a._hit_wrong_audio.play())}static pub_playGamegood(){a._game_good_audio&&(a._game_good_audio.currentTime=0,a._game_good_audio.play())}}t.App=a,a._isMobile=!1,a._students=[],a._students_inited=[],a._student=null,a._lang="ko",a._isDvlp=!1,a._data_url="../data/",a._lesson="",a._book="",a._nextBook=!1,a._prevBook=!1,a._start_idx=-1,a.isStarted=!1,a._addOnHost="https://addonsapi.fel40.com"},function(e,t){e.exports=mobxReact},function(e,t){e.exports=_},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function a(e){try{c(s.next(e))}catch(e){n(e)}}function r(e){try{c(s.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.postAttention=t.postViewDiv=t.getPreviewDmsResult=t.getPreviewResult=t.showSGiftBox=t.showSLivePointPop=t.launchSTool=t.clearPenTool=t.hidePenTool=t.showPenTool=t.showRecordTool=t.showSendButton=t.alertToStudent=t.showSLoading=t.showSMathKit=t.clearSPenTool=t.takePicture=t.uploadInclassReport=t.stopVideoRecord=t.startVideoRecord=t.switchCamera=t.stopCamera=t.pauseRecordPlayer=t.playRecordPlayer=t.startCustomCamera=t.startCamera=t.getStudents=t.uploadFileToServerMulti=t.uploadImageToServer=t.uploadFileToServer=t.stopVoiceRecord=t.startVoiceRecord=t.sendTeacher=t.disableSoftwareKeyboard=t.sendPAD=t.sendPADToID=t.sendLauncher=t.uploadStudentReport=t.addStudentForStudentReportType6=t.hideStudentReportListPage=t.showStudentReportListPage=t.showStudentReportUI=t.hideStudentReportUI=t.startStudentReportProcess=t.finishContentPage=t.showTMathKit=t.alertToTeacher=t.showTLoading=t.clearTPenTool=t.getBookCaptureInfo=t.uploadTImageToServer=t.useFractionBar=t.logOut=t.exitClass=t.getNaviInfo=t.launchPadTool=t.launchTool=t.exitBook=t.gotoBookByKey=t.gotoBook=t.set=void 0;const o=i(5);let n=!1;t.set=function(e){n=e},t.gotoBook=function(e,t){if(console.log("felsocket gotoBook",e,t),!n)try{window.tsoc_o.gotoBook(e,t)}catch(e){}},t.gotoBookByKey=function(e){if(console.log("felsocket gotoBookByKey",e),!n)try{window.tsoc_o.gotoBookByKey(e)}catch(e){}},t.exitBook=function(){if(console.log("felsocket exitBook"),!n)try{window.tsoc_o.exitBook()}catch(e){}},t.launchTool=function(e){if(console.log("felsocket launchTool",e),!n)try{window.tsoc_o.launchTool(e)}catch(e){}},t.launchPadTool=function(e){if(console.log("felsocket launchPadTool",e),!n)try{window.tsoc_o.launchPadTool(e)}catch(e){}},t.getNaviInfo=function(e){if(console.log("felsocket getNaviInfo",e),!n)try{window.tsoc_o.getNaviInfo(e)}catch(e){}},t.exitClass=function(){if(console.log("felsocket exitClass"),!n)try{window.tsoc_o.exitClass()}catch(e){}},t.logOut=function(){if(console.log("felsocket logOut"),!n)try{window.tsoc_o.logOut()}catch(e){}},t.useFractionBar=function(){if(console.log("felsocket useFractionBar"),!n)try{window.tsoc_o.useFractionBar()}catch(e){}},t.uploadTImageToServer=function(e,t,i,s){if(console.log("felsocket uploadTImageToServer",t,i,s),!n)try{window.tsoc_o.uploadImageToServer(e,t,i,s)}catch(e){}},t.getBookCaptureInfo=function(e){if(console.log("felsocket getBookCaptureInfo"),!n)try{window.tsoc_o.getBookCaptureInfo(e)}catch(e){}},t.clearTPenTool=function(){if(console.log("felsocket clearTPenTool"),!n)try{window.tsoc_o.clearPenTool()}catch(e){}},t.showTLoading=function(e){if(console.log("felsocket showTLoading",e),!n)try{window.tsoc_o.showLoading(e)}catch(e){}},t.alertToTeacher=function(e){if(console.log("felsocket alertToTeacher",e),!n)try{window.tsoc_o.alert(e)}catch(e){}},t.showTMathKit=function(e){if(console.log("felsocket showTMathKit",e),!n)try{window.tsoc_o.showMathKit(e)}catch(e){}},t.finishContentPage=function(){if(!n)try{window.tsoc_o.finishContentPage()}catch(e){}},t.startStudentReportProcess=function(e,t,i){if(!n)try{window.tsoc_o.startStudentReportProcess(e,t,i)}catch(e){}},t.hideStudentReportUI=function(){if(!n)try{window.tsoc_o.hideStudentReportUI()}catch(e){}},t.showStudentReportUI=function(){if(!n)try{window.tsoc_o.showStudentReportUI()}catch(e){}},t.showStudentReportListPage=function(){if(!n)try{window.tsoc_o.showStudentReportListPage()}catch(e){}},t.hideStudentReportListPage=function(){if(!n)try{window.tsoc_o.hideStudentReportListPage()}catch(e){}},t.addStudentForStudentReportType6=function(e){if(!n)try{window.tsoc_o.addStudentForStudentReportType6(e)}catch(e){}},t.uploadStudentReport=function(e,t,i){if(!n)try{window.psoc_o.uploadStudentReport(e,t,i)}catch(e){}},t.sendLauncher=function(e,t){if(5!==e||n)if(6!==e||n)if(7!==e||n){if(8===e)if(console.log("felsocket gotoPrevBook"),n)try{window.top.tsoc_o.gotoPrevBook()}catch(e){}else try{window.tsoc_o.gotoPrevBook()}catch(e){}else if(9===e)if(console.log("felsocket gotoNextBook"),n)try{window.top.tsoc_o.gotoNextBook()}catch(e){}else try{window.tsoc_o.gotoNextBook()}catch(e){}}else try{window.tsoc_o.setTitleBar(t)}catch(e){}else try{window.tsoc_o.showTitleBar()}catch(e){}else try{window.tsoc_o.hideTitleBar()}catch(e){}},t.sendPADToID=function(e,t,i){const s={type:t,data:i};if(n)try{window.top.tsoc_o.sendPADToID(e,s)}catch(e){}else try{window.tsoc_o.sendPADToID(e,s)}catch(e){}},t.sendPAD=function(e,t){const i={type:e,data:t};if(n)try{window.top.tsoc_o.sendAll(i)}catch(e){}else try{window.tsoc_o.sendAll(i)}catch(e){}},t.disableSoftwareKeyboard=function(){try{window.psoc_o.disableSoftwareKeyboard()}catch(e){}},t.sendTeacher=function(e,t){const i={type:e,data:t};if(n)try{null!==window.opener&&window.opener.tsoc_o.sendTeacher(i)}catch(e){}else try{window.psoc_o.sendTeacher(i)}catch(e){}},t.startVoiceRecord=function(){try{window.psoc_o.startVoiceRecord()}catch(e){}},t.stopVoiceRecord=function(){try{window.psoc_o.stopVoiceRecord()}catch(e){}},t.uploadFileToServer=function(e){try{window.psoc_o.uploadFileToServer(e)}catch(e){}},t.uploadImageToServer=function(e,t,i,s){try{window.psoc_o.uploadImageToServer(e,t,i,s)}catch(e){}},t.uploadFileToServerMulti=function(e){try{window.psoc_o.uploadFileToServerMulti(e)}catch(e){}},t.getStudents=function(e){if(n)if(window.top.tsoc_o)try{window.top.tsoc_o.getStudents(e)}catch(e){}else e([],!1);else try{window.tsoc_o.getStudents(e)}catch(e){}},t.startCamera=function(e){if(!n)try{window.psoc_o.startCamera(e)}catch(e){}},t.startCustomCamera=function(e){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"startCustomCamera",msg:e},"*")},t.playRecordPlayer=function(){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"playRecordPlayer"},"*")},t.pauseRecordPlayer=function(){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"pauseRecordPlayer"},"*")},t.stopCamera=function(){if(!n)try{window.psoc_o.stopCamera()}catch(e){}},t.switchCamera=function(e){if(!n)try{window.psoc_o.switchCamera(e)}catch(e){}},t.startVideoRecord=function(){if(!n)try{window.psoc_o.startVideoRecord()}catch(e){}},t.stopVideoRecord=function(){if(!n)try{window.psoc_o.stopVideoRecord()}catch(e){}},t.uploadInclassReport=function(e){if(!n)try{window.tsoc_o.uploadInclassReport(e)}catch(e){}},t.takePicture=function(e){if(!n)try{window.psoc_o.takePicture(e)}catch(e){}},t.clearSPenTool=function(){if(console.log("felsocket clearPenTool"),!n)try{window.psoc_o.clearPenTool()}catch(e){}},t.showSMathKit=function(e){if(console.log("felsocket showSMathKit",e),!n)try{window.psoc_o.showMathKit(e)}catch(e){}},t.showSLoading=function(e){if(console.log("felsocket showSLoading",e),!n)try{window.psoc_o.showLoading(e)}catch(e){}},t.alertToStudent=function(e){if(console.log("felsocket alertToStudent",e),!n)try{window.psoc_o.alert(e)}catch(e){}},t.showSendButton=function(e,t){if(console.log("felsocket showSendButton"),!n)try{window.psoc_o.showSendButton(e,t)}catch(e){}},t.showRecordTool=function(e){if(console.log("felsocket showRecordTool",e),!n)try{window.psoc_o.showRecordTool(e)}catch(e){}},t.showPenTool=function(){if(console.log("felsocket showPentool"),!n)try{window.psoc_o.showPenTool()}catch(e){}},t.hidePenTool=function(){if(console.log("felsocket hidePentool"),!n)try{window.psoc_o.hidePenTool()}catch(e){}},t.clearPenTool=function(){if(console.log("felsocket clearPenTool"),!n)try{window.psoc_o.clearPenTool()}catch(e){}},t.launchSTool=function(e){if(console.log("felsocket launchTool",e),!n)try{window.psoc_o.launchTool(e)}catch(e){}},t.showSLivePointPop=function(e){if(console.log("felsocket showLivePointPop"),!n)try{window.psoc_o.showLivePointPop(e)}catch(e){}},t.showSGiftBox=function(e,t){if(console.log("felsocket showGiftBox"),!n)try{window.psoc_o.showGiftBox(e,t)}catch(e){}},t.getPreviewResult=function(e){return s(this,void 0,void 0,(function*(){return new Promise(t=>{if(n)t([]);else{let i=!1;const s=e=>{i||(i=!0,t(e))};window.tsoc_o.getPreviewResult(s,e),o.delay(()=>{i||(i=!0,t([]))},5e3)}})}))},t.getPreviewDmsResult=function(e){return s(this,void 0,void 0,(function*(){return new Promise(t=>{if(n)t([]);else{let i=!1;const s=e=>{i||(i=!0,t(e))};window.tsoc_o.getPreviewDmsResult(s,e),o.delay(()=>{i||(i=!0,t([]))},5e3)}})}))},t.postViewDiv=function(e){return s(this,void 0,void 0,(function*(){console.log("postViewDiv",e),window.top.postMessage({type:"viewDiv",msg:e,from:"content"},"*")}))},t.postAttention=function(e){return s(this,void 0,void 0,(function*(){console.log("postAttention",e),window.top.postMessage({type:"attention",msg:e,from:"content"},"*")}))}},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function a(e){try{c(s.next(e))}catch(e){n(e)}}function r(e){try{c(s.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getBounds=t.getTimeStr=t.wait=void 0;const o=i(5);t.wait=function(e){return s(this,void 0,void 0,(function*(){return new Promise(t=>{o.delay(t,e)})}))},t.getTimeStr=function(e,t){const i=Math.round(t/1e3);let s=Math.round(e/1e3),o=Math.floor(s/60),n=Math.floor(o/60),a="";return s%=60,o%=60,n>0||i>=3600?(a=n+":",a+=o>=10?o+":":"0"+o+":"):i>=600?a+=o>=10?o+":":"0"+o+":":a=o+":",a+=s>=10?s:"0"+s,a},t.getBounds=function(e){const t={left:0,top:0,width:0,height:0};if(!e)return t;try{const i=e.getBoundingClientRect();t.left=i.left,t.top=i.top,t.width=i.width,t.height=i.height}catch(e){}const i=e.ownerDocument,s=i.body,o=i.documentElement;t.left=t.left-(o.clientLeft||s.clientLeft||0),t.top=t.top-(o.clientTop||s.clientTop||0);const n=i.defaultView;return t.left+=n.pageXOffset||o.scrollLeft||s.scrollLeft,t.top+=n.pageYOffset||o.scrollTop||s.scrollTop,t}},function(e,t,i){"use strict";e.exports=i(25)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._toStringTimestamp=t.getDateStr=t.nteArray=t.intToHTMLcolor=t.nteBool=t.nteString=t.nteFloat=t.nteInt=t.nteUInt=t.getUnicUrl=t.getUnicNum=t.getUnic=void 0,Date.now||(Date.now=function(){return(new Date).getTime()});let s=0;function o(){return n().toString(36)}function n(){const e=Date.now();return e>s?s=e:s+=1,s}t.getUnic=o,t.getUnicNum=n,t.getUnicUrl=function(e){if(!e)return"";let t=e=e.trim();return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")||(t=t.indexOf("?")>0?t+"&t="+o():t+"?t="+o()),t},t.nteUInt=function(e,t){if(null==e)return t;if("number"==typeof e)return isNaN(e)||e<0?t:Math.round(e);{const i=parseInt(String(e),10);return isNaN(i)||i<0?t:i}},t.nteInt=function(e,t){if(null==e)return t;if("number"==typeof e)return Math.round(e);{const i=parseInt(String(e),10);return isNaN(i)?t:i}},t.nteFloat=function(e,t){if(null==e)return t;if("number"==typeof e)return e;{const i=parseFloat(String(e));return isNaN(i)?t:i}},t.nteString=function(e,t){return null==e?t:String(e)},t.nteBool=function(e,t){if(null==e)return t;if("boolean"==typeof e)return e;const i=String(e);return"true"===i||"false"!==i&&t},t.intToHTMLcolor=function(e){let t,i,s,o=e-0;t=(255&o)<<16,i=65280&o,s=(16711680&o)>>>16,o=t|i|s;let n=o.toString(16);return n="#000000".substring(0,7-n.length)+n,n},t.nteArray=function(e){if(e){if(Array.isArray(e))return e;if("string"==typeof e){const t=e;if(t.indexOf("[")>=0&&t.indexOf("]")>0)try{return JSON.parse(t)}catch(e){}}const t=[];return t.push(e),t}return[]},t.getDateStr=function(e="."){const t=new Date,i=t.getFullYear(),s=t.getMonth()+1,o=t.getDate();return i+e+(s<10?"0"+s:""+s)+e+(o<10?"0"+o:""+o)},t._toStringTimestamp=function(e){let t;const i=e.getFullYear();let s=e.getMonth()+1+"";parseInt(s,10)<10&&(s="0"+s);let o=e.getDate()+"";return parseInt(o,10)<10&&(o="0"+o),t=i+"-"+s+"-"+o+" "+e.toTimeString().substr(0,8),t}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IResultType=void 0,function(e){e[e.NONE=0]="NONE",e[e.AWESOME=1]="AWESOME",e[e.GOODJOB=2]="GOODJOB",e[e.GREAT=3]="GREAT",e[e.PERFECT=4]="PERFECT",e[e.KEEPTRY=5]="KEEPTRY",e[e.QUITE=6]="QUITE",e[e.RETRY=7]="RETRY",e[e.SORRY=8]="SORRY"}(t.IResultType||(t.IResultType={}))},function(e,t,i){"use strict";var s=this&&this.__decorate||function(e,t,i,s){var o,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.AlertPopup=t.WarningPopup=t.StrategyPopup=void 0;const o=i(0),n=i(2),a=i(4),r=i(38),c=i(5),l=i(3);let d=class extends o.Component{componentDidUpdate(e){if(this.props.view&&!e.view){if(!this.props.button){let e=this.props.delay;e||(e=800),c.delay(()=>{this.props.onComplete&&this.props.onComplete()},e)}}else!this.props.view&&e.view}render(){const{type:e}=this.props;let t="";0===e?t="The teacher has stopped you from the activity. After 3 seconds, only the contents has been created so far will be submitted.":1===e?t="All students are already in progress. If you restart, existing data will be deleted. Are you sure you want to request the submission?":2===e?t="You can share a solution only in the problem solving state.":3===e?t="Do you want to save the current learning screen? If there is already saved data, the current data will be overwritten.":4===e?t="Picture not taken.\nYou have reached the maximum number of pictures available.":5===e&&(t="For this activity, We recommend students to wear a headset or an earphone with a microphone.");let i="exclamation";return 4===e?i="nocamera":5===e&&(i="headset"),o.createElement("div",{className:"alertpop strategy"+(this.props.view?" show":"")},o.createElement("div",{className:"alertpop-inner"},o.createElement("div",{className:i}),o.createElement("div",{className:"ment"},t),o.createElement("div",{className:"buttons"+(this.props.isSingle?" single":"")+(this.props.button?"":" hide")},o.createElement("button",{className:"btn cancel",onClick:this.props.onCancel},"Cancel"),o.createElement("button",{className:"btn ok",onClick:this.props.onOk},"Ok"))))}};d=s([a.observer],d),t.StrategyPopup=d;let u=class extends o.Component{constructor(){super(...arguments),this.second=3,this.interval=null}componentDidUpdate(e){if(this.props.view&&!e.view){if(this.second=3,!this.props.button){let e=this.props.delay;e||(e=800),this.interval=setInterval(()=>{this.second--,0===this.second&&(this.props.onComplete&&this.props.onComplete(),null!==this.interval&&clearInterval(this.interval))},1e3)}}else!this.props.view&&e.view&&(null!==this.interval&&clearInterval(this.interval),this.props.onComplete&&this.props.onComplete())}render(){const{type:e}=this.props;let t="";return 0===e&&(t=`Submit your answer within <strong>${this.second} seconds.</strong>`),o.createElement("div",{className:"warningpopup",style:{display:this.props.view?"":"none"}},o.createElement("div",{className:"msg",dangerouslySetInnerHTML:{__html:t}}))}};s([n.observable],u.prototype,"second",void 0),u=s([a.observer],u),t.WarningPopup=u;class p extends o.Component{constructor(){super(...arguments),this._onOk=()=>{this.props.onOk&&this.props.onOk()},this._onClose=()=>{this.props.onClose&&this.props.onClose()}}componentDidUpdate(e){this.props.view&&!e.view||!this.props.view&&e.view&&l.App.pub_playBtnTab()}render(){const{view:e,msg:t,isSingle:i,msgclass:s}=this.props;return o.createElement(r.CoverPopup,{className:"alert_popup",view:e,onClosed:this.props.isSingle?this._onOk:this._onClose},o.createElement("div",{className:"pop_box"},o.createElement("span",{className:"ico_alert"}),o.createElement("span",{className:"text"+(s&&""!==s?" "+s:""),dangerouslySetInnerHTML:{__html:t}}),o.createElement("div",{className:"btns"},o.createElement("button",{className:"btn_cancel",onClick:this._onClose,style:{display:i?"none":""}},o.createElement("span",null,"Cancel")),o.createElement("button",{className:"btn_ok",onClick:this._onOk},o.createElement("span",null,"OK")))))}}t.AlertPopup=p},function(e,t,i){"use strict";var s=this&&this.__decorate||function(e,t,i,s){var o,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.Navi=void 0;const o=i(0),n=i(2),a=i(4),r=i(40);let c=class extends o.Component{constructor(e){super(e),this.m_on=!1,this.m_isStarted=!1,this._onClick=e=>{this.m_on=!0}}componentDidUpdate(e){this.m_isStarted||!this.props.view||e.view||(this.m_isStarted=!0,this.m_on=!0)}render(){const e=this.m_on?void 0:"off",t={visibility:this.props.view?"visible":"hidden"};return o.createElement(o.Fragment,null,o.createElement("div",{id:"common_navi_left",className:e,style:t},o.createElement("div",null,o.createElement("div",{onClick:this._onClick},o.createElement(r.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),o.createElement(r.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))),o.createElement("div",{id:"common_navi_right",className:e,style:t},o.createElement("div",null,o.createElement("div",{onClick:this._onClick},o.createElement(r.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),o.createElement(r.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))))}};s([n.observable],c.prototype,"m_on",void 0),c=s([a.observer],c),t.Navi=c},function(e,t,i){e.exports=i(41)},function(e,t,i){"use strict";e.exports=function(e,t){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(t,i)}}},function(e,t,i){"use strict";var s=i(1);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,i){if(!t)return e;var n;if(i)n=i(t);else if(s.isURLSearchParams(t))n=t.toString();else{var a=[];s.forEach(t,(function(e,t){null!=e&&(s.isArray(e)?t+="[]":e=[e],s.forEach(e,(function(e){s.isDate(e)?e=e.toISOString():s.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))})))})),n=a.join("&")}if(n){var r=e.indexOf("#");-1!==r&&(e=e.slice(0,r)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}},function(e,t,i){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,i){"use strict";(function(t){var s=i(1),o=i(47),n={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!s.isUndefined(e)&&s.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var r,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(r=i(18)),r),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),s.isFormData(e)||s.isArrayBuffer(e)||s.isBuffer(e)||s.isStream(e)||s.isFile(e)||s.isBlob(e)?e:s.isArrayBufferView(e)?e.buffer:s.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):s.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},s.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),s.forEach(["post","put","patch"],(function(e){c.headers[e]=s.merge(n)})),e.exports=c}).call(this,i(46))},function(e,t,i){"use strict";var s=i(1),o=i(48),n=i(15),a=i(50),r=i(53),c=i(54),l=i(19);e.exports=function(e){return new Promise((function(t,d){var u=e.data,p=e.headers;s.isFormData(u)&&delete p["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",f=e.auth.password||"";p.Authorization="Basic "+btoa(m+":"+f)}var _=a(e.baseURL,e.url);if(h.open(e.method.toUpperCase(),n(_,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in h?r(h.getAllResponseHeaders()):null,s={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:i,config:e,request:h};o(t,d,s),h=null}},h.onabort=function(){h&&(d(l("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){d(l("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),d(l(t,e,"ECONNABORTED",h)),h=null},s.isStandardBrowserEnv()){var g=i(55),y=(e.withCredentials||c(_))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;y&&(p[e.xsrfHeaderName]=y)}if("setRequestHeader"in h&&s.forEach(p,(function(e,t){void 0===u&&"content-type"===t.toLowerCase()?delete p[t]:h.setRequestHeader(t,e)})),s.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),d(e),h=null)})),void 0===u&&(u=null),h.send(u)}))}},function(e,t,i){"use strict";var s=i(49);e.exports=function(e,t,i,o,n){var a=new Error(e);return s(a,t,i,o,n)}},function(e,t,i){"use strict";var s=i(1);e.exports=function(e,t){t=t||{};var i={},o=["url","method","params","data"],n=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];s.forEach(o,(function(e){void 0!==t[e]&&(i[e]=t[e])})),s.forEach(n,(function(o){s.isObject(t[o])?i[o]=s.deepMerge(e[o],t[o]):void 0!==t[o]?i[o]=t[o]:s.isObject(e[o])?i[o]=s.deepMerge(e[o]):void 0!==e[o]&&(i[o]=e[o])})),s.forEach(a,(function(s){void 0!==t[s]?i[s]=t[s]:void 0!==e[s]&&(i[s]=e[s])}));var r=o.concat(n).concat(a),c=Object.keys(t).filter((function(e){return-1===r.indexOf(e)}));return s.forEach(c,(function(s){void 0!==t[s]?i[s]=t[s]:void 0!==e[s]&&(i[s]=e[s])})),i}},function(e,t,i){"use strict";function s(e){this.message=e}s.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},s.prototype.__CANCEL__=!0,e.exports=s},function(e,t,i){e.exports=i(23)},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const s=i(8),o=i(0),n=i(26),a=i(3),r=i(6),c=i(27);s.setConfig({ErrorOverlay:e=>o.createElement("div",null)});const l={clear:a.App.pub_clear,importLink:c.importLink,importHTML:c.importHTML};let d,u=!0;d=i(28),u=!1;let p=!1;const h=d,m=h.default,f=h.AppProvider,_=h.appContext;l.set=(e,t,i)=>{a.App.pub_set(e,t,i),_.setData(e)},l.render=()=>{a.App.pub_initAudio(),n.render(o.createElement(f,null,o.createElement(m,null)),document.getElementById("wrap"))},u?(l.init=(e,t,i,s,o,n)=>{a.App.pub_load(e,null,t,i,s,o,n)},l.start=()=>{p=!0,setTimeout(()=>_.start(),500)},l.receive=e=>{if(4===e.type){const t=e.data;p?t&&t.id&&""!==t.id&&(a.App.isStarted?r.sendPADToID(t.id,0,null):r.sendPADToID(t.id,1,null)):a.App.pub_addInitedStudent(t)&&(p||(p=!0,_.start()))}else _.receive(e)},l.teachingTool=e=>{},l.notifyNaviInfo=(e,t,i,s,o,n)=>{_.notifyNaviInfo(e,t,i,s,o,n)},l.notifyBookCaptureInfo=e=>{_.notifyBookCaptureInfo(e)},l.notifyUploadToServerResult=e=>{_.uploaded(e)},l.notifyUploadToServerMultiResult=e=>{_.multiUploaded(e)},l.notifyAlert=e=>{_.notifyAlert(e)},l.notifyPenToolState=(e,t)=>{_.notifyPenToolState(e,t)},l.notifyHamburgerMenuClicked=e=>{_.notifyHamburgerMenuClicked(e)},l.callThreeminState=()=>{_.callThreeminState()}):(l.init=(e,t,i,s,o,n)=>{a.App.pub_load(null,e,t,i,s,o,n),r.sendTeacher(4,e),_.start()},l.receive=e=>{null!=a.App.student&&_.receive(e)},l.notifyUploadToServerResult=e=>{_.uploaded(e)},l.notifyUploadToServerMultiResult=e=>{_.multiUploaded(e)},l.notify=e=>{_.notify(e)},l.notifyVideoRecord=e=>{_.notifyVideoRecord(e)},l.notifyStartVoice=()=>{_.notify("notifyStartVoice")},l.notifyVoiceRecordResult=e=>{_.notifyRecorded(e)},l.notifyTakePicture=(e,t)=>{_.notifyTakePicture&&_.notifyTakePicture(e,t)},l.clickSendButton=()=>{_.clickSendButton()},l.notifyRecordData=(e,t)=>{_.notifyRecordData(e,t)},l.notifyAlert=e=>{_.notifyAlert(e)},l.notifyPenToolState=(e,t)=>{_.notifyPenToolState(e,t)},l.notifyLiveGivePopupClose=()=>{_.notifyLiveGivePopupClose()}),i(70),e.app_o=l}).call(this,i(24))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,o=(s=i(0))&&"object"==typeof s&&"default"in s?s.default:s;function n(e){return n.warnAboutHMRDisabled&&(n.warnAboutHMRDisabled=!0,console.error("React-Hot-Loader: misconfiguration detected, using production version in non-production environment."),console.error("React-Hot-Loader: Hot Module Replacement is not enabled.")),o.Children.only(e.children)}n.warnAboutHMRDisabled=!1;var a=function e(){return e.shouldWrapWithAppContainer?function(e){return function(t){return o.createElement(n,null,o.createElement(e,t))}}:function(e){return e}};a.shouldWrapWithAppContainer=!1;t.AppContainer=n,t.hot=a,t.areComponentsEqual=function(e,t){return e===t},t.setConfig=function(){},t.cold=function(e){return e},t.configureComponent=function(){}},function(e,t){e.exports=ReactDOM},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importLink=t.importHTML=void 0,t.importHTML=function(e){return new Promise((t,i)=>{const s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="document",s.onload=e=>{if(!e)return;const o=s.response;o&&o.body&&o.body.firstElementChild?t(o.body.firstElementChild):o&&o.documentElement?t(o.documentElement):i("error")},s.onerror=e=>{i(e)},s.send(null)})},t.importLink=function(e,t){return new Promise((t,i)=>{const s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="document",s.onload=e=>{if(!e)return;const i=s.response;t(i)},s.onerror=e=>{i(e)},s.send(null)})}},function(e,t,i){"use strict";(function(e){var s=this&&this.__decorate||function(e,t,i,s){var o,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.appContext=t.AppProvider=void 0;const o=i(0),n=i(4),a=i(8),r=i(30),c=i(31),l=i(32),d=i(58);Object.defineProperty(t,"appContext",{enumerable:!0,get:function(){return d.sContext}}),Object.defineProperty(t,"AppProvider",{enumerable:!0,get:function(){return d.StudentProvider}});const u=i(12);i(60),i(61);const p=i(62),h=i(66),m=i(2),f=i(67),_=i(68);let g=class extends o.Component{constructor(){super(...arguments),this.selected_clist_idx=-1,this.showGuide=!1}componentDidUpdate(e){this.props.state.viewDiv!==e.state.viewDiv&&(this.showGuide=!1),this.guide_event||(this.guide_event=document.body.addEventListener("click",e=>{e.target&&-1===e.target.className.indexOf("color_check")&&(this.showGuide=!1)},!0))}componentDidMount(){0===this.props.state.bookid&&this.props.actions.start()}render(){const{state:e,actions:t}=this.props,i=e.viewDiv;return o.createElement(o.Fragment,null,o.createElement("div",{className:"content-container"},o.createElement("div",{style:{left:("eyeon"===i?-1280:"direction"===i?0:"content"===i||"quiz"===e.prog?-2560:0)+"px"}},o.createElement("div",{className:"content-wrapper"},o.createElement(r.default,{className:"video-direction",view:"direction"===e.viewDiv&&void 0!==e.video_direction,on:e.directionON,isTeacher:!1,lesson:e.video_direction,bookId:e.bookid,subtitle:"",poster_url:"/content/mathalive_lib/MA/adaptive_learning/common/bg_direction.jpg",video_url:"/content/mathalive_lib/MA/adaptive_learning/common/mv_learning_objective.mp4",video_frame:125}),o.createElement("span",{className:"video-direction-test",style:{height:"0px",opacity:"0"}},JSON.stringify(e.video_direction))),o.createElement("div",{className:"content-wrapper"},o.createElement(c.default,{view:!0})),o.createElement("div",{className:"content-wrapper"},o.createElement(l.default,{view:"content"===i&&"quiz"===e.prog,state:e,quiz:e.quiz,actions:t,checkProg:e.checkProg,isVisiblePenTool:!1,isFirst:e.is_first_question,isLast:e.is_last_question,isPreview:!1,navi:e.detail_navi,paintRandomBg:()=>{let t=[],i=Math.floor(10*Math.random());t.push({main:"#ffe9f0",right:"#ffd7e3"}),t.push({main:"#ffeaea",right:"#ffdada"}),t.push({main:"#ffefe5",right:"#ffdcd9"}),t.push({main:"#feeedf",right:"#fddfc4"}),t.push({main:"#ffefd9",right:"#ffe2b9"}),t.push({main:"#fff7d9",right:"#ffecb9"}),t.push({main:"#fbf9db",right:"#f8f7bd"}),t.push({main:"#f1fbdc",right:"#e6f8bf"}),t.push({main:"#e4fae2",right:"#caf6c9"}),t.push({main:"#dff5f2",right:"#bdeae4"}),t.push({main:"#e2f7ff",right:"#c0ecfe"}),e.quiz&&!e.quiz.bgColor&&(e.quiz.bgColor=t[i])},checkQuizSolved:(e,i)=>t.checkQuizSolved(e,i),lastQuizSolve:()=>e.checkProg=4}),o.createElement(l.default,{view:"content"===i&&"preview"===e.prog,state:e,quiz:e.selectquiz,actions:t,checkProg:e.checkProg,isVisiblePenTool:!1,isFirst:e.is_first_question,isLast:e.is_last_question,isPreview:"preview"===e.prog,navi:e.detail_navi}),o.createElement(l.default,{view:"content"===i&&"check_quiz"===e.prog,state:e,quiz:e.checkquiz,actions:t,checkProg:e.checkProg,isVisiblePenTool:!1,isFirst:!1,isLast:e.is_last_question,isPreview:!1,navi:e.detail_navi,paintRandomBg:()=>{let t=[],i=Math.floor(10*Math.random());t.push({main:"#ffe9f0",right:"#ffd7e3"}),t.push({main:"#ffeaea",right:"#ffdada"}),t.push({main:"#ffefe5",right:"#ffdcd9"}),t.push({main:"#feeedf",right:"#fddfc4"}),t.push({main:"#ffefd9",right:"#ffe2b9"}),t.push({main:"#fff7d9",right:"#ffecb9"}),t.push({main:"#fbf9db",right:"#f8f7bd"}),t.push({main:"#f1fbdc",right:"#e6f8bf"}),t.push({main:"#e4fae2",right:"#caf6c9"}),t.push({main:"#dff5f2",right:"#bdeae4"}),t.push({main:"#e2f7ff",right:"#c0ecfe"}),e.checkquiz&&!e.checkquiz.bgColor&&(e.checkquiz.bgColor=t[i])},disableSend:!0}),o.createElement(p.default,{view:e.show_detail,can_back:4!==e.checkProg,toggleDetail:e=>t.toggleDetailPage(e),concepts:e.concepts,student_quizinfo:e.student_quizinfo,is_curri_gk:e.is_curri_gk,selected_concept_idx:e.selected_concept_idx,selected_clist_idx:e.selected_concept_idx,onSelectConcept:t.onSelectConcept,setNeedExplain:t=>{t!==e.need_explain_size&&(e.need_explain_size=t)},onSelectPreviewQuiz:t.onSelectPreviewQuiz,is_teacher:!1,need_explain_size:e.need_explain_size,is_ended:4===e.checkProg}),o.createElement(f.default,{showGuide:this.showGuide,show_detail:e.show_detail&&null!==e.student_quizinfo,setDetail:t=>e.show_detail=t,setGuide:e=>this.showGuide=e})))),o.createElement(u.Navi,Object.assign({},e.navi,{onLeftClick:t.naviLeft,onRightClick:t.naviRight})),o.createElement(h.default,{is_lock:e.is_lock,is_teacher:!1},o.createElement("div",{className:"text"},o.createElement("strong",null,"Pay Attention"),o.createElement("img",{src:"/content/mathalive_lib/MA/adaptive_learning/student/images/imgFairy.png"}))),o.createElement(_.default,{mode:"single"}))}};s([m.observable],g.prototype,"selected_clist_idx",void 0),s([m.observable],g.prototype,"showGuide",void 0),g=s([n.observer],g);const y=d.useStudent(e=>o.createElement(n.Observer,null,()=>o.createElement(g,{state:e.state,actions:e.actions,start:e.actions.start})));t.default=a.hot(e)(y)}).call(this,i(29)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,i){"use strict";var s=this&&this.__decorate||function(e,t,i,s){var o,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},o=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function a(e){try{c(s.next(e))}catch(e){n(e)}}function r(e){try{c(s.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(0),a=i(2),r=i(4),c=i(7);let l=class extends n.Component{constructor(e){super(e),this.m_on=!1,this.m_showMathKit=!1,this.bookInfo=[],this.curIndex=0,this._list=[],this._onClick=()=>{this.props.isTeacher&&this._off()},this._off=()=>o(this,void 0,void 0,(function*(){this.props.view&&this.m_on&&(this.m_on=!1,this.props.onEndStart&&this.props.onEndStart(),yield c.wait(500),this.props.view&&!this.m_on&&this.props.onEnd&&this.props.onEnd())})),this.m_on=e.view&&e.on}_on(){return o(this,void 0,void 0,(function*(){this.m_on=!0}))}componentWillReceiveProps(e){if(e.lesson&&this.props.lesson!==e.lesson||this.props.view!==e.view){for(;this.bookInfo.length>0;)this.bookInfo.pop();e.lesson&&e.lesson.childrenList&&e.lesson.childrenList.length>0&&e.lesson.childrenList.map((t,i)=>{try{if(t.book){t.book.id===e.bookId&&(this.curIndex=this.bookInfo.length);let i=t.depth_name?t.depth_name:"";i=i.replace(/\&lt;/g,"<"),i=i.replace(/\&gt;/g,">"),this.bookInfo.push({bookName:t.name?t.name:"",id:t.id,lesson:e.lesson?e.lesson.name:"",subtitle:i})}}catch(e){alert("A ee  "+JSON.stringify(e))}})}}componentDidUpdate(e){this.props.view?e.view?this.props.on&&!e.on?this._on():!this.props.on&&e.on&&this._off():this.props.on?this._on():this.m_on=!1:this.m_on=!1}render(){const{isTeacher:e,subtitle:t}=this.props,i=[];i.push(this.props.className);const s=document.querySelector(".bgm");return this.props.view?(this.m_on&&i.push("on"),s&&s.play()):(i.push("hide"),s&&(s.pause(),s.currentTime=0)),n.createElement("div",{className:i.join(" "),onClick:this._onClick},e&&this.bookInfo&&n.createElement("span",{className:"concept_name"},this.bookInfo.length>0?this.bookInfo[this.curIndex].lesson:""),n.createElement("div",{className:"progress_dot"},e&&this.bookInfo&&this.bookInfo.map((e,t)=>n.createElement("span",{key:"q_"+t,className:this.curIndex===t?"on":""}))),n.createElement("div",{className:"video"},n.createElement("video",{muted:!0,autoPlay:!0,poster:this.props.poster_url?this.props.poster_url:void 0},n.createElement("source",{src:this.props.video_url,type:"video/mp4"}),n.createElement("strong",null,"Your browser does not support the video tag."))),n.createElement("div",{className:"text"},n.createElement("div",{className:"t1"},this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].bookName:""),e&&n.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].subtitle:""}}),!e&&n.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:0===t.length&&this.bookInfo[this.curIndex]?this.bookInfo[this.curIndex].subtitle:t}})),n.createElement("audio",{className:"bgm",autoPlay:!0,src:this.props.audio_url?this.props.audio_url:void 0}))}};s([a.observable],l.prototype,"m_on",void 0),s([a.observable],l.prototype,"_list",void 0),s([a.action],l.prototype,"_off",void 0),l=s([r.observer],l),t.default=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0);class o extends s.Component{componentDidUpdate(e){}render(){return s.createElement("div",{className:"attention "+(this.props.view?"":"hide")},s.createElement("span",null,"Attention"))}}t.default=o},function(e,t,i){"use strict";var s=this&&this.__decorate||function(e,t,i,s){var o,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},o=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function a(e){try{c(s.next(e))}catch(e){n(e)}}function r(e){try{c(s.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(0),a=i(4),r=i(2),c=i(3),l=i(10),d=i(7),u=i(6),p=i(5),h=i(33),m=i(35),f=i(36),_=i(37),g=i(11),y=i(11),v=i(39),w=i(12),b=i(13);let k=class extends n.Component{constructor(e){super(e),this._prog=1,this._typeSayPop=l.IResultType.NONE,this.prevProcessNo=0,this._viewAlert=!1,this._viewNewAlertMsg="",this._viewSolution=!1,this._showLivePoint=!1,this._livePoint=0,this._result=null,this.concept_name="",this.naviState={view:!0,enableLeft:!1,enableRight:!0},this.playQuizCapture="",this.showSolution=()=>{c.App.pub_playBasicButton(),this._viewSolution=!0},this.showProblem=()=>{c.App.pub_playBasicButton(),this._viewSolution=!1},this.clickSubmitItemofQuizList=e=>{},this._onSend=e=>o(this,void 0,void 0,(function*(){const t=this.props.quiz;if(!this.props.view||!t)return;if(1!==this._prog)return;if(this.quizResult.tryCnt=1,this.quizResultPreview.tryCnt=1,t.tryCnt=1,"check_quiz"===this.props.state.prog)return this.quizResult.correct?(this._typeSayPop=l.IResultType.GREAT,c.App.pub_playToPad(),this._prog=3,t.isRight=!0,void(t.isSolved=!0)):(t.isRight=!1,this._typeSayPop=l.IResultType.SORRY,this._prog=3,c.App.pub_playToPad(),this._viewSolution=!0,t.isSolved=!0,void this.completeContent());this.props.isPreview?this.props.checkQuizSolved&&this.props.checkQuizSolved(this.quizResultPreview.correct,this.quizResultPreview.tryCnt):this.props.checkQuizSolved&&this.props.checkQuizSolved(this.quizResult.correct,this.quizResult.tryCnt);const i=i=>o(this,void 0,void 0,(function*(){if(this._prog=2,c.App.pub_playToPad(),this.props.isPreview&&i.correct)return this._typeSayPop=l.IResultType.GREAT,this._prog=3,this._viewSolution=!0,t.isSolved=!0,void this.completeContent();if(this.props.isPreview&&!i.correct)return this._typeSayPop=l.IResultType.SORRY,this._prog=3,c.App.pub_playToPad(),this._viewSolution=!0,t.isSolved=!0,void this.completeContent();let s=0;if(i.starttime&&i.endtime&&(i.endtime=(new Date).getTime(),s=Math.round((i.endtime-i.starttime)/1e3)),!t)return i.tryCnt&&(i.tryCnt-=1),void(this._viewNewAlertMsg="Error!!<br/>Please contact the administrator.");let n=window.testid;!1===c.App.isDvlp&&(n=c.App.student.id);const a=s=>{if(c.App.student&&null!==t){i.studentid=c.App.student.id;const t={seq:s.seq,u_seq:s.u_seq,dpProblemtype:s.dpProblemtype,topicDepthItemIdx:s.topicDepthItemIdx,mainSeq:s.mainSeq,dpMainSeq:s.dpMainSeq,dpIsconnected:s.dpIsconnected,dpAlOrder:s.dpAlOrder,dpTitle:s.dpTitle,dpStartSeq:s.dpStartSeq,dpGrade:s.dpGrade,dpModule:s.dpModule,dpConcept:s.dpConcept,dpTopic:s.dpTopic,dpAnswer:s.dpAnswer,dpStep:s.dpStep,dpLevel:s.dpLevel,dpTime:s.dpTime,alFailMainJson:s.alFailMainJson,isMainQuestion:s.isMainQuestion,isOverQuestion:s.isOverQuestion,alProcessNo:s.alProcessNo,startAlOrderNo:s.startAlOrderNo,dpMathtoolMtlSeq:s.dpMathtoolMtlSeq,url:s.url,thumb:this.playQuizCapture,desc:s.desc,dpScore:s.dpScore,isRight:i.correct,mapDiv:s.mapDiv,isSolved:!1,isNewLine:!(!this.tempNextData||!this.tempNextData.paramData.isNewLine)&&this.tempNextData.paramData.isNewLine,isSelfComplete:!(!this.tempNextData||!this.tempNextData.paramData.isSelfComplete)&&this.tempNextData.paramData.isSelfComplete,student_id:n,tryCnt:i?i.tryCnt:0,isLastQuestion:s.isLastQuestion,quizIdx:s.quizIdx,quizTypeIdx:s.quizTypeIdx,bgColor:s.bgColor};this.tempNextData.paramData.isNewLine&&!1===s.isNewLine&&(this.props.state.quizTypeIdx+=1);const o={question:JSON.stringify(t),id:JSON.stringify(n),msgtype:"send_result",idx:0,prevConcept:JSON.stringify(t),result:JSON.stringify(i)};u.sendTeacher(11,o),e&&e()}},r=e=>{null!==t&&null!==this._result&&(this._result.quizSeq=i.contentSeq,this._result.tryCnt=i.tryCnt,this._result.compelete=!0===i.completed,this._result.correct=!0===i.correct,a(t),d.wait(600),this._prog=3,4===this.props.state.checkProg&&(this._prog=4),this.completeContent())},h=e=>{console.log("Error",e);let t=this.props.isPreview?this.quizResultPreview:this.quizResult;t.tryCnt&&(t.tryCnt-=1),this._viewNewAlertMsg="Server Error!!<br/>Please contact the administrator."};if(this._typeSayPop=l.IResultType.NONE,!0!==this.props.disableSend){let e=new FormData;if(null!==t){""!==t.mapDiv&&e.append("mapDiv",t.mapDiv),e.append("alProcessNo",t.alProcessNo+""),""!==t.alFailMainJson&&e.append("alFailMainJson",JSON.stringify(t.alFailMainJson)),e.append("isMainQuestion",t.isMainQuestion+""),e.append("mainSeq",t.mainSeq+""),e.append("quesSeq",t.quesSeq+""),e.append("isNewLine",t.isNewLine+""),e.append("isSelfComplete",t.isSelfComplete+""),e.append("ansTf",i.correct?"1":"0"),e.append("clsIdx",this.props.state.classid+""),e.append("completeTf","1"),e.append("bkKey",this.props.state.bookid+""),e.append("depthItemIdx",this.props.state.curriculumid+""),e.append("studyCd","AL2"),e.append("duration",s+""),e.append("tryCnt",i.tryCnt+""),e.append("userAnswer",JSON.stringify(i.userChoices)),e.append("userIdx",n),e.append("startAlOrderNo",t.startAlOrderNo+""),this.props.state&&e.append("isRetake",this.props.state.isRetake+"");for(let t in this.props.state.additional_data)this.props.state.additional_data[t]&&e.append(t,this.props.state.additional_data[t]+"")}yield b.default({method:"post",url:c.App.addOnHost+"/ma/question/next",data:e}).then(e=>o(this,void 0,void 0,(function*(){if(e.data.success&&null!==e.data){this.playQuizCapture=t.thumb,this.tempNextData=e.data,r();let i=this.props.isPreview?this.quizResultPreview:this.quizResult;const s=2===this.prevProcessNo&&2===t.alProcessNo;i.correct?(t.isMainQuestion?this._typeSayPop=l.IResultType.PERFECT:!1===t.isMainQuestion?this._typeSayPop=l.IResultType.AWESOME:3===t.alProcessNo?this._typeSayPop=l.IResultType.GOODJOB:s&&(this._typeSayPop=l.IResultType.GREAT),this._livePoint+=10,console.log("10 증가함")):(t.isMainQuestion?this._typeSayPop=l.IResultType.SORRY:!1===t.isMainQuestion?this._typeSayPop=l.IResultType.KEEPTRY:(s||2===t.alProcessNo&&!0===t.isLastQuestion||2===t.alProcessNo&&!1===t.isLastQuestion)&&(this._typeSayPop=l.IResultType.QUITE),this._viewSolution=!0)}if(e.data.resultData.dpConcept!==e.data.paramData.dpConcept||e.data.resultData.isLastQuestion){let i=this.props.isPreview?this.quizResultPreview:this.quizResult;p.delay(()=>{this.props.state.concepts.map((i,s)=>{t&&i.id===e.data.paramData.dpConcept&&(this.concept_name=i.depth_name)}),this.tempNextData.resultData.dpConcept=e.data.resultData.dpConcept;let s=e=>{this._showLivePoint=!0,u.showSLivePointPop(!0),e()};c.App.isDvlp?s(()=>{this._livePoint+=50,console.log("50 증가함")}):s(()=>{this._livePoint+=50,console.log("50 증가함"),i.correct&&(this._viewSolution=!1)}),this.naviState=Object.assign(Object.assign({},this.naviState),{enableLeft:!0,enableRight:!e.data.resultData.isLastQuestion})},1500)}else{(this.props.isPreview?this.quizResultPreview:this.quizResult).correct&&(this._viewSolution=!1,this.naviState=Object.assign(Object.assign({},this.naviState),{enableLeft:!1,enableRight:!0}))}}))).catch(e=>{h(e)})}else i.correct?this._typeSayPop=l.IResultType.GOODJOB:this._typeSayPop=l.IResultType.SORRY,this.props.quiz&&(this.props.quiz.isSolved=!0);t&&(t.tryCnt=i.tryCnt,t.isRight=i.correct,t.isSolved=!0)}));this.props.isPreview?i(this.quizResultPreview):i(this.quizResult)})),this._onCompletedSayPop=()=>{this._typeSayPop=l.IResultType.NONE;let e=this.quizResult;this.props.isPreview&&(e=this.quizResultPreview)},this._onCloseNewAlertPop=()=>{this.props.view&&(2===this._prog&&4!==this.props.checkProg&&(this._prog=1),this._viewNewAlertMsg="")},this.handlePostMessage=e=>{const t=e.data;let i=Object.assign({},this.quizResult);if(this.props.isPreview&&(i=Object.assign({},this.quizResultPreview)),i&&i.userChoices&&"macontent"===t.from&&"submit"===t.type){_.answercheck(i,t.msg);let e=!0,s=!0;this.props.isPreview?(this.quizResultPreview.userChoices.map(t=>{t.completed||(e=!1),t.correct||(s=!1)}),this.quizResultPreview.completed=e,this.quizResultPreview.correct=s):(this.quizResult.userChoices.map(t=>{t.completed||(e=!1),t.correct||(s=!1)}),this.quizResult.completed=e,this.quizResult.correct=s)}},this.onPreviewIfmLoaded=e=>{if(!this.props.isPreview)return;let t=Object.assign({},this.quizResult);if(this.props.isPreview&&(t=Object.assign({},this.quizResultPreview)),t.starttime=(new Date).getTime(),t.endtime=(new Date).getTime(),this.preview_ifr)try{const e=this.preview_ifr.contentWindow;if(!this.props.quiz||!e)return;const t={bgColor:Object.assign({},this.props.quiz.bgColor)};this.sendPostPreviewMessage("changeBGStyle",t),this.initContent(),this.preview_ifr.style.opacity="1"}catch(e){console.log(e)}},this.onIfmLoaded=e=>{try{let e=Object.assign({},this.quizResult);if(this.props.isPreview&&(e=Object.assign({},this.quizResultPreview)),e.starttime=(new Date).getTime(),e.endtime=(new Date).getTime(),!this.ifr)return;const t=this.ifr.contentWindow;if(!this.props.quiz||!t)return;const i={bgColor:Object.assign({},this.props.quiz.bgColor)};this.sendPostMessage("changeBGStyle",i),this.initContent(),this.ifr.style.opacity="1"}catch(e){console.log("????????????",e)}},this.onIfmDescLoaded=e=>{if(this.ifr_desc)try{const e=this.ifr_desc.contentWindow;if(!this.props.quiz||!e)return;const t={bgColor:Object.assign({},this.props.quiz.bgColor)};this.sendPostMessageToDesc("changeBGStyle",t)}catch(e){console.log(e)}};const t=this.props.quiz;this._result=null===t?null:{quizSeq:t.u_seq,correct:!1,tryCnt:0,compelete:!1,qnumber:1,quizKind:"PM"===t.dpProblemtype?0:1,mainSeq:t.mainSeq?t.mainSeq:0}}componentDidMount(){window.addEventListener("message",this.handlePostMessage,!1)}componentWillUnmount(){window.removeEventListener("message",this.handlePostMessage,!1)}sendPostMessage(e,t){let i={from:"matemplate",to:"macontent",type:e,msg:t};i=JSON.parse(JSON.stringify(i)),this.ifr&&this.ifr.contentWindow.postMessage(i,"*")}sendPostPreviewMessage(e,t){let i={from:"matemplate",to:"macontent",type:e,msg:t};i=JSON.parse(JSON.stringify(i)),this.preview_ifr&&this.preview_ifr.contentWindow&&this.preview_ifr.contentWindow.postMessage(i,"*")}sendPostMessageToDesc(e,t){let i={from:"matemplate",to:"macontent",type:e,msg:t};i=JSON.parse(JSON.stringify(i)),this.ifr_desc&&null!==this.ifr_desc.contentWindow&&this.ifr_desc.contentWindow.postMessage(i,"*")}initContent(){let e=Object.assign({},this.quizResult);this.props.isPreview&&(e=Object.assign({},this.quizResultPreview));const t=this.props.quiz;if(null===t)return;let i=[];t.answers.map(()=>{i.push({choicedIdx:[],choicedValue:[],correct:!1,completed:!1})}),e.userChoices=i;const s=e?e.contentSeq:-1;let o={idx:0,quizmode:"ip",isTeacher:!1,content:Object.assign(Object.assign({},t),{seq:s})};this.sendPostMessage("init",o),this.sendPostPreviewMessage("init",o),3===this._prog&&4!==this.props.checkProg&&this.props.quiz&&!1===this.props.quiz.isSolved&&(this._prog=1)}initContentAll(){let e=Object.assign({},this.quizResult);this.props.isPreview&&(e=Object.assign({},this.quizResultPreview));const t=this.props.quiz;let i={idx:0,quizmode:"ip",isTeacher:!1,content:Object.assign(Object.assign({},t),{seq:e.contentSeq})};this.sendPostMessage("init",i),this.sendPostPreviewMessage("init",i)}completeContent(){let e=Object.assign({},this.quizResult);this.props.isPreview&&(e=Object.assign({},this.quizResultPreview));const t=this.props.quiz,i=e?e.contentSeq:-1;let s={idx:0,quizmode:"ip",isTeacher:!1,content:Object.assign(Object.assign({},t),{seq:i})};this.sendPostMessage("completed",s),this.sendPostPreviewMessage("completed",s)}componentWillReceiveProps(e){null!==this._result&&this.props.actions.setCorrected(this._result.correct);const t=this.props.quiz;if(null===e.quiz||void 0===e.quiz)return;let i=!1;e.quiz&&(1===e.quiz.tryCnt||e.quiz.isRight)&&(i=!0);const s=null!==t&&t.url!==e.quiz.url&&e.view,o=this.props.view!==e.view||null===t&&null!==e.quiz,n=4===this.props.checkProg&&4!==e.checkProg,a=(this.props.state.show_detail!==e.state.show_detail&&e.checkProg,this.props.isPreview!==e.isPreview&&e.isPreview),r=this.props.isPreview!==e.isPreview&&!1===e.isPreview;if(r&&"check_quiz"!==e.state.prog&&(this.props.state.checkquiz=null),s||o||a||r||n){let n=[];e.quiz.answers.map(()=>{n.push({choicedIdx:[],choicedValue:[],correct:!1,completed:!1})}),!1===e.isPreview&&(this.quizResult={studentid:"",contentSeq:e.quiz.u_seq,contentAnswers:e.quiz.answers,userChoices:n,correct:!(!e.quiz||!t||t.u_seq!==e.quiz.u_seq)&&t.isRight,tryCnt:e.quiz&&t&&t.u_seq===e.quiz.u_seq?t.tryCnt:0,completed:!1,url:e.quiz.url+"?key="+(new Date).toISOString(),desc:e.quiz.desc+"?key="+(new Date).toISOString(),starttime:(new Date).getTime(),endtime:(new Date).getTime()}),this.quizResultPreview={studentid:"",contentSeq:e.quiz.u_seq,contentAnswers:e.quiz.answers,userChoices:n,correct:!(!e.quiz||!t||t.u_seq!==e.quiz.u_seq||!1!==e.isPreview)&&t.isRight,tryCnt:e.quiz&&t&&t.u_seq===e.quiz.u_seq&&!1===e.isPreview?t.tryCnt:0,completed:!1,url:e.quiz.url+"?key="+(new Date).toISOString(),desc:e.quiz.desc+"?key="+(new Date).toISOString(),starttime:(new Date).getTime(),endtime:(new Date).getTime()},this._result={quizSeq:e.quiz.u_seq,correct:!(!e.quiz||!t||t.u_seq!==e.quiz.u_seq||!1!==this.props.isPreview)&&t.isRight,tryCnt:e.quiz&&t&&t.u_seq===e.quiz.u_seq&&!1===this.props.isPreview?t.tryCnt:0,compelete:!(!e.quiz||!t||t.u_seq!==e.quiz.u_seq||!1!==this.props.isPreview)&&t.isRight,qnumber:1,quizKind:"PM"===e.quiz.dpProblemtype?0:1,mainSeq:e.quiz.mainSeq?e.quiz.mainSeq:0},this.prevProcessNo=null!==t?t.alProcessNo:-1,a&&"check_quiz"!==e.state.prog&&this.props.actions.checkQuestion(e.isPreview,!0),s&&e.quiz&&(this._prog>=3&&1===e.checkProg&&!i&&(this._prog=1),this.naviState=Object.assign(Object.assign({},this.naviState),{enableLeft:!1,enableRight:void 0!==e.quiz.isRight||this._prog>=3})),o&&this._prog>=2&&3===e.checkProg&&!i&&(this._prog=1,this.initContent(),this.naviState={view:!0,enableLeft:!1,enableRight:!1})}if(n&&(this._prog=1,this.initContent()),1!==this._prog&&this.quizResult&&"check_quiz"===e.state.prog){this._prog=1,this.quizResult.completed=!1,this.naviState=Object.assign(Object.assign({},this.naviState),{view:!1});let i=[];return e.quiz.answers.map(()=>{i.push({choicedIdx:[],choicedValue:[],correct:!1,completed:!1})}),this.quizResultPreview={studentid:"",contentSeq:e.quiz.u_seq,contentAnswers:e.quiz.answers,userChoices:i,correct:!(!e.quiz||!t||t.u_seq!==e.quiz.u_seq||!1!==e.isPreview)&&t.isRight,tryCnt:e.quiz&&t&&t.u_seq===e.quiz.u_seq&&!1===e.isPreview?t.tryCnt:0,completed:!1,url:e.quiz.url+"?key="+(new Date).toISOString(),desc:e.quiz.desc+"?key="+(new Date).toISOString(),starttime:(new Date).getTime(),endtime:(new Date).getTime()},void this.initContent()}}componentDidUpdate(e){const t=this.props.quiz;if(("preview"===this.props.state.prog||"check_quiz"===this.props.state.prog)&&4===this.props.checkProg&&!0!==this.props.state.is_solve_end){let e=window.testid;!1===c.App.isDvlp&&(e=c.App.student.id);const t={student_id:JSON.stringify(e),msgtype:"solve_lastquiz"};u.sendTeacher(11,t),this.completeContent()}null!=t&&(!this.props.view||e.view||t.isSolved?(!this.props.view&&e.view||t.url!==(e.quiz?e.quiz.url:"")&&this.props.view&&!t.isSolved)&&(e.quiz&&t.u_seq!==e.quiz.u_seq&&4!==this.props.checkProg&&(this._prog=1),this._viewAlert=!1,this._viewNewAlertMsg="",this._viewSolution=!1,this._result={quizSeq:t.u_seq,correct:!(!e.quiz||t.u_seq!==e.quiz.u_seq||!1!==this.props.isPreview)&&e.quiz.isRight,tryCnt:e.quiz&&t.u_seq===e.quiz.u_seq&&!1===this.props.isPreview?e.quiz.tryCnt:0,compelete:!(!e.quiz||t.u_seq!==e.quiz.u_seq||!1!==this.props.isPreview)&&e.quiz.isRight,qnumber:1,quizKind:"PM"===t.dpProblemtype?0:1,mainSeq:t.mainSeq?t.mainSeq:0}):(e.quiz&&t.u_seq!==e.quiz.u_seq&&4!==this.props.checkProg&&(this._prog=1),this._viewAlert=!1,this._viewNewAlertMsg="",this._viewSolution=!1),!1===e.isPreview&&this.props.isPreview&&!t.isSolved&&4!==this.props.checkProg&&(this.onPreviewIfmLoaded(0),this._prog=1),this._viewSolution&&!1===this.naviState.enableRight&&!1===this.props.isLast&&3===this._prog&&(this.naviState=Object.assign(Object.assign({},this.naviState),{enableLeft:!1,enableRight:!0})),t.isSolved&&!1===e.state.show_detail&&!0===this.props.state.show_detail&&(this.naviState=Object.assign(Object.assign({},this.naviState),{enableLeft:!1,enableRight:!t.isLastQuestion}),this._prog=3,this.completeContent()),1!==this._prog&&!t.isSolved&&e.quiz&&t.u_seq!==e.quiz.u_seq&&4!==this.props.checkProg&&(!1!==this.props.isPreview&&"check_quiz"!==this.props.state.prog||(this.naviState=Object.assign(Object.assign({},this.naviState),{enableLeft:!1,enableRight:!1}),this._prog=1,this._viewSolution=!1,this.initContent())),3!==this._prog&&this.props.isPreview&&"check_quiz"!==this.props.state.prog&&(this._prog=3,this._viewSolution=!1),1!==e.state.quizTypeIdx&&1===this.props.state.quizTypeIdx&&(this._livePoint=0))}insertAnswerContent(){let e=Object.assign({},this.quizResult);this.props.isPreview&&(e=Object.assign({},this.quizResultPreview));const t=this.props.quiz,i=e?e.contentSeq:-1;let s={idx:0,quizmode:"ip",isTeacher:!1,content:Object.assign(Object.assign({},t),{seq:i})};this.sendPostMessage("insertanswer",s),this.sendPostPreviewMessage("insertanswer",s)}moveToNext(){if("check_quiz"!==this.props.state.prog){if(!1===this.props.isPreview){if(void 0===this.naviState||!1===this.naviState.enableRight)return;this.props.state.q_plaing_data=this.tempNextData.paramData,this.props.state.q_next_data=this.tempNextData.resultData,null!==this.props.state.q_next_data&&null!==this.props.state.q_plaing_data&&(this.props.state.q_next_data.isNewLine=this.props.state.q_plaing_data.isNewLine,this.props.actions.parseQuestion(this.props.state.q_next_data,this.props.state.q_plaing_data),this.props.paintRandomBg&&this.props.paintRandomBg(),p.delay(()=>{this.initContent()},10))}}else this.props.actions.toggleDetailPage(!0)}moveToPrev(){if(!1===this.props.isPreview){if(void 0===this.naviState||!1===this.naviState.enableLeft)return;if(null===this.props.state.q_plaing_data)return}}render(){const{view:e,state:t,actions:i}=this.props,s=this.props.quiz;return n.createElement(n.Fragment,null,(()=>this.props.isPreview||"check_quiz"===this.props.state.prog||"preview"===this.props.state.prog?n.createElement(n.Fragment,null):n.createElement(n.Fragment,null,n.createElement(g.WarningPopup,{view:!0!==this.props.state.is_solve_end&&this.props.view&&4===this.props.checkProg&&4!==this._prog,type:0,button:!1,delay:3,onComplete:()=>{let e=()=>{let e=window.testid;p.delay(()=>{!1===c.App.isDvlp&&(e=c.App.student.id);const t={student_id:JSON.stringify(e),msgtype:"solve_lastquiz"};u.sendTeacher(11,t),this.completeContent(),this.props.actions.toggleDetailPage(!0)},2500)};this._prog>1?e():(this.quizResult.correct=!1,this._onSend(()=>e()))}})))(),n.createElement("div",{className:"s_quiz "+(this._viewSolution?"desc ":"")+(this.props.isPreview?"previewmode ":""),style:{opacity:e?1:0,pointerEvents:e?"auto":"none"}},(()=>{let e=Object.assign({},this.quizResult);return this.props.isPreview&&this.quizResultPreview&&(e=Object.assign({},this.quizResultPreview)),null===s||!0!==this.props.isPreview&&void 0===e?n.createElement(n.Fragment,null):n.createElement(n.Fragment,null,n.createElement(f.default,{view:this.props.view,quizIdx:s.quizIdx,quizTypeIdx:s.quizTypeIdx,tryCnt:s.tryCnt,isRight:s.isRight,title:s.dpConcept.replace("C","Concept "),quizLevel:s.dpLevel,isteacher:!!this.props.isPreview,detailopen:e=>{i.toggleDetailPage(!0,"check_quiz"===this.props.state.prog),this.props.paintRandomBg&&this.props.paintRandomBg(),p.delay(()=>{this.initContent()},10)},isPreview:this.props.isPreview,navi:this.props.navi,checkQuestion:()=>{this.props.actions.checkQuestion&&this.props.actions.checkQuestion(!0,!1)},prog:this.props.state.prog,need_explain:(()=>null!==this.props.state.checkquiz&&(null!==this.props.state.checkquiz&&"check_quiz"!==this.props.state.prog&&1===s.quizIdx&&this.props.state.checkquiz.quizTypeIdx===s.quizTypeIdx))(),isSolved:s.isSolved}),n.createElement("div",{id:"contentWrap",className:"contentWrap"},(()=>n.createElement(n.Fragment,null,n.createElement("div",{key:"q_0",className:"wapper"},n.createElement("iframe",{src:s.url+"?mode="+this.props.state.prog,style:{display:this._viewSolution?"none":"",opacity:this.props.isPreview?"0":"1"},ref:e=>{e&&(this.ifr=e)},hidden:this.props.isPreview,onLoad:()=>{this.onIfmLoaded(0)}}),(()=>this.props.isPreview?n.createElement("iframe",{src:s.url+"?mode="+this.props.state.prog,style:{display:this._viewSolution?"none":"",opacity:this.props.isPreview?"1":"0"},ref:e=>{e&&(this.preview_ifr=e)},onLoad:()=>{this.onPreviewIfmLoaded(0)}}):n.createElement(n.Fragment,null))(),n.createElement("iframe",{src:s.desc,style:{display:this._viewSolution?"":"none"},ref:e=>{e&&(this.ifr_desc=e)},onLoad:this.onIfmDescLoaded.bind(this,0)})),n.createElement("button",{className:"btn_solution",onClick:this.showSolution,style:{display:this._prog>=3&&!this._viewSolution?"block":"none"}}),n.createElement("button",{className:"btn_problem",onClick:this.showProblem,style:{display:this._prog>=3&&this._viewSolution?"block":"none"}})))()),n.createElement("div",{className:"dim_control",style:{display:this._typeSayPop>l.IResultType.NONE?"":"none"}}),n.createElement("div",{className:"navi_left",style:{display:"none"}},n.createElement("button",null,"Prev")),n.createElement("div",{className:"navi_right",style:{display:"none"}},n.createElement("button",null,"Next")),n.createElement(y.AlertPopup,{view:""!==this._viewNewAlertMsg,msg:this._viewNewAlertMsg,onClose:this._onCloseNewAlertPop,onOk:this._onCloseNewAlertPop,isSingle:!0}),n.createElement("div",{id:"navi_container",hidden:this.props.isPreview||"check_quiz"===this.props.state.prog,className:this._typeSayPop>l.IResultType.NONE||this._prog<3?"off":""},n.createElement(w.Navi,Object.assign({},this.naviState,{enableRight:this.naviState.enableRight&&4!==this.props.checkProg,onLeftClick:()=>this.moveToPrev(),onRightClick:()=>this.moveToNext()}))),n.createElement("section",{id:"detail_btns",hidden:!1===this.props.isPreview},n.createElement("button",{id:"problum_prev",disabled:!this.props.navi.enablePrev,onClick:()=>{c.App.pub_playBasicButton(),p.delay(()=>this.props.navi.onPrev(),500)}}),n.createElement("button",{id:"problum_toggle",onClick:()=>{c.App.pub_playBasicButton(),this.props.navi.onToggle()}}),n.createElement("button",{id:"problum_next",onClick:()=>{c.App.pub_playBasicButton(),this.props.navi.enableNext&&p.delay(()=>this.props.navi.onNext(),500)}})))})()),(()=>{let t=Object.assign({},this.quizResult);return this.props.isPreview&&this.quizResultPreview&&(t=Object.assign({},this.quizResultPreview)),null===s||!1===e||!this.props.isPreview&&this._viewSolution?n.createElement(n.Fragment,null):n.createElement(n.Fragment,null,n.createElement(h.default,{isVisiblePenTool:this.props.isVisiblePenTool,view:e&&1===this._prog,type:"pad",sended:this._prog>=3,originY:0,onSend:this._onSend}))})(),n.createElement(m.default,{view:this._typeSayPop>l.IResultType.NONE,delay:1800,type:this._typeSayPop,onComplete:this._onCompletedSayPop}),n.createElement(v.default,{view:this._showLivePoint,point:this._livePoint,msg:n.createElement(n.Fragment,null,"Adaptive Learning ",n.createElement("i",null,this.concept_name),n.createElement("br",null),"has been completed."),onOkClick:()=>{this._showLivePoint=!1;let e=window.testid;if(!1===c.App.isDvlp&&(e=c.App.student.id),this.tempNextData.resultData.isLastQuestion){this._livePoint=0,this.props.actions.toggleDetailPage(!0);const t={student_id:JSON.stringify(e),msgtype:"next_concept"};u.sendTeacher(11,t);const i={student_id:JSON.stringify(e),msgtype:"solve_lastquiz"};u.sendTeacher(11,i),this._prog=4,this.props.lastQuizSolve&&this.props.lastQuizSolve(),this.naviState=Object.assign(Object.assign({},this.naviState),{enableLeft:!1,enableRight:!1})}else{const t={student_id:JSON.stringify(e),msgtype:"next_concept"};u.sendTeacher(11,t),this.moveToNext(),p.delay(()=>{this._livePoint=0},500)}}}))}};s([r.observable],k.prototype,"_prog",void 0),s([r.observable],k.prototype,"_typeSayPop",void 0),s([r.observable],k.prototype,"quizResult",void 0),s([r.observable],k.prototype,"quizResultPreview",void 0),s([r.observable],k.prototype,"prevProcessNo",void 0),s([r.observable],k.prototype,"_viewAlert",void 0),s([r.observable],k.prototype,"_viewNewAlertMsg",void 0),s([r.observable],k.prototype,"_viewSolution",void 0),s([r.observable],k.prototype,"_showLivePoint",void 0),s([r.observable],k.prototype,"_livePoint",void 0),s([r.observable],k.prototype,"_result",void 0),s([r.observable],k.prototype,"ifr",void 0),s([r.observable],k.prototype,"preview_ifr",void 0),s([r.observable],k.prototype,"ifr_desc",void 0),s([r.observable],k.prototype,"concept_name",void 0),s([r.observable],k.prototype,"naviState",void 0),k=s([a.observer],k),t.default=k},function(e,t,i){"use strict";var s=this&&this.__decorate||function(e,t,i,s){var o,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});const o=i(0),n=i(2),a=i(4),r=i(34),c=i(9);let l=class extends o.Component{constructor(e){super(e),this.m_btnH=0,this.m_max=0,this.m_sy=-1,this.m_vy=-1,this.m_time=-1,this.m_bSend=!1,this.m_state={y:0,alpha:1,tDur:0,aDur:0,isOn:!1,disabled:!1},this._ref=e=>{if(this.m_max>0||!e)return;e.setAttribute("touch-action","none");const t=window.getComputedStyle(e),i=c.nteFloat(t.height,0),s=c.nteFloat(t.bottom,0);i>0&&(this.m_btnH=i,"pad"===this.props.type?this.m_max=s-i-35:this.m_max=i+s+10,this.props.view||(this.m_state.y=this.m_max))},this._down=e=>{this.m_state.isOn||this.m_state.disabled||void 0!==this.props.disable&&this.props.disable||(this.m_state.y=this.props.originY,this.m_state.alpha=1,this.m_state.tDur=0,this.m_state.aDur=0,this.m_state.isOn=!0,this.m_vy=0,this.m_time=Date.now())},this._start=(e,t)=>{this.m_sy=t.y,this.m_bSend=!0},this._drag=(e,t)=>{if(!this.m_state.isOn||this.m_state.disabled)return;let i=t.y-this.m_sy;"teacher"===this.props.type?(t.deltaY<-1?this.m_bSend=!1:t.deltaY>=0&&(this.m_bSend=!0),i<0&&(i=0)):(t.deltaY>1?this.m_bSend=!1:t.deltaY<=0&&(this.m_bSend=!0),i>0&&(i=0)),!1===this.props.preventDrag&&(this.m_state.y=i+this.props.originY);const s=Date.now();this.m_vy=t.deltaY/(s-this.m_time),this.m_time=s},this._stop=(e,t)=>{if(this.m_state.isOn&&!this.m_state.disabled)if(this.m_bSend){let e=.5*this.m_vy*1e3,i=t.y-this.m_sy;"teacher"===this.props.type?(e<this.m_btnH?e=this.m_btnH:e>4*this.m_btnH&&(e=4*this.m_btnH),i<0&&(i=0)):(-1*e<this.m_btnH?e=-this.m_btnH:-1*e>4*this.m_btnH&&(e=-4*this.m_btnH),i>0&&(i=0)),this.m_state.tDur=.5,this.m_state.aDur=.5,this.m_state.alpha=0,this.m_state.y=i+e+this.props.originY,this.props.onSend()}else this.m_state.isOn=!1,this.m_state.tDur=.3,this.m_state.aDur=0,this.m_state.y=this.props.originY},e.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):e.view?(this.m_state.y=e.originY,this.m_state.alpha=1,this.m_state.tDur=.3,this.m_state.aDur=0,this.m_state.isOn=!1,this.m_state.disabled=!1):e.view||(this.m_state.y=e.originY,this.m_state.alpha=0,this.m_state.tDur=.3,this.m_state.aDur=.3,this.m_state.isOn=!1,this.m_state.disabled=!0)}componentWillReceiveProps(e){e.sended&&!this.props.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):e.view&&!this.props.view?(this.m_state.y=e.originY,this.m_state.alpha=1,e.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=.3):(this.m_state.tDur=.3,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1):!e.view&&this.props.view?(this.m_state.y=this.m_max,this.m_state.alpha=0,this.m_state.tDur=.3,this.m_state.aDur=.3,this.m_state.isOn=!1,this.m_state.disabled=!0):!e.view||e.sended||this.m_state.isOn||e.originY===this.props.originY||(this.m_state.y=e.originY,this.m_state.tDur=.3,this.m_state.aDur=0),!this.props.isRetry&&e.isRetry&&(this.m_state.y=e.originY,this.m_state.alpha=1,e.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=.3):(this.m_state.tDur=.3,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1)}render(){const{y:e,tDur:t,aDur:i,alpha:s,isOn:n,disabled:a}=this.m_state;let c={transform:`translateY(${e}px)`,transition:`transform ${t}s, opacity ${i/2}s ${i/2}s`,opacity:s,pointerEvents:a||!this.props.view?"none":"auto"};this.props.preventDrag&&(c={});const l=[];return"pad"===this.props.type?l.push("fel_toteacher"):l.push("fel_topad"),n&&l.push("on"),this.props.isVisiblePenTool&&this.props.isVisiblePenTool&&l.push("up"),o.createElement(r.DraggableCore,{onMouseDown:this._down,onDrag:this._drag,onStart:this._start,onStop:this._stop},o.createElement("button",{ref:this._ref,className:l.join(" ")+(this.props.className?" "+this.props.className:""),style:c},o.createElement("span",{className:"revise"+(this.props.isRevise?" on":""),style:{display:this.props.isRevise?"":"none"}})))}};s([n.observable],l.prototype,"m_state",void 0),l=s([a.observer],l),t.default=l},function(e,t){e.exports=ReactDraggable},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function a(e){try{c(s.next(e))}catch(e){n(e)}}function r(e){try{c(s.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=i(0),n=i(5),a=i(7),r=i(3),c=i(10);t.default=e=>{const[t,i]=o.useState(!1),[l,d]=o.useState("awesom");return o.useEffect(()=>{if(e.view){let t=e.delay;t||(t=800),n.delay(()=>{i(!1),s(void 0,void 0,void 0,(function*(){yield a.wait(500),e.onComplete()}))},2e3),i(!0),e.type===c.IResultType.AWESOME?(d("awesome"),n.delay(()=>{r.App.pub_playgreat()},500)):e.type===c.IResultType.GOODJOB?(d("goodjob"),n.delay(()=>{r.App.pub_playsorry()},500)):e.type===c.IResultType.GREAT?(d("great"),n.delay(()=>{r.App.pub_playgreat()},500)):e.type===c.IResultType.PERFECT?(d("perfect"),n.delay(()=>{r.App.pub_playgreat()},500)):e.type===c.IResultType.KEEPTRY?(d("keeptry"),n.delay(()=>{r.App.pub_playretry()},500)):e.type===c.IResultType.QUITE?(d("quite"),n.delay(()=>{r.App.pub_playretry()},500)):e.type===c.IResultType.RETRY?(d("retry"),n.delay(()=>{r.App.pub_playretry()},500)):e.type===c.IResultType.SORRY&&(d("sorry"),n.delay(()=>{r.App.pub_playsorry()},500))}},[e.view]),o.createElement("div",{className:"msg_rst"+(t?" open":""),style:{display:t?"":"none"}},o.createElement("div",{className:"imgtxt "+l}),o.createElement("div",{className:"twinkle"},o.createElement("span",null),o.createElement("span",null),o.createElement("span",null),o.createElement("span",null),o.createElement("span",null),o.createElement("span",null),o.createElement("span",null),o.createElement("span",null)))}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),o=i(3);t.default=e=>{const[t,i]=s.useState("none");return s.useEffect(()=>{0===e.tryCnt?i("result_NONE"):!0===e.isRight?i("result_O"):i("result_X")},[e.isRight,e.tryCnt,e.isPreview,e.need_explain]),s.createElement(s.Fragment,null,s.createElement("section",{id:"custom_head"},s.createElement("span",{id:"question_title"},e.title),s.createElement("div",{id:"question_detail"},e.isteacher||e.prog&&"check_quiz"!==e.prog?s.createElement("span",null,e.quizTypeIdx," - ",e.quizIdx,s.createElement("i",{className:"searchitem bar "+t},"Q")):s.createElement("span",null,"Check",s.createElement("i",{className:"searchitem bar "+t}))),(e.isteacher||e.isPreview)&&e.prog&&"check_quiz"===e.prog?s.createElement(s.Fragment,null):s.createElement("button",{id:"detail_open_btn",hidden:e.isteacher||e.isPreview||!(e.prog&&"check_quiz"!==e.prog),onClick:()=>{o.App.pub_playBasicButton(),e.detailopen&&e.isPreview&&e.detailopen(!1),e.detailopen&&e.detailopen(!0)}}),!1===e.need_explain?s.createElement(s.Fragment,null):s.createElement("button",{onClick:()=>e.checkQuestion?e.checkQuestion():"",id:"check_question"},"check question")),s.createElement("button",{className:"common_back "+(e.isSolved&&"check_quiz"===e.prog?"active":""),onClick:()=>{e.detailopen&&e.isPreview&&e.detailopen(!1),e.detailopen&&e.detailopen(!0)},style:{position:"absolute",zIndex:1e4}},e.isSolved),s.createElement("section",{id:"custom_star"},s.createElement("ul",null,[1,2,3,4,5].map(t=>s.createElement("li",{key:"star_"+t},s.createElement("i",{className:"star_"+(t<=e.quizLevel?"on":"off")}))))))}},function(e,t,i){"use strict";function s(e,t){const i=/[^a-zA-Z]/g,s=/[^0-9]/g;var o=e.replace(i,""),n=t.replace(i,"");if(o===n){var a=parseInt(e.replace(s,""),10),r=parseInt(t.replace(s,""),10);return a===r?0:a>r?1:-1}return o>n?1:-1}function o(e){for(var t=0,i=e.length,s=i;(s-=1)>-1;)t+=(e.charCodeAt(s)-64)*Math.pow(26,i-1-s);return t}function n(e){var t=e%26,i=e/26|0,s=t?String.fromCharCode(64+t):(i--,"Z");return i?n(i)+s:s}Object.defineProperty(t,"__esModule",{value:!0}),t.answercheck=void 0,t.answercheck=function(e,t){if(console.log("=========> answercheck result",e),console.log("=========> answercheck msg",t),!t||e.length<0)return-1;const i=e;if(!i)return-1;if(0===t.basetype&&1===t.subtype){console.log("=========> answercheck gap2",i.contentAnswers);let e=[],s=[];return i.contentAnswers.map((i,o)=>{i.basetype===t.basetype&&i.subtype===t.subtype&&(e.push(i),s.push(o))}),e.map((e,o)=>{let n=s[o];const a=i.userChoices[n];if(2===e.matchType){a.correct=!1;for(let i=0;i<e.answers.length;i++)e.answers[i]===t.choicedValue[o]&&(a.correct=!0)}else e.answers[0]===t.choicedValue[o]?a.correct=!0:a.correct=!1;a.choicedIdx=t.choicedIdx[o],a.choicedValue=t.choicedValue[o],a.completed=!0}),s.length>0?s[s.length-1]:-1}if(0===t.basetype&&2===t.subtype){console.log("=========> answercheck gap3",i.contentAnswers);let e=[],s=[];return i.contentAnswers.map((i,o)=>{i.basetype===t.basetype&&i.subtype===t.subtype&&(e.push(i),s.push(o))}),e.map((e,o)=>{let n=s[o];const a=i.userChoices[n];if(2===e.matchType){a.correct=!1;for(let i=0;i<e.answers.length;i++)JSON.stringify(e.answers[i])===JSON.stringify(t.choicedValue[o])&&(a.correct=!0)}else JSON.stringify(e.answers)===JSON.stringify(t.choicedValue[o])?a.correct=!0:a.correct=!1;a.choicedIdx=t.choicedIdx[o],a.choicedValue=t.choicedValue[o],a.completed=!0}),s.length>0?s[s.length-1]:-1}let a=i.contentAnswers.findIndex(e=>e.basetype===t.basetype&&e.subtype===t.subtype);if(a<0)return-1;console.log("=========> answercheck answer idx",a,i.contentAnswers[a]);const r=i.contentAnswers[a],c=i.userChoices[a];if(!c)return-1;if(0===t.basetype&&0===t.subtype){if(console.log("=========> answercheck gap",r),2===r.matchType){let e=t.choicedValue.join(",");console.log("=========> answercheck gap choices",e);let i=!1;for(let t=0;t<r.answers.length;t++)if(r.answers[t]===e){i=!0;break}c.correct=i}else if(1===r.matchType){if(console.log("=========> answercheck gap",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;let e=!0;for(let i=0;i<r.answers.length;i++)if(r.answers[i]!==t.choicedValue[i]){e=!1;break}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck gap",r,c)}else if(1===t.basetype&&0===t.subtype){if(2===r.matchType){const e=r.answers.findIndex(e=>e+""===t.choicedValue[0]);c.correct=!(e<0)}else 1===r.matchType&&(console.log("=========> answercheck choice",r.answers[0],t.choicedValue[0]),r.answers[0]+""===t.choicedValue[0]?c.correct=!0:c.correct=!1);c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck choice",r,c)}else if(1===t.basetype&&1===t.subtype){if(2===r.matchType){let e=t.choicedValue.sort();console.log("=========> answercheck choice/multi compare2",e,e.join());const i=r.answers.findIndex(t=>t===e.join());c.correct=!(i<0)}else if(1===r.matchType){let e=r.answers.slice().sort(),i=t.choicedValue.sort();console.log("=========> answercheck choice/multi compare",e,i),JSON.stringify(e)===JSON.stringify(i)?c.correct=!0:c.correct=!1}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck choice/multi",r,c)}else if(1===t.basetype&&2===t.subtype){if(2===r.matchType){for(let e=0;e<r.answers.length;e++){if(-1==r.answers[e].indexOf(","))return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,-1}for(let e=0;e<r.answers.length;e++){let i=r.answers[e].split(",").sort(),s=t.choicedValue.sort();if(console.log("=========> answercheck choice/group match one compare",i,s),console.log("JSON.stringify(ans),JSON.stringify(cho)",JSON.stringify(i),JSON.stringify(s)),JSON.stringify(i)===JSON.stringify(s)){c.correct=!0;break}c.correct=!1}}else if(1===r.matchType){if(-1==r.answers[0].indexOf(","))return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,-1;let e=r.answers[0].split(",").sort(),i=t.choicedValue.sort();console.log("=========> answercheck choice/group compare",e,i),console.log("JSON.stringify(ans),JSON.stringify(cho)",JSON.stringify(e),JSON.stringify(i)),JSON.stringify(e)===JSON.stringify(i)?c.correct=!0:c.correct=!1}console.log("=========> answercheck choice/group userChoice.correct",c.correct),c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck choice/group",r,c)}else if(2===t.basetype){if(2===r.matchType&&5===r.subtype){const e=t.choicedValue,i=r.answers;console.log("copy group math one choicedValue",e),console.log("copy group math one answers",i);const s=Array.from(i),o=[];s.forEach(e=>{let t=[];-1!=e.indexOf(",")?t=e.split(","):t.push(e),o.push(t)}),console.log("copy group math one arrGroupAnswers",o);let n=!1;for(let t=0;t<o.length;t++)if(console.log("copy group math one","arrGroupAnswers[i]",JSON.stringify(o[t]),"choicedValue",JSON.stringify(e)),JSON.stringify(o[t])==JSON.stringify(e)){n=!0;break}c.correct=n}else if(2===r.matchType&&4===r.subtype){const e=t.choicedValue.length,i=r.answers.length;console.log();const s=Math.round(i/e);let o=[];for(let t=0;t<s;t++){let s=e*t,n=e*(t+1);n>i&&(n=i),o.push(r.answers.slice(s,n))}console.log("===> answercheck dragdrop tmp",o);let n=!1;for(let e=0;e<o.length;e++){let i=!0;for(let s=0;s<o[e].length;s++){let n=o[e][s].split(",").sort(),a=t.choicedValue[s].split(",").sort();if(n.length!==a.length){i=!1;break}if(JSON.stringify(n)!==JSON.stringify(a)){i=!1;break}}if(i){n=!0;break}}c.correct=n}else if(2===r.matchType&&1===t.subtype){let e=!1;for(let i=0;i<r.answers.length;i++){let s=r.answers[i].split(","),o=t.choicedValue[0].split(",");if(s.length!==o.length)break;if(console.log("JSON.stringify(answerArr)",JSON.stringify(s)),console.log("JSON.stringify(choicedValue)",JSON.stringify(o)),JSON.stringify(s)===JSON.stringify(o)){e=!0;break}}c.correct=e}else if(2===r.matchType&&4!==t.subtype){let e=!1;for(let i=0;i<r.answers.length;i++){let s=r.answers[i].split(",");if(s.length!==t.choicedValue.length)break;if(console.log("===> answercheck dragdrop check",t.subtype,r.matchType,i,s,t.choicedValue),JSON.stringify(s)===JSON.stringify(t.choicedValue)){e=!0;break}}c.correct=e}else if(1===r.matchType){if(console.log("=========> answercheck dragdrop",t.subtype,r.matchType,r.answers.length,t.choicedValue.length),console.log("=========> answers.length/",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;let e=!0;for(let i=0;i<r.answers.length;i++){console.log("=========> answercheck dragdrop",t.subtype,r.matchType,i,r.answers[i],t.choicedValue[i],r.answers[i]===t.choicedValue[i]);let s=r.answers[i].split(",").sort();if(s.length>1){let o=t.choicedValue[i].split(",").sort();if(s.length!==o.length){e=!1;break}if(s.join()!==o.join()){e=!1;break}}else if(r.answers[i]!==t.choicedValue[i]){e=!1;break}}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck dragdrop",t.subtype,r.matchType,r,c)}else if(3===t.basetype&&0===t.subtype){if(3===r.matchType);else if(2===r.matchType);else if(1===r.matchType){if(console.log("=========> answercheck shade",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;let e=!0;for(let i=0;i<r.answers.length;i++){console.log("=========> answercheck shade",i,r.answers[i],t.choicedValue[i],r.answers[i]===t.choicedValue[i]);let s=r.answers[i].split(",").sort();if(s.length>1){let o=t.choicedValue[i].split(",").sort();if(s.length!==o.length){e=!1;break}if(s.join()!==o.join()){e=!1;break}}else if(r.answers[i]!==t.choicedValue[i]){e=!1;break}}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck shade",r,c)}else if(3===t.basetype&&1===t.subtype){if(3===r.matchType){let e=!0;if(0===t.choicedValue.length)e=!1;else{let i=!1;if(t.choicedValue.length>1)for(let e=1;e<t.choicedValue.length;e++)if(t.choicedValue[0]===t.choicedValue[e]){i=!0;break}if(i)e=!1;else for(let i=0;i<t.choicedValue.length;i++){let s=t.choicedValue[i].split(",");if(r.answers.length!==s.length){e=!1;break}if(r.answers.slice().sort().join(",")===t.choicedValue[i]){e=!1;break}}}c.correct=e}else if(2===r.matchType);else if(1===r.matchType){if(console.log("=========> answercheck shade",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;let e=!0;for(let i=0;i<r.answers.length;i++)if(console.log("contentanswer.answers[i]",i,r.answers[i]),console.log("msg.choicedValue[i]",i,t.choicedValue[i]),r.answers[i]!==t.choicedValue[i]){e=!1;break}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck shade",r,c)}else if(4===t.basetype&&0===t.subtype){if(2===r.matchType){let e=t.choicedValue;console.log("=========> answercheck dragadd",e,e.join());const i=r.answers.findIndex(t=>t===e.join());c.correct=!(i<0)}else if(1===r.matchType){if(console.log("=========> answercheck dragadd",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;let e=!0;for(let i=0;i<r.answers.length;i++)if(console.log("=========> answercheck dragadd",i,r.answers[i],t.choicedValue[i],r.answers[i]!==t.choicedValue[i]),r.answers[i]!==t.choicedValue[i]){e=!1;break}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck dragadd",r,c)}else if(4===t.basetype&&2===t.subtype){if(2===r.matchType){let e=t.choicedValue;console.log("=========> answercheck tally chart",e,e.join());const i=r.answers.findIndex(t=>t===e.join());c.correct=!(i<0)}else if(1===r.matchType){if(console.log("=========> answercheck tally chart",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;let e=!0;for(let i=0;i<r.answers.length;i++)if(console.log("=========> answercheck tally chart",i,r.answers[i],t.choicedValue[i],r.answers[i]!==t.choicedValue[i]),r.answers[i]!==t.choicedValue[i]){e=!1;break}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck tally chart",r,c)}else if(4===t.basetype&&3===t.subtype||0===t.basetype&&3===t.subtype){if(2===r.matchType){let e=t.choicedValue;console.log("=========> answercheck gapplus",e,e.join());const i=r.answers.findIndex(t=>t===e.join());c.correct=!(i<0)}else if(1===r.matchType){if(console.log("=========> answercheck gapplus",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;let e=!0;for(let i=0;i<r.answers.length;i++)if(console.log("=========> answercheck gapplus",i,r.answers[i],t.choicedValue[i],r.answers[i]!==t.choicedValue[i]),r.answers[i]!==t.choicedValue[i]){e=!1;break}c.correct=e}if(c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,4===t.basetype){let e=i.contentAnswers.findIndex(e=>0===e.basetype&&3===e.subtype);if(e<0)return c.completed=!1,-2;const t=i.userChoices[e];if(t&&t.completed&&t.correct&&JSON.stringify(c.choicedValue)!==JSON.stringify(t.choicedValue))return console.log("=========> final compare1 contentanswer.matchType",r.matchType),c.correct=!1,a}else{let e=i.contentAnswers.findIndex(e=>4===e.basetype&&3===e.subtype);if(e<0)return c.completed=!1,-2;const t=i.userChoices[e];if(t&&t.completed&&t.correct&&JSON.stringify(c.choicedValue)!==JSON.stringify(t.choicedValue))return console.log("=========> final compare2 contentanswer.matchType",r.matchType),c.correct=!1,a}console.log("=========> answercheck gapplus contentresult",i)}else if(5===t.basetype){if(2===r.matchType){const e=t.choicedValue.length,i=r.answers.length,s=Math.round(i/e);let o=[];console.log("===> answercheck connection len",e,i,s);for(let t=0;t<s;t++){let s=e*t,n=e*(t+1);n>i&&(n=i),o.push(r.answers.slice(s,n))}console.log("===> answercheck connection tmp",o);let n=!1;for(let e=0;e<o.length;e++){let i=!0;if(o[e].length===t.choicedValue.length){for(let s=0;s<o[e].length;s++)if(o[e][s]!==t.choicedValue[s]){i=!1;break}if(i){n=!0;break}}else i=!1}c.correct=n}else if(1===r.matchType){if(console.log("=========> answercheck connection",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;let e=!0;for(let i=0;i<r.answers.length;i++)if(console.log("=========> answercheck connection",i,r.answers[i],t.choicedValue[i],r.answers[i]!==t.choicedValue[i]),r.answers[i]!==t.choicedValue[i]){e=!1;break}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck dragadd",r,c)}else if(6===t.basetype){if(2===r.matchType){let e=!1;for(let i=0;i<r.answers.length;i++){let s=r.answers[i].split(",");if(s.length!==t.choicedValue.length)break;if(console.log("===> answercheck number line check",t.subtype,r.matchType,i,s,t.choicedValue),JSON.stringify(s)===JSON.stringify(t.choicedValue)){e=!0;break}}c.correct=e}else if(1===r.matchType){if(r.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;console.log("=========> answercheck number line",r.answers,t.choicedValue),JSON.stringify(r.answers)===JSON.stringify(t.choicedValue)?c.correct=!0:c.correct=!1}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck number line",r,c)}else if(7===t.basetype){if(2===r.matchType){let e=!1;for(let i=0;i<r.answers.length;i++){let s=r.answers[i].split(",");if(s.length!==t.choicedValue.length)break;if(console.log("===> answercheck picture graph check",t.subtype,r.matchType,i,s,t.choicedValue),JSON.stringify(s)===JSON.stringify(t.choicedValue)){e=!0;break}}c.correct=e}else if(1===r.matchType){if(r.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;console.log("=========> answercheck picture graph",r.answers,t.choicedValue),JSON.stringify(r.answers)===JSON.stringify(t.choicedValue)?c.correct=!0:c.correct=!1}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck picture graph",r,c)}else if(8===t.basetype){if(2===r.matchType){let e=!1;for(let i=0;i<r.answers.length;i++){let s=r.answers[i].split(",");if(s.length!==t.choicedValue.length)break;if(console.log("===> answercheck bar graph check",t.subtype,r.matchType,i,s,t.choicedValue),JSON.stringify(s)===JSON.stringify(t.choicedValue)){e=!0;break}}c.correct=e}else if(1===r.matchType){if(r.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;console.log("=========> answercheck bar graph",r.answers,t.choicedValue),JSON.stringify(r.answers)===JSON.stringify(t.choicedValue)?c.correct=!0:c.correct=!1}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck bar graph",r,c)}else if(9===t.basetype){if(2===r.matchType){let e=!1;for(let i=0;i<r.answers.length;i++){let s=r.answers[i].split(",");if(s.length!==t.choicedValue.length)break;if(console.log("===> answercheck line plot check",t.subtype,r.matchType,i,s,t.choicedValue),JSON.stringify(s)===JSON.stringify(t.choicedValue)){e=!0;break}}c.correct=e}else if(1===r.matchType){if(r.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;console.log("=========> answercheck line plot",r.answers,t.choicedValue),JSON.stringify(r.answers)===JSON.stringify(t.choicedValue)?c.correct=!0:c.correct=!1}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck line plot",r,c)}else if(10===t.basetype){if(2===r.matchType);else if(1===r.matchType&&0===t.subtype)console.log("=========> answercheck clock hands",Object.assign({},r.answers),t.choicedValue),console.log("arrGroupAnswers",JSON.stringify(r.answers),"/",JSON.stringify(t.choicedValue[0])),JSON.stringify(r.answers)===JSON.stringify(t.choicedValue[0])?c.correct=!0:c.correct=!1;else if(1===r.matchType&&1===t.subtype){console.log("=========> answercheck clock hands group",Object.assign({},r.answers),t.choicedValue);const e=Array.from(r.answers),i=[];e.forEach(e=>{let t=[];-1!=e.indexOf(",")?t=e.split(","):t.push(e),i.push(t)}),console.log("arrGroupAnswers",JSON.stringify(i),"/",JSON.stringify(t.choicedValue)),JSON.stringify(i)===JSON.stringify(t.choicedValue)?c.correct=!0:c.correct=!1}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck clock hands",r,c)}else if(11===t.basetype&&0===t.subtype){if(2===r.matchType);else if(1===r.matchType){if(console.log("=========> answercheck radio",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;let e=!0;for(let i=0;i<r.answers.length;i++)if(console.log("=========> answercheck radio",i,r.answers[i],t.choicedValue[i],r.answers[i]!==t.choicedValue[i]),r.answers[i]!==t.choicedValue[i]){e=!1;break}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck dragadd",r,c)}else if(12===t.basetype&&0===t.subtype){if(2===r.matchType);else if(1===r.matchType){if(console.log("=========> answercheck checkbox",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,c.correct=!1,a;let e=!0;for(let i=0;i<r.answers.length;i++)if(console.log("=========> answercheck checkbox",i,r.answers[i],t.choicedValue[i],r.answers[i]!==t.choicedValue[i]),r.answers[i]!==t.choicedValue[i]){e=!1;break}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck",r,c)}else if(13===t.basetype&&0===t.subtype){if(2===r.matchType){let e=!1;for(let i=0;i<r.answers.length;i++){let o=r.answers[i].split(",");if(o.length!==t.choicedValue.length)break;const n=o.sort(s);if(console.log("===> answercheck grid and chart check",t.subtype,r.matchType,i,o,n,t.choicedValue),JSON.stringify(n)===JSON.stringify(t.choicedValue)){e=!0;break}}c.correct=e}else if(1===r.matchType){if(console.log("=========> answercheck grid and chart",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,c.correct=!1,a;let e=!0;const i=r.answers.sort(s);console.log("=========> answercheck grid and chart sorted ans",i);for(let s=0;s<i.length;s++)if(console.log("=========> answercheck grid and chart",s,i[s],t.choicedValue[s],i[s]!==t.choicedValue[s]),i[s]!==t.choicedValue[s]){e=!1;break}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck grid and chart",r,c)}else if(13===t.basetype&&1===t.subtype){if(2===r.matchType){let e=!1;if(t.choicedValue.length<2)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,c.correct=!1,a;let i=t.choicedValue.slice(0,t.choicedValue.length-1),s=t.choicedValue.slice(t.choicedValue.length-1),l=(o(s[0].substring(0,1)),parseInt(s[0].substring(1)));for(let s=0;s<r.answers.length;s++){let d=r.answers[s].split(",");if(2!==d.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,c.correct=!1,-1;let u=d[0],p=o(u.substring(0,1)),h=parseInt(u.substring(1)),m=d[1],f=o(m.substring(0,1)),_=parseInt(m.substring(1));if(isNaN(p)||isNaN(h)||isNaN(f)||isNaN(_))return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,c.correct=!1,a;let g=[];if(p===f)for(let e=h;e<=_;e++)g.push(n(p)+e);else for(let e=p;e<=f;e++)if(e==p)for(let t=h;t<=l;t++)g.push(n(e)+t);else if(e>p&&e<f)for(let t=1;t<=l;t++)g.push(n(e)+t);else if(e==f)for(let t=1;t<=_;t++)g.push(n(e)+t);if(JSON.stringify(g)===JSON.stringify(i)){e=!0;break}}c.correct=e}else if(1===r.matchType){if(console.log("=========> answercheck grid and chart 2",r.answers.length,t.choicedValue.length),2!==r.answers.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,c.correct=!1,-1;if(t.choicedValue.length<2)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,c.correct=!1,a;let e=t.choicedValue.slice(0,t.choicedValue.length-1),i=t.choicedValue.slice(t.choicedValue.length-1),s=(o(i[0].substring(0,1)),parseInt(i[0].substring(1))),l=r.answers[0],d=o(l.substring(0,1)),u=parseInt(l.substring(1)),p=r.answers[1],h=o(p.substring(0,1)),m=parseInt(p.substring(1));if(isNaN(d)||isNaN(u)||isNaN(h)||isNaN(m))return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,c.correct=!1,a;let f=[];if(d===h)for(let e=u;e<=m;e++)f.push(n(d)+e);else for(let e=d;e<=h;e++)if(e==d)for(let t=u;t<=s;t++)f.push(n(e)+t);else if(e>d&&e<h)for(let t=1;t<=s;t++)f.push(n(e)+t);else if(e==h)for(let t=1;t<=m;t++)f.push(n(e)+t);let _=!1;JSON.stringify(f)===JSON.stringify(e)&&(_=!0),c.correct=_}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck grid and chart 2",r,c)}else if(13===t.basetype&&2===t.subtype){if(2===r.matchType){console.log("=========> answercheck grid and chart 3",r.answers,t.choicedValue[0]);const e=r.answers.findIndex(e=>e+""===t.choicedValue[0]);c.correct=!(e<0)}else if(1===r.matchType){if(console.log("=========> answercheck grid and chart 3",r.answers[0],t.choicedValue[0]),r.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;r.answers[0]+""===t.choicedValue[0]?c.correct=!0:c.correct=!1}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck grid and chart 3",r,c)}else if(14===t.basetype){console.log("=========> coordinate",r.answers,t.choicedValue);for(let e=0;e<r.answers.length;e++){let i=[],s=[],o=r.answers[e];if(0===t.subtype){if(o=o.replace(/ /gi,""),o=o.replace(/\),\(/gi,"/"),o=o.replace(/\(/gi,""),o=o.replace(/\)/gi,""),console.log("answer re",o),o.indexOf("/")){o.split("/").forEach(e=>{s.push(e)})}else s.push(o);i.push(s)}else if(1===t.subtype){if(o=o.replace(/ /gi,""),o=o.replace(/\),/gi,"/"),o.indexOf("/")){o.split("/").forEach(e=>{e=(e=e.replace(/\(/gi,"")).replace(/\)/gi,""),s.push(e)})}else o=o.replace(/\(/gi,""),o=o.replace(/\)/gi,""),s.push(o);i.push(s),o=o.replace(/\(/gi,""),o=o.replace(/\)/gi,""),console.log("answer re",o)}const n=i[0].sort(),l=t.choicedValue.sort();if(console.log("JSON.stringify(sortedAnswerXYs)",JSON.stringify(n)),console.log("JSON.stringify(sortedChoicedValue)",JSON.stringify(l)),JSON.stringify(n)==JSON.stringify(l)){if(c.correct=!0,2===r.matchType)break}else c.correct=!1;if(1===r.matchType&&0===a)break}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> coordinate",r,c)}return a}},function(e,t,i){"use strict";var s=this&&this.__decorate||function(e,t,i,s){var o,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},o=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function a(e){try{c(s.next(e))}catch(e){n(e)}}function r(e){try{c(s.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CoverPopup=void 0;const n=i(0),a=i(2),r=i(4),c=i(7);let l=class extends n.Component{constructor(){super(...arguments),this.m_state="closed",this._open=()=>o(this,void 0,void 0,(function*(){"closed"===this.m_state&&(this.m_state="opening",yield c.wait(100),this.m_state="open")})),this._close=()=>o(this,void 0,void 0,(function*(){"open"===this.m_state&&(this.m_state="closing",yield c.wait(400),this.props.onClosed(),this.m_state="closed")}))}componentDidUpdate(e){this.props.view!==e.view&&(this.props.view?this._open():this._close())}render(){return n.createElement("div",{className:this.props.className+" "+this.m_state},this.props.children)}};s([a.observable],l.prototype,"m_state",void 0),l=s([r.observer],l),t.CoverPopup=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),o=i(5),n=i(3);t.default=e=>{const[t,i]=s.useState(!1);return s.useEffect(()=>{if(e.view){let e=300;o.delay(()=>{i(!0)},e),i(!1)}},[e.view]),s.createElement("div",{className:"msg_greatjob"+(t?" open":""),style:{opacity:e.view?1:0,pointerEvents:e.view?"auto":"none"}},s.createElement("div",null,s.createElement("span",{className:"msg"},e.msg),s.createElement("button",{className:"point"},"+",e.point," Lives"),s.createElement("button",{className:"ok",onClick:()=>{n.App.pub_playBasicButton(),e.onOkClick()}})))}},function(e,t,i){"use strict";var s=this&&this.__decorate||function(e,t,i,s){var o,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.ImgBtn=t.AudioBtn=t.ToggleBtn=void 0;const o=i(0),n=i(2),a=i(4);class r extends o.Component{constructor(e){super(e),this.m_pID=-1,this._inited=this._inited.bind(this),this._onClick=this._onClick.bind(this)}_inited(e){!this.m_el&&e&&(this.m_el=e,this.props.onRef&&this.props.onRef(e),e.setAttribute("touch-action","none"),e.addEventListener("pointerdown",t=>{if(!(this.m_pID>=0)){if(this.m_pID=t.pointerId,!this.props.disableCapture)try{e.setPointerCapture(this.m_pID)}catch(e){}this.props.onMouseDown&&this.props.onMouseDown(t)}}),e.addEventListener("pointerup",t=>{if(this.m_pID===t.pointerId){try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1,this.props.onMouseUp&&this.props.onMouseUp(t)}}),e.addEventListener("pointerleave",t=>{if(this.props.disableCapture){if(this.m_pID!==t.pointerId)return;try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1}this.props.onMouseLeave&&this.props.onMouseLeave(t)}),e.addEventListener("pointercancel",t=>{if(this.m_pID===t.pointerId){try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1,this.props.onMouseLeave&&this.props.onMouseLeave(t)}}))}_onClick(e){this.props.onClick&&this.props.onClick(e),this.props.preventEvent&&(e.preventDefault(),e.stopPropagation())}componentDidUpdate(e){if((this.props.disabled&&!e.disabled||!this.props.view&&e.view)&&this.m_pID>=0){try{this.m_el&&this.m_el.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1}}}s([n.observable],r.prototype,"m_pID",void 0);let c=class extends r{constructor(e){super(e),this.m_on=!1,this.m_on=!0===e.on}componentWillReceiveProps(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}render(){const e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down");const t=e.join(" ");let i=this.props.style;return!1===this.props.view&&(i||(i={}),i.display="none"),o.createElement("button",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,disabled:!0===this.props.disabled,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:i},this.props.children)}};s([n.observable],c.prototype,"m_on",void 0),c=s([a.observer],c),t.ToggleBtn=c;let l=class extends c{constructor(e){super(e)}play(){this.m_on||(this.m_on=!0,this.props.playFnc(this.props.src,e=>{this.m_on&&(this.m_on=!1,this.props.onPause&&this.props.onPause(e))}))}_onClick(e){this.m_on?(this.props.pauseFnc(),this.m_on=!1):this.play(),super._onClick(e)}};s([n.action],l.prototype,"play",null),s([n.action],l.prototype,"_onClick",null),l=s([a.observer],l),t.AudioBtn=l;let d=class extends r{constructor(e){super(e),this.m_on=!1,this.m_on=!0===e.on}componentWillReceiveProps(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}render(){const e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down"),!0===this.props.disabled&&e.push("disable");const t=e.join(" ");let i=this.props.style;return!1===this.props.view&&(i||(i={}),i.display="none"),o.createElement("img",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:i,src:this.props.src,useMap:this.props.useMap})}};s([n.observable],d.prototype,"m_on",void 0),d=s([a.observer],d),t.ImgBtn=d},function(e,t,i){"use strict";var s=i(1),o=i(14),n=i(42),a=i(20);function r(e){var t=new n(e),i=o(n.prototype.request,t);return s.extend(i,n.prototype,t),s.extend(i,t),i}var c=r(i(17));c.Axios=n,c.create=function(e){return r(a(c.defaults,e))},c.Cancel=i(21),c.CancelToken=i(56),c.isCancel=i(16),c.all=function(e){return Promise.all(e)},c.spread=i(57),e.exports=c,e.exports.default=c},function(e,t,i){"use strict";var s=i(1),o=i(15),n=i(43),a=i(44),r=i(20);function c(e){this.defaults=e,this.interceptors={request:new n,response:new n}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=r(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],i=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)i=i.then(t.shift(),t.shift());return i},c.prototype.getUri=function(e){return e=r(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},s.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,i){return this.request(s.merge(i||{},{method:e,url:t}))}})),s.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,i,o){return this.request(s.merge(o||{},{method:e,url:t,data:i}))}})),e.exports=c},function(e,t,i){"use strict";var s=i(1);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){s.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},function(e,t,i){"use strict";var s=i(1),o=i(45),n=i(16),a=i(17);function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return r(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=s.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),s.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return r(e),t.data=o(t.data,t.headers,e.transformResponse),t}),(function(t){return n(t)||(r(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,i){"use strict";var s=i(1);e.exports=function(e,t,i){return s.forEach(i,(function(i){e=i(e,t)})),e}},function(e,t){var i,s,o=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function r(e){if(i===setTimeout)return setTimeout(e,0);if((i===n||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:n}catch(e){i=n}try{s="function"==typeof clearTimeout?clearTimeout:a}catch(e){s=a}}();var c,l=[],d=!1,u=-1;function p(){d&&c&&(d=!1,c.length?l=c.concat(l):u=-1,l.length&&h())}function h(){if(!d){var e=r(p);d=!0;for(var t=l.length;t;){for(c=l,l=[];++u<t;)c&&c[u].run();u=-1,t=l.length}c=null,d=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===a||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function f(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];l.push(new m(e,t)),1!==l.length||d||r(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=f,o.addListener=f,o.once=f,o.off=f,o.removeListener=f,o.removeAllListeners=f,o.emit=f,o.prependListener=f,o.prependOnceListener=f,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,i){"use strict";var s=i(1);e.exports=function(e,t){s.forEach(e,(function(i,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[s])}))}},function(e,t,i){"use strict";var s=i(19);e.exports=function(e,t,i){var o=i.config.validateStatus;!o||o(i.status)?e(i):t(s("Request failed with status code "+i.status,i.config,null,i.request,i))}},function(e,t,i){"use strict";e.exports=function(e,t,i,s,o){return e.config=t,i&&(e.code=i),e.request=s,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,i){"use strict";var s=i(51),o=i(52);e.exports=function(e,t){return e&&!s(t)?o(e,t):t}},function(e,t,i){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,i){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,i){"use strict";var s=i(1),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,i,n,a={};return e?(s.forEach(e.split("\n"),(function(e){if(n=e.indexOf(":"),t=s.trim(e.substr(0,n)).toLowerCase(),i=s.trim(e.substr(n+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([i]):a[t]?a[t]+", "+i:i}})),a):a}},function(e,t,i){"use strict";var s=i(1);e.exports=s.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function o(e){var s=e;return t&&(i.setAttribute("href",s),s=i.href),i.setAttribute("href",s),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=o(window.location.href),function(t){var i=s.isString(t)?o(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return!0}},function(e,t,i){"use strict";var s=i(1);e.exports=s.isStandardBrowserEnv()?{write:function(e,t,i,o,n,a){var r=[];r.push(e+"="+encodeURIComponent(t)),s.isNumber(i)&&r.push("expires="+new Date(i).toGMTString()),s.isString(o)&&r.push("path="+o),s.isString(n)&&r.push("domain="+n),!0===a&&r.push("secure"),document.cookie=r.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,i){"use strict";var s=i(21);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var i=this;e((function(e){i.reason||(i.reason=new s(e),t(i.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},function(e,t,i){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,i){"use strict";var s=this&&this.__decorate||function(e,t,i,s){var o,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a},o=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function a(e){try{c(s.next(e))}catch(e){n(e)}}function r(e){try{c(s.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.useStudent=t.StudentContext=t.StudentConsumer=t.StudentProvider=t.sContext=t.SENDPROG=void 0;const n=i(0),a=i(5),r=i(2),c=i(59),l=i(3),d=i(6),u=i(13);!function(e){e[e.MOUNT=0]="MOUNT",e[e.READY=1]="READY",e[e.SENDING=2]="SENDING",e[e.SENDED=3]="SENDED",e[e.COMPLETE=4]="COMPLETE"}(t.SENDPROG||(t.SENDPROG={}));class p extends c.StudentContextBase{constructor(){super(),this._lastTwinQuestion=0,this.uploaded=e=>{},this.notify=e=>{},this.notifyRecorded=e=>{},this.state.bookid=0,this.state.classid=0,this.state.unitid=0,this.state.prog="",this.state.concepts=[],this.state.quizs=[],this.state.student_quizinfo_details=[],this.state.selected_concept_idx=0,this.state.cmscode="",this.state.selectquiz=null,this.state.checkquiz=null,this.state.checkProg=1,this.state.directionON=!1,this.state.video_direction=void 0,this.state.q_plaing_data=null,this.state.q_next_data=null,this.state.quiz=null,this.state.prev_corrected=!0,this.state.student_quizinfo=null,this.state.is_lock=!1,this.state.show_detail=!1,this.state.is_first_question=!1,this.state.is_last_question=!1,this.state.quizIdx=0,this.state.quizTypeIdx=0,this.state.need_explain_size=0,this.state.is_curri_gk=!1,this.state.isRetake=!1,this.state.is_solve_end=!1,this.state.bgColor={main:"#ffffff",right:"#ffffff"},this.state.detail_navi={enablePrev:!1,enableNext:!1,onPrev:()=>{if(null!==this.state.selectquiz){this.checkCanPrevNextQuestionList();const e=this.state.student_quizinfo_details.findIndex(e=>null!==this.state.selectquiz&&e.u_seq===this.state.selectquiz.u_seq);e>0&&(this.state.selectquiz=this.state.student_quizinfo_details[e-1],this.hasExplaing(this.state.selectquiz.u_seq,e=>this.state.checkquiz=e),this.state.checkquiz&&this.paintRandomBg(this.state.checkquiz,null)),this.checkCanPrevNextQuestionList()}},onNext:()=>{if(null!==this.state.selectquiz){this.checkCanPrevNextQuestionList();const e=this.state.student_quizinfo_details.findIndex(e=>null!==this.state.selectquiz&&e.u_seq===this.state.selectquiz.u_seq);e>=0&&e<this.state.student_quizinfo_details.length-1&&(this.state.selectquiz=Object.assign({},this.state.student_quizinfo_details[e+1]),this.hasExplaing(this.state.selectquiz.u_seq,e=>this.state.checkquiz=e),this.state.checkquiz&&this.paintRandomBg(this.state.checkquiz,null)),this.checkCanPrevNextQuestionList()}},onToggle:()=>{this.state.prog="quiz",this.state.show_detail=!0,this.checkCanPrevNextQuestionList()}},this.actions.start=()=>{},this.actions.getLession=()=>this.state.video_direction,this.actions.parseQuestion=(e,t)=>{this.parseQuestion(e,t)},this.actions.setCorrected=e=>{this.state.prev_corrected=e},this.actions.onSelectConcept=e=>{this.state.selected_concept_idx=e},this.actions.onSelectPreviewQuiz=(e,t)=>{const i=e=>{let t=e.dpAnswer,i=[];for(let e=0;e<t.length;e++){const s=t[e];i.push({basetype:s.base?s.base:0,subtype:s.sub?s.sub:0,basetypename:s.baseName?s.baseName:"",subtypename:s.subName?s.subName:"",matchType:s.matchType?s.matchType:0,answers:s.inputList?s.inputList:[]})}e.answers=i};i(e),t.map(e=>{i(e)}),this._setViewDiv("content"),this.state.selectquiz=e,this.state.student_quizinfo_details=t,this.state.prog="preview",this.checkCanPrevNextQuestionList()},this.actions.toggleDetailPage=(e,t)=>{if(!0===e){if(!t){let e=window.testid;!1===l.App.isDvlp&&(e=l.App.student.id);const t={msgtype:"request_state",student_id:e};d.sendTeacher(11,t)}"check_quiz"===this.state.prog?this.state.prog="preview":this.state.show_detail=e}else this.state.show_detail=e},this.actions.checkQuestion=(e,t)=>{if(this.state.selectquiz){let i=null;e&&this.state.selectquiz&&(i=this.state.selectquiz.u_seq),null!==i&&this.hasExplaing(i,e=>{this.state.checkquiz=e,this.state.checkquiz&&this.paintRandomBg(this.state.checkquiz,null),this.state.show_detail=!1,!0!==t&&(this.state.prog="check_quiz")})}},this.actions.checkQuizSolved=(e,t)=>{this.state.quiz&&(this.state.quiz.isRight=e,this.state.quiz.tryCnt=t)}}_setViewDiv(e){super._setViewDiv(e),"direction"===e&&(this.state.is_lock=!1,this.state.prog="")}sendQuizGoNext(){}sendQuizGoFirst(){}parseParamQuestion(e,t){for(let i in t)t[i]&&(e[i]=t[i])}parseQuestion(e,t){if(void 0===e)return;void 0===e.dpScore&&(e.dpScore=2);"string"==typeof e.dpAnswer&&(e.dpAnswer=JSON.parse(e.dpAnswer+"")),[].push(e);const i=e.dpAnswer,s=[];for(let e=0;e<i.length;e++){const t=i[e];s.push({basetype:t.base?t.base:0,subtype:t.sub?t.sub:0,basetypename:t.baseName?t.baseName:"",subtypename:t.subName?t.subName:"",matchType:t.matchType?t.matchType:0,answers:t.inputList?t.inputList:[]})}if(e.alOrderNo&&(this.state.quizTypeIdx=e.alOrderNo),e.orderNo2&&(this.state.quizIdx=e.orderNo2),this.state.student_quizinfo_details){let t=0;for(;-1!==this.state.quizs.findIndex(e=>e.u_seq===t);)t++;e.u_seq=t}else e.u_seq=e.seq;const o={bkKey:this.state.bookid,clsIdx:this.state.classid,seq:e.seq,u_seq:e.u_seq,url:e.url+"index.html",desc:e.url+"desc.html",thumb:e.url+"thumbnail.png",answers:s,mainSeq:e.mainSeq,quesSeq:e.quesSeq,startAlOrderNo:e.startAlOrderNo,dpProblemtype:e.dpProblemtype?e.dpProblemtype:"PM",dpAnswer:e.dpAnswer?e.dpAnswer:[],dpGrade:e.dpGrade?e.dpGrade:"GK",dpStartSeq:e.dpStartSeq?e.dpStartSeq:0,dpTime:e.dpTime?e.dpTime:0,dpTopic:e.dpTopic?e.dpTopic:"none",isMainQuestion:!!e.isMainQuestion&&e.isMainQuestion,isOverQuestion:!!e.isOverQuestion&&e.isOverQuestion,dpLevel:e.dpLevel?e.dpLevel:0,dpTitle:e.dpTitle?e.dpTitle:"",alProcessNo:e.alProcessNo?e.alProcessNo:0,alFailMainJson:e.alFailMainJson?e.alFailMainJson:{},dpIsconnected:e.dpIsconnected?e.dpIsconnected:"N",topicDepthItemIdx:this.state.curriculumid,dpScore:e.dpScore,dpConcept:e.dpConcept?e.dpConcept:"C1",isRight:!1,isLastQuestion:!!e.isLastQuestion&&e.isLastQuestion,tryCnt:0,isSolved:!1,mapDiv:e.mapDiv?e.mapDiv:"",isNewLine:e.isNewLine,isSelfComplete:void 0===e.isSelfComplete||e.isSelfComplete,quizIdx:this.state.quizIdx,quizTypeIdx:this.state.quizTypeIdx};for(let e in t)"alOrderNo"!==e&&"answers"!==e&&"desc"!==e&&"thumb"!==e&&"url"!==e&&"seq"!==e&&"dpScore"!==e&&"dpLevel"!==e&&"dpConcept"!==e&&"dpGrade"!==e&&"tryCnt"!==e&&"isRight"!==e&&"isSolved"!==e&&"mainSeq"!==e&&(o[e]=t[e]);this.state.quiz=o,this.state.quizs.push(o)}checkCanPrevNextQuestionList(){if(null!==this.state.selectquiz){const e=this.state.student_quizinfo_details.findIndex(e=>null!==this.state.selectquiz&&e.u_seq===this.state.selectquiz.u_seq);e>=1&&e<=this.state.student_quizinfo_details.length-1?this.state.detail_navi.enablePrev=!0:this.state.detail_navi.enablePrev=!1,e>=0&&e<this.state.student_quizinfo_details.length-1?this.state.detail_navi.enableNext=!0:this.state.detail_navi.enableNext=!1}}hasExplaing(e,t){return o(this,void 0,void 0,(function*(){const i=this.state.student_quizinfo;let s=null,o=!1,n=[];i&&i.detail&&i.detail.concept&&i.detail.concept.map((t,i)=>{let s,a=[];t.questions.map((t,i)=>{try{let i=!1;const r=t;r.info.isNewLine&&(s=void 0,i=!0),void 0===s?s=[r]:s.push(r),i?a.push({items:[...s]}):a[a.length-1]={items:[...s]},a.map((t,i)=>{t.items.map(s=>(0!==s.hadExplain&&t.items[0].u_seq+""==e+""&&(n[0]=t.items[0],n[0].quizTypeIdx=i+1,o=!0),o))})}catch(e){console.log(e)}})}),!1!==o&&0!==n.length?yield u.default.get(l.App.addOnHost+"/ma/question/twin",{params:{mainSeq:n[0].mainSeq,seq:n[0].seq}}).then(e=>{if(e.data.success){let i=[];e.data.resultData.dpAnswer=JSON.parse(e.data.resultData.dpAnswer),s=Object.assign(Object.assign({},e.data.resultData),{tryCnt:0,isRight:!1}),this.paintRandomBg(s,null),s.quizTypeIdx=n[0].quizTypeIdx,s.url=e.data.resultData.url+"index.html",s.desc=e.data.resultData.url+"desc.html";for(let t=0;t<e.data.resultData.dpAnswer.length;t++){const e=s.dpAnswer[t];i.push({basetype:e.base?e.base:0,subtype:e.sub?e.sub:0,basetypename:e.baseName?e.baseName:"",subtypename:e.subName?e.subName:"",matchType:e.matchType?e.matchType:0,answers:e.inputList?e.inputList:[]})}s.answers=i,t(s)}else t(null)}).catch(e=>{t(null)}):t(null)}))}receive(e){if(super.receive(e),11===e.type&&e.data.type){e.data.type,e.data.res,e.data.params}if(10===e.type&&e.data){const t=e.data;if("remove_need_explain"===e.data.msgtype){e.data.is_lockoff&&(this.state.is_lock=!1);const t=e.data.id,i=e.data.u_seq.u_seq;if((l.App.isDvlp||l.App.student&&l.App.student.id+""==t+"")&&this.state.student_quizinfo&&this.state.student_quizinfo.detail){this.state.need_explain_size=0;this.state.student_quizinfo.detail.concept.map(e=>{e.questions.map(e=>{e.info.u_seq+""==i+""&&(e.hadExplain=2),1===e.hadExplain&&this.state.need_explain_size++})})}}if("response_state"===t.msgtype){console.log("response_state"),t.q_idx&&(this.state.quizIdx=t.q_idx);const e=JSON.parse(t.state);if(null!==e&&this.state.student_quizinfo!==e[0]){if(this.state.concepts=JSON.parse(t.concepts),null!==e&&e.length>0&&l.App.student&&(this.state.student_quizinfo=Object.assign({},e[0]),this.state.quiz&&this.hasExplaing(this.state.quiz.u_seq,e=>this.state.checkquiz=e),this.state.student_quizinfo&&this.state.student_quizinfo.detail)){const e=this.state.student_quizinfo.detail.concept;let t=0;e.map(e=>{e.questions.map(e=>{1===e.hadExplain&&t++})}),this.state.need_explain_size=t}}else console.log("잘못된 값을 받아왔습니다",t)}if("quiz_start"===t.msgtype){const e=t;this.state.checkProg=1,t.testid&&(window.testid=t.testid);let i=window.testid;if(t.host&&l.App.setaddOnHost(t.host),!1===l.App.isDvlp&&(i=l.App.student.id),0!==e.bookid&&0!==e.classid&&0!==e.curriculumid)if(this.state.bookid=e.bookid,this.state.classid=e.classid,this.state.curriculumid=e.curriculumid,this.state.student_quizinfo=null,void 0!==e.isRetake&&(this.state.isRetake=e.isRetake),e.concepts&&(this.state.concepts=JSON.parse(e.concepts)),this.state.checkProg=1,0===this.state.bookid||0===this.state.curriculumid||null===this.state.additional_data){let e={msgtype:"request_additional_data",id:i};d.sendTeacher(11,e)}else{let e={key:"wk_quiz",url:l.App.addOnHost+"/ma/question/first",params:{bkKey:this.state.bookid,clsIdx:this.state.classid,isRetake:this.state.isRetake,depthItemIdx:this.state.curriculumid,dpProblemtype:"PM",studyCd:"AL2",userIdx:i}};for(let t in this.state.additional_data)this.state.additional_data[t]&&(e.params[t]=this.state.additional_data[t]+"");window.app_o.al_worker.postMessage(e),this.state.is_last_question=!1,this.state.is_first_question=!0,this.state.quizIdx=0,this.state.quizTypeIdx=0,this.state.need_explain_size=0,this.state.checkquiz=null,this.state.quizs=[],this._setViewDiv("content"),this.state.prog="quiz"}else{let e={msgtype:"request_additional_data",id:i};d.sendTeacher(11,e)}}else if("quiz_end"===t.msgtype)this.state.checkProg=4,this.state.is_last_question=!0;else if("solve_lastquiz"===t.msgtype){const t=e.data.id;(l.App.isDvlp||l.App.student&&l.App.student.id+""==t+"")&&(this.state.checkProg=4,this.state.is_solve_end=!0,"check_quiz"===this.state.prog?this.state.detail_navi.onToggle():this.actions.toggleDetailPage(!0))}else if("page_lock"===t.msgtype)this.state.is_lock=!0;else if("page_unlock"===t.msgtype)this.state.is_lock=!1;else if("quiz_restart"===t.msgtype){this._setViewDiv("eyeon"),this.state.prog="mainlist",this.state.student_quizinfo=null,this.state.quiz=null,this.state.is_lock=!1,t.testid&&(window.testid=t.testid),t.host&&l.App.setaddOnHost(t.host),console.log("host :::: "+t.host);let e=window.testid;if(!1===l.App.isDvlp&&(e=l.App.student.id),0===this.state.bookid||0===this.state.curriculumid||null===this.state.additional_data){let t={msgtype:"request_additional_data",id:e};d.sendTeacher(11,t)}else{!1===l.App.isDvlp&&(e=l.App.student.id);let t={key:"wk_quiz",url:l.App.addOnHost+"/ma/question/first",params:{bkKey:this.state.bookid,clsIdx:this.state.classid,isRetake:this.state.isRetake,depthItemIdx:this.state.curriculumid,dpProblemtype:"PM",studyCd:"AL2",userIdx:e}};for(let e in this.state.additional_data)this.state.additional_data[e]&&(t.params[e]=this.state.additional_data[e]+"");window.app_o.al_worker.postMessage(t)}}if("set_ad_curriculum"===t.msgtype&&"undefined"!==t.data)try{const e=t;t.testid&&(window.testid=t.testid),t.host&&l.App.setaddOnHost(t.host),console.log("host :::: "+t.host),e.bookid&&(this.state.bookid=JSON.parse(e.bookid+"")),e.curriculumid&&(this.state.curriculumid=JSON.parse(e.curriculumid+"")),e.data&&(this._ad_curriculum=JSON.parse(e.data+"")),e.classid&&(this.state.classid=JSON.parse(e.classid+"")),this.state.video_direction=this._ad_curriculum,void 0!==e.isRetake&&(this.state.isRetake=e.isRetake),e.concepts&&(this.state.concepts=JSON.parse(e.concepts+"")),t.additional_data&&(this.state.additional_data=JSON.parse(t.additional_data)),this._ad_curriculum.childrenList.length>0&&void 0!==e.is_curri_gk&&(this.state.is_curri_gk=JSON.parse(e.is_curri_gk+""))}catch(e){console.log("커리큘럼 세팅 에러",e)}if("set_ad_curriculum_immediately"===t.msgtype){const e=t;t.testid&&(window.testid=t.testid),t.host&&l.App.setaddOnHost(t.host),console.log("host :::: "+t.host);let i=window.testid,s=0===this.state.bookid||0===this.state.curriculumid||null===this.state.additional_data;if(e.bookid&&(this.state.bookid=JSON.parse(e.bookid+"")),e.curriculumid&&(this.state.curriculumid=JSON.parse(e.curriculumid+"")),e.data&&(this._ad_curriculum=JSON.parse(e.data+"")),e.classid&&(this.state.classid=JSON.parse(e.classid+"")),void 0!==e.isRetake&&(this.state.isRetake=e.isRetake),e.concepts&&(this.state.concepts=JSON.parse(e.concepts+"")),t.additional_data&&(this.state.additional_data=JSON.parse(t.additional_data)),this._ad_curriculum.childrenList.length>0&&void 0!==e.is_curri_gk&&(this.state.is_curri_gk=JSON.parse(e.is_curri_gk+"")),this.state.video_direction=this._ad_curriculum,this.state.is_lock=!1,!1===l.App.isDvlp&&(i=l.App.student.id),s){let e={msgtype:"request_additional_data",id:i};d.sendTeacher(11,e)}else if(this.state.checkProg=1,!s){let e={key:"wk_quiz",url:l.App.addOnHost+"/ma/question/first",params:{bkKey:this.state.bookid,clsIdx:this.state.classid,isRetake:this.state.isRetake,depthItemIdx:this.state.curriculumid,dpProblemtype:"PM",studyCd:"AL2",userIdx:i}};for(let t in this.state.additional_data)this.state.additional_data[t]&&(e.params[t]=this.state.additional_data[t]+"");window.app_o.al_worker.postMessage(e),this.state.is_last_question=!1,this.state.is_first_question=!0,this.state.quizIdx=0,this.state.quizTypeIdx=0,this.state.need_explain_size=0,this.state.checkquiz=null,this.state.quizs=[],this._setViewDiv("content"),this.state.prog="quiz"}}"sq_quiz"===t.msgtype&&("content"!==this.state.viewDiv&&this._setViewDiv("content"),this.state.is_solve_end=!1,a.delay(()=>{this.state.prog="quiz";const e=JSON.parse(t.res).resultData,i=JSON.parse(t.res).paramData;this.paintRandomBg(e,i),this.state.q_plaing_data=e,null!==this.state.q_plaing_data&&this.parseQuestion(this.state.q_plaing_data,i),this.state.checkProg=1},100))}return!1}paintRandomBg(e,t){let i=[],s=Math.floor(10*Math.random()),o=Math.floor(10*Math.random());i.push({main:"#ffe9f0",right:"#ffd7e3"}),i.push({main:"#ffeaea",right:"#ffdada"}),i.push({main:"#ffefe5",right:"#ffdcd9"}),i.push({main:"#feeedf",right:"#fddfc4"}),i.push({main:"#ffefd9",right:"#ffe2b9"}),i.push({main:"#fff7d9",right:"#ffecb9"}),i.push({main:"#fbf9db",right:"#f8f7bd"}),i.push({main:"#f1fbdc",right:"#e6f8bf"}),i.push({main:"#e4fae2",right:"#caf6c9"}),i.push({main:"#dff5f2",right:"#bdeae4"}),i.push({main:"#e2f7ff",right:"#c0ecfe"}),e&&(e.bgColor=i[s]),t&&(t.bgColor=i[o])}setData(e){}}s([r.observable],p.prototype,"state",void 0),s([r.action],p.prototype,"_setViewDiv",null),s([r.action],p.prototype,"receive",null),s([r.action],p.prototype,"notify",void 0),s([r.action],p.prototype,"notifyRecorded",void 0),t.StudentContext=p;const h=new p;t.sContext=h;const{Provider:m,Consumer:f}=n.createContext(h);t.StudentConsumer=f;class _ extends n.Component{render(){return n.createElement(m,{value:h},this.props.children)}}t.StudentProvider=_,t.useStudent=function(e){return function(t){return n.createElement(f,null,t=>n.createElement(e,Object.assign({},t)))}}},function(e,t,i){"use strict";var s=this&&this.__decorate||function(e,t,i,s){var o,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.StudentContextBase=void 0;const o=i(2),n=i(3),a=i(6);class r{constructor(){this._naviLeftFnc=null,this._naviRightFnc=null,this.state={viewDiv:"direction",directionON:!1,navi:{view:!1,enableLeft:!1,enableRight:!1},loading:!1,bookid:0,bookkey:0,curriculumid:0,classid:0,unitid:0,lessonid:0,svg_bg:{view:!0,bPlay:!1,viewCharactor:!0},is_lock:!1,isRemote:!1},this.actions={setNaviView:e=>{this.state.navi.view=e},setNavi:(e,t)=>{this.state.navi.enableLeft=e,this.state.navi.enableRight=t},setNaviFnc:(e,t)=>{this._naviLeftFnc=e,this._naviRightFnc=t},naviLeft:()=>{n.App.pub_playBtnPage(),this._naviLeftFnc&&this._naviLeftFnc()},naviRight:()=>{n.App.pub_playBtnPage(),this._naviRightFnc&&this._naviRightFnc()},setLoading:e=>{a.showSLoading(e)}},this.uploaded=e=>{},this.notify=e=>{},this.notifyRecorded=e=>{},this.notifyVideoRecord=e=>{},this.notifySwitchCamera=()=>{},this.notifyTakePicture=(e,t)=>{},this.notifyBookCaptureInfo=e=>{},this.clickSendButton=()=>{},this.notifyRecordData=(e,t)=>{},this.notifyAlert=e=>{},this.state.isRemote=document.location.href.indexOf("remote=y")>=0}_setViewDiv(e,t){this.state.viewDiv!==e&&(a.postViewDiv(e),"direction"===e?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0):(this.state.directionON=!1,this.state.svg_bg.bPlay=!1,this.state.svg_bg.viewCharactor=!1),this.state.loading=!1,this.state.viewDiv=e)}start(){}receive(e){switch(e.type){case 1:"direction"===this.state.viewDiv?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0):this._setViewDiv("direction"),a.sendTeacher(1,{id:n.App.student?n.App.student.id:"",name:n.App.student?n.App.student.name:""});break;case 3:this.state.directionON=!1,a.sendTeacher(3,{id:n.App.student?n.App.student.id:"",name:n.App.student?n.App.student.name:""});break;case 0:this._setViewDiv("eyeon"),a.sendTeacher(0,{id:n.App.student?n.App.student.id:"",name:n.App.student?n.App.student.name:""});break;case 10:"page_lock"===e.data.msgtype?this.state.is_lock=!0:"page_unlock"===e.data.msgtype&&(this.state.is_lock=!1)}}multiUploaded(e){}notifyNaviInfo(e,t,i,s,o,n){}notifyPenToolState(e,t){}notifyLiveGivePopupClose(){}notifyHamburgerMenuClicked(e){}callThreeminState(){}}s([o.observable],r.prototype,"state",void 0),s([o.action],r.prototype,"_setViewDiv",null),s([o.action],r.prototype,"start",null),s([o.action],r.prototype,"receive",null),t.StudentContextBase=r},function(e,t,i){"use strict";i.r(t)},function(e,t,i){"use strict";i.r(t)},function(e,t,i){"use strict";var s=this&&this.__decorate||function(e,t,i,s){var o,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(n<3?o(a):n>3?o(t,i,a):o(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a};Object.defineProperty(t,"__esModule",{value:!0});const o=i(0),n=i(4),a=i(2),r=i(63),c=i(3),l=e=>{const[t,i]=o.useState(0),[s,n]=o.useState("lv00"),[a,r]=o.useState("none");o.useEffect(()=>{var s;const o=("none"!==a&&a!==e.user||e.lastconcept>e.c_idx)&&null!==e.student_quizinfo,c=!1===e.isTeacher||(null===(s=e.student_quizinfo)||void 0===s?void 0:s.isEnded);if((o||c)&&e.student_quizinfo){let t=e.c_idx,i=e.student_quizinfo.summery.concepts;r(a),void 0===i[t]?n("none"):(0===i[t].percent&&n("lv00"),0<i[t].percent&&n("lv01"),30<i[t].percent&&n("lv02"),50<i[t].percent&&n("lv03"),80<=i[t].percent&&n("lv04"))}return e.selected_concept_idx!==t&&i(e.selected_concept_idx),()=>{}},[e.lastconcept,e.user,e.c_idx,e.student_quizinfo,e.selected_concept_idx]);return o.useCallback(()=>o.createElement("button",{"data-last":e.lastconcept,className:s+" "+e.cn,onClick:()=>{c.App.pub_playBasicButton(),e.onSelectConcept(e.c_idx),e.onClick()}},e.concept_id),[e.selected_concept_idx,e.user,e.lastconcept,s])()};let d=class extends o.Component{constructor(e){super(e),this.detail=null,this.selectedConceptBox=0,this.selected_playConcept=-1}componentDidUpdate(e){var t,i;null===this.props.student_quizinfo||null===this.props.student_quizinfo.detail?this.detail=null:this.props.student_quizinfo!==e.student_quizinfo?(this.detail=this.props.student_quizinfo.detail,this.selected_playConcept=this.props.selected_concept_idx,-1!==this.props.selected_concept_idx&&this.props.concepts[this.props.selected_concept_idx]&&this.scrollToPresentConcept(this.props.concepts[this.props.selected_concept_idx].id,0)):this.props.view&&this.props.view!==e.view?(this.selected_playConcept=this.props.selected_concept_idx,-1!==this.props.selected_concept_idx&&this.props.concepts[this.props.selected_concept_idx]&&this.scrollToPresentConcept(this.props.concepts[this.props.selected_concept_idx].id,0)):this.props.view||this.props.view===e.view||(this.selected_playConcept=this.props.selected_concept_idx),this.props.selected_concept_idx===e.selected_concept_idx&&(null===(t=this.props.student_quizinfo)||void 0===t?void 0:t.id)===(null===(i=e.student_quizinfo)||void 0===i?void 0:i.id)||-1===this.props.selected_concept_idx&&(this.selectedConceptBox=0)}componentWillReceiveProps(e){this.props.view!==e.view&&-1===e.selected_concept_idx&&(this.props.onSelectConcept(0),this.selectedConceptBox=0),this.props.student_quizinfo!==e.student_quizinfo&&null!==e.student_quizinfo&&e.student_quizinfo.detail&&(this.detail=e.student_quizinfo.detail)}scrollToPresentConcept(e,t){const i=document.querySelectorAll(".concept_box_titles"),s=document.querySelector("#conncept_box_scroll");null!==i&&null!==s&&i.forEach(i=>{let o=i,n=i,a=0;if(o&&o.getAttribute("id")===e+"_title"&&n.nextElementSibling){let e=1;const i=n.nextElementSibling.querySelector('.graph li[data-idx="'+(t+1)+'"]');null!==i&&(o=i);let r=setInterval(()=>{e=n.offsetTop-n.parentElement.offsetTop+100*t,t>0&&(e+=n.offsetHeight),a++,(e>1||a>3)&&(s.scrollTo({top:e}),clearInterval(r))},100)}})}render(){const{view:e}=this.props,t={position:"absolute",zIndex:1e4,top:"80px",display:this.props.is_ended?"none":"block"};return o.createElement("div",{className:"learning_objects",style:!0===e&&null!==this.props.student_quizinfo?{opacity:"1",pointerEvents:"auto"}:{opacity:"0",pointerEvents:"none"}},(()=>this.props.is_ended||!1===this.props.can_back?o.createElement(o.Fragment,null):o.createElement("button",{className:"common_back active",onClick:()=>{c.App.pub_playBasicButton(),this.props.toggleDetail(!1)},style:t}))(),(()=>null===this.props.student_quizinfo?o.createElement(o.Fragment,null):o.createElement("div",{className:"learningContent"},o.createElement(r.default,{thumbnail:this.props.student_quizinfo.thumb,avatar:this.props.student_quizinfo.avatar,nickname:this.props.student_quizinfo.nickname,name:this.props.student_quizinfo.name,id:this.props.student_quizinfo.id,displayMode:this.props.student_quizinfo.displayMode,grade:this.props.student_quizinfo.grade,is_curri_gk:this.props.is_curri_gk,score:this.props.student_quizinfo.score,needExplain:this.props.need_explain_stu?this.props.need_explain_stu:this.props.need_explain_size,gender:this.props.student_quizinfo.gender}),(()=>!1===e||null===this.props.student_quizinfo?o.createElement(o.Fragment,null):o.createElement("div",{id:"contentWrap",className:"contentWrap"},o.createElement("div",{className:"al_status_detail"},o.createElement("div",{className:"concept_graph"},o.createElement("div",{className:"contentBox"},o.createElement("div",{className:"inner"},o.createElement("div",{className:"anchor"},this.props.concepts.map((e,t)=>o.createElement("div",{key:"detail_concept "+t,"data-last":this.props.student_quizinfo?this.props.student_quizinfo.nowPlayconcept:-1},o.createElement(l,{c_idx:t,cn:this.props.selected_concept_idx===t||-1===this.props.selected_concept_idx&&0===t?"on":"off",concept_id:e.id,detail:this.detail,student_quizinfo:this.props.student_quizinfo,selected_concept_idx:this.props.selected_concept_idx,isTeacher:this.props.is_teacher,onSelectConcept:this.props.onSelectConcept,lastconcept:this.props.student_quizinfo?this.props.student_quizinfo.nowPlayconcept:-1,onClick:()=>{this.selectedConceptBox=0,this.scrollToPresentConcept(e.id,0)},user:this.props.student_quizinfo?this.props.student_quizinfo.id:0})))),o.createElement("div",{id:"conncept_box_scroll",ref:e=>{if(null===e)return;let t=-1;e.removeEventListener("scroll",()=>{}),e.addEventListener("scroll",i=>{if(this.props.view){let i,s,o=e.scrollHeight*(e.scrollTop/(e.scrollHeight-e.clientHeight))+90,n=e.querySelectorAll("[data-box]");for(let a=0;a<n.length;a++)i=n[a],i.parentElement&&e.parentElement&&(s=i.offsetTop-e.offsetTop,o>s&&(t=a),0===o&&(t=0));this.props.selected_concept_idx!==t&&-1!==t&&null!==this.detail&&null!==this.detail.concept[t]&&this.detail.concept[t].questions.length>0&&this.props.onSelectConcept(t)}})}},this.props.concepts.map((e,t)=>o.createElement(o.Fragment,{key:"concept_box"+t},o.createElement("div",{key:"concept_title"+t,className:"concept_box_titles title","data-box":"concept_box",onClick:()=>this.props.onSelectConcept(t),id:e.id+"_title"},e.depth_name,o.createElement("div",{className:"result"},o.createElement("div",{className:"correct"},(e=>{if(null!==this.detail&&this.detail.concept.length>t){let t=[],i=-1,s=0,o=0;return this.detail.concept[e].questions.map(e=>{e.info.isNewLine&&(i++,s++,t.push({checked:!1})),t[i]&&e.hadExplain>0&&!0!==t[i].checked&&(o++,t[i].checked=!0)}),s-o}return 0})(t)),o.createElement("div",{className:"help"},((e,i)=>{if(null!==this.detail&&this.detail.concept.length>t){if(!0===i){let t;return this.detail.concept[e].questions.map(e=>{t=0===e.hadExplain?o.createElement("span",{className:"correct"}):o.createElement("span",{className:"help"})}),t}{let t=[],i=-1,s=0;return this.detail.concept[e].questions.map(e=>{e.info.isNewLine&&(i++,t.push({checked:!1})),t[i]&&1===e.hadExplain&&!0!==t[i].checked&&(s++,t[i].checked=!0)}),s}}return!0===i?o.createElement("span",{className:"help"}):0})(t)))),o.createElement("div",{className:"graph check.."},o.createElement("ul",null,(()=>{if(null===this.detail)return o.createElement(o.Fragment,null);{let e;return this.detail.concept.map((i,s)=>{if(t===s&&i.questions){let n;e=[];let a=null,r="top";i.questions.map((l,d)=>{try{let u=!0;const p=l,h=d>0?i.questions[d-1]:p;!1===p.info.isNewLine?u=!1:(n=void 0,u=!0);const m=e=>((void 0===n?0:n.length)<2?r="top_temp":!0===p.info.isMainQuestion&&("top"===r&&!1===h.info.isRight?r="middle":"top"===r&&!1===h.info.isRight?r="top":"top_temp"===r&&!1===h.info.isRight?r="middle":"top_temp"===r&&!0===h.info.isRight?r="top":"middle"===r&&!1===h.info.isRight?r="bottom":"middle"===r&&!0===h.info.isRight?r="top":"bottom"===r&&!0===h.info.isRight?r="middle":"bottom"===r&&!1===h.info.isRight?r="under_bottom":"under_bottom"===r&&!0===h.info.isRight?r="bottom":"under_bottom"===r&&!1===h.info.isRight&&(r="under_bottom")),r),f=()=>p.info.isRight?"type01":"type02",_=()=>{let e=o.createElement(o.Fragment,null),t=a;return null===t||(e=0===t.hadExplain?o.createElement("span",{className:"correct"}):1===t.hadExplain?o.createElement("button",{className:"help","data-teacher":this.props.is_teacher?"teacher":"student",onClick:e=>{null!==t&&(this.props.removeNeedExplain&&this.props.student_quizinfo&&(t.hadExplain=2,this.props.removeNeedExplain(this.props.student_quizinfo.id,t.info.u_seq,!1)),c.App.pub_playBasicButton(),e.preventDefault())}}):o.createElement("span",{className:"help_check"})),e};if(void 0===n){a=p;let e=m(0);n=[{html:o.createElement("div",{key:"d_line"+s+d,className:e+" "+f(),"data-score":p.info.dpScore,"data-hasneed":p.hadExplain},c.App.isDvlp?o.createElement("span",{className:"score"},l.info.isMainQuestion?l.info.seq+" / "+l.info.dpScore:l.info.seq+" / "+l.info.dpScore/2):"",o.createElement("span",null,"Q1")),u_seq:p.info.u_seq,seq:p.info.seq,isover:p.info.isOverQuestion,q_idx:p.info.quizIdx,is_depth4:"under_bottom"===e}]}else{a=p;let e="Q"+l.info.quizIdx,t=n.findIndex(e=>e.seq+""==l.info.seq+"");-1!==t&&(e="Q"+n[t].q_idx);let i=m(n.length);n.push({html:o.createElement("div",{key:"d_line"+s+d,className:i+" "+f(),"data-hasneed":p.hadExplain},c.App.isDvlp?o.createElement("span",{className:"score"},l.info.isMainQuestion?l.info.dpScore:l.info.dpScore/2):"",o.createElement("span",null,e)),u_seq:p.info.u_seq,seq:p.info.seq,isover:p.info.isOverQuestion,q_idx:p.info.quizIdx,is_depth4:"under_bottom"===i})}if(u){let i=e.length;e.push(o.createElement("li",{className:(this.props.selected_concept_idx===t&&this.selectedConceptBox===i?"on ":"")+(-1!==[...n].findIndex(e=>e.is_depth4)?"long":""),onClick:()=>{this.selectedConceptBox=i,this.props.onSelectConcept(t)},key:"details_li_none"+(new Date).getMilliseconds().toString()+i,"data-idx":i},o.createElement("div",{className:"num_now"},o.createElement("div",{className:"num"},i+1),o.createElement("div",{className:"now"},_())),o.createElement("div",{className:"content"},o.createElement("div",{className:"scroll"},[...n].map(e=>e.html)),(()=>{let e=!1;return[...n].map((t,i)=>{t.isover&&(e=!0)}),e?o.createElement("span",{className:"over",key:"scroll_o_item"+(new Date).getMilliseconds().toString()+i+"_over"},o.createElement("i",null,"+"),"α"):o.createElement(o.Fragment,{key:"scroll_f_item"+(new Date).getMilliseconds().toString()+i+"_over"})})())))}else{let i=e.length-1;e[e.length-1]=o.createElement("li",{className:(this.props.selected_concept_idx===t&&this.selectedConceptBox===i?"on ":"")+(-1!==[...n].findIndex(e=>e.is_depth4)?"long":""),onClick:()=>{this.selectedConceptBox=i,this.props.onSelectConcept(t)},key:"details_li_has"+(new Date).getMilliseconds().toString()+i,"data-idx":i},o.createElement("div",{className:"num_now"},o.createElement("div",{className:"num"},i+1),o.createElement("div",{className:"now"},_())),o.createElement("div",{className:"content"},o.createElement("div",{className:"scroll"},[...n].map(e=>e.html)),(()=>{let e=!1;return[...n].map((t,i)=>{t.isover&&(e=!0)}),e?o.createElement("span",{className:"over",key:"scroll_o_item"+(new Date).getMilliseconds().toString()+i+"_over"},o.createElement("i",null,"+"),"α"):o.createElement(o.Fragment,{key:"scroll_f_item"+(new Date).getMilliseconds().toString()+i+"_over"})})()))}}catch(e){console.log(e)}})}}),void 0===e?o.createElement(o.Fragment,null):e.map(e=>e)}})())))))))),o.createElement("div",{className:"thumbnail_list"},(()=>this.props.concepts.map((e,t)=>o.createElement("div",{key:"concept_img_box"+t},(()=>{if(null===this.detail)return o.createElement(o.Fragment,null);{let e;return this.detail.concept.map((i,s)=>{if(t===s&&i.questions){let s;e=[];i.questions.map((n,a)=>{let r=!1;const c=n;a>0&&i.questions[a-1];if(c.info.isNewLine&&(s=void 0,r=!0),void 0===s)s=[{html:o.createElement("li",{key:"q_detail"+a+t,onClick:()=>this.props.onSelectPreviewQuiz(n.info,(()=>{let e=[];return null===this.detail||this.detail.concept.map(t=>{t.questions.map(t=>e.push(t.info))}),e})(),!0)},o.createElement("div",{className:"header"},o.createElement("span",{className:"p"},"Q1"),0===n.isSolved?o.createElement(o.Fragment,null,o.createElement("span",{className:"ico o"})):o.createElement(o.Fragment,null),1===n.isSolved?o.createElement(o.Fragment,null,o.createElement("span",{className:"ico x"})):o.createElement(o.Fragment,null),2===n.isSolved?o.createElement(o.Fragment,null,o.createElement("span",{className:"ico x"}),o.createElement("span",{className:"ico n"}),o.createElement("span",{className:"ico o"})):o.createElement(o.Fragment,null)),o.createElement("div",{className:"thumbnail",style:{background:n.info.bgColor?n.info.bgColor.main:""}},o.createElement("img",{src:n.thumb}),o.createElement("section",{id:"custom_star"},o.createElement("ul",null,[1,2,3,4,5].map(e=>o.createElement("li",{key:"star_"+e},o.createElement("i",{className:"star_"+(e<=n.info.dpLevel?"on":"off")}))))))),u_seq:n.info.u_seq,seq:n.info.seq,q_idx:n.info.quizIdx}];else{let e="Q"+n.info.quizIdx,r=s.findIndex(e=>e.seq+""==n.info.seq+"");-1!==r&&(e="Q"+s[r].q_idx),s.push({html:o.createElement("li",{key:"q_detail"+a+t,onClick:()=>this.props.onSelectPreviewQuiz(n.info,i.questions.map(e=>e.info),!0)},o.createElement("div",{className:"header"},o.createElement("span",{className:"p"},e),0===n.isSolved?o.createElement(o.Fragment,null,o.createElement("span",{className:"ico o"})):o.createElement(o.Fragment,null),1===n.isSolved?o.createElement(o.Fragment,null,o.createElement("span",{className:"ico x"})):o.createElement(o.Fragment,null),2===n.isSolved?o.createElement(o.Fragment,null,o.createElement("span",{className:"ico x"}),o.createElement("span",{className:"ico n"}),o.createElement("span",{className:"ico o"})):o.createElement(o.Fragment,null)),o.createElement("div",{className:"thumbnail",style:{background:n.info.bgColor?n.info.bgColor.main:""}},o.createElement("img",{src:n.thumb}),o.createElement("section",{id:"custom_star"},o.createElement("ul",null,[1,2,3,4,5].map(e=>o.createElement("li",{key:"star_"+e},o.createElement("i",{className:"star_"+(e<=n.info.dpLevel?"on":"off")}))))))),u_seq:n.info.u_seq,seq:n.info.seq,q_idx:n.info.quizIdx})}if(r){let i=e.length;e.push(o.createElement("ul",{"data-hidden":this.props.selected_concept_idx!==t||this.selectedConceptBox!==i,"data-checkidx":i},[...s].map(e=>e.html)))}else{let i=e.length-1;e[e.length-1]=o.createElement("ul",{"data-hidden":this.props.selected_concept_idx!==t||this.selectedConceptBox!==i,"data-checkidx":i},[...s].map(e=>e.html))}})}}),void 0===e?o.createElement(o.Fragment,null):e.map((e,t)=>o.createElement("div",{key:"result_1depth_thumbnail"+t,className:"concept_img_box"},e))}})())))()))))()))())}};s([a.observable],d.prototype,"detail",void 0),s([a.observable],d.prototype,"selectedConceptBox",void 0),d=s([n.observer],d),t.default=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),o=i(64);i(65);t.default=e=>{const[t,i]=s.useState(!1),[n,a]=s.useState(0),[r,c]=s.useState(0),[l,d]=s.useState(0),[u,p]=s.useState(""),{score:h,needExplain:m,id:f}=e;s.useEffect(()=>{u===f&&h===n||(a(Math.round(h)),p(f)),l!==m&&d(m),c(Math.round(h))},[h,m,f]);return s.useCallback(()=>s.createElement("section",{id:"student_header"},s.createElement(o.default,{thumbnail:e.thumbnail,avatar:e.avatar,displayMode:e.displayMode,name:"1"===e.displayMode?e.name:e.nickname,className:"",gender:e.gender}),s.createElement("span",{className:"name"},"1"===e.displayMode?e.name:e.nickname),s.createElement("i",{onClick:()=>i(!t)}),s.createElement("div",{className:`grade step${e.grade} `+(t?" active":""),onClick:()=>i(!t)},s.createElement("div",{className:"innerbox"},s.createElement("h2",null,"Problems Level"),s.createElement("ul",null,e.is_curri_gk?s.createElement(s.Fragment,null,s.createElement("li",null,s.createElement("img",{src:"/content/mathalive_lib/MA/adaptive_learning/common/sh_grade1.png"}),s.createElement("span",null,"Lv2 ~ Lv3")),s.createElement("li",null,s.createElement("img",{src:"/content/mathalive_lib/MA/adaptive_learning/common/sh_grade2.png"}),s.createElement("span",null,"Lv2 ~ Lv4")),s.createElement("li",null,s.createElement("img",{src:"/content/mathalive_lib/MA/adaptive_learning/common/sh_grade3.png"}),s.createElement("span",null,"Lv2(3) ~ Lv5"))):s.createElement(s.Fragment,null,s.createElement("li",null,s.createElement("img",{src:"/content/mathalive_lib/MA/adaptive_learning/common/sh_grade1.png"}),s.createElement("span",null,"Lv2 ~ Lv3+a")),s.createElement("li",null,s.createElement("img",{src:"/content/mathalive_lib/MA/adaptive_learning/common/sh_grade2.png"}),s.createElement("span",null,"Lv2 ~ Lv4+a")),s.createElement("li",null,s.createElement("img",{src:"/content/mathalive_lib/MA/adaptive_learning/common/sh_grade3.png"}),s.createElement("span",null,"Lv3 ~ Lv4+a")),s.createElement("li",null,s.createElement("img",{src:"/content/mathalive_lib/MA/adaptive_learning/common/sh_grade4.png"}),s.createElement("span",null,"Lv3 ~ Lv5")))))),s.createElement("i",{onClick:()=>i(!t)}),s.createElement("span",{className:"point"},n),s.createElement("i",{onClick:()=>i(!t)}),s.createElement("strong",{className:"needs"},l)),[n,r,e.nickname,e.is_curri_gk,e.needExplain,l,t])()}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0);t.default=e=>{const[t,i]=s.useState(s.createElement(s.Fragment,null)),[o,n]=s.useState("defaultImg_f");return s.useEffect(()=>{let t=s.createElement(s.Fragment,null);const o="1"===e.displayMode&&(""===e.thumbnail||!e.thumbnail),a="2"===e.displayMode&&(""===e.avatar||!e.avatar);t=(o||a)&&e.name&&e.name.length>=2?s.createElement("span",{className:"text"},e.name[0].toUpperCase()+e.name[1].toUpperCase()):"1"===e.displayMode&&""!==e.thumbnail?s.createElement("img",{src:e.thumbnail}):s.createElement("img",{src:e.avatar}),i(t),n("F"===e.gender?"defaultImg_f":"defaultImg_m")},[e.displayMode,e.name,e.thumbnail,e.avatar,e.gender]),s.createElement("div",{className:"custom_thumbnail "+e.className+" "+o+(""!==e.thumbnail?" no-bold":"")},t)}},function(e,t,i){"use strict";i.r(t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),o=i(6),n=i(3);class a extends s.Component{render(){return this.props.is_teacher?s.createElement("button",{onClick:()=>{if(this.props.is_lock){n.App.pub_reloadStudents(()=>{}),this.props.onToggle&&this.props.onToggle(!1);let e={msgtype:"page_unlock"};o.sendPAD(10,e)}else{n.App.pub_reloadStudents(()=>{}),this.props.onToggle&&this.props.onToggle(!0);let e={msgtype:"page_lock"};o.sendPAD(10,e)}},className:"lock_btn","data-active":this.props.view,"data-locked":this.props.is_lock}):s.createElement("div",{className:"lockking",style:this.props.is_lock?{display:"block"}:{display:"none"}},this.props.children?this.props.children:s.createElement("div",{className:"text"},s.createElement("strong",null,"Pay Attention"),s.createElement("img",{src:"/content/mathalive_lib/images/imgFairy.png"})))}}t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0);class o extends s.Component{render(){return s.createElement(s.Fragment,null,s.createElement("div",{className:this.props.show_detail?"guide_color detail":"guide_color"},s.createElement("div",{className:"color"},s.createElement("span",null,"Color"),s.createElement("button",{className:"color_check question",onClick:()=>{this.props.setGuide(!this.props.showGuide)}}),s.createElement("div",{className:"color_check color_desc "+(this.props.showGuide?"show":""),onClick:()=>{this.props.setGuide(this.props.showGuide)}},"Adaptive Learning Color",s.createElement("ul",null,s.createElement("li",null,s.createElement("span",{className:"color01"})," 80%~100%"),s.createElement("li",null,s.createElement("span",{className:"color02"})," 51%~79%"),s.createElement("li",null,s.createElement("span",{className:"color03"})," 31%~50%"),s.createElement("li",null,s.createElement("span",{className:"color04"})," 0%~30%"))))))}}t.default=o},function(e,t,i){"use strict";var s=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function a(e){try{c(s.next(e))}catch(e){n(e)}}function r(e){try{c(s.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=i(0);i(69);t.default=e=>{const[t,i]=o.useState(0),[n,a]=o.useState(!1),[r,c]=o.useState(!1),[l,d]=o.useState(!1),[u,p]=o.useState({top:0,left:0,display:"none"}),[h,m]=o.useState({x:0,y:0}),f=o.useRef();let _=[];o.useEffect(()=>{p(n?Object.assign(Object.assign({},u),{display:"block"}):Object.assign(Object.assign({},u),{display:"none"}))},[n]);o.useCallback(()=>{if("single"!==e.mode)return o.createElement(o.Fragment,null,o.createElement("button",{onClick:()=>i(parseInt(JSON.stringify(t),10)-1)},"이전"),o.createElement("button",{onClick:()=>i(parseInt(JSON.stringify(t),10)+1)},"다음"))},[t,e.mode]);o.useEffect(()=>{_=[]},[e,n]);const g=o.useCallback(e=>{e.pressure>0&&(d(!0),m({x:e.clientX,y:e.clientY}))},[f]),y=o.useCallback(()=>{document.addEventListener("keydown",e=>{-1===_.indexOf(e.key)&&_.push(e.key),-1!==_.indexOf("T")&&-1!==_.indexOf("V")&&e.shiftKey?a(!0):a(!1)}),document.addEventListener("keyup",e=>{let t=_.indexOf(e.key);-1!==t&&_.splice(t,1)})},[f]),v=o.useCallback(e=>{let t=e.clientY-h.y-20,i=e.clientX-h.x-20;l&&p(Object.assign(Object.assign({},u),{top:u.top+t,left:u.left+i}))},[f]),w=o.useCallback(e=>{l&&d(!1)},[f]);return o.useEffect(()=>()=>{d(!1),a(!1),c(!1),i(0),m({x:0,y:0}),p({top:0,left:0,display:"none"})},[]),-1===window.location.href.indexOf("192.168")?o.createElement(o.Fragment,null):o.createElement(o.Fragment,null,o.createElement("div",{id:"answerLayer","data-custom":"true",ref:f,onPointerDown:e=>g(e),onPointerMove:e=>v(e),onPointerUp:e=>w(e)},o.createElement("div",{style:{height:0},ref:e=>{null!==e&&y()}}),o.createElement("button",{onClick:()=>{var e;e=e=>{0!==e.length&&e[t]||alert("다시 한번 눌러주세요"),c(!n),window.open(`https://contents.fel40.com/fileRoot/MAproblem/${e.length>t?e[t]:""}/desc.html`,"_blank","toolbar=yes,scrollbars=yes,resizable=yes,top=10,left=10,width=1200,height=600")},s(void 0,void 0,void 0,(function*(){let t=/\/\d+\//g,i=[];[...document.querySelectorAll(".swiper-slide-active iframe")].map(e=>{let s=e.src;-1!==s.indexOf("MAproblem")&&null!==s.match(t)&&(s=e.src.match(t)[0],i.push(s.replace(/\//gi,"")))}),e&&i.length>0&&e(i)}))}},"정답")))}},function(e,t,i){"use strict";i.r(t)},function(e,t,i){"use strict";i.r(t)}]);