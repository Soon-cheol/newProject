!function(t){var e={};function s(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s(s.s=11)}([function(t,e){t.exports=React},function(t,e){t.exports=mobx},function(t,e){t.exports=mobxReact},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0;const i=s(16),o=s(5);function n(t){if(!t)return t;console.log("init student",t),t.displayMode=""+t.displayMode=="2"?"2":"1",t.gender=t.gender,""===t.nickname&&(t.nickname=t.name);let e=t.avatar&&""!==t.avatar?t.avatar:"";return""===e&&(e="f"===t.gender||"F"===t.gender?"/content/mathalive_lib/images/default_candy.png":"/content/mathalive_lib/images/default_cheese.png",t.avatar=e),t}class a{static get isMobile(){return a._isMobile}static get tempEl(){return a._tempEl}static pub_init(){const t=navigator.userAgent;a._isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t)||/android/i.test(t),a._tempBnd=document.createElement("div"),a._tempBnd.style.display="none",a._tempEl=document.createElement("div"),a._tempBnd.appendChild(a._tempEl),null===document.body?document.addEventListener("DOMContentLoaded",t=>{document.body.appendChild(a._tempBnd)}):document.body.appendChild(a._tempBnd)}static get students(){return a._students}static get student(){return a._student}static get lang(){return a._lang}static get isDvlp(){return a._isDvlp}static get data_url(){return a._data_url}static get lesson(){return a._lesson}static get book(){return a._book}static get nextBook(){return a._nextBook}static get prevBook(){return a._prevBook}static get addOnHost(){return a._addOnHost}static setaddOnHost(t){a._addOnHost=t}static pub_load(t,e,s,i,o,r,l){a._lesson=i,a._book=s,a._nextBook=r,a._prevBook=l,a._students=[],t&&Array.isArray(t)&&t.forEach((t,e)=>{a._students[e]=n(t)}),a._student=n(e),o&&""!==o&&(a._addOnHost=o)}static pub_reloadStudents(t){o.getStudents((e,s)=>{for(;a._students.length>0;)a._students.pop();for(;a._students_inited.length>0;)a._students_inited.pop();for(let t=0,s=e.length;t<s;t++)a.isDvlp?a._students[t]=n(e[t]):a._students[t]=n({id:e[t].id,name:e[t].name,thumb:e[t].defaultThumbnail,avatar:e[t].profileThumbnail,nickname:""!==e[t].nickName?e[t].nickName:e[t].name,displayMode:e[t].displayMode,gender:e[t].gender,inited:!0}),console.log("student",e[t]),a._students_inited.push(e[t].id);t()})}static pub_parseStyle(t){return a._tempEl.style.cssText=t,a._tempEl.style}static pub_initAudio(){a._common_audio=document.getElementById("common_audio"),a._ding_audio=document.getElementById("ding_audio"),a._dingend_audio=document.getElementById("dingend_audio"),a._btn_audio=document.getElementById("btn_audio"),a._correct_audio=document.getElementById("correct_audio"),a._wrong_audio=document.getElementById("wrong_audio"),a._topad_audio=document.getElementById("topad_audio"),a._goodjob_audio=document.getElementById("goodjob_audio"),a._btn_back_audio=document.getElementById("btn_back_audio"),a._btn_page_audio=document.getElementById("btn_page_audio"),a._popup_audio=document.getElementById("popup_audio"),a._clock_audio=document.getElementById("clock_audio"),a._ts_bgm_audio=document.getElementById("ts_bgm_audio"),a._bs_audio=document.getElementById("bs_audio"),a._bb_audio=document.getElementById("bb_audio"),a._cd_audio=document.getElementById("cd_audio"),a._tc_audio=document.getElementById("tc_audio"),a._te_audio=document.getElementById("te_audio"),a._trg_bgm_audio=document.getElementById("trg_bgm_audio"),a._afc_audio=document.getElementById("afc_audio"),a._trs_audio=document.getElementById("trs_audio"),a._btn_choice_audio=document.getElementById("btn_choice_audio"),a._retry_audio=document.getElementById("retry_audio"),a._sorry_audio=document.getElementById("sorry_audio"),a._great_audio=document.getElementById("great_audio"),a._memorygame_flipcard_audio=document.getElementById("flipcard_audio"),a._ispy_gameclick_audio=document.getElementById("gameclick_audio"),a._game_timesetting_start_audio=document.getElementById("game_timesetting_start"),a._solution_btn_audio=document.getElementById("solution_btn_audio"),a._game_result_audio=document.getElementById("game_result_audio"),a._open_problom_audio=document.getElementById("open_problom_audio"),a._quiz_done_audio=document.getElementById("quiz_done_audio"),a._hit_up_audio=document.getElementById("hu_audio"),a._hit_down_audio=document.getElementById("hd_audio"),a._hit_good_audio=document.getElementById("hg_audio"),a._hit_wrong_audio=document.getElementById("hw_audio"),a._pick_presenter=document.getElementById("pick_presenter"),a._game_good_audio=document.getElementById("gg_audio")}static pub_playClock(){a._clock_audio&&(a._clock_audio.currentTime=4.5,a._clock_audio.play())}static pub_playPopup(){a._popup_audio&&(a._popup_audio.currentTime=0,a._popup_audio.play())}static pub_playBtnPage(){a._btn_page_audio&&(a._btn_page_audio.currentTime=0,a._btn_page_audio.play())}static pub_playBtnBack(){a._btn_back_audio&&(a._btn_back_audio.currentTime=0,a._btn_back_audio.play())}static pub_playGoodjob(){a._goodjob_audio&&(a._goodjob_audio.currentTime=0,a._goodjob_audio.play())}static pub_playDing(){a._ding_audio&&(a._ding_audio.currentTime=0,a._ding_audio.play())}static pub_playDingend(){a._dingend_audio&&(a._dingend_audio.currentTime=0,a._dingend_audio.play())}static pub_playToPad(){a._topad_audio&&(a._topad_audio.currentTime=0,a._topad_audio.play())}static pub_playBtnTab(){a._btn_audio&&(a._btn_audio.currentTime=0,a._btn_audio.play())}static pub_playCorrect(){a._correct_audio&&(a._correct_audio.currentTime=0,a._correct_audio.play())}static pub_playWrong(){a._wrong_audio&&(a._wrong_audio.currentTime=0,a._wrong_audio.play())}static pub_playTeamSelectBgm(){a._ts_bgm_audio&&(a._ts_bgm_audio.currentTime=0,a._ts_bgm_audio.play())}static pub_stopTeamSelectBgm(){a._ts_bgm_audio&&(a._ts_bgm_audio.pause(),a._ts_bgm_audio.currentTime=0)}static pub_playStartButton(){a._bs_audio&&(a._bs_audio.currentTime=0,a._bs_audio.play())}static pub_playBasicButton(){a._bb_audio&&(a._bb_audio.currentTime=0,a._bb_audio.play())}static pub_playCountDown(){a._cd_audio&&(a._cd_audio.currentTime=0,a._cd_audio.play())}static pub_playTimerClock(){a._tc_audio&&(a._tc_audio.currentTime=0,a._tc_audio.play())}static pub_stopTimerClock(){a._tc_audio&&(a._tc_audio.pause(),a._tc_audio.currentTime=0)}static pub_playTimerEnd(){a._te_audio&&(a._te_audio.currentTime=0,a._te_audio.play())}static pub_playResultGraph(){a._trg_bgm_audio&&(a._trg_bgm_audio.currentTime=0,a._trg_bgm_audio.play())}static pub_playFireworksClapping(){a._afc_audio&&(a._afc_audio.currentTime=0,a._afc_audio.play())}static pub_playTotalResult(){a._trs_audio&&(a._trs_audio.currentTime=0,a._trs_audio.play())}static pub_playChoiceBtn(){a._btn_choice_audio&&(a._btn_choice_audio.currentTime=0,a._btn_choice_audio.play())}static pub_playsorry(){a._sorry_audio&&(a._sorry_audio.currentTime=0,a._sorry_audio.play())}static pub_playretry(){a._retry_audio&&(a._retry_audio.currentTime=0,a._retry_audio.play())}static pub_playgreat(){a._great_audio&&(a._great_audio.currentTime=0,a._great_audio.play())}static pub_playFlipCard(){a._memorygame_flipcard_audio&&(a._memorygame_flipcard_audio.currentTime=0,a._memorygame_flipcard_audio.play())}static pub_playGameClick(){a._ispy_gameclick_audio&&(a._ispy_gameclick_audio.currentTime=0,a._ispy_gameclick_audio.play())}static pub_game_timesetting_start(){a._game_timesetting_start_audio&&(a._game_timesetting_start_audio.currentTime=0,a._game_timesetting_start_audio.play())}static pub_solution_btn_click(){a._solution_btn_audio&&(a._solution_btn_audio.currentTime=0,a._solution_btn_audio.play())}static pub_playGameresult(){a._game_result_audio&&(a._game_result_audio.currentTime=0,a._game_result_audio.play())}static pub_openProblom(){a._open_problom_audio&&(a._open_problom_audio.currentTime=0,a._open_problom_audio.play())}static pub_quizDone(){a._quiz_done_audio&&(a._quiz_done_audio.currentTime=0,a._quiz_done_audio.play())}static pub_pick_presenter(){a._pick_presenter&&(a._pick_presenter.currentTime=0,a._pick_presenter.play())}static pub_stop(){null!=a._common_audio.onended&&a._common_audio.onended.call(a._common_audio,new Event("ended")),a._common_audio.oncanplaythrough=null,isNaN(a._common_audio.duration)||a._common_audio.paused||a._common_audio.pause()}static pub_play(t,e){a.pub_stop(),t=i.nteString(t,"");const s=i.nteString(a._common_audio.getAttribute("src"),"");if(""===t&&""===s)return void(null!=e&&e(!0));""!==t&&s!==t&&(a._common_audio.src=t);const o=t=>{a._common_audio.onended=null,null!==e&&e(!0),a._common_audio.removeEventListener("error",o)};a._common_audio.onended=t=>{a._common_audio.onended=null,null!==e&&e(!!t),a._common_audio.removeEventListener("error",o)},a._common_audio.addEventListener("error",o),isNaN(a._common_audio.duration)?(a._common_audio.oncanplaythrough=t=>{0!==a._common_audio.currentTime&&(a._common_audio.currentTime=0),a._common_audio.play(),a._common_audio.oncanplaythrough=null},a._common_audio.load()):(0!==a._common_audio.currentTime&&(a._common_audio.currentTime=0),a._common_audio.oncanplaythrough=null,a._common_audio.play())}static pub_set(t,e,s){a._isDvlp=e,a._lang=s,o.set(e)}static pub_addInitedStudent(t){let e=!0;for(let s=0,i=a._students_inited.length;s<i;s++){a._students_inited[s]===t.id&&(e=!1)}e&&a._students_inited.push(t.id);const s=a._start_idx>0&&a._students.length>0&&a._students_inited.length>=a._students.length;return s&&(window.clearTimeout(a._start_idx),a._start_idx=-1),s}static pub_start(t){0===a._students.length||a._students_inited.length>=a._students.length?t():a._start_idx=window.setTimeout(t,2e3)}static pub_clear(){for(;a._students.length>0;)a._students.pop();for(;a._students_inited.length>0;)a._students_inited.pop()}static pub_playHitup(){a._hit_up_audio&&(a._hit_up_audio.currentTime=0,a._hit_up_audio.play())}static pub_playHitdown(){a._hit_down_audio&&(a._hit_down_audio.currentTime=0,a._hit_down_audio.play())}static pub_playHitgood(){a._hit_good_audio&&(a._hit_good_audio.currentTime=0,a._hit_good_audio.play())}static pub_playHitwrong(){a._hit_wrong_audio&&(a._hit_wrong_audio.currentTime=0,a._hit_wrong_audio.play())}static pub_playGamegood(){a._game_good_audio&&(a._game_good_audio.currentTime=0,a._game_good_audio.play())}}e.App=a,a._isMobile=!1,a._students=[],a._students_inited=[],a._student=null,a._lang="ko",a._isDvlp=!1,a._data_url="../data/",a._lesson="",a._book="",a._nextBook=!1,a._prevBook=!1,a._start_idx=-1,a.isStarted=!1,a._addOnHost="https://addonsapi.fel40.com"},function(t,e){t.exports=_},function(t,e,s){"use strict";var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(o,n){function a(t){try{l(i.next(t))}catch(t){n(t)}}function r(t){try{l(i.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,r)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.postAttention=e.postViewDiv=e.getPreviewDmsResult=e.getPreviewResult=e.showSGiftBox=e.showSLivePointPop=e.launchSTool=e.clearPenTool=e.hidePenTool=e.showPenTool=e.showRecordTool=e.showSendButton=e.alertToStudent=e.showSLoading=e.showSMathKit=e.clearSPenTool=e.takePicture=e.uploadInclassReport=e.stopVideoRecord=e.startVideoRecord=e.switchCamera=e.stopCamera=e.pauseRecordPlayer=e.playRecordPlayer=e.startCustomCamera=e.startCamera=e.getStudents=e.uploadFileToServerMulti=e.uploadImageToServer=e.uploadFileToServer=e.stopVoiceRecord=e.startVoiceRecord=e.sendTeacher=e.disableSoftwareKeyboard=e.sendPAD=e.sendPADToID=e.sendLauncher=e.uploadStudentReport=e.addStudentForStudentReportType6=e.hideStudentReportListPage=e.showStudentReportListPage=e.showStudentReportUI=e.hideStudentReportUI=e.startStudentReportProcess=e.finishContentPage=e.showTMathKit=e.alertToTeacher=e.showTLoading=e.clearTPenTool=e.getBookCaptureInfo=e.uploadTImageToServer=e.useFractionBar=e.logOut=e.exitClass=e.getNaviInfo=e.launchPadTool=e.launchTool=e.exitBook=e.gotoBookByKey=e.gotoBook=e.set=void 0;const o=s(4);let n=!1;e.set=function(t){n=t},e.gotoBook=function(t,e){if(console.log("felsocket gotoBook",t,e),!n)try{window.tsoc_o.gotoBook(t,e)}catch(t){}},e.gotoBookByKey=function(t){if(console.log("felsocket gotoBookByKey",t),!n)try{window.tsoc_o.gotoBookByKey(t)}catch(t){}},e.exitBook=function(){if(console.log("felsocket exitBook"),!n)try{window.tsoc_o.exitBook()}catch(t){}},e.launchTool=function(t){if(console.log("felsocket launchTool",t),!n)try{window.tsoc_o.launchTool(t)}catch(t){}},e.launchPadTool=function(t){if(console.log("felsocket launchPadTool",t),!n)try{window.tsoc_o.launchPadTool(t)}catch(t){}},e.getNaviInfo=function(t){if(console.log("felsocket getNaviInfo",t),!n)try{window.tsoc_o.getNaviInfo(t)}catch(t){}},e.exitClass=function(){if(console.log("felsocket exitClass"),!n)try{window.tsoc_o.exitClass()}catch(t){}},e.logOut=function(){if(console.log("felsocket logOut"),!n)try{window.tsoc_o.logOut()}catch(t){}},e.useFractionBar=function(){if(console.log("felsocket useFractionBar"),!n)try{window.tsoc_o.useFractionBar()}catch(t){}},e.uploadTImageToServer=function(t,e,s,i){if(console.log("felsocket uploadTImageToServer",e,s,i),!n)try{window.tsoc_o.uploadImageToServer(t,e,s,i)}catch(t){}},e.getBookCaptureInfo=function(t){if(console.log("felsocket getBookCaptureInfo"),!n)try{window.tsoc_o.getBookCaptureInfo(t)}catch(t){}},e.clearTPenTool=function(){if(console.log("felsocket clearTPenTool"),!n)try{window.tsoc_o.clearPenTool()}catch(t){}},e.showTLoading=function(t){if(console.log("felsocket showTLoading",t),!n)try{window.tsoc_o.showLoading(t)}catch(t){}},e.alertToTeacher=function(t){if(console.log("felsocket alertToTeacher",t),!n)try{window.tsoc_o.alert(t)}catch(t){}},e.showTMathKit=function(t){if(console.log("felsocket showTMathKit",t),!n)try{window.tsoc_o.showMathKit(t)}catch(t){}},e.finishContentPage=function(){if(!n)try{window.tsoc_o.finishContentPage()}catch(t){}},e.startStudentReportProcess=function(t,e,s){if(!n)try{window.tsoc_o.startStudentReportProcess(t,e,s)}catch(t){}},e.hideStudentReportUI=function(){if(!n)try{window.tsoc_o.hideStudentReportUI()}catch(t){}},e.showStudentReportUI=function(){if(!n)try{window.tsoc_o.showStudentReportUI()}catch(t){}},e.showStudentReportListPage=function(){if(!n)try{window.tsoc_o.showStudentReportListPage()}catch(t){}},e.hideStudentReportListPage=function(){if(!n)try{window.tsoc_o.hideStudentReportListPage()}catch(t){}},e.addStudentForStudentReportType6=function(t){if(!n)try{window.tsoc_o.addStudentForStudentReportType6(t)}catch(t){}},e.uploadStudentReport=function(t,e,s){if(!n)try{window.psoc_o.uploadStudentReport(t,e,s)}catch(t){}},e.sendLauncher=function(t,e){if(5!==t||n)if(6!==t||n)if(7!==t||n){if(8===t)if(console.log("felsocket gotoPrevBook"),n)try{window.top.tsoc_o.gotoPrevBook()}catch(t){}else try{window.tsoc_o.gotoPrevBook()}catch(t){}else if(9===t)if(console.log("felsocket gotoNextBook"),n)try{window.top.tsoc_o.gotoNextBook()}catch(t){}else try{window.tsoc_o.gotoNextBook()}catch(t){}}else try{window.tsoc_o.setTitleBar(e)}catch(t){}else try{window.tsoc_o.showTitleBar()}catch(t){}else try{window.tsoc_o.hideTitleBar()}catch(t){}},e.sendPADToID=function(t,e,s){const i={type:e,data:s};if(n)try{window.top.tsoc_o.sendPADToID(t,i)}catch(t){}else try{window.tsoc_o.sendPADToID(t,i)}catch(t){}},e.sendPAD=function(t,e){const s={type:t,data:e};if(n)try{window.top.tsoc_o.sendAll(s)}catch(t){}else try{window.tsoc_o.sendAll(s)}catch(t){}},e.disableSoftwareKeyboard=function(){try{window.psoc_o.disableSoftwareKeyboard()}catch(t){}},e.sendTeacher=function(t,e){const s={type:t,data:e};if(n)try{null!==window.opener&&window.opener.tsoc_o.sendTeacher(s)}catch(t){}else try{window.psoc_o.sendTeacher(s)}catch(t){}},e.startVoiceRecord=function(){try{window.psoc_o.startVoiceRecord()}catch(t){}},e.stopVoiceRecord=function(){try{window.psoc_o.stopVoiceRecord()}catch(t){}},e.uploadFileToServer=function(t){try{window.psoc_o.uploadFileToServer(t)}catch(t){}},e.uploadImageToServer=function(t,e,s,i){try{window.psoc_o.uploadImageToServer(t,e,s,i)}catch(t){}},e.uploadFileToServerMulti=function(t){try{window.psoc_o.uploadFileToServerMulti(t)}catch(t){}},e.getStudents=function(t){if(n)if(window.top.tsoc_o)try{window.top.tsoc_o.getStudents(t)}catch(t){}else t([],!1);else try{window.tsoc_o.getStudents(t)}catch(t){}},e.startCamera=function(t){if(!n)try{window.psoc_o.startCamera(t)}catch(t){}},e.startCustomCamera=function(t){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"startCustomCamera",msg:t},"*")},e.playRecordPlayer=function(){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"playRecordPlayer"},"*")},e.pauseRecordPlayer=function(){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"pauseRecordPlayer"},"*")},e.stopCamera=function(){if(!n)try{window.psoc_o.stopCamera()}catch(t){}},e.switchCamera=function(t){if(!n)try{window.psoc_o.switchCamera(t)}catch(t){}},e.startVideoRecord=function(){if(!n)try{window.psoc_o.startVideoRecord()}catch(t){}},e.stopVideoRecord=function(){if(!n)try{window.psoc_o.stopVideoRecord()}catch(t){}},e.uploadInclassReport=function(t){if(!n)try{window.tsoc_o.uploadInclassReport(t)}catch(t){}},e.takePicture=function(t){if(!n)try{window.psoc_o.takePicture(t)}catch(t){}},e.clearSPenTool=function(){if(console.log("felsocket clearPenTool"),!n)try{window.psoc_o.clearPenTool()}catch(t){}},e.showSMathKit=function(t){if(console.log("felsocket showSMathKit",t),!n)try{window.psoc_o.showMathKit(t)}catch(t){}},e.showSLoading=function(t){if(console.log("felsocket showSLoading",t),!n)try{window.psoc_o.showLoading(t)}catch(t){}},e.alertToStudent=function(t){if(console.log("felsocket alertToStudent",t),!n)try{window.psoc_o.alert(t)}catch(t){}},e.showSendButton=function(t,e){if(console.log("felsocket showSendButton"),!n)try{window.psoc_o.showSendButton(t,e)}catch(t){}},e.showRecordTool=function(t){if(console.log("felsocket showRecordTool",t),!n)try{window.psoc_o.showRecordTool(t)}catch(t){}},e.showPenTool=function(){if(console.log("felsocket showPentool"),!n)try{window.psoc_o.showPenTool()}catch(t){}},e.hidePenTool=function(){if(console.log("felsocket hidePentool"),!n)try{window.psoc_o.hidePenTool()}catch(t){}},e.clearPenTool=function(){if(console.log("felsocket clearPenTool"),!n)try{window.psoc_o.clearPenTool()}catch(t){}},e.launchSTool=function(t){if(console.log("felsocket launchTool",t),!n)try{window.psoc_o.launchTool(t)}catch(t){}},e.showSLivePointPop=function(t){if(console.log("felsocket showLivePointPop"),!n)try{window.psoc_o.showLivePointPop(t)}catch(t){}},e.showSGiftBox=function(t,e){if(console.log("felsocket showGiftBox"),!n)try{window.psoc_o.showGiftBox(t,e)}catch(t){}},e.getPreviewResult=function(t){return i(this,void 0,void 0,(function*(){return new Promise(e=>{if(n)e([]);else{let s=!1;const i=t=>{s||(s=!0,e(t))};window.tsoc_o.getPreviewResult(i,t),o.delay(()=>{s||(s=!0,e([]))},5e3)}})}))},e.getPreviewDmsResult=function(t){return i(this,void 0,void 0,(function*(){return new Promise(e=>{if(n)e([]);else{let s=!1;const i=t=>{s||(s=!0,e(t))};window.tsoc_o.getPreviewDmsResult(i,t),o.delay(()=>{s||(s=!0,e([]))},5e3)}})}))},e.postViewDiv=function(t){return i(this,void 0,void 0,(function*(){console.log("postViewDiv",t),window.top.postMessage({type:"viewDiv",msg:t,from:"content"},"*")}))},e.postAttention=function(t){return i(this,void 0,void 0,(function*(){console.log("postAttention",t),window.top.postMessage({type:"attention",msg:t,from:"content"},"*")}))}},function(t,e,s){"use strict";var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(o,n){function a(t){try{l(i.next(t))}catch(t){n(t)}}function r(t){try{l(i.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,r)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.getBounds=e.getTimeStr=e.wait=void 0;const o=s(4);e.wait=function(t){return i(this,void 0,void 0,(function*(){return new Promise(e=>{o.delay(e,t)})}))},e.getTimeStr=function(t,e){const s=Math.round(e/1e3);let i=Math.round(t/1e3),o=Math.floor(i/60),n=Math.floor(o/60),a="";return i%=60,o%=60,n>0||s>=3600?(a=n+":",a+=o>=10?o+":":"0"+o+":"):s>=600?a+=o>=10?o+":":"0"+o+":":a=o+":",a+=i>=10?i:"0"+i,a},e.getBounds=function(t){const e={left:0,top:0,width:0,height:0};if(!t)return e;try{const s=t.getBoundingClientRect();e.left=s.left,e.top=s.top,e.width=s.width,e.height=s.height}catch(t){}const s=t.ownerDocument,i=s.body,o=s.documentElement;e.left=e.left-(o.clientLeft||i.clientLeft||0),e.top=e.top-(o.clientTop||i.clientTop||0);const n=s.defaultView;return e.left+=n.pageXOffset||o.scrollLeft||i.scrollLeft,e.top+=n.pageYOffset||o.scrollTop||i.scrollTop,e}},function(t,e,s){"use strict";t.exports=s(14)},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.ImgBtn=e.AudioBtn=e.ToggleBtn=void 0;const o=s(0),n=s(1),a=s(2);class r extends o.Component{constructor(t){super(t),this.m_pID=-1,this._inited=this._inited.bind(this),this._onClick=this._onClick.bind(this)}_inited(t){!this.m_el&&t&&(this.m_el=t,this.props.onRef&&this.props.onRef(t),t.setAttribute("touch-action","none"),t.addEventListener("pointerdown",e=>{if(!(this.m_pID>=0)){if(this.m_pID=e.pointerId,!this.props.disableCapture)try{t.setPointerCapture(this.m_pID)}catch(t){}this.props.onMouseDown&&this.props.onMouseDown(e)}}),t.addEventListener("pointerup",e=>{if(this.m_pID===e.pointerId){try{t.releasePointerCapture(this.m_pID)}catch(t){}this.m_pID=-1,this.props.onMouseUp&&this.props.onMouseUp(e)}}),t.addEventListener("pointerleave",e=>{if(this.props.disableCapture){if(this.m_pID!==e.pointerId)return;try{t.releasePointerCapture(this.m_pID)}catch(t){}this.m_pID=-1}this.props.onMouseLeave&&this.props.onMouseLeave(e)}),t.addEventListener("pointercancel",e=>{if(this.m_pID===e.pointerId){try{t.releasePointerCapture(this.m_pID)}catch(t){}this.m_pID=-1,this.props.onMouseLeave&&this.props.onMouseLeave(e)}}))}_onClick(t){this.props.onClick&&this.props.onClick(t),this.props.preventEvent&&(t.preventDefault(),t.stopPropagation())}componentDidUpdate(t){if((this.props.disabled&&!t.disabled||!this.props.view&&t.view)&&this.m_pID>=0){try{this.m_el&&this.m_el.releasePointerCapture(this.m_pID)}catch(t){}this.m_pID=-1}}}i([n.observable],r.prototype,"m_pID",void 0);let l=class extends r{constructor(t){super(t),this.m_on=!1,this.m_on=!0===t.on}componentWillReceiveProps(t){this.props.on!==t.on&&(this.m_on=!0===t.on)}render(){const t=[];this.props.className&&t.push(this.props.className),this.m_on&&t.push("on"),this.m_pID>0&&t.push("down");const e=t.join(" ");let s=this.props.style;return!1===this.props.view&&(s||(s={}),s.display="none"),o.createElement("button",{id:this.props.id,className:e,onClick:this._onClick,ref:this._inited,disabled:!0===this.props.disabled,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:s},this.props.children)}};i([n.observable],l.prototype,"m_on",void 0),l=i([a.observer],l),e.ToggleBtn=l;let p=class extends l{constructor(t){super(t)}play(){this.m_on||(this.m_on=!0,this.props.playFnc(this.props.src,t=>{this.m_on&&(this.m_on=!1,this.props.onPause&&this.props.onPause(t))}))}_onClick(t){this.m_on?(this.props.pauseFnc(),this.m_on=!1):this.play(),super._onClick(t)}};i([n.action],p.prototype,"play",null),i([n.action],p.prototype,"_onClick",null),p=i([a.observer],p),e.AudioBtn=p;let c=class extends r{constructor(t){super(t),this.m_on=!1,this.m_on=!0===t.on}componentWillReceiveProps(t){this.props.on!==t.on&&(this.m_on=!0===t.on)}render(){const t=[];this.props.className&&t.push(this.props.className),this.m_on&&t.push("on"),this.m_pID>0&&t.push("down"),!0===this.props.disabled&&t.push("disable");const e=t.join(" ");let s=this.props.style;return!1===this.props.view&&(s||(s={}),s.display="none"),o.createElement("img",{id:this.props.id,className:e,onClick:this._onClick,ref:this._inited,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:s,src:this.props.src,useMap:this.props.useMap})}};i([n.observable],c.prototype,"m_on",void 0),c=i([a.observer],c),e.ImgBtn=c},function(t,e){t.exports=ReactIdSwiper},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a},o=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(o,n){function a(t){try{l(i.next(t))}catch(t){n(t)}}function r(t){try{l(i.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,r)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.CoverPopup=void 0;const n=s(0),a=s(1),r=s(2),l=s(6);let p=class extends n.Component{constructor(){super(...arguments),this.m_state="closed",this._open=()=>o(this,void 0,void 0,(function*(){"closed"===this.m_state&&(this.m_state="opening",yield l.wait(100),this.m_state="open")})),this._close=()=>o(this,void 0,void 0,(function*(){"open"===this.m_state&&(this.m_state="closing",yield l.wait(400),this.props.onClosed(),this.m_state="closed")}))}componentDidUpdate(t){this.props.view!==t.view&&(this.props.view?this._open():this._close())}render(){return n.createElement("div",{className:this.props.className+" "+this.m_state},this.props.children)}};i([a.observable],p.prototype,"m_state",void 0),p=i([r.observer],p),e.CoverPopup=p},function(t,e,s){t.exports=s(12)},function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const i=s(7),o=s(0),n=s(15),a=s(3),r=s(5),l=s(17);i.setConfig({ErrorOverlay:t=>o.createElement("div",null)});const p={clear:a.App.pub_clear,importLink:l.importLink,importHTML:l.importHTML};let c;c=s(18);let u=!1;const d=c,h=d.default,m=d.AppProvider,_=d.appContext;p.set=(t,e,s)=>{a.App.pub_set(t,e,s),_.setData(t)},p.render=()=>{a.App.pub_initAudio(),n.render(o.createElement(m,null,o.createElement(h,null)),document.getElementById("wrap"))},p.init=(t,e,s,i,o,n)=>{a.App.pub_load(t,null,e,s,i,o,n)},p.start=()=>{u=!0,setTimeout(()=>_.start(),500)},p.receive=t=>{if(4===t.type){const e=t.data;u?e&&e.id&&""!==e.id&&(a.App.isStarted?r.sendPADToID(e.id,0,null):r.sendPADToID(e.id,1,null)):a.App.pub_addInitedStudent(e)&&(u||(u=!0,_.start()))}else _.receive(t)},p.teachingTool=t=>{},p.notifyNaviInfo=(t,e,s,i,o,n)=>{_.notifyNaviInfo(t,e,s,i,o,n)},p.notifyBookCaptureInfo=t=>{_.notifyBookCaptureInfo(t)},p.notifyUploadToServerResult=t=>{_.uploaded(t)},p.notifyUploadToServerMultiResult=t=>{_.multiUploaded(t)},p.notifyAlert=t=>{_.notifyAlert(t)},p.notifyPenToolState=(t,e)=>{_.notifyPenToolState(t,e)},p.notifyHamburgerMenuClicked=t=>{_.notifyHamburgerMenuClicked(t)},p.callThreeminState=()=>{_.callThreeminState()},s(42),t.app_o=p}).call(this,s(13))},function(t,e){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(t){"object"==typeof window&&(s=window)}t.exports=s},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=s(0))&&"object"==typeof i&&"default"in i?i.default:i;function n(t){return n.warnAboutHMRDisabled&&(n.warnAboutHMRDisabled=!0,console.error("React-Hot-Loader: misconfiguration detected, using production version in non-production environment."),console.error("React-Hot-Loader: Hot Module Replacement is not enabled.")),o.Children.only(t.children)}n.warnAboutHMRDisabled=!1;var a=function t(){return t.shouldWrapWithAppContainer?function(t){return function(e){return o.createElement(n,null,o.createElement(t,e))}}:function(t){return t}};a.shouldWrapWithAppContainer=!1;e.AppContainer=n,e.hot=a,e.areComponentsEqual=function(t,e){return t===e},e.setConfig=function(){},e.cold=function(t){return t},e.configureComponent=function(){}},function(t,e){t.exports=ReactDOM},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._toStringTimestamp=e.getDateStr=e.nteArray=e.intToHTMLcolor=e.nteBool=e.nteString=e.nteFloat=e.nteInt=e.nteUInt=e.getUnicUrl=e.getUnicNum=e.getUnic=void 0,Date.now||(Date.now=function(){return(new Date).getTime()});let i=0;function o(){return n().toString(36)}function n(){const t=Date.now();return t>i?i=t:i+=1,i}e.getUnic=o,e.getUnicNum=n,e.getUnicUrl=function(t){if(!t)return"";let e=t=t.trim();return 0!==e.indexOf("http://")&&0!==e.indexOf("https://")||(e=e.indexOf("?")>0?e+"&t="+o():e+"?t="+o()),e},e.nteUInt=function(t,e){if(null==t)return e;if("number"==typeof t)return isNaN(t)||t<0?e:Math.round(t);{const s=parseInt(String(t),10);return isNaN(s)||s<0?e:s}},e.nteInt=function(t,e){if(null==t)return e;if("number"==typeof t)return Math.round(t);{const s=parseInt(String(t),10);return isNaN(s)?e:s}},e.nteFloat=function(t,e){if(null==t)return e;if("number"==typeof t)return t;{const s=parseFloat(String(t));return isNaN(s)?e:s}},e.nteString=function(t,e){return null==t?e:String(t)},e.nteBool=function(t,e){if(null==t)return e;if("boolean"==typeof t)return t;const s=String(t);return"true"===s||"false"!==s&&e},e.intToHTMLcolor=function(t){let e,s,i,o=t-0;e=(255&o)<<16,s=65280&o,i=(16711680&o)>>>16,o=e|s|i;let n=o.toString(16);return n="#000000".substring(0,7-n.length)+n,n},e.nteArray=function(t){if(t){if(Array.isArray(t))return t;if("string"==typeof t){const e=t;if(e.indexOf("[")>=0&&e.indexOf("]")>0)try{return JSON.parse(e)}catch(t){}}const e=[];return e.push(t),e}return[]},e.getDateStr=function(t="."){const e=new Date,s=e.getFullYear(),i=e.getMonth()+1,o=e.getDate();return s+t+(i<10?"0"+i:""+i)+t+(o<10?"0"+o:""+o)},e._toStringTimestamp=function(t){let e;const s=t.getFullYear();let i=t.getMonth()+1+"";parseInt(i,10)<10&&(i="0"+i);let o=t.getDate()+"";return parseInt(o,10)<10&&(o="0"+o),e=s+"-"+i+"-"+o+" "+t.toTimeString().substr(0,8),e}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.importLink=e.importHTML=void 0,e.importHTML=function(t){return new Promise((e,s)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="document",i.onload=t=>{if(!t)return;const o=i.response;o&&o.body&&o.body.firstElementChild?e(o.body.firstElementChild):o&&o.documentElement?e(o.documentElement):s("error")},i.onerror=t=>{s(t)},i.send(null)})},e.importLink=function(t,e){return new Promise((e,s)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="document",i.onload=t=>{if(!t)return;const s=i.response;e(s)},i.onerror=t=>{s(t)},i.send(null)})}},function(t,e,s){"use strict";(function(t){var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.appContext=e.AppProvider=void 0;const o=s(0),n=s(1),a=s(2),r=s(7),l=s(20),p=s(21),c=s(5);s(22),s(23);const u=s(24),d=s(35),h=s(36),m=s(38),_=s(39);Object.defineProperty(e,"AppProvider",{enumerable:!0,get:function(){return _.TeacherProvider}}),Object.defineProperty(e,"appContext",{enumerable:!0,get:function(){return _.tContext}});const v=s(3);let f=class extends o.Component{constructor(){super(...arguments),this._viewIntro=!1,this._introsetNavi=()=>{this.props.actions.setNaviView(!1),this.props.actions.setNaviFnc(null,null)},this._startQuiz=()=>{if("individual"===this.props.state.selection){const t={msgtype:"individual_quiz"};c.sendPAD(10,t),this.props.state.prog="warmupquiz",this._viewIntro=!1}else this.props.state.prog="warmupquiz",this._viewIntro=!1},this._timeStart=t=>{this.props.state.timerSecond=t;c.sendPAD(10,{msgtype:"show_intro"}),this.props.state.teamNum=0,this._viewIntro=!0}}componentDidUpdate(t){const{prog:e,viewDiv:s}=this.props.state;"timesetting"===e&&(this.props.actions.setNaviView(!0),this.props.actions.setNavi(!0,!1),this.props.actions.setNaviFnc(()=>{c.clearTPenTool(),this.props.state.prog="selection",c.sendPAD(0,null)},null))}render(){const{state:t,actions:e}=this.props,s=t.viewDiv;v.App.students.length;return o.createElement(o.Fragment,null,o.createElement("div",{className:"content-container"},o.createElement("div",{className:"content-wrapper",style:{left:("direction"===s?0:-1280)+"px"}},o.createElement("div",null,o.createElement(l.default,{className:"video-direction",view:"direction"===s,on:t.directionON,isTeacher:!0,lesson:e.getCurriculum(),bookId:t.bookid,subtitle:t.subtitle?t.subtitle:"",poster_url:t.iswarmup?"/content/mathalive_lib/images/directions/bg_warmup_direction.jpg":"/content/mathalive_lib/images/directions/bg_direction_wrap_up.jpg",video_url:t.iswarmup?"/content/mathalive_lib/images/directions/warmup_video.mp4":"/content/mathalive_lib/images/directions/wrap_up_video.mp4",video_frame:125,onEndStart:e.onDirectionEndStart,onEnd:e.onDirectionEnded,offMathKit:!0,audio_url:"/content/mathalive_lib/mp3/1_Warm_up.mp3"},o.createElement("div",{className:"lesson"},""))),o.createElement("div",null,o.createElement(d.default,{view:"content"===s&&"selection"===t.prog,state:t,actions:e}),o.createElement(m.default,{view:this._viewIntro,setNavi:this._introsetNavi,startQuiz:this._startQuiz}),o.createElement(h.default,{view:"content"===s&&"timesetting"===t.prog,timeSec:15,onStart:this._timeStart}),o.createElement(u.default,{view:"content"===s&&"warmupquiz"===t.prog,state:t,quizProg:t.quizProg,actions:e,teamNum:t.teamNum,teamsInfo:t.teamsinfo,quizResult:t.quizResult,retStudents:t.retStudents})))),o.createElement(p.Navi,Object.assign({},t.navi,{onLeftClick:e.naviLeft,onRightClick:e.naviRight})))}};i([n.observable],f.prototype,"_viewIntro",void 0),f=i([a.observer],f);const g=_.useTeacher(t=>o.createElement(a.Observer,null,()=>o.createElement(f,{state:t.state,actions:t.actions})));e.default=r.hot(t)(g)}).call(this,s(19)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a},o=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(o,n){function a(t){try{l(i.next(t))}catch(t){n(t)}}function r(t){try{l(i.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,r)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const n=s(0),a=s(1),r=s(2),l=s(6);let p=class extends n.Component{constructor(t){super(t),this.m_on=!1,this.m_showMathKit=!1,this.bookInfo=[],this.curIndex=0,this._list=[],this._onClick=()=>{this.props.isTeacher&&this._off()},this._off=()=>o(this,void 0,void 0,(function*(){this.props.view&&this.m_on&&(this.m_on=!1,this.props.onEndStart&&this.props.onEndStart(),yield l.wait(500),this.props.view&&!this.m_on&&this.props.onEnd&&this.props.onEnd())})),this.m_on=t.view&&t.on}_on(){return o(this,void 0,void 0,(function*(){this.m_on=!0}))}componentWillReceiveProps(t){if(t.lesson&&this.props.lesson!==t.lesson||this.props.view!==t.view){for(;this.bookInfo.length>0;)this.bookInfo.pop();t.lesson&&t.lesson.childrenList&&t.lesson.childrenList.length>0&&t.lesson.childrenList.map((e,s)=>{try{if(e.book){e.book.id===t.bookId&&(this.curIndex=this.bookInfo.length);let s=e.depth_name?e.depth_name:"";s=s.replace(/\&lt;/g,"<"),s=s.replace(/\&gt;/g,">"),this.bookInfo.push({bookName:e.name?e.name:"",id:e.id,lesson:t.lesson?t.lesson.name:"",subtitle:s})}}catch(t){alert("A ee  "+JSON.stringify(t))}})}}componentDidUpdate(t){this.props.view?t.view?this.props.on&&!t.on?this._on():!this.props.on&&t.on&&this._off():this.props.on?this._on():this.m_on=!1:this.m_on=!1}render(){const{isTeacher:t,subtitle:e}=this.props,s=[];s.push(this.props.className);const i=document.querySelector(".bgm");return this.props.view?(this.m_on&&s.push("on"),i&&i.play()):(s.push("hide"),i&&(i.pause(),i.currentTime=0)),n.createElement("div",{className:s.join(" "),onClick:this._onClick},t&&this.bookInfo&&n.createElement("span",{className:"concept_name"},this.bookInfo.length>0?this.bookInfo[this.curIndex].lesson:""),n.createElement("div",{className:"progress_dot"},t&&this.bookInfo&&this.bookInfo.map((t,e)=>n.createElement("span",{key:"q_"+e,className:this.curIndex===e?"on":""}))),n.createElement("div",{className:"video"},n.createElement("video",{muted:!0,autoPlay:!0,poster:this.props.poster_url?this.props.poster_url:void 0},n.createElement("source",{src:this.props.video_url,type:"video/mp4"}),n.createElement("strong",null,"Your browser does not support the video tag."))),n.createElement("div",{className:"text"},n.createElement("div",{className:"t1"},this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].bookName:""),t&&n.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].subtitle:""}}),!t&&n.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:0===e.length&&this.bookInfo[this.curIndex]?this.bookInfo[this.curIndex].subtitle:e}})),n.createElement("audio",{className:"bgm",autoPlay:!0,src:this.props.audio_url?this.props.audio_url:void 0}))}};i([a.observable],p.prototype,"m_on",void 0),i([a.observable],p.prototype,"_list",void 0),i([a.action],p.prototype,"_off",void 0),p=i([r.observer],p),e.default=p},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.Navi=void 0;const o=s(0),n=s(1),a=s(2),r=s(8);let l=class extends o.Component{constructor(t){super(t),this.m_on=!1,this.m_isStarted=!1,this._onClick=t=>{this.m_on=!0}}componentDidUpdate(t){this.m_isStarted||!this.props.view||t.view||(this.m_isStarted=!0,this.m_on=!0)}render(){const t=this.m_on?void 0:"off",e={visibility:this.props.view?"visible":"hidden"};return o.createElement(o.Fragment,null,o.createElement("div",{id:"common_navi_left",className:t,style:e},o.createElement("div",null,o.createElement("div",{onClick:this._onClick},o.createElement(r.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),o.createElement(r.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))),o.createElement("div",{id:"common_navi_right",className:t,style:e},o.createElement("div",null,o.createElement("div",{onClick:this._onClick},o.createElement(r.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),o.createElement(r.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))))}};i([n.observable],l.prototype,"m_on",void 0),l=i([a.observer],l),e.Navi=l},function(t,e,s){"use strict";s.r(e)},function(t,e,s){"use strict";s.r(e)},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a},o=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(o,n){function a(t){try{l(i.next(t))}catch(t){n(t)}}function r(t){try{l(i.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,r)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const n=s(0),a=s(2),r=s(1),l=s(4),p=s(3),c=s(5),u=s(6),d=s(25),h=s(27),m=s(28),_=s(29),v=s(30),f=s(31),g=s(32),b=s(33),y=s(34);let w=class extends n.Component{constructor(t){super(t),this._curIdx=0,this._prog=0,this._viewAlert=!1,this._timerState=new d.TimerState(0),this.confetti_set=null,this.countdowntype=1,this._viewTimer=!1,this._viewNextButton=!1,this._isEnd=!1,this._submitStudents=[],this._teamResult=[],this._viewSubmitList=!1,this._viewTeamResult=!1,this._viewTotalResult=!1,this._veiwIndiResult=!1,this._qteamsInfo=[],this._submittype=[],this.viewconfetti=!1,this.viewfirework=!1,this._graphQidx=0,this._totalUsers=0,this.isCreatedTeamscore=!1,this.ifr=[],this.onExitBook=()=>{c.clearTPenTool(),c.exitBook()},this.onGotoBook=(t,e)=>{c.clearTPenTool(),c.gotoBook(t,e)},this._onType=(t,e)=>{this._submittype[e]=t},this._retry=()=>o(this,void 0,void 0,(function*(){const t=this.props.actions.getData().quizs;if(this._viewAlert=!1,this._viewTimer||(this._viewTimer=!0),this._isEnd=!1,this.isCreatedTeamscore=!1,this._prog=0,"team"===this.props.state.selection){const e=this._qteamsInfo[this._curIdx];this.props.state.viewTeamScore=!1,this._submitStudents[this._curIdx]=[],this._curIdx>0?(this.props.state.teamsinfo[0].livePoint=this.props.state.teamsprevinfo[this._curIdx-1][0],this.props.state.teamsinfo[1].livePoint=this.props.state.teamsprevinfo[this._curIdx-1][1],this.props.state.teamsinfo[2].livePoint=this.props.state.teamsprevinfo[this._curIdx-1][2]):(this.props.state.teamsinfo[0].livePoint=this.props.state.teamsprevinfo[this._curIdx][0],this.props.state.teamsinfo[1].livePoint=this.props.state.teamsprevinfo[this._curIdx][1],this.props.state.teamsinfo[2].livePoint=this.props.state.teamsprevinfo[this._curIdx][2]);for(let s=0;s<t.length;s++)e[s].livePoint=0,e[s].hearts=0;this._onSend(!0),yield u.wait(600),this.startTimer()}else this._submitStudents[this._curIdx]=[],this._onSend(!0),yield u.wait(600),this.startTimer(),this.props.state.viewIndiRank=!1})),this._onStopQuiz=()=>o(this,void 0,void 0,(function*(){if(this._curIdx<0)return;this._viewAlert=!1,this._timerState.isRunning&&(p.App.pub_stop(),this._timerState.pause(),this._timerState.setMax(this.props.state.timerSecond));const t={msgtype:"quiz_stop",quizidx:this._curIdx,time:this.props.state.timerSecond,isretry:!1};c.sendPAD(10,t),yield u.wait(900),this.completeContent(),"individual"===this.props.state.selection?this.props.state.viewIndiRank=!0:this.props.state.viewTeamScore=!0,this.props.actions.setNavi(!0,!0),this._isEnd=!0;const e=this.props.actions.getData().quizs;this._curIdx===e.length-1&&(this._prog=3)})),this.nextQuiz=()=>o(this,void 0,void 0,(function*(){p.App.pub_playBasicButton(),this._isEnd=!1;const t=this.props.actions.getData().quizs;if(this._curIdx>=t.length-1){this.props.state.teamNum>0&&(this.props.state.viewTeamScore=!1),"team"===this.props.state.selection&&(this._viewTotalResult=!0);const t={msgtype:"close_result",quizidx:this._curIdx,time:this.props.state.timerSecond,isretry:!1};c.sendPAD(10,t)}else{if(this._viewTimer||(this._viewTimer=!0),"team"===this.props.state.selection)for(let e=0;e<t.length;e++)this.props.state.teamsprevinfo[this._curIdx][e]=this.props.state.teamsinfo[e].livePoint;this._curIdx=this._curIdx+1,this.props.state.teamNum>0?this.props.state.viewTeamScore=!1:this._viewNextButton=!1,this._prog=0,this._onSend(!1),yield u.wait(600),this.startTimer()}})),this._offAlertPop=()=>{this._viewAlert=!1},this.onCloseSubmitList=()=>{this._viewSubmitList=!1},this.onPage=t=>{this.props.view&&3===this._prog&&(p.App.pub_playBtnTab(),c.hidePenTool(),this._veiwIndiResult=!1,this._viewTotalResult=!1,this.props.state.viewIndiRank=!1,this.props.state.viewTeamScore=!1,this._curIdx=t)},this.onChoosePage=t=>{this._viewTotalResult=!1,this.onPage(t)},this._onTeamResult=t=>{if(!this.props.view)return;if(3!==this._prog)return;this.props.state.quizProg=3,p.App.pub_playBasicButton(),this.props.state.viewTeamScore=!1,this._viewTeamResult=!1;const e={msgtype:"team_result",teamsinfo:JSON.stringify(t),classid:this.props.state.classid,curId:this.props.state.curriculumid};c.sendPAD(10,e)},this._onIndiResult=()=>{if(!this.props.view)return;if(3!==this._prog)return;this.props.state.quizProg=3;const t={msgtype:"individual_result",classid:this.props.state.classid,curId:this.props.state.curriculumid,studentInfo:JSON.stringify(this._submitStudents)};c.sendPAD(10,t)},this._onSend=t=>o(this,void 0,void 0,(function*(){if(!this.props.view)return;if(0!==this._prog)return;if(this.props.state.retStudents=0,this.isCreatedTeamscore=!1,this._prog=1,this.props.actions.setNavi(!1,!1),t){const t={msgtype:"retry",quizidx:this._curIdx};c.sendPAD(10,t),yield u.wait(1e3)}const e={msgtype:"quiz_send",quizidx:this._curIdx,time:this.props.state.timerSecond,isretry:t};c.sendPAD(10,e),this.props.actions.setQuizResultFnc(this._onQuizResult),this.props.actions.waitingForResult(this._waitingForResult),p.App.pub_reloadStudents(()=>o(this,void 0,void 0,(function*(){this.props.view&&1===this._prog&&(yield u.wait(600),this.props.view&&1===this._prog&&(this._prog=2,this._totalUsers=p.App.students?p.App.students.length:0))}))),0===this._curIdx&&(0===this.props.state.teamNum&&(this.countdowntype=Math.floor(3*Math.random()+1)),yield u.wait(600))})),this._onQuizResult=t=>{if(!this.props.view)return;if(this._curIdx<0)return;if(this.props.state.viewTeamScore||this.props.state.viewIndiRank)return;const e=JSON.parse(t.result),s=l.find(p.App.students,{id:e.studentid});if(!s)return;const i=this._submitStudents[this._curIdx].findIndex(t=>t.student.id===e.studentid);i>-1?(this._submitStudents[this._curIdx][i].correct=e.correct,this._submitStudents[this._curIdx][i].livePoint=e.livePoint,this._submitStudents[this._curIdx][i].point=e.point,this._submitStudents[this._curIdx][i].timebonus=e.timebonus):this._submitStudents[this._curIdx].push({student:s,correct:e.correct,trycnt:e.tryCnt,livePoint:e.livePoint,point:e.point,timebonus:e.timebonus})},this._waitingForResult=()=>o(this,void 0,void 0,(function*(){let t=0;for(this._viewAlert&&(this._viewAlert=!1),this.props.actions.setLoading(!0);;){if(yield u.wait(1e3),this._submitStudents[this._curIdx].length===this._totalUsers||t>4)return"team"===this.props.state.selection&&this.createTeamScore(),yield u.wait(400),"team"===this.props.state.selection?this.props.state.viewTeamScore=!0:this.props.state.viewIndiRank=!0,this.props.actions.setLoading(!1),!0;t++}})),this._onClose=()=>{},this.onTeamScore=()=>{p.App.pub_playBasicButton(),3===this._prog&&(this.props.state.viewTeamScore&&(this.props.state.viewTeamScore=!1),this._viewTotalResult=!0,this._viewTeamResult=!1,this._setNavi())},this._timeComplete=()=>o(this,void 0,void 0,(function*(){if(this._curIdx<0)return;this.props.state.retStudents=this._totalUsers,this.completeContent(),this.props.actions.setNavi(!0,!0),this._isEnd=!0;const t=this.props.actions.getData().quizs;this._curIdx===t.length-1&&(this._prog=3)})),this._onStart=()=>{},this._onResult=()=>{this.props.view&&3===this._prog&&(p.App.pub_playBtnTab(),"individual"===this.props.state.selection?this._veiwIndiResult=!0:"team"===this.props.state.selection&&(this._viewTotalResult=!0))},this._openPop=()=>{this._viewAlert=!0},this._restartQuiz=()=>{this.props.state.prog="selection",this.props.state.retStudents=0,c.sendPAD(0,null)},this.showSubmitList=t=>{this._viewSubmitList=!0,this._graphQidx=t},this.handlePostMessage=t=>{const e=t.data;"macontent"===e.from&&"submit"===e.type&&p.App.pub_playBasicButton()};const e=t.actions.getData().quizs;let s=[];s.push({name:"red",thumb:"/content/mathalive_lib/MA/warmup_quiz/teacher/images/team_char01.png",hearts:0,livePoint:0}),s.push({name:"green",thumb:"/content/mathalive_lib/MA/warmup_quiz/teacher/images/team_char02.png",hearts:0,livePoint:0}),s.push({name:"yellow",thumb:"/content/mathalive_lib/MA/warmup_quiz/teacher/images/team_char03.png",hearts:0,livePoint:0});for(let t=0;t<e.length;t++)this._submitStudents[t]=[],this._teamResult[t]=[],this._submittype.push("1");for(let t=0;t<3;t++){this._qteamsInfo[t]=[];for(let e=0;e<3;e++)this._qteamsInfo[t].push(s[e])}this._totalUsers=0}createTeamScore(){if(!(this._curIdx<0||this._curIdx>=this._submitStudents.length||this.isCreatedTeamscore)){for(let t=0;t<this.props.quizResult[this._curIdx].length;t++){const e=this.props.quizResult[this._curIdx][t];if("team"===this.props.state.selection){if(l.find(this.props.state.team1,{id:e.studentid})){this.props.state.teamsinfo[0].hearts++,this.props.state.teamsinfo[0].livePoint+=e.livePoint;const t=this._qteamsInfo[this._curIdx].findIndex(t=>t.name===this.props.state.teamsinfo[0].name);this._qteamsInfo[this._curIdx][t].livePoint+=e.livePoint}if(l.find(this.props.state.team2,{id:e.studentid})){this.props.state.teamsinfo[1].hearts++,this.props.state.teamsinfo[1].livePoint+=e.livePoint;const t=this._qteamsInfo[this._curIdx].findIndex(t=>t.name===this.props.state.teamsinfo[1].name);this._qteamsInfo[this._curIdx][t].livePoint+=e.livePoint}if(l.find(this.props.state.team3,{id:e.studentid})){this.props.state.teamsinfo[2].hearts++,this.props.state.teamsinfo[2].livePoint+=e.livePoint;const t=this._qteamsInfo[this._curIdx].findIndex(t=>t.name===this.props.state.teamsinfo[2].name);this._qteamsInfo[this._curIdx][t].livePoint+=e.livePoint}}}this.isCreatedTeamscore=!0}}_setNavi(){if("warmupquiz"!==this.props.state.prog)return;const t=this.props.actions.getData().quizs.length;this.props.actions.setNaviView(!0),this.props.actions.setNaviFnc(()=>{c.hidePenTool(),0===this._curIdx?this.props.actions.gotoDirection():this._curIdx>0&&((this._veiwIndiResult||this._viewTotalResult)&&this._curIdx===t-1?(this._veiwIndiResult=!1,this._viewTotalResult=!1,this.viewconfetti=!1,this.viewfirework=!1,(this.props.state.viewIndiRank||this.props.state.viewTeamScore)&&(this.props.state.viewIndiRank=!1,this.props.state.viewTeamScore=!1)):(--this._curIdx,(this.props.state.viewIndiRank||this.props.state.viewTeamScore)&&(this.props.state.viewIndiRank=!1,this.props.state.viewTeamScore=!1)))},()=>{if(c.hidePenTool(),this._curIdx<t-1)3!==this._prog?((this.props.state.viewIndiRank||this.props.state.viewTeamScore)&&(this.props.state.viewIndiRank=!1,this.props.state.viewTeamScore=!1),this.nextQuiz()):3===this._prog&&this._curIdx++;else if(this._curIdx>=t-1){if(this._veiwIndiResult||this._viewTotalResult){const t={msgtype:"end_page"};c.sendPAD(10,t),l.delay(()=>{this.props.actions.gotoNextBook()},400)}"individual"===this.props.state.selection?this._veiwIndiResult=!0:"team"===this.props.state.selection&&(this._viewTotalResult=!0)}})}startTimer(){this._timerState&&(this._viewTimer||(this._viewTimer=!0),this._timerState.reset(),this._timerState.start(),this.initContent())}componentDidMount(){window.addEventListener("message",this.handlePostMessage,!1)}componentWillUnmount(){window.removeEventListener("message",this.handlePostMessage,!1)}sendPostMessage(t,e,s){const i={from:"matemplate",to:"macontent",type:t,msg:e};s>-1&&this.ifr[s]&&this.ifr[s].contentWindow.postMessage(i,"*")}completeContent(){let t=[];for(let e=0;e<this.props.quizResult[this._curIdx].length;e++)if(0===e)t.push({choicedIdx:this.props.quizResult[this._curIdx][e].choicedIdx,users:1});else{const s=l.findIndex(t,{choicedIdx:this.props.quizResult[this._curIdx][e].choicedIdx});s>-1?t[s].users+=1:t.push({choicedIdx:this.props.quizResult[this._curIdx][e].choicedIdx,users:1})}const e=this.props.actions.getData().quizs;let s={idx:this._curIdx,isTeacher:!0,content:e[this._curIdx],choicedusers:t};this.sendPostMessage("completed",s,this._curIdx)}initContent(){if(this._curIdx<0)return;const t=this.props.actions.getData().quizs;if(this._curIdx<t.length){let e={idx:this._curIdx,quizmode:"quiz",isTeacher:!0,content:t[this._curIdx]};this.sendPostMessage("init",e,this._curIdx)}}initContentAll(){const t=this.props.actions.getData().quizs;for(let e=0;e<t.length;e++){let s={idx:e,quizmode:"quiz",isTeacher:!0,content:t[e]};this.sendPostMessage("init",s,e)}}completeContentAll(){const t=this.props.actions.getData().quizs;for(let e=0;e<t.length;e++){let s={idx:e,quizmode:"quiz",isTeacher:!0,content:t[e]};this.sendPostMessage("completed",s,e)}}componentDidUpdate(t){return o(this,void 0,void 0,(function*(){if(this.props.view&&!t.view){this._curIdx=0,this.props.state.retStudents=0,this.isCreatedTeamscore=!1,this._prog=0,this.props.state.quizProg=0,this._isEnd=!1;const t=this.props.actions.getData().quizs;for(let e=0;e<t.length;e++)if(this._submitStudents[e]=[],this._teamResult[e]=[],this.props.state.teamNum>0)for(let t=0;t<this.props.state.teamNum;t++)this._teamResult[e].push(0);this._viewNextButton=!1,this.props.state.viewIndiRank=!1,this._veiwIndiResult=!1,this.props.state.viewTeamScore=!1,this._viewTeamResult=!1,this._viewTotalResult=!1,this._viewSubmitList=!1,this.viewconfetti=!1,this.viewfirework=!1,this.props.actions.setQuizResultFnc(null),this.props.actions.waitingForResult(null),this._onSend(!1),0===this._curIdx&&(p.App.pub_stop(),this._timerState.setMax(this.props.state.timerSecond),this._viewTimer=!0,this.startTimer())}else if(!this.props.view&&t.view){this._curIdx=0,this.props.state.retStudents=0,this.isCreatedTeamscore=!1,this._prog=0,this.props.state.quizProg=0,this._isEnd=!1,this._totalUsers=0;const t=this.props.actions.getData().quizs;for(let e=0;e<t.length;e++){this._submitStudents[e]=[],this._teamResult[e]=[],this._submittype[e]="1",this.props.state.teamsprevinfo[e]=[];for(let t=0;t<3;t++)this.props.state.teamsprevinfo[e].push(0);if(this.props.state.teamNum>0)for(let t=0;t<this.props.state.teamNum;t++)this._teamResult[e].push(0)}this._viewNextButton=!1,this.props.state.viewIndiRank=!1,this._veiwIndiResult=!1,this.props.state.viewTeamScore=!1,this._viewTeamResult=!1,this._viewTotalResult=!1,this._viewSubmitList=!1,this._viewTimer=!1,this.viewconfetti=!1,this.viewfirework=!1,this.props.actions.setQuizResultFnc(null),this.props.actions.waitingForResult(null),p.App.pub_stop()}3===this.props.quizProg&&0===t.quizProg&&(this._viewTimer=!1,this.viewconfetti=!0,this.viewfirework=!0,"individual"===this.props.state.selection&&l.delay(()=>{this.viewconfetti=!1},3100)),this.props.view&&this._setNavi()}))}render(){const{view:t,state:e,actions:s,teamNum:i}=this.props,o=this.props.actions.getData().quizs;return n.createElement("div",{className:"t_warmup_quiz",style:{display:t?void 0:"none"}},n.createElement("div",{className:"warmupContent"},n.createElement("div",{className:"topHeader"},n.createElement("div",{className:"page teacher"},o.map((t,e)=>n.createElement("div",{key:"page"+e,className:"num "+(this._curIdx!==e||this._veiwIndiResult||this._viewTotalResult?"":"on"),onClick:this.onPage.bind(this,e)},n.createElement("span",{className:"text"+(this._curIdx!==e&&3===this.props.quizProg||this._veiwIndiResult||this._viewTotalResult?" end":"")},"Q",e+1))),n.createElement("div",{className:"num result"+(this._veiwIndiResult||this._viewTotalResult?" on":""),onClick:this._onResult},n.createElement("span",{className:"text"+(3===this.props.quizProg?" end":"")},"Result"))),n.createElement("div",{className:"timer teacher"},n.createElement(d.Timer,{state:this._timerState,view:this._viewTimer&&!(this._veiwIndiResult||this._viewTotalResult),onComplete:this._timeComplete,onStart:this._onStart}))),n.createElement("div",{className:"quizContent"},n.createElement("div",{id:"contentWrap",className:"contentWrap",style:{display:this._veiwIndiResult||this.props.state.viewIndiRank||this._viewTeamResult?"none":""}},o.map((t,e)=>n.createElement("iframe",{key:e,src:p.App.data_url+t.url+"?idx="+e,style:{display:this._curIdx===e?void 0:"none"},ref:t=>{t&&(this.ifr[e]=t)}})))),n.createElement("div",{className:"quizContent"},n.createElement("div",{id:"contentWrap",className:"contentWrap"},n.createElement(f.default,{view:this._veiwIndiResult&&"individual"===this.props.state.selection,submitStudent:this._submitStudents,onIndiResult:this._onIndiResult,showSubmitList:this.showSubmitList}),n.createElement(v.default,{view:this.props.state.viewIndiRank,submitStudent:this._submitStudents}),n.createElement(g.ResultRankingPopup,{view:!1,onClose:this._onClose}))),n.createElement(_.default,{view:this._viewTotalResult&&"team"===this.props.state.selection,teamnum:e.teamNum,totalusers:this._totalUsers,results:e.quizResult,teamInfo:e.teamsinfo,onChoosePage:this.onChoosePage,onTeamResult:this._onTeamResult,showSubmitList:this.showSubmitList,isviewfirewalk:this.viewfirework}),n.createElement("img",{className:"confetti_set",style:{display:this.viewconfetti&&"individual"===this.props.state.selection?"":"none"}})),n.createElement(m.TeamScore,{view:this.props.state.viewTeamScore&&"team"===this.props.state.selection,idx:this._curIdx,final:this._curIdx===o.length-1,state:e,viewTeamResult:this._viewTeamResult,teamInfo:l.cloneDeep(this.props.teamsInfo),onNext:this.nextQuiz,onClose:this.onTeamScore}),n.createElement(b.BtnProgress,{view:this._prog>0||3===this.props.quizProg,isEnd:this._isEnd,totalStudents:this._totalUsers,submitStudents:this.props.retStudents,onClick:3===this.props.quizProg?this._restartQuiz:this._openPop}),n.createElement(y.AlertPopup,{view:this._viewAlert,onClose:this._offAlertPop,onOk:this._isEnd?this._retry:this._onStopQuiz,msg:this._isEnd?"Retry?":"Force Quit?"}),n.createElement(h.MASubmitUserList,{view:this._viewSubmitList,mode:4,quizIdx:this._graphQidx,type:this._submittype[this._graphQidx],submitusers:this._submitStudents[this._graphQidx]?this._submitStudents[this._graphQidx]:[],onClose:this.onCloseSubmitList,isNoNum:!1,onType:this._onType}))}};i([r.observable],w.prototype,"_curIdx",void 0),i([r.observable],w.prototype,"_prog",void 0),i([r.observable],w.prototype,"_viewAlert",void 0),i([r.observable],w.prototype,"_viewTimer",void 0),i([r.observable],w.prototype,"_viewNextButton",void 0),i([r.observable],w.prototype,"_isEnd",void 0),i([r.observable],w.prototype,"_submitStudents",void 0),i([r.observable],w.prototype,"_teamResult",void 0),i([r.observable],w.prototype,"_viewSubmitList",void 0),i([r.observable],w.prototype,"_viewTeamResult",void 0),i([r.observable],w.prototype,"_viewTotalResult",void 0),i([r.observable],w.prototype,"_veiwIndiResult",void 0),i([r.observable],w.prototype,"_qteamsInfo",void 0),i([r.observable],w.prototype,"_submittype",void 0),i([r.observable],w.prototype,"viewconfetti",void 0),i([r.observable],w.prototype,"viewfirework",void 0),i([r.observable],w.prototype,"_graphQidx",void 0),i([r.observable],w.prototype,"_totalUsers",void 0),w=i([a.observer],w),e.default=w},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.CountDown2=e.Timer=e.TimerState=void 0;const o=s(0),n=s(1),a=s(2),r=s(4),l=s(3),p=s(26);var c;!function(t){t[t.INIT=0]="INIT",t[t.RUNNING=1]="RUNNING",t[t.PAUSE=2]="PAUSE",t[t.END=3]="END"}(c||(c={}));class u{constructor(t){this.m_runState=0,this.m_max=60,this.m_playSound=!0,this.start=()=>{this.m_runState=1},this.reset=()=>{this.m_runState=0},this.pause=()=>{this.m_runState=2},this.end=()=>{this.m_runState=3},this.m_max=t}get runState(){return this.m_runState}get isRunning(){return 1===this.m_runState}get max(){return this.m_max}get playSound(){return this.m_playSound}setPlaySound(t){this.m_playSound=t}setMax(t){this.m_max=t}}function d(t,e,s,i){let o=(i-90)*Math.PI/180;return{x:t+s*Math.cos(o),y:e+s*Math.sin(o)}}function h(t,e,s,i,o){let n={d:"",p:{x:0,y:0}};if(o-i>=360)n.d=["M",t,e,"m",-s,0,"a",s,s,0,"1",0,2*s,0,"a",s,s,0,"1",0,2*-s,0].join(" ");else{let a=o-i<=180?"0":"1",r=d(t,e,s,o),l=d(t,e,s,i);(function(t,e,s,i){Math.cos(i),Math.sin(i)})(t,e,s,i);n.d=["M",r.x,r.y,"A",s,s,0,a,0,l.x,l.y].join(" "),n.p.x=r.x,n.p.y=r.y}return n}i([n.observable],u.prototype,"m_runState",void 0),i([n.computed],u.prototype,"runState",null),i([n.observable],u.prototype,"m_max",void 0),i([n.computed],u.prototype,"max",null),i([n.action],u.prototype,"start",void 0),i([n.action],u.prototype,"reset",void 0),i([n.action],u.prototype,"pause",void 0),i([n.action],u.prototype,"end",void 0),e.TimerState=u;let m=class extends o.Component{constructor(t){super(t),this.m_runState=0,this.m_sec=0,this.m_stime=0,this.m_text="",this.m_d="",this.m_px=30,this.m_py=6,this.m_progress=0,this.m_initmax=0,this._start=()=>{this.m_sec=this.props.state.max,this.props.isAssessment?this.m_text=Math.ceil(this.m_sec/60)+"":this.m_text=this._getTime(this.m_sec),this.props.state.max>0&&0===this.m_initmax&&(this.m_initmax=this.props.state.max),this.m_d="",this.m_px=30,this.m_py=6,this.m_stime=Date.now(),this._run(0),this.props.onStart&&this.props.onStart(),l.App.pub_playTimerClock()},this._run=t=>{if(!this.props||1!==this.m_runState)return;const e=this.props.state.max,s=Date.now()-this.m_stime,i=e-Math.floor(s/1e3);if(this.m_sec!==i&&(this.props.getTime||(this.props.isAssessment?this.m_text=Math.ceil(i/60)+"":this.m_text=this._getTime(i)),0===i?this.props.state.playSound&&l.App.pub_playDingend():i<5?this.props.state.playSound&&l.App.pub_playDing():i>=5&&i<=10&&this.props.state.playSound&&l.App.pub_playClock()),this.m_sec=i,i>0)this._drawArc(s),window.requestAnimationFrame(this._run),this.props.isAssessment&&this.progresTimer(i);else{let t;this._drawArc.cancel(),t=h(10,10,37,0,1),this.m_d=t.d,this.m_px=t.p.x,this.m_py=t.p.y,this.props.onComplete(),l.App.pub_stopTimerClock(),l.App.pub_playTimerEnd()}},this.progresTimer=t=>{let e=100-Math.floor(100*t/this.m_initmax);this.m_progress!==e&&(this.m_progress=e)},this.m_text=this._getTime(this.props.state.max),this.m_d="",this.m_px=30,this.m_py=6,n.autorun(()=>{if(!this.props)return;const t=this.props.state,e=t.max;if(1===t.runState&&1!==this.m_runState)this.m_runState=1,this._start();else if(0===t.runState)this.m_text=this._getTime(e),this.m_d="",this.m_px=30,this.m_py=6;else if(3===t.runState){this._drawArc.cancel();let t=h(10,10,37,0,1);this.m_d=t.d,this.m_px=t.p.x,this.m_py=t.p.y}else 2===t.runState&&(l.App.pub_stopTimerClock(),l.App.pub_playTimerEnd());this.m_runState=t.runState}),this._drawArc=r.throttle(t=>{if(!this.props||1!==this.m_runState)return;const e=1e3*this.props.state.max;let s,i=0;if(this.m_sec<=5){const e=t%1e3;i=0===t?0:0===e?1:e/1e3}else i=t/e;i*=360,s=h(10,10,37,0,i),this.m_d=s.d,this.m_px=s.p.x,this.m_py=s.p.y},50,{trailing:!0})}_getTime(t){Math.floor(t/60);let e=t%60;if(this.props.isFullSec&&(e=t),e>99){const t=document.getElementsByClassName("timer")[0];if(t){const e=t.getElementsByClassName("m_text")[0];e&&(e.style.fontSize="30px",e.style.paddingTop="50px")}}else{const t=document.getElementsByClassName("timer")[0];if(t){const e=t.getElementsByClassName("m_text")[0];e&&(e.style.fontSize="38px",e.style.paddingTop="48px")}}let s="";return s+=e,s}getCurrentSec(){return this.m_sec}setInitMax(t){this.m_initmax=t}setProgress(t){this.m_progress=t}render(){if(this.props.isAssessment){let t=this.m_sec<=300&&this.m_sec>297;this.m_progress;return o.createElement("div",{className:"q_timer assess"+(t?" swing":""),hidden:!this.props.view,style:{zIndex:this.props.isBonus?21:20}},o.createElement("div",{className:"watch"}),o.createElement(p.ProgressCircle,{watch:{text:this.m_text,progress:this.m_progress},paint:null}),o.createElement("div",{className:"minute"},"Minute"),o.createElement("div",{className:"alert_notice"+(t?" show":"")},o.createElement("strong",null,"5 minutes")," remaining."))}{const{livePoint:t,isTeam:e}=this.props;this.m_sec;const s=this.props.livePoint?this.props.livePoint:0;let i=Math.floor(s/40*100);return i>100&&(i=100),o.createElement("div",{className:"q_timer",hidden:!this.props.view,style:{zIndex:this.props.isBonus?21:20}},o.createElement("div",{className:"watch"}),o.createElement(p.ProgressCircle,{watch:null,paint:{arcWH:20,px:this.m_px,py:this.m_py,r:6,d:this.m_d,fill:"#aa41f5"}}),o.createElement("div",{className:"m_text"},this.m_text),o.createElement("div",{className:"live_guage"+(e?"":" individual")},o.createElement("span",{className:"ico_heart"}),o.createElement("div",{className:"bar_wrap"},o.createElement("div",{className:"bar",style:{width:i+"%"}}),o.createElement("div",{className:"text "+(this.props.livePoint&&this.props.livePoint>40?"overmax":""),"data-value":this.props.livePoint},this.props.livePoint)),o.createElement("div",{className:"team_name "+this.props.teamName,style:{display:this.props.isTeam?"":"none"}})))}}};i([n.observable],m.prototype,"m_text",void 0),i([n.observable],m.prototype,"m_d",void 0),i([n.observable],m.prototype,"m_px",void 0),i([n.observable],m.prototype,"m_py",void 0),i([n.observable],m.prototype,"m_progress",void 0),i([n.observable],m.prototype,"m_initmax",void 0),m=i([a.observer],m),e.Timer=m;const _=-.5*Math.PI;let v=class extends o.Component{constructor(t){super(t),this.m_runState=0,this.m_sec=0,this.m_text="",this.m_stime=0,this.m_r=0,this.m_view=!1,this._start=()=>{this.m_sec=this.props.state.max,this.m_stime=Date.now(),this._run(0),this.props.onStart&&this.props.onStart()},this._run=t=>{if(!this.props||1!==this.m_runState)return;const e=Date.now()-this.m_stime,s=this.props.state.max-Math.floor(e/1e3);this.m_sec!==s&&(this.m_sec=s,this.m_text=this.m_sec.toString(),0===s?(this.props.state.playSound&&l.App.pub_playDingend(),this.m_text="start",this.props.onComplete()):s<=5&&this.props.state.playSound&&l.App.pub_playDing()),s>0&&window.requestAnimationFrame(this._run)},this._refCanvas=t=>{!this.m_canvas&&t&&(this.m_canvas=t,this.m_r=t.width/2,this.m_ctx=t.getContext("2d"))},this._onTransEnd=()=>{this.props.view||(this.m_view=!1)},this.m_sec=this.props.state.max,this.m_view=t.view,n.autorun(()=>{if(!this.props)return;const t=this.props.state;if(1===t.runState&&1!==this.m_runState)this.m_runState=1,this._start();else if(0===t.runState&&0!==this.m_runState&&(this.m_sec=t.max,this.m_ctx)){const t=this.m_r;this.m_ctx.clearRect(0,0,2*t,2*t)}this.m_runState=t.runState}),this._drawArc=r.throttle(t=>{if(!this.m_canvas||!this.props||1!==this.m_runState)return;const e=2*Math.PI*t/1e3,s=this.m_r;this.m_ctx.clearRect(0,0,2*s,2*s),this.m_ctx.beginPath(),this.m_ctx.fillStyle="#5538EB",this.m_ctx.moveTo(s,s),this.m_ctx.arc(s,s,s,_,e+_),this.m_ctx.fill()},50)}componentDidUpdate(t){t.view!==this.props.view&&this.props.view&&(this.m_view=!0)}render(){return o.createElement("div",{className:"countdown2 "+(this.m_view?"":"hide")},o.createElement("div",{className:"countdown "+(this.props.view?"view":"hide"),onTransitionEnd:this._onTransEnd},o.createElement("div",{className:"start"},o.createElement("div",{className:"text"},this.m_text))))}};i([n.observable],v.prototype,"m_sec",void 0),i([n.observable],v.prototype,"m_text",void 0),i([n.observable],v.prototype,"m_view",void 0),v=i([a.observer],v),e.CountDown2=v},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProgressCircle=e._dArc=e._cToP=e._pToC=void 0;const i=s(0);e._pToC=(t,e,s,i)=>{let o=(i-90)*Math.PI/180;return{x:t+s*Math.cos(o),y:e+s*Math.sin(o)}},e._cToP=(t,e,s,i)=>({x:t+s*Math.cos(i),y:e+s*Math.sin(i)}),e._dArc=(t,s,i,o,n,a)=>{let r={d:"",p:{x:0,y:0}};if(i-=a/2,n-o>=360)r.d=["M",t,s,"m",-i,0,"a",i,i,0,"1",0,2*i,0,"a",i,i,0,"1",0,2*-i,0].join(" ");else{let a=n-o<=180?"0":"1",l=e._pToC(t,s,i,n),p=e._pToC(t,s,i,o);e._cToP(t,s,i,o);r.d=["M",l.x,l.y,"A",i,i,0,a,0,p.x,p.y].join(" "),r.p.x=l.x,r.p.y=l.y}return r};class o extends i.Component{constructor(t){super(t),this._drawArc=t=>{if(void 0!==t&&null!==this.props.paint){const s=this.props.paint.arcWH/2,i=this.props.paint.arcWH/2;let o,n=t/100;n*=360,o=e._dArc(i,i,s,0,n,this.props.paint.strokeWidth?this.props.paint.strokeWidth:0),this.setState({d:o.d,px:o.p.x,py:o.p.y})}},this.state={d:"",px:0,py:0}}componentWillReceiveProps(t){null===t.paint||this.state.d===t.paint.d&&this.state.py===t.paint.py&&this.state.px===t.paint.px||(this.setState({d:t.paint.d,px:t.paint.px,py:t.paint.py}),this._drawArc(t.percent)),this.props.percent!==t.percent&&this._drawArc(t.percent)}componentDidMount(){null!==this.props.paint&&(this.setState({d:this.props.paint.d,px:this.props.paint.px,py:this.props.paint.py}),this._drawArc(this.props.percent))}render(){if(null!==this.props.paint){const{arcWH:t,d:e,px:s,py:o,r:n,fill:a,fillsize:r}=this.props.paint,l=a.length>10?"url(#pattern)":a;return i.createElement(i.Fragment,null,i.createElement("svg",{id:"findsvg",style:{overflow:"visible"},width:t,height:t,viewBox:"0 0 "+t+" "+t},i.createElement("path",{strokeLinecap:this.props.paint.lineCarving?"butt":"round",strokeWidth:this.props.paint.strokeWidth?this.props.paint.strokeWidth:5,stroke:l,fill:"none",d:this.state.d+""}),i.createElement("circle",{className:"circle",cx:0===this.state.px?t/2:this.state.px,cy:this.state.py,r:n,fill:l}),this.props.zeropoint?i.createElement("circle",{className:"circle",cx:t/2,cy:1,r:n,fill:l}):"",i.createElement("pattern",{id:"pattern",patternUnits:"userSpaceOnUse",x:0-n,y:0-n,width:r?r+2*n:100,height:r?r+2*n:100},i.createElement("image",{xlinkHref:this.props.paint.fill,x:0,y:0,width:r?r+2*n:100,height:r?r+2*n:100}))),this.props.children?this.props.children:"")}return null!==this.props.watch?i.createElement(i.Fragment,null,i.createElement("div",{className:"circle"},i.createElement("div",{className:"progress-circle progress-"+this.props.watch.progress}),i.createElement("div",{className:"m_text"},this.props.watch.text)),this.props.children?this.props.children:""):i.createElement(i.Fragment,null)}}e.ProgressCircle=o},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.MASubmitUsers=e.MASubmitUserList=void 0;const o=s(0),n=s(1),a=s(2),r=s(3),l=s(4),p=s(9).default;let c=class extends o.Component{constructor(t){super(t),this.allStudents=[],this.heartTwoStudents=[],this.heartOneStudents=[],this.wrongStudents=[],this.notsubmitUsers=[],this.submitusersCnt=0,this._soption={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},this._refSwiper=t=>{!this._swiper&&t&&(this._swiper=t.swiper)},this.clickTab=(t,e)=>{switch(this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0)),l.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0))},300),t){case"1":if(this.heartTwoStudents.length<1)return;break;case"2":if(this.heartOneStudents.length<1)return;break;case"3":if(this.wrongStudents.length<1)return;break;case"4":if(this.notsubmitUsers.length<1)return}r.App.pub_playBtnTab(),this.props.onType&&this.props.onType(t,e)}}componentDidUpdate(t){if(this.props.view&&!t.view){for(this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0)),l.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0))},300),r.App.students&&(this.allStudents=r.App.students);this.heartTwoStudents.length>0;)this.heartTwoStudents.pop();for(;this.heartOneStudents.length>0;)this.heartOneStudents.pop();for(;this.wrongStudents.length>0;)this.wrongStudents.pop();for(;this.notsubmitUsers.length>0;)this.notsubmitUsers.pop();this.props.isAssessment?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let s=this.props.submitusers.find(e=>e.student.id===t.id);s?this.heartTwoStudents.push(s.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:3===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let s=this.props.submitusers.find(e=>e.student.id===t.id);s&&0!==s.trycnt?s.correct?1===s.trycnt?this.heartTwoStudents.push(s.student):this.heartOneStudents.push(s.student):this.wrongStudents.push(s.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:2===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let s=this.props.submitusers.find(e=>e.student.id===t.id);s?s.correct?this.heartOneStudents.push(s.student):this.wrongStudents.push(s.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:4===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let s=this.props.submitusers.find(e=>e.student.id===t.id);s&&0!==s.trycnt?s.correct?1===s.trycnt&&this.heartTwoStudents.push(s.student):this.wrongStudents.push(s.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:this.props.submitusers.length>0?this.allStudents.map((t,e)=>{this.props.submitusers.find(e=>e.student.id===t.id)||this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents,this.submitusersCnt=this.props.submitusers.length,this.props.isStrategy&&this.props.onType&&(this.heartTwoStudents.length>0?this.props.onType("1",this.props.quizIdx):this.heartOneStudents.length>0?this.props.onType("2",this.props.quizIdx):this.wrongStudents.length>0?this.props.onType("3",this.props.quizIdx):this.notsubmitUsers.length>0&&this.props.onType("4",this.props.quizIdx)),this.heartTwoStudents.length>0?this.clickTab("1",this.props.quizIdx):this.heartOneStudents.length>0?this.clickTab("2",this.props.quizIdx):this.wrongStudents.length>0?this.clickTab("3",this.props.quizIdx):this.notsubmitUsers.length>0&&this.clickTab("4",this.props.quizIdx)}else if(this.props.view&&t.view&&this.props.submitusers.length!==this.submitusersCnt){for(this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0)),l.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0))},300),r.App.students&&(this.allStudents=r.App.students);this.heartTwoStudents.length>0;)this.heartTwoStudents.pop();for(;this.heartOneStudents.length>0;)this.heartOneStudents.pop();for(;this.wrongStudents.length>0;)this.wrongStudents.pop();for(;this.notsubmitUsers.length>0;)this.notsubmitUsers.pop();this.props.isAssessment?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let s=this.props.submitusers.find(e=>e.student.id===t.id);s?this.heartTwoStudents.push(s.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:3===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let s=this.props.submitusers.find(e=>e.student.id===t.id);s&&0!==s.trycnt?s.correct?1===s.trycnt?this.heartTwoStudents.push(s.student):this.heartOneStudents.push(s.student):this.wrongStudents.push(s.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:2===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let s=this.props.submitusers.find(e=>e.student.id===t.id);s?s.correct?this.heartOneStudents.push(s.student):this.wrongStudents.push(s.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:4===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let s=this.props.submitusers.find(e=>e.student.id===t.id);s&&0!==s.trycnt?s.correct?1===s.trycnt&&this.heartTwoStudents.push(s.student):this.wrongStudents.push(s.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:this.props.submitusers.length>0?this.allStudents.map((t,e)=>{this.props.submitusers.find(e=>e.student.id===t.id)||this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents,this.submitusersCnt=this.props.submitusers.length,this.props.isStrategy&&this.props.onType&&(this.heartTwoStudents.length>0?this.props.onType("1",this.props.quizIdx):this.heartOneStudents.length>0?this.props.onType("2",this.props.quizIdx):this.wrongStudents.length>0?this.props.onType("3",this.props.quizIdx):this.notsubmitUsers.length>0&&this.props.onType("4",this.props.quizIdx))}}render(){const{view:t,onClose:e,isNoNum:s,isAssessment:i,quizIdx:n,isStrategy:a,submitusers:r}=this.props;let l="";return s&&(l+=" nonum"),i&&(l+=" assessment"),o.createElement(o.Fragment,null,o.createElement("div",{className:"submituserlist_bg"+(t?" show":"")}),o.createElement("div",{className:"submituserlist"+(t?" show":"")+l},o.createElement("div",{className:"header"},o.createElement("div",{className:"quiz_tit"},"Q"+(n+1)),o.createElement("div",{className:"score_set"},o.createElement("ul",null,o.createElement("li",{className:"type01"+("1"===this.props.type?" arrow":"")+(this.heartTwoStudents.length>0?" on":""),style:{cursor:this.heartTwoStudents.length>0?"pointer":"default"},onClick:this.clickTab.bind(this,"1",n)},this.heartTwoStudents.length),this.props.mode<4&&o.createElement("li",{className:"type02"+("2"===this.props.type?" arrow":"")+(this.heartOneStudents.length>0?" on":""),style:{cursor:this.heartOneStudents.length>0?"pointer":"default"},onClick:this.clickTab.bind(this,"2",n)},this.heartOneStudents.length),o.createElement("li",{className:"type03"+("3"===this.props.type?" arrow":"")+(this.wrongStudents.length>0?" on":""),style:{cursor:this.wrongStudents.length>0?"pointer":"default"},onClick:this.clickTab.bind(this,"3",n)},this.wrongStudents.length),o.createElement("li",{className:"type04"+("4"===this.props.type?" arrow":"")+(this.notsubmitUsers.length>0?" on":""),style:{cursor:this.notsubmitUsers.length>0?"pointer":"default"},onClick:this.clickTab.bind(this,"4",n)},this.notsubmitUsers.length))),o.createElement("div",{className:"submitter"},"Submitter",o.createElement("span",null,o.createElement("strong",null,this.heartTwoStudents.length)," / ",this.allStudents.length)),o.createElement("button",{className:"btn_close",onClick:e})),o.createElement("div",{className:"list_box"},o.createElement("div",{className:"innerbox"},o.createElement(p,Object.assign({},this._soption,{ref:this._refSwiper}),o.createElement("div",{className:"inner"},o.createElement("ul",null,"1"===this.props.type&&this.heartTwoStudents.map((t,e)=>{const s="2"===t.displayMode&&t.nickname?t.nickname:t.name,i="2"===t.displayMode?t.avatar:t.thumb;return o.createElement("li",{key:e},""===i&&o.createElement("div",{className:"F"===t.gender?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,s.substring(0,2).toUpperCase())),""!==i&&o.createElement("img",{src:i}),o.createElement("span",{className:"name"},s))}),"2"===this.props.type&&this.heartOneStudents.map((t,e)=>{const s="2"===t.displayMode&&t.nickname?t.nickname:t.name,i="2"===t.displayMode?t.avatar:t.thumb;return o.createElement("li",{key:e},""===i&&o.createElement("div",{className:"F"===t.gender?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,s.substring(0,2).toUpperCase())),""!==i&&o.createElement("img",{src:i}),o.createElement("span",{className:"name"},s))}),"3"===this.props.type&&this.wrongStudents.map((t,e)=>{const s="2"===t.displayMode&&t.nickname?t.nickname:t.name,i="2"===t.displayMode?t.avatar:t.thumb;return o.createElement("li",{key:e},""===i&&o.createElement("div",{className:"F"===t.gender?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,s.substring(0,2).toUpperCase())),""!==i&&o.createElement("img",{src:i}),o.createElement("span",{className:"name"},s))}),"4"===this.props.type&&this.notsubmitUsers.map((t,e)=>{const s="2"===t.displayMode&&t.nickname?t.nickname:t.name,i="2"===t.displayMode?t.avatar:t.thumb;return o.createElement("li",{key:e},""===i&&o.createElement("div",{className:"F"===t.gender?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,s.substring(0,2).toUpperCase())),""!==i&&o.createElement("img",{src:i}),o.createElement("span",{className:"name"},s))}))))))))}};i([n.observable],c.prototype,"allStudents",void 0),i([n.observable],c.prototype,"heartTwoStudents",void 0),i([n.observable],c.prototype,"heartOneStudents",void 0),i([n.observable],c.prototype,"wrongStudents",void 0),i([n.observable],c.prototype,"notsubmitUsers",void 0),i([n.observable],c.prototype,"submitusersCnt",void 0),c=i([a.observer],c),e.MASubmitUserList=c;let u=class extends o.Component{constructor(t){super(t)}render(){const{view:t,submitusers:e,totalusers:s,onClick:i}=this.props;return o.createElement("div",{className:"submitusers"+(t?"":" hide"),onClick:i||void 0},e," / ",s)}};u=i([a.observer],u),e.MASubmitUsers=u},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.TeamScore=void 0;const o=s(0),n=s(1),a=s(2),r=s(3),l=s(4);let p=class extends o.Component{constructor(t){super(t),this.teamGrade=[],this.move=!1,this.viewTeamResult=!1,this.sumOfTeams=[],this.sorted=[],this.rank=[],this.rank1=[],this.rank2=[],this.rank3=[],this.onNext=()=>{this.props.viewTeamResult||(r.App.pub_playBasicButton(),this.props.final&&!this.viewTeamResult?this.viewTeamResult=!0:this.props.onNext())},this.onClose=()=>{this.props.viewTeamResult&&this.props.onClose()}}componentWillReceiveProps(t){if(t.teamInfo&&t.teamInfo.length>0){for(;this.sorted.length>0;)this.sorted.pop();for(;this.rank.length>0;)this.rank.pop();for(;this.rank1.length>0;)this.rank1.pop();for(;this.rank2.length>0;)this.rank2.pop();for(;this.rank3.length>0;)this.rank3.pop();this.sorted=t.teamInfo.slice().sort((function(t,e){return e.livePoint-t.livePoint})),this.rank=t.teamInfo.map((t,e)=>({name:t.name,livePoint:t.livePoint,thumb:t.thumb,hearts:t.hearts,lank:this.sorted.indexOf(t)+1}))}}componentDidUpdate(t){this.props.view&&!t.view||!this.props.view&&t.view&&(this.move=!1,this.viewTeamResult=!1)}render(){const{view:t,final:e}=this.props,s=l.orderBy(this.rank,"lank");return o.createElement("div",{className:"team_score",style:{display:t?"":"none"}},o.createElement("div",{className:"scoreContainer"},o.createElement("div",{className:"title"},"Team Ranking"),o.createElement("div",{className:"graphWrap"},o.createElement("div",{className:"firework",style:{display:e&&this.viewTeamResult?"block":"none"}}),o.createElement("div",{className:"team_list"},s.map((t,e)=>{let s,i;const n=t.livePoint?t.livePoint:0;let a=Math.floor(n/3);return a>100&&(a=100),"red"===t.name?s="type01":"yellow"===t.name?s="type02":"green"===t.name&&(s="type03"),1===t.lank?i="gold":2===t.lank?i="silver":3===t.lank&&(i="bronze"),o.createElement("div",{className:"team",key:e,style:{display:t.hearts?"":"none"}},o.createElement("div",{className:"medal "+i},t.name),o.createElement("div",{className:"barWrap"},o.createElement("span",{className:"bar "+s,style:{width:a+"%"}},o.createElement("div",{className:"num"},t.livePoint))))})))))}};i([n.observable],p.prototype,"move",void 0),i([n.observable],p.prototype,"viewTeamResult",void 0),i([n.observable],p.prototype,"sorted",void 0),i([n.observable],p.prototype,"rank",void 0),i([n.observable],p.prototype,"rank1",void 0),i([n.observable],p.prototype,"rank2",void 0),i([n.observable],p.prototype,"rank3",void 0),p=i([a.observer],p),e.TeamScore=p,e.default=p},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.TotalResult=void 0;const o=s(0),n=s(1),a=s(2),r=s(3),l=s(4);let p=class extends o.Component{constructor(t){super(t),this.q1Students=[],this.q2Students=[],this.q3Students=[],this.grade=[],this.maxpercent=0,this.move=!1,this.sorted=[],this.rank=[],this.totalresult_played=!1,this.rank1=[],this.rank2=[],this.rank3=[],this.ranks=[],this.onChoosePage=t=>{r.App.pub_playBasicButton(),this.props.onChoosePage(t)},this.onClickGraph=t=>{r.App.pub_playBtnTab(),this.props.showSubmitList(t)}}componentWillReceiveProps(t){if(this.q1Students=JSON.parse(JSON.stringify(t.results[0])),this.q2Students=JSON.parse(JSON.stringify(t.results[1])),this.q3Students=JSON.parse(JSON.stringify(t.results[2])),t.teamInfo&&t.teamInfo.length>0){for(;this.sorted.length>0;)this.sorted.pop();for(;this.rank.length>0;)this.rank.pop();for(;this.rank1.length>0;)this.rank1.pop();for(;this.rank2.length>0;)this.rank2.pop();for(;this.rank3.length>0;)this.rank3.pop();for(;this.ranks.length>0;)this.ranks.pop();this.sorted=t.teamInfo.slice().sort((function(t,e){return e.livePoint-t.livePoint})),this.rank=t.teamInfo.map((t,e)=>({name:t.name,livePoint:t.livePoint,thumb:t.thumb,hearts:t.hearts,lank:this.sorted.indexOf(t)+1,subLank:this.sorted.indexOf(t)+1}));let e=Object.keys(l.groupBy(this.rank,"livePoint"));for(let t=0;t<e.length;t++)this.ranks.push(Number(e[t]));this.ranks.sort((t,e)=>e-t);for(let t=0;t<this.rank.length;t++)this.rank[t].subLank&&(1===this.rank[t].subLank?this.rank[t].pos="center":2===this.rank[t].subLank?this.rank[t].pos="left":3===this.rank[t].subLank&&(this.rank[t].pos="right"))}}componentDidUpdate(t){this.props.view&&!t.view?(this.totalresult_played||r.App.pub_playGameresult(),this.rank.map((t,e)=>{t.lank=this.ranks.indexOf(t.livePoint)+1}),this.props.onTeamResult(this.rank)):!this.props.view&&t.view}render(){const{view:t,results:e,teamnum:s}=this.props;let i=0;this.q1Students.map((t,e)=>{t.correct&&i++});let n=0;this.q2Students.map((t,e)=>{t.correct&&n++});let a=0;this.q3Students.map((t,e)=>{t.correct&&a++});let r=NaN!==i&&i?Math.floor(i/this.q1Students.length*100):0,l=NaN!==n&&n?Math.floor(n/this.q2Students.length*100):0,p=NaN!==a&&a?Math.floor(a/this.q3Students.length*100):0;return o.createElement("div",{className:"total_result",style:{display:t?"":"none"}},o.createElement("div",{className:"ranking_box"+(this.props.isviewfirewalk?" viewfirework":"")},o.createElement("div",{className:"title"},"Team Ranking"),o.createElement("div",{className:"bar_wrap"},this.rank.length>0&&this.rank.map((t,e)=>o.createElement("div",{key:"q_"+e,className:`bar ${t.name} no${this.ranks.indexOf(t.livePoint)+1} ${t.pos}`,style:{display:t.hearts?"":"none"}},o.createElement("div",{className:"medal"}),o.createElement("div",{className:"txt"},t.name),o.createElement("div",{className:"num"},o.createElement("div",{className:"no"},t.livePoint),"Live"))))),o.createElement("div",{className:"answer_box"},o.createElement("div",{className:"title"},"Answer"),o.createElement("div",{className:"graph_area"},o.createElement("div",{className:"graph",onClick:this.onClickGraph.bind(this,0)},o.createElement("div",{className:"plugin"},o.createElement("div",{className:"circle",style:{background:`conic-gradient(#75c906 0% ${r}%, transparent ${r}% 100%)`}}),o.createElement("div",{className:"persent"},r+"%")),o.createElement("div",{className:"answer_no"},o.createElement("span",{className:"txt"},"Q1"),o.createElement("span",{className:"no"},i))),o.createElement("div",{className:"graph",onClick:this.onClickGraph.bind(this,1)},o.createElement("div",{className:"plugin"},o.createElement("div",{className:"circle",style:{background:`conic-gradient(#75c906 0% ${l}%, transparent ${l}% 100%)`}}),o.createElement("div",{className:"persent"},l+"%")),o.createElement("div",{className:"answer_no"},o.createElement("span",{className:"txt"},"Q2"),o.createElement("span",{className:"no"},n))),o.createElement("div",{className:"graph",onClick:this.onClickGraph.bind(this,2)},o.createElement("div",{className:"plugin"},o.createElement("div",{className:"circle",style:{background:`conic-gradient(#75c906 0% ${p}%, transparent ${p}% 100%)`}}),o.createElement("div",{className:"persent"},p+"%")),o.createElement("div",{className:"answer_no"},o.createElement("span",{className:"txt"},"Q3"),o.createElement("span",{className:"no"},a))))))}};i([n.observable],p.prototype,"grade",void 0),i([n.observable],p.prototype,"maxpercent",void 0),i([n.observable],p.prototype,"move",void 0),i([n.observable],p.prototype,"totalresult_played",void 0),i([n.observable],p.prototype,"rank1",void 0),i([n.observable],p.prototype,"rank2",void 0),i([n.observable],p.prototype,"rank3",void 0),p=i([a.observer],p),e.TotalResult=p,e.default=p},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a};Object.defineProperty(e,"__esModule",{value:!0});const o=s(0),n=s(2),a=s(4);let r=class extends o.Component{constructor(){super(...arguments),this.q1Students=[],this.q2Students=[],this.q3Students=[],this.totalStudent=[],this.sum=[],this.sorted=[],this.rank=[],this.ranks=[]}componentWillReceiveProps(t){if(!this.props.view&&t.view){for(this.q1Students=JSON.parse(JSON.stringify(t.submitStudent[0])),this.q2Students=JSON.parse(JSON.stringify(t.submitStudent[1])),this.q3Students=JSON.parse(JSON.stringify(t.submitStudent[2]));this.totalStudent.length>0;)this.totalStudent.pop();this.q1Students.map((t,e)=>{this.totalStudent.push({id:t.student.id,livePoint:t.livePoint?t.livePoint:0,medal:t.medal?t.medal:"",nickname:t.student.nickname,name:t.student.name,thumb:t.student.thumb,bar_color:"",displayMode:void 0!==t.student.displayMode?t.student.displayMode:""})}),this.q2Students.map((t,e)=>{this.totalStudent.push({id:t.student.id,livePoint:t.livePoint?t.livePoint:0,medal:t.medal?t.medal:"",nickname:t.student.nickname,name:t.student.name,thumb:t.student.thumb,bar_color:"",displayMode:void 0!==t.student.displayMode?t.student.displayMode:""})}),this.q3Students.map((t,e)=>{this.totalStudent.push({id:t.student.id,livePoint:t.livePoint?t.livePoint:0,medal:t.medal?t.medal:"",nickname:t.student.nickname,name:t.student.name,thumb:t.student.thumb,bar_color:"",displayMode:void 0!==t.student.displayMode?t.student.displayMode:""})});const e=a.groupBy(this.totalStudent,"id");for(;this.sum.length>0;)this.sum.pop();for(let t in e){let s={id:"",livePoint:0,medal:"",nickname:"",thumb:"",name:"",bar_color:"",displayMode:""};s.livePoint=e[t].reduce((t,e)=>t+e.livePoint,0),s.id=t,s.nickname=e[t][0].nickname,s.name=e[t][0].name,s.thumb=e[t][0].thumb,s.displayMode=e[t][0].displayMode,this.sum.push(s)}for(;this.sorted.length>0;)this.sorted.pop();for(;this.rank.length>0;)this.rank.pop();for(;this.ranks.length>0;)this.ranks.pop();this.sorted=this.sum.slice().sort((t,e)=>e.livePoint-t.livePoint),this.rank=this.sorted.map((t,e)=>({id:t.id,livePoint:t.livePoint,medal:t.medal,nickname:t.nickname,name:t.name,thumb:t.thumb,bar_color:"",displayMode:t.displayMode}));let s=Object.keys(a.groupBy(this.rank,"livePoint"));for(let t=0;t<s.length;t++)this.ranks.push(Number(s[t]));this.ranks.sort((t,e)=>e-t)}}componentDidUpdate(t){}render(){const{view:t}=this.props;return o.createElement("div",{className:"ind_ranking",style:{display:t?"":"none"}},o.createElement("h3",null,"Individual Ranking"),o.createElement("div",{className:"inner"},o.createElement("ul",null,this.rank.map((t,e)=>{let s=t.livePoint?t.livePoint:0;return s>100&&(s=100),0===this.ranks.indexOf(t.livePoint)?(t.medal="medal_gold",t.bar_color="green"):1===this.ranks.indexOf(t.livePoint)?(t.medal="medal_silver",t.bar_color="yellow"):2===this.ranks.indexOf(t.livePoint)?(t.medal="medal_bronze",t.bar_color="purple"):(t.medal="",t.bar_color="nocolor"),o.createElement("li",{key:e},o.createElement("div",{className:"name "+(void 0!==t.livePoint&&t.livePoint>0?t.medal:"")},"1"===t.displayMode?t.name:t.nickname),o.createElement("div",{className:"barWrap"},o.createElement("div",{className:"bar "+t.bar_color,style:{width:s+"%"}},o.createElement("span",{className:"num"},t.livePoint))))}))))}};r=i([n.observer],r),e.default=r},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a};Object.defineProperty(e,"__esModule",{value:!0});const o=s(0),n=s(2),a=s(4),r=s(3);let l=class extends o.Component{constructor(){super(...arguments),this.q1Students=[],this.q2Students=[],this.q3Students=[],this.totalStudent=[],this.sum=[],this.sorted=[],this.rank=[],this._onClickGraph=t=>{r.App.pub_playBtnTab(),this.props.showSubmitList(t)}}componentWillReceiveProps(t){for(this.q1Students=JSON.parse(JSON.stringify(t.submitStudent[0])),this.q2Students=JSON.parse(JSON.stringify(t.submitStudent[1])),this.q3Students=JSON.parse(JSON.stringify(t.submitStudent[2]));this.totalStudent.length>0;)this.totalStudent.pop();this.q1Students.map((t,e)=>{this.totalStudent.push({id:t.student.id,livePoint:t.livePoint?t.livePoint:0,point:t.point?t.point:0,timebonus:t.timebonus?t.timebonus:0,medal:t.medal?t.medal:"",nickname:t.student.nickname,name:t.student.name,avatar:t.student.avatar,thumb:t.student.thumb,gender:t.student.gender?t.student.gender:"",disPlayMode:void 0!==t.student.displayMode?t.student.displayMode:""})}),this.q2Students.map((t,e)=>{this.totalStudent.push({id:t.student.id,livePoint:t.livePoint?t.livePoint:0,point:t.point?t.point:0,timebonus:t.timebonus?t.timebonus:0,medal:t.medal?t.medal:"",nickname:t.student.nickname,name:t.student.name,avatar:t.student.avatar,thumb:t.student.thumb,gender:t.student.gender?t.student.gender:"",disPlayMode:void 0!==t.student.displayMode?t.student.displayMode:""})}),this.q3Students.map((t,e)=>{this.totalStudent.push({id:t.student.id,livePoint:t.livePoint?t.livePoint:0,point:t.point?t.point:0,timebonus:t.timebonus?t.timebonus:0,medal:t.medal?t.medal:"",nickname:t.student.nickname,name:t.student.name,avatar:t.student.avatar,thumb:t.student.thumb,gender:t.student.gender?t.student.gender:"",disPlayMode:void 0!==t.student.displayMode?t.student.displayMode:""})});const e=a.groupBy(this.totalStudent,"id");for(;this.sum.length>0;)this.sum.pop();for(let t in e){let s={id:"",livePoint:0,point:0,timebonus:0,medal:"",nickname:"",name:"",thumb:"",avatar:"",gender:"",disPlayMode:""};s.livePoint=e[t].reduce((t,e)=>t+e.livePoint,0),s.point=e[t].reduce((t,e)=>t+e.point,0),s.timebonus=e[t].reduce((t,e)=>t+e.timebonus,0),s.id=t,s.nickname=e[t][0].nickname,s.name=e[t][0].name,s.avatar=e[t][0].avatar,s.thumb=e[t][0].thumb,s.gender=e[t][0].gender,s.disPlayMode=e[t][0].disPlayMode,this.sum.push(s)}for(;this.sorted.length>0;)this.sorted.pop();for(;this.rank.length>0;)this.rank.pop();this.sorted=this.sum.slice().sort((function(t,e){return e.livePoint-t.livePoint})),this.rank=this.sum.map((t,e)=>{let s;return e>0&&(s=this.sorted.indexOf(t)+1),{id:t.id,livePoint:t.livePoint,point:t.point,timebonus:t.timebonus,medal:t.medal,nickname:t.nickname,name:t.name,avatar:t.avatar,thumb:t.thumb,gender:t.gender,disPlayMode:t.disPlayMode,rank:this.sorted.indexOf(t)+1}});let s=[];for(let t=0;t<this.rank.length;t++){s.push(this.rank[t]);for(let e=0;e<t;e++)s[e].livePoint===this.rank[t].livePoint&&(this.rank[t].rank=this.rank[e].rank)}}componentDidUpdate(t){this.props.view&&!t.view&&(r.App.pub_playGameresult(),this.props.onIndiResult())}render(){const{view:t}=this.props;let e=this.rank.filter((t,e)=>(1===t.rank||2===t.rank||3===t.rank)&&t.livePoint>0);const s=a.orderBy(e,"livePoint","desc"),i=this.rank.filter((t,e)=>(0!==t.livePoint||1!==t.rank&&2!==t.rank&&3!==t.rank||(t.rank=-1),1!==t.rank&&2!==t.rank&&3!==t.rank)),n=a.orderBy(i,"livePoint","desc");let r=0;this.q1Students.map((t,e)=>{t.correct&&r++});let l=0;this.q2Students.map((t,e)=>{t.correct&&l++});let p=0;this.q3Students.map((t,e)=>{t.correct&&p++});let c=Math.floor(r/this.q1Students.length*100),u=Math.floor(l/this.q2Students.length*100),d=Math.floor(p/this.q3Students.length*100);return o.createElement("div",{className:"result_ranking",style:{display:t?"":"none"}},o.createElement("div",{className:"high_rank_list"},o.createElement("div",{className:"scroll"},o.createElement("div",{className:"title",style:{display:s.length<=0?"none":""}},"High Ranking"),o.createElement("ul",null,s.map((t,e)=>{let s="";1===t.rank?s="gold":2===t.rank?s="silver":3===t.rank&&(s="bronze");const i="2"===t.disPlayMode&&t.nickname?t.nickname:t.name,n="2"===t.disPlayMode?t.avatar:t.thumb;return o.createElement("li",{className:s,key:e},""===n&&o.createElement("div",{className:"F"===t.gender?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,i.substring(0,2).toUpperCase())),""!==n&&o.createElement("img",{src:n,style:{width:"70px",height:"70px"}}),o.createElement("div",{className:"score"},t.livePoint,o.createElement("span",{className:"heart"},t.point),o.createElement("span",{className:"plus"},t.timebonus)),o.createElement("div",{className:"name"},i))})),o.createElement("div",{className:"title",style:{display:n.length<=0?"none":""}},"Result"),o.createElement("ul",null,n.map((t,e)=>{const s="2"===t.disPlayMode&&t.nickname?t.nickname:t.name,i="2"===t.disPlayMode?t.avatar:t.thumb;return o.createElement("li",{key:e},""===i&&o.createElement("div",{className:"F"===t.gender?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,s.substring(0,2).toUpperCase())),""!==i&&o.createElement("img",{src:i,style:{width:"70px",height:"70px"}}),o.createElement("div",{className:"score"},t.livePoint,o.createElement("span",{className:"heart"},t.point),o.createElement("span",{className:"plus"},t.timebonus)),o.createElement("div",{className:"name"},s))})))),o.createElement("div",{className:"high_rank_list answer"},o.createElement("div",{className:"scroll"},o.createElement("div",{className:"title"},"Answer"),o.createElement("div",{className:"graph"},o.createElement("div",{className:"g",onClick:this._onClickGraph.bind(this,0)},o.createElement("div",{className:"bar"},o.createElement("div",{className:"circle",style:{background:`conic-gradient(#75c906 0% ${c}%, transparent ${c}% 100%)`}}),o.createElement("div",{className:"persent"},c+"%")),o.createElement("div",{className:"rst"},o.createElement("div",{className:"tit"},"Q1"),o.createElement("div",{className:"value"},r))),o.createElement("div",{className:"g",onClick:this._onClickGraph.bind(this,1)},o.createElement("div",{className:"bar"},o.createElement("div",{className:"circle",style:{background:`conic-gradient(#75c906 0% ${u}%, transparent ${u}% 100%)`}}),o.createElement("div",{className:"persent"},u+"%")),o.createElement("div",{className:"rst"},o.createElement("div",{className:"tit"},"Q2"),o.createElement("div",{className:"value"},l))),o.createElement("div",{className:"g",onClick:this._onClickGraph.bind(this,2)},o.createElement("div",{className:"bar"},o.createElement("div",{className:"circle",style:{background:`conic-gradient(#75c906 0% ${d}%, transparent ${d}% 100%)`}}),o.createElement("div",{className:"persent"},d+"%")),o.createElement("div",{className:"rst"},o.createElement("div",{className:"tit"},"Q3"),o.createElement("div",{className:"value"},p)))))))}};l=i([n.observer],l),e.default=l},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResultRankingPopup=void 0;const i=s(0);class o extends i.Component{render(){const{view:t}=this.props;return i.createElement("div",{className:"result_ranking type02",style:{display:t?"":"none"}},i.createElement("div",{className:"high_rank_list"},i.createElement("button",{className:"btn_close",onClick:this.props.onClose}),i.createElement("div",{className:"scroll"},i.createElement("div",{className:"title"},"High Ranking"),i.createElement("ul",null,i.createElement("li",{className:"gold"},i.createElement("img",{src:"/content/mathalive_lib/MA/warmup_quiz/common/temp_user_01.png"}),i.createElement("div",{className:"score"},"13"),i.createElement("div",{className:"name"},"Olivia")),i.createElement("li",{className:"silver"},i.createElement("img",{src:"/content/mathalive_lib/MA/warmup_quiz/common/temp_user_02.png"}),i.createElement("div",{className:"score"},"13"),i.createElement("div",{className:"name"},"William")),i.createElement("li",{className:"silver"},i.createElement("img",{src:"/content/mathalive_lib/MA/warmup_quiz/common/temp_user_03.png"}),i.createElement("div",{className:"score"},"13"),i.createElement("div",{className:"name"},"Emma")),i.createElement("li",{className:"bronze"},i.createElement("img",{src:"/content/mathalive_lib/MA/warmup_quiz/common/temp_user_04.png"}),i.createElement("div",{className:"score"},"13"),i.createElement("div",{className:"name"},"Noah"))),i.createElement("div",{className:"title line"},"Result"),i.createElement("ul",{className:"result"},i.createElement("li",null,i.createElement("img",{src:"/content/mathalive_lib/MA/warmup_quiz/common/temp_user_01.png"}),i.createElement("div",{className:"score"},"13"),i.createElement("div",{className:"name"},"Olivia")),i.createElement("li",null,i.createElement("img",{src:"/content/mathalive_lib/MA/warmup_quiz/common/temp_user_02.png"}),i.createElement("div",{className:"score"},"13"),i.createElement("div",{className:"name"},"William")),i.createElement("li",null,i.createElement("img",{src:"/content/mathalive_lib/MA/warmup_quiz/common/temp_user_03.png"}),i.createElement("div",{className:"score"},"13"),i.createElement("div",{className:"name"},"Emma")),i.createElement("li",null,i.createElement("img",{src:"/content/mathalive_lib/MA/warmup_quiz/common/temp_user_04.png"}),i.createElement("div",{className:"score"},"13"),i.createElement("div",{className:"name"},"Noah")))),i.createElement("div",{className:"confetti"})))}}e.ResultRankingPopup=o},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.BtnProgress=void 0;const o=s(0),n=s(2),a=s(1),r=s(4),l=s(8),p=s(3);let c=class extends o.Component{constructor(t){super(t),this.isHide=!1,this.timerid=-1,this._onClick=()=>{p.App.pub_playBtnTab(),this.props.onClick()},this.props.isEnd&&r.delay(()=>{this.isHide=!0},2500)}componentDidUpdate(t){this.props.isEnd&&!t.isEnd?this.timerid=r.delay(()=>{this.isHide=!0},2500):!this.props.isEnd&&t.isEnd&&(this.isHide=!1,clearTimeout(this.timerid))}render(){const{submitStudents:t,totalStudents:e,noFinishView:s}=this.props;return o.createElement("div",{className:"progressWrap"+(this.props.isEnd?" end":"")+(this.props.view?" on":"")},(()=>this.props.noRetryView&&this.props.isEnd?o.createElement(o.Fragment,null):o.createElement(l.ToggleBtn,{className:"btn_progress",view:this.props.view,onClick:this._onClick},o.createElement("span",null,`${t}/${e}`)))(),o.createElement("div",{className:"msg"+(this.isHide||s?" hide":"")},"Finish",o.createElement("span",null),o.createElement("span",null),o.createElement("span",null),o.createElement("span",null),o.createElement("span",null)))}};i([a.observable],c.prototype,"isHide",void 0),c=i([n.observer],c),e.BtnProgress=c},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.AlertPopup=e.WarningPopup=e.StrategyPopup=void 0;const o=s(0),n=s(1),a=s(2),r=s(10),l=s(4),p=s(3);let c=class extends o.Component{componentDidUpdate(t){if(this.props.view&&!t.view){if(!this.props.button){let t=this.props.delay;t||(t=800),l.delay(()=>{this.props.onComplete&&this.props.onComplete()},t)}}else!this.props.view&&t.view}render(){const{type:t}=this.props;let e="";0===t?e="The teacher has stopped you from the activity. After 3 seconds, only the contents has been created so far will be submitted.":1===t?e="All students are already in progress. If you restart, existing data will be deleted. Are you sure you want to request the submission?":2===t?e="You can share a solution only in the problem solving state.":3===t?e="Do you want to save the current learning screen? If there is already saved data, the current data will be overwritten.":4===t?e="Picture not taken.\nYou have reached the maximum number of pictures available.":5===t&&(e="For this activity, We recommend students to wear a headset or an earphone with a microphone.");let s="exclamation";return 4===t?s="nocamera":5===t&&(s="headset"),o.createElement("div",{className:"alertpop strategy"+(this.props.view?" show":"")},o.createElement("div",{className:"alertpop-inner"},o.createElement("div",{className:s}),o.createElement("div",{className:"ment"},e),o.createElement("div",{className:"buttons"+(this.props.isSingle?" single":"")+(this.props.button?"":" hide")},o.createElement("button",{className:"btn cancel",onClick:this.props.onCancel},"Cancel"),o.createElement("button",{className:"btn ok",onClick:this.props.onOk},"Ok"))))}};c=i([a.observer],c),e.StrategyPopup=c;let u=class extends o.Component{constructor(){super(...arguments),this.second=3,this.interval=null}componentDidUpdate(t){if(this.props.view&&!t.view){if(this.second=3,!this.props.button){let t=this.props.delay;t||(t=800),this.interval=setInterval(()=>{this.second--,0===this.second&&(this.props.onComplete&&this.props.onComplete(),null!==this.interval&&clearInterval(this.interval))},1e3)}}else!this.props.view&&t.view&&(null!==this.interval&&clearInterval(this.interval),this.props.onComplete&&this.props.onComplete())}render(){const{type:t}=this.props;let e="";return 0===t&&(e=`Submit your answer within <strong>${this.second} seconds.</strong>`),o.createElement("div",{className:"warningpopup",style:{display:this.props.view?"":"none"}},o.createElement("div",{className:"msg",dangerouslySetInnerHTML:{__html:e}}))}};i([n.observable],u.prototype,"second",void 0),u=i([a.observer],u),e.WarningPopup=u;class d extends o.Component{constructor(){super(...arguments),this._onOk=()=>{this.props.onOk&&this.props.onOk()},this._onClose=()=>{this.props.onClose&&this.props.onClose()}}componentDidUpdate(t){this.props.view&&!t.view||!this.props.view&&t.view&&p.App.pub_playBtnTab()}render(){const{view:t,msg:e,isSingle:s,msgclass:i}=this.props;return o.createElement(r.CoverPopup,{className:"alert_popup",view:t,onClosed:this.props.isSingle?this._onOk:this._onClose},o.createElement("div",{className:"pop_box"},o.createElement("span",{className:"ico_alert"}),o.createElement("span",{className:"text"+(i&&""!==i?" "+i:""),dangerouslySetInnerHTML:{__html:e}}),o.createElement("div",{className:"btns"},o.createElement("button",{className:"btn_cancel",onClick:this._onClose,style:{display:s?"none":""}},o.createElement("span",null,"Cancel")),o.createElement("button",{className:"btn_ok",onClick:this._onOk},o.createElement("span",null,"OK")))))}}e.AlertPopup=d},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a},o=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(o,n){function a(t){try{l(i.next(t))}catch(t){n(t)}}function r(t){try{l(i.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,r)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const n=s(0),a=s(2),r=s(1),l=s(3),p=s(5),c=s(6),u=s(10),d=(s(9).default,(t,e,s,i,o,n)=>{let a=0;a=Math.ceil(l.App.students.length/t);return!1===o?i.map((s,i)=>{e[i%t]&&(s.isLest=0,e[i%t].push(JSON.parse(JSON.stringify(s))))}):e.map((t,e)=>{if(s[e]&&t.length<a){i.slice(0,a-t.length).map(e=>{t.push(JSON.parse(JSON.stringify(e)))})}}),!1===o&&l.App.students.length<t-1?(e.map((t,s)=>{if(0===e[s].length&&e[s-1]&&e[s-1].length>0){let t=Object.assign({},e[s-1][0]);t.isLest=1,e[s]=[JSON.parse(JSON.stringify(t))]}}),e):e[e.length-1].length===a?e:((t,e,s,i,o)=>{let n=[],a=[],r=0;t.map((t,s)=>{n.push(e-t.length),a.push([])}),0===i.length&&(i=l.App.students),i=[...o,...i];for(let e=0;e<t.length;e++)if(n.length>e&&0!==n[e])for(let s=0;s<n[e];s++){let s=i[r],o=0;void 0!==t[e]&&0!==t[e].length&&(o=t[e].map(t=>t.id).indexOf(s.id)),o&&(s=i[r]),s&&(s.isLest=1,a[e].push(s)),r++}Math.floor(Math.random()*a.length-1);let p=null;a.map(t=>{t.length>0&&null===p&&null===p&&(p=t[0]);for(let e=0;e<t.length;e++)t[e]=p}),t.forEach((t,e)=>{a[e]&&a[e].map(e=>{e&&(0===o.length||-1!==o.indexOf(e)?(e.isLest=2,t.unshift(JSON.parse(JSON.stringify(e)))):(e.isLest=2,t.push(JSON.parse(JSON.stringify(e)))))})});let c=[],u=0;return s.map((e,s)=>{void 0===c[s]&&(c[s]=[]),e&&(c[s]=t[u],u++)}),c})(e,a,s,i,n)});let h=class extends n.Component{render(){const{index:t,student:e}=this.props,s="2"===e.displayMode&&e.nickname?e.nickname:e.name,i="2"===e.displayMode?e.avatar:e.thumb;return this.props.student?n.createElement("div",{className:"student "+(this.props.isLest>0?"on":"")},""===i&&n.createElement("div",{className:"F"===e.gender?"defaultImg_f":"defaultImg_m"},n.createElement("div",null,s.substring(0,2).toUpperCase())),""!==i&&n.createElement("img",{src:i}),n.createElement("span",null,t+1+".  "+s)):n.createElement(n.Fragment,null)}};h=i([a.observer],h);let m=class extends n.Component{constructor(){super(...arguments),this.m_view=!1,this.teamGroup=[],this.teamActivate=[!0,!0,!0],this.lastMinusedStuednt=[],this._pluse=!1,this._onSubmit=()=>{l.App.pub_quizDone(),this.props.state.teamNum=this.teamActivate.length,this.props.onStartTeamQuiz(),this.m_view=!1,this.props.state.prog="timesetting";p.sendPAD(10,{msgtype:"show_team"})},this._onShuffle=t=>{l.App.pub_playFlipCard(),this.teamUp()}}teamUp(){l.App.pub_playFlipCard(),this.teamGroup=((t,e,s)=>{t.sort(()=>Math.random()-.5);const i=[];for(let t=0;t<3;t++)i.push([]);return d(e.filter(t=>!0===t).length,i,e,t,!1,s)})(l.App.students,this.teamActivate,this.lastMinusedStuednt),this.props.teamSetting(this.teamGroup)}componentDidUpdate(t){this.props.view&&!t.view?(this.m_view=!0,this.teamUp()):!this.props.view&&t.view&&(this.m_view=!1)}printTeam(t,e){if(0===t.length)return n.createElement(n.Fragment,{key:"group"+e});let s=[];return this.teamGroup.map(t=>{t.map(t=>{s.push(t)})}),n.createElement("div",{className:"teamtype "+["red","green","yellow"][e],key:"group"+e},n.createElement("div",{className:"title"},["Red","Green","Yellow"][e],"(",t.length,")",n.createElement("button",{className:"btn_plus",style:{display:this._pluse?"":"none"},onClick:()=>{const t=this.teamActivate.findIndex(t=>!t);this.teamActivate[t]=!0,this.teamUp(),this._pluse=!1}}),n.createElement("button",{className:"btn_minus",style:{display:this._pluse?"none":""},onClick:()=>{this.teamActivate[e]=!1,this.teamUp(),this._pluse=!0}})),n.createElement("div",{className:"crew"},t.map((t,e)=>n.createElement(h,{key:e,student:t,index:e,isLest:s.filter(e=>e.id===t.id).length-1}))))}render(){const{state:t,_onClosed:e}=this.props;return n.createElement(u.CoverPopup,{className:"setting_popup",view:this.m_view,onClosed:e},n.createElement("div",{className:"popContainer"},n.createElement("div",{className:"tit"},"Team Setting"),n.createElement("div",{className:"list_team"},this.teamGroup.map((t,e)=>this.printTeam(t,e))),n.createElement("div",{className:"btn_btm"},n.createElement("button",{className:"btn_random",onClick:()=>this._onShuffle(!1)}),n.createElement("button",{className:"btn_done",onClick:this._onSubmit}))))}};i([r.observable],m.prototype,"m_view",void 0),i([r.observable],m.prototype,"teamGroup",void 0),i([r.observable],m.prototype,"teamActivate",void 0),i([r.observable],m.prototype,"lastMinusedStuednt",void 0),i([r.observable],m.prototype,"_pluse",void 0),m=i([a.observer],m);let _=class extends n.Component{constructor(t){super(t),this._setPop=!1,this.selectIndividual=()=>{l.App.pub_playChoiceBtn(),this.props.state.selection="individual",this.props.state.prog="timesetting"},this.selectTeam=()=>{l.App.pub_playChoiceBtn(),this.props.state.selection="team",l.App.pub_reloadStudents(()=>o(this,void 0,void 0,(function*(){this._setPop=!this._setPop})))},this._onClosed=()=>{this._setPop=!1},this.onStartTeam=()=>o(this,void 0,void 0,(function*(){if(l.App.pub_playStartButton(),"team"===this.props.state.selection){let t={msgtype:"team_quiz",teamsinfo:JSON.stringify(this.props.state.teamsinfo),team1_ids:this.props.state.team1.map(t=>t.id),team2_ids:this.props.state.team2.map(t=>t.id),team3_ids:this.props.state.team3.map(t=>t.id)};this.props.state.maxHearts=this.props.actions.getData().quizs.length*this.props.state.team1.length,p.sendPAD(10,t),yield c.wait(600)}else if("individual"===this.props.state.selection){const t={msgtype:"individual_quiz"};p.sendPAD(10,t),yield c.wait(600),this.props.state.teamNum=0,this.props.state.prog="warmupquiz"}}))}_setNavi(){"selection"===this.props.state.prog&&(this.props.actions.setNaviView(!0),this.props.actions.setNavi(!0,!1),this.props.actions.setNaviFnc(()=>{p.clearTPenTool(),this.props.actions.gotoDirection()},null))}componentDidUpdate(t){if(this.props.view&&!t.view){this.props.state.selection="",this._setPop=!1;let t=[];for(t.push({name:"red",thumb:"/content/mathalive_lib/MA/warmup_quiz/teacher/images/team_char01.png",hearts:0,livePoint:0}),t.push({name:"green",thumb:"/content/mathalive_lib/MA/warmup_quiz/teacher/images/team_char02.png",hearts:0,livePoint:0}),t.push({name:"yellow",thumb:"/content/mathalive_lib/MA/warmup_quiz/teacher/images/team_char03.png",hearts:0,livePoint:0});this.props.state.teamsinfo.length>0;)this.props.state.teamsinfo.pop();for(let e=0;e<3;e++)this.props.state.teamsinfo.push(t[e])}this.props.view&&this._setNavi()}render(){const{view:t,actions:e,state:s}=this.props;return n.createElement(n.Fragment,null,n.createElement("div",{className:"t_teamselect",style:{display:t?void 0:"none"}},n.createElement("div",{className:"tit"},"Quiz Mode"),n.createElement("div",{className:"team individual "+("individual"===this.props.state.selection?"on":"")+("team"===this.props.state.selection?"off":""),onClick:this.selectIndividual},n.createElement("div",{className:"title"},"Individual")),n.createElement("div",{className:"team setted "+("team"===this.props.state.selection?"on":"")+("individual"===this.props.state.selection?"off":""),onClick:this.selectTeam},n.createElement("div",{className:"title"},"Team")),n.createElement(m,{teamSetting:t=>{t.map((t,e)=>{s["team"+(e+1)]=t})},view:this._setPop,state:s,_onClosed:this._onClosed,onStartTeamQuiz:this.onStartTeam})))}};i([r.observable],_.prototype,"_setPop",void 0),_=i([a.observer],_),e.default=_},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a},o=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(o,n){function a(t){try{l(i.next(t))}catch(t){n(t)}}function r(t){try{l(i.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,r)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const n=s(0),a=s(2),r=s(1);s(37);const l=s(3);let p=class extends n.Component{constructor(t){super(t),this.timeSec=0,this._onSendStart=()=>o(this,void 0,void 0,(function*(){this.props.view})),this.onStart=()=>{l.App.pub_game_timesetting_start(),this.props.onStart(this.timeSec)},this.onPlusTime=()=>{l.App.pub_playBtnTab(),this.timeSec=this.timeSec+5,this.timeSec>600&&(this.timeSec=600)},this.onMinusTime=()=>{l.App.pub_playBtnTab(),this.timeSec=this.timeSec-5,this.timeSec<5&&(this.timeSec=5)}}componentDidMount(){}componentWillUnmount(){}componentDidUpdate(t){this.props.view&&!t.view?this.timeSec=this.props.timeSec:!this.props.view&&t.view}render(){const{view:t}=this.props;return n.createElement("div",{className:"t_timesetting",style:{display:t?void 0:"none"}},l.App.isDvlp?n.createElement("button",{className:"btn_menu"}):void 0,n.createElement("div",{className:"tit"},"Time Setting"),n.createElement("div",{className:"settingTimer"},n.createElement("span",{className:"num"},this.timeSec),n.createElement("button",{className:"btn_minus",onClick:this.onMinusTime}),n.createElement("button",{className:"btn_plus",onClick:this.onPlusTime})),n.createElement("button",{className:"btn_start",onClick:this.onStart.bind(this)}))}};i([r.observable],p.prototype,"timeSec",void 0),p=i([a.observer],p),e.default=p},function(t,e,s){"use strict";s.r(e)},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a},o=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(o,n){function a(t){try{l(i.next(t))}catch(t){n(t)}}function r(t){try{l(i.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,r)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const n=s(0),a=s(2),r=s(1),l=s(6);let p=class extends n.Component{constructor(){super(...arguments),this._opened=!1}_startQuiz(){return o(this,void 0,void 0,(function*(){yield l.wait(400),this._opened=!0,yield l.wait(1e3),this.props.startQuiz()}))}_setNavi(){this.props.view&&this.props.setNavi()}componentDidUpdate(t){this.props.view&&!t.view?(this._setNavi(),this._startQuiz()):!this.props.view&&t.view&&(this._opened=!1)}render(){const{view:t}=this.props;return n.createElement("div",{className:"intro_quiz"+(this._opened?" open":""),style:{display:t?void 0:"none"}},n.createElement("div",{className:"intro_img"},n.createElement("span",{className:"secondhand"})))}};i([r.observable],p.prototype,"_opened",void 0),p=i([a.observer],p),e.default=p},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.useTeacher=e.tContext=e.TeacherConsumer=e.TeacherProvider=e.TeacherContext=void 0;const o=s(0),n=s(4),a=s(1),r=s(5),l=s(40);class p extends l.TeacherContextBase{constructor(){super(),this._quizResultFnc=null,this._waitingForResult=null,this.state.prog="selection",this.state.quizProg=0,this.state.selection="",this.state.teamNum=0,this.state.type="",this.state.teamsinfo=[],this.state.teamsprevinfo=[],this.state.team1=[],this.state.team2=[],this.state.team3=[],this.state.team4=[],this.state.popularSId="",this.state.iswarmup=!1,this.state.subtitle="",this.state.quizResult=[],this.state.timerSecond=15,this.state.retStudents=0,this.state.viewIndiRank=!1,this.state.viewTeamScore=!1,this.actions.getData=()=>this._data,this.actions.getCurriculum=()=>this._curriculum,this.actions.gotoDirection=()=>this._setViewDiv("direction"),this.actions.gotoNextBook=()=>{r.sendLauncher(9,null)},this.actions.setQuizResultFnc=t=>{this._quizResultFnc=t},this.actions.waitingForResult=t=>{this._waitingForResult=t}}_setViewDiv(t){"direction"===t&&(this.state.prog="selection"),super._setViewDiv(t)}receive(t){if(super.receive(t),11===t.type&&t.data){const e=t.data;if("quiz_result"===e.msgtype){if(this.state.viewIndiRank||this.state.viewTeamScore)return;const t=e,s=JSON.parse(t.result);let i=n.findIndex(this.state.quizResult[t.idx],{studentid:s.studentid});i>-1?(this.state.quizResult[t.idx][i]=s,this._waitingForResult&&this._waitingForResult()):(this.state.quizResult[t.idx].push(s),this._waitingForResult&&this._waitingForResult()),this._quizResultFnc&&this._quizResultFnc(t)}else"increase_cnt"===e.msgtype&&this.state.retStudents++}}setData(t){this._data=t,this.state.iswarmup=this._data.iswarmup,this.state.subtitle=this._data.subtitle;for(let t=0;t<this._data.quizs.length;t++){this.state.quizResult[t]=[],this.state.teamsprevinfo[t]=[];for(let e=0;e<3;e++)this.state.teamsprevinfo[t].push(0)}}notifyNaviInfo(t,e,s,i,o,n){if(this._curriculum=t,this.state.bookid=e,this.state.classid=s,t.childrenList&&t.childrenList.length>0)for(let s=0;s<t.childrenList.length;s++){const i=t.childrenList[s];if(i&&i.book&&i.book.id===e){this.state.curriculumid=i.id,this.state.bookkey=i.book.key;break}}}}i([a.observable],p.prototype,"state",void 0),i([a.action],p.prototype,"_setViewDiv",null),e.TeacherContext=p;const c=new p;e.tContext=c;const{Provider:u,Consumer:d}=o.createContext(c);e.TeacherConsumer=d;class h extends o.Component{render(){return o.createElement(u,{value:c},this.props.children)}}e.TeacherProvider=h,e.useTeacher=function(t){return function(e){return o.createElement(d,null,e=>o.createElement(t,Object.assign({},e)))}}},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var o,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(n<3?o(a):n>3?o(e,s,a):o(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.TeacherContextBase=void 0;const o=s(1),n=s(3),a=s(5),r=s(41);class l{constructor(){this._naviLeftFnc=null,this._naviRightFnc=null,this.state={viewDiv:"direction",directionON:!1,navi:{view:!1,enableLeft:!1,enableRight:!1},svg_bg:{view:!0,bPlay:!1,viewCharactor:!0},loading:!1,retCnt:0,numOfStudent:0,bookid:0,bookkey:0,curriculumid:0,classid:0,unitid:0,lessonid:0,conceptLibiary:{view:!1,datatype:"grade",resultmode:!1}},this.actions={onDirectionEndStart:()=>{"direction"===this.state.viewDiv&&a.sendPAD(3,null)},onDirectionEnded:()=>{"direction"===this.state.viewDiv&&this._setViewDiv("content"),n.App.isStarted=!0},setNaviView:t=>{this.state.navi.view=t},setNavi:(t,e)=>{this.state.navi.enableLeft=t,this.state.navi.enableRight=e},setNaviFnc:(t,e)=>{this._naviLeftFnc=t,this._naviRightFnc=e},naviLeft:()=>{"direction"===this.state.viewDiv?a.sendLauncher(8,null):(n.App.pub_playBtnPage(),this._naviLeftFnc?this._naviLeftFnc():this._setViewDiv("direction"))},naviRight:()=>{"direction"===this.state.viewDiv?(n.App.pub_playBtnPage(),this.state.directionON=!1):(n.App.pub_playBtnPage(),this._naviRightFnc?this._naviRightFnc():a.sendLauncher(9,null))},setRetCnt:t=>{t>this.state.numOfStudent&&(t=this.state.numOfStudent),this.state.retCnt=t},setNumOfStudent:t=>{this.state.numOfStudent=t},setConcepLibaryView:t=>{this.state.conceptLibiary.view=t},setConcepLibaryDataType:t=>{this.state.conceptLibiary.datatype=t},setConcepLibaryResultMode:t=>{this.state.conceptLibiary.resultmode=t},setLoading:t=>{a.showTLoading(t)}},this.notifyBookCaptureInfo=t=>{},this.clickSendButton=()=>{},this.notifyRecordData=(t,e)=>{}}_setViewDiv(t,e){this.state.viewDiv!==t&&(e||n.App.pub_stop(),"direction"===t?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0,a.sendLauncher(5,null),a.sendPAD(1,null),this.state.navi.view=!0,this.state.navi.enableLeft=n.App.prevBook,this.state.navi.enableRight=!0,this._naviLeftFnc=null,this._naviRightFnc=null,this.state.conceptLibiary.view=!1,this.state.conceptLibiary.datatype="grade",this.state.conceptLibiary.resultmode=!1):(this.state.directionON=!1,this.state.svg_bg.bPlay=!1,this.state.svg_bg.viewCharactor=!1,a.sendLauncher(6,null),a.sendPAD(0,null)),this._naviLeftFnc=null,this._naviRightFnc=null,this.state.numOfStudent=0,this.state.retCnt=0,this.state.viewDiv=t)}start(){if("direction"===this.state.viewDiv&&(this.state.directionON=!0,this.state.navi.view=!0,this.state.navi.enableLeft=n.App.prevBook,this.state.navi.enableRight=!0,this.state.svg_bg.bPlay=!0,a.sendLauncher(5,null),a.sendPAD(1,null)),n.App.isDvlp){0;let t="";if(t="M0408",""===t)return;let e={id:1e3,code:"",depth:4,depth_name:r.parseDept4Div(t),info:"",div:t,subDiv:"",name:"M0408"===t?"Identify the Number 0, Read and Write 0":"",thumbnail:"",cmsLevel:"",childrenList:[]},s="",i="",o="";if("Concept"===r.parseDept4Div(t))for(let t=0;t<3;t++){0===t?(s="M0503",i="M050303",o=r.parseDept5SubDiv("M050303")):1===t?(s="M0503",i="M050304",o=r.parseDept5SubDiv("M050304")):2===t&&(s="M0506",i="M050601",o=r.parseDept5SubDiv("M050601"));let n={id:16815+t,code:"",depth:5,depth_name:o,info:"",div:s,subDiv:i,name:o,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:9e4+t,path:"/content/"+(5787+t),viewMode:2,key:5280+t,cmsKey:5787+t,completed:0,updatetime:""}};e.childrenList.push(n)}else if("Problem"===r.parseDept4Div(t))for(let t=0;t<3;t++){0===t?(s="M0505",i="M050504",o="Reasoning (1)"):1===t?(s="M0505",i="M050504",o=r.parseDept5SubDiv("M050504")):2===t&&(s="M0506",i="M050602",o=r.parseDept5SubDiv("M050602"));let n={id:16815+t,code:"",depth:5,depth_name:o,info:"",div:s,subDiv:i,name:o,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:8e4+t,path:"/content/"+(5787+t),viewMode:2,key:5280+t,cmsKey:5787+t,completed:0,updatetime:""}};e.childrenList.push(n)}else if("Concept Learning"===r.parseDept4Div(t))for(let t=0;t<12;t++){0===t?(s="M0501",i="M050101",o="WarmUp Quiz"):1===t?(s="M0501",i="M050101",o="I SPY"):2===t?(s="M0501",i="M050101",o="Hit a Mole"):3===t?(s="M0506",i="M050601",o="Memory Game"):4===t?(s="M0506",i="M050601",o="Math Talk"):5===t?(s="M0501",i="M050102",o="Learning Objectives"):6===t?(s="M0502",i="M050202",o="Concept Acivity"):7===t?(s="M0502",i="M050203",o="Concept Tool"):8===t?(s="M0502",i="M050204",o="Concept Summary"):9===t?(s="M0505",i="M050501",o="Independent Practice"):10===t?(s="M0505",i="M050502",o="Extended Practice"):11===t&&(s="M0505",i="M050505",o="CL Strategy");let n={id:16815+t,code:"",depth:5,depth_name:o,info:"",div:s,subDiv:i,name:o,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:1e4+t,path:"/content/"+(5787+t),viewMode:2,key:5280+t,cmsKey:5787+t,completed:0,updatetime:""}};e.childrenList.push(n)}else if("Topic Learning"===r.parseDept4Div(t))for(let t=0;t<1;t++){0===t&&(s="M0507",i="M050701",o=r.parseDept5SubDiv("M050701"));let n={id:16815+t,code:"",depth:5,depth_name:o,info:"",div:s,subDiv:i,name:o,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:2e4+t,path:"/content/"+(5787+t),viewMode:2,key:5280+t,cmsKey:5787+t,completed:0,updatetime:""}};e.childrenList.push(n)}else if("Module Learning"===r.parseDept4Div(t))for(let t=0;t<3;t++){0===t?(s="M0508",i="M050801",o=r.parseDept5SubDiv("M050801")):1===t?(s="M0508",i="M050803",o=r.parseDept5SubDiv("M050803")):2===t&&(s="M0508",i="M050804",o=r.parseDept5SubDiv("M050804"));let n={id:16815+t,code:"",depth:5,depth_name:o,info:"",div:s,subDiv:i,name:o,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:3e4+t,path:"/content/"+(5787+t),viewMode:2,key:5280+t,cmsKey:5787+t,completed:0,updatetime:""}};e.childrenList.push(n)}else if("Module Test"===r.parseDept4Div(t))for(let t=0;t<1;t++){0===t&&(s="M0509",i="M050905",o=r.parseDept5SubDiv("M050905"));let n={id:16815+t,code:"",depth:5,depth_name:o,info:"",div:s,subDiv:i,name:o,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:4e4+t,path:"/content/"+(5787+t),viewMode:2,key:5280+t,cmsKey:5787+t,completed:0,updatetime:""}};e.childrenList.push(n)}let n=1e4;n=1e4,this.notifyNaviInfo(e,n,1)}else{let t="";0,a.getNaviInfo(t)}}receive(t){}uploaded(t){}multiUploaded(t){}notify(t){}notifyRecorded(t){}notifyVideoRecord(t){}notifyNaviInfo(t,e,s,i,o,n){}notifyPenToolState(t,e){}notifyLiveGivePopupClose(){}notifyAlert(t){}notifyHamburgerMenuClicked(t){}callThreeminState(){}}i([o.observable],l.prototype,"state",void 0),i([o.action],l.prototype,"_setViewDiv",null),i([o.action],l.prototype,"start",null),e.TeacherContextBase=l},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseClassColor=e.parseDept5SubDiv=e.parseDept5Div=e.parseDept4Div=e.parseDept3Div=void 0,e.parseDept3Div=function(t){return"M0301"===t?"Number&Operations":"M0302"===t?"Measurement&Date":"M0303"===t?"Operations&Algebra":"M0304"===t?"Geometry":"M0305"===t?"Topic":"M0306"===t?"Module Review":""},e.parseDept4Div=function(t){return"M0401"===t?"Concept":"M0402"===t?"Problem":"M0403"===t?"Strategy":"M0404"===t?"Number&Operations":"M0405"===t?"Measurement&Date":"M0406"===t?"Operations&Algebra":"M0407"===t?"Geometry":"M0408"===t?"Concept Learning":"M0409"===t?"Topic Learning":"M0410"===t?"Module Learning":"M0411"===t?"Module Test":""},e.parseDept5Div=function(t){return"M0501"===t?"Warm-Up":"M0502"===t?"Concept Learning":"M0503"===t?"Concept Learning 2":"M0504"===t?"Concept Learning 3":"M0505"===t?"Problem Solving":"M0506"===t?"Wrap-Up":"M0507"===t?"Topic Learning":"M0508"===t?"Module Learning":"M0509"===t?"Module Test":""},e.parseDept5SubDiv=function(t){return"M050101"===t?"Warm-Up Activity":"M050102"===t?"Learning Objectives":"M050103"===t?"Concept Summary":"M050201"===t?"Concept Learning":"M050202"===t?"Concept Activity":"M050203"===t?"Concept Tool":"M050204"===t?"Concept Summary":"M050301"===t?"Activity":"M050302"===t?"Concept Tool":"M050303"===t?"Summary":"M050304"===t?"Check":"M050401"===t?"Activity":"M050402"===t?"Concept Tool":"M050403"===t?"Summary":"M050404"===t?"Check":"M050501"===t?"Independent Practice":"M050502"===t?"Extended Practice":"M050503"===t?"Strategy":"M050504"===t?"Reasoning (2)":"M050505"===t?"Strategy":"M050601"===t?"Wrap-Up Activity":"M050602"===t?"Portfolio":"M050701"===t?"Topic Strategy":"M050702"===t?"Adaptive Learning":"M050801"===t?"Module Review":"M050802"===t?"Adaptive Learning":"M050803"===t?"Module Portfolio":"M050804"===t?"Module Strategy":"M050901"===t?"Assessment":"M050902"===t?"Module Portfolio":"M050903"===t?"Assessment Review":"M050904"===t?"STEAM Activity":"M050905"===t?"STEAM Portfolio":""},e.parseClassColor=function(t){return"B62001"===t?"Black":"White"}},function(t,e,s){"use strict";s.r(e)}]);