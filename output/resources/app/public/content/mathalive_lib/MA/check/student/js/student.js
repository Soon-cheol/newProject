(()=>{"use strict";var e={762:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const i=o(478),s=o(201);function n(e){if(!e)return e;e.displayMode=""+e.displayMode=="2"?"2":"1";let t=e.thumb&&""!==e.thumb?e.thumb:"";(t.startsWith("static/")||""===t)&&(t="/content/mathalive_lib/images/default_elephant.png",e.thumb=t);let o=e.avatar&&""!==e.avatar?e.avatar:"";return""===o&&(o="/content/mathalive_lib/images/default_cheese.png",e.avatar=o),console.log("=====> _initStudent student",e),e}class c{static get isMobile(){return c._isMobile}static get tempEl(){return c._tempEl}static pub_init(){const e=navigator.userAgent;c._isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e)||/android/i.test(e),c._tempBnd=document.createElement("div"),c._tempBnd.style.display="none",c._tempEl=document.createElement("div"),c._tempBnd.appendChild(c._tempEl),null===document.body?document.addEventListener("DOMContentLoaded",(e=>{document.body.appendChild(c._tempBnd)})):document.body.appendChild(c._tempBnd)}static get students(){return c._students}static get student(){return c._student}static get lang(){return c._lang}static get isDvlp(){return c._isDvlp}static get data_url(){return c._data_url}static get lesson(){return c._lesson}static get book(){return c._book}static get nextBook(){return c._nextBook}static get prevBook(){return c._prevBook}static get addOnHost(){return c._addOnHost}static pub_load(e,t,o,i,s,r,a){c._lesson=i,c._book=o,c._nextBook=r,c._prevBook=a,c._students=[],e&&Array.isArray(e)&&e.forEach(((e,t)=>{c._students[t]=n(e)})),c._student=n(t),s&&""!==s&&(c._addOnHost=s)}static pub_reloadStudents(e){s.getStudents(((t,o)=>{for(;c._students.length>0;)c._students.pop();for(;c._students_inited.length>0;)c._students_inited.pop();for(let e=0,o=t.length;e<o;e++)c.isDvlp?c._students[e]=n(t[e]):c._students[e]=n({id:t[e].id,name:t[e].name,thumb:t[e].defaultThumbnail,avatar:t[e].profileThumbnail,nickname:t[e].nickName,displayMode:t[e].displayMode,inited:!0}),c._students_inited.push(t[e].id);e()}))}static pub_parseStyle(e){return c._tempEl.style.cssText=e,c._tempEl.style}static pub_initAudio(){c._common_audio=document.getElementById("common_audio"),c._ding_audio=document.getElementById("ding_audio"),c._dingend_audio=document.getElementById("dingend_audio"),c._btn_audio=document.getElementById("btn_audio"),c._correct_audio=document.getElementById("correct_audio"),c._wrong_audio=document.getElementById("wrong_audio"),c._topad_audio=document.getElementById("topad_audio"),c._goodjob_audio=document.getElementById("goodjob_audio"),c._btn_back_audio=document.getElementById("btn_back_audio"),c._btn_page_audio=document.getElementById("btn_page_audio"),c._popup_audio=document.getElementById("popup_audio"),c._clock_audio=document.getElementById("clock_audio"),c._ts_bgm_audio=document.getElementById("ts_bgm_audio"),c._bs_audio=document.getElementById("bs_audio"),c._bb_audio=document.getElementById("bb_audio"),c._cd_audio=document.getElementById("cd_audio"),c._tc_audio=document.getElementById("tc_audio"),c._te_audio=document.getElementById("te_audio"),c._trg_bgm_audio=document.getElementById("trg_bgm_audio"),c._afc_audio=document.getElementById("afc_audio"),c._trs_audio=document.getElementById("trs_audio"),c._btn_choice_audio=document.getElementById("btn_choice_audio"),c._retry_audio=document.getElementById("retry_audio"),c._sorry_audio=document.getElementById("sorry_audio"),c._great_audio=document.getElementById("great_audio"),c._memorygame_flipcard_audio=document.getElementById("flipcard_audio"),c._ispy_gameclick_audio=document.getElementById("gameclick_audio")}static pub_playClock(){c._clock_audio&&(c._clock_audio.currentTime=4.5,c._clock_audio.play())}static pub_playPopup(){c._popup_audio&&(c._popup_audio.currentTime=0,c._popup_audio.play())}static pub_playBtnPage(){c._btn_page_audio&&(c._btn_page_audio.currentTime=0,c._btn_page_audio.play())}static pub_playBtnBack(){c._btn_back_audio&&(c._btn_back_audio.currentTime=0,c._btn_back_audio.play())}static pub_playGoodjob(){c._goodjob_audio&&(c._goodjob_audio.currentTime=0,c._goodjob_audio.play())}static pub_playDing(){c._ding_audio&&(c._ding_audio.currentTime=0,c._ding_audio.play())}static pub_playDingend(){c._dingend_audio&&(c._dingend_audio.currentTime=0,c._dingend_audio.play())}static pub_playToPad(){c._topad_audio&&(c._topad_audio.currentTime=0,c._topad_audio.play())}static pub_playBtnTab(){c._btn_audio&&(c._btn_audio.currentTime=0,c._btn_audio.play())}static pub_playCorrect(){c._correct_audio&&(c._correct_audio.currentTime=0,c._correct_audio.play())}static pub_playWrong(){c._wrong_audio&&(c._wrong_audio.currentTime=0,c._wrong_audio.play())}static pub_playTeamSelectBgm(){c._ts_bgm_audio&&(c._ts_bgm_audio.currentTime=0,c._ts_bgm_audio.play())}static pub_stopTeamSelectBgm(){c._ts_bgm_audio&&(c._ts_bgm_audio.pause(),c._ts_bgm_audio.currentTime=0)}static pub_playStartButton(){c._bs_audio&&(c._bs_audio.currentTime=0,c._bs_audio.play())}static pub_playBasicButton(){c._bb_audio&&(c._bb_audio.currentTime=0,c._bb_audio.play())}static pub_playCountDown(){c._cd_audio&&(c._cd_audio.currentTime=0,c._cd_audio.play())}static pub_playTimerClock(){c._tc_audio&&(c._tc_audio.currentTime=0,c._tc_audio.play())}static pub_stopTimerClock(){c._tc_audio&&(c._tc_audio.pause(),c._tc_audio.currentTime=0)}static pub_playTimerEnd(){c._te_audio&&(c._te_audio.currentTime=0,c._te_audio.play())}static pub_playResultGraph(){c._trg_bgm_audio&&(c._trg_bgm_audio.currentTime=0,c._trg_bgm_audio.play())}static pub_playFireworksClapping(){c._afc_audio&&(c._afc_audio.currentTime=0,c._afc_audio.play())}static pub_playTotalResult(){c._trs_audio&&(c._trs_audio.currentTime=0,c._trs_audio.play())}static pub_playChoiceBtn(){c._btn_choice_audio&&(c._btn_choice_audio.currentTime=0,c._btn_choice_audio.play())}static pub_playsorry(){c._sorry_audio&&(c._sorry_audio.currentTime=0,c._sorry_audio.play())}static pub_playretry(){c._retry_audio&&(c._retry_audio.currentTime=0,c._retry_audio.play())}static pub_playgreat(){c._great_audio&&(c._great_audio.currentTime=0,c._great_audio.play())}static pub_playFlipCard(){c._memorygame_flipcard_audio&&(c._memorygame_flipcard_audio.currentTime=0,c._memorygame_flipcard_audio.play())}static pub_playGameClick(){c._ispy_gameclick_audio&&(c._ispy_gameclick_audio.currentTime=0,c._ispy_gameclick_audio.play())}static pub_stop(){null!=c._common_audio.onended&&c._common_audio.onended.call(c._common_audio,new Event("ended")),c._common_audio.oncanplaythrough=null,isNaN(c._common_audio.duration)||c._common_audio.paused||c._common_audio.pause()}static pub_play(e,t){c.pub_stop(),e=i.nteString(e,"");const o=i.nteString(c._common_audio.getAttribute("src"),"");if(""===e&&""===o)return void(null!=t&&t(!0));""!==e&&o!==e&&(c._common_audio.src=e);const s=e=>{c._common_audio.onended=null,null!==t&&t(!0),c._common_audio.removeEventListener("error",s)};c._common_audio.onended=e=>{c._common_audio.onended=null,null!==t&&t(!!e),c._common_audio.removeEventListener("error",s)},c._common_audio.addEventListener("error",s),isNaN(c._common_audio.duration)?(c._common_audio.oncanplaythrough=e=>{0!==c._common_audio.currentTime&&(c._common_audio.currentTime=0),c._common_audio.play(),c._common_audio.oncanplaythrough=null},c._common_audio.load()):(0!==c._common_audio.currentTime&&(c._common_audio.currentTime=0),c._common_audio.oncanplaythrough=null,c._common_audio.play())}static pub_set(e,t,o){c._isDvlp=t,c._lang=o,s.set(t)}static pub_addInitedStudent(e){let t=!0;for(let o=0,i=c._students_inited.length;o<i;o++)c._students_inited[o]===e.id&&(t=!1);t&&c._students_inited.push(e.id);const o=c._start_idx>0&&c._students.length>0&&c._students_inited.length>=c._students.length;return o&&(window.clearTimeout(c._start_idx),c._start_idx=-1),o}static pub_start(e){0===c._students.length||c._students_inited.length>=c._students.length?e():c._start_idx=window.setTimeout(e,2e3)}static pub_clear(){for(;c._students.length>0;)c._students.pop();for(;c._students_inited.length>0;)c._students_inited.pop()}}t.App=c,c._isMobile=!1,c._students=[],c._students_inited=[],c._student=null,c._lang="ko",c._isDvlp=!1,c._data_url="../data/",c._lesson="",c._book="",c._nextBook=!1,c._prevBook=!1,c._start_idx=-1,c.isStarted=!1,c._addOnHost="https://addonsapi.fel40.com"},495:(e,t)=>{function o(e,t){const o=/[^a-zA-Z]/g,i=/[^0-9]/g;var s=e.replace(o,""),n=t.replace(o,"");if(s===n){var c=parseInt(e.replace(i,""),10),r=parseInt(t.replace(i,""),10);return c===r?0:c>r?1:-1}return s>n?1:-1}function i(e){for(var t=0,o=e.length,i=o;(i-=1)>-1;)t+=(e.charCodeAt(i)-64)*Math.pow(26,o-1-i);return t}function s(e){var t=e%26,o=e/26|0,i=t?String.fromCharCode(64+t):(o--,"Z");return o?s(o)+i:i}Object.defineProperty(t,"__esModule",{value:!0}),t.answercheck=void 0,t.answercheck=function(e,t){if(console.log("=========> answercheck result",e),console.log("=========> answercheck msg",t),!t||e.length<0)return-1;const n=e;if(!n)return-1;if(0===t.basetype&&1===t.subtype){console.log("=========> answercheck gap2",n.contentAnswers);let e=[],o=[];return n.contentAnswers.map(((i,s)=>{i.basetype===t.basetype&&i.subtype===t.subtype&&(e.push(i),o.push(s))})),e.map(((e,i)=>{let s=o[i];const c=n.userChoices[s];if(2===e.matchType){c.correct=!1;for(let o=0;o<e.answers.length;o++)e.answers[o]===t.choicedValue[i]&&(c.correct=!0)}else e.answers[0]===t.choicedValue[i]?c.correct=!0:c.correct=!1;c.choicedIdx=t.choicedIdx[i],c.choicedValue=t.choicedValue[i],c.completed=!0})),o.length>0?o[o.length-1]:-1}if(0===t.basetype&&2===t.subtype){console.log("=========> answercheck gap3",n.contentAnswers);let e=[],o=[];return n.contentAnswers.map(((i,s)=>{i.basetype===t.basetype&&i.subtype===t.subtype&&(e.push(i),o.push(s))})),e.map(((e,i)=>{let s=o[i];const c=n.userChoices[s];if(2===e.matchType){c.correct=!1;for(let o=0;o<e.answers.length;o++)JSON.stringify(e.answers[o])===JSON.stringify(t.choicedValue[i])&&(c.correct=!0)}else JSON.stringify(e.answers)===JSON.stringify(t.choicedValue[i])?c.correct=!0:c.correct=!1;c.choicedIdx=t.choicedIdx[i],c.choicedValue=t.choicedValue[i],c.completed=!0})),o.length>0?o[o.length-1]:-1}let c=n.contentAnswers.findIndex((e=>e.basetype===t.basetype&&e.subtype===t.subtype));if(c<0)return-1;console.log("=========> answercheck answer idx",c,n.contentAnswers[c]);const r=n.contentAnswers[c],a=n.userChoices[c];if(!a)return-1;if(0===t.basetype&&0===t.subtype){if(console.log("=========> answercheck gap",r),2===r.matchType){let e=t.choicedValue.join(",");console.log("=========> answercheck gap choices",e);let o=!1;for(let t=0;t<r.answers.length;t++)if(r.answers[t]===e){o=!0;break}a.correct=o}else if(1===r.matchType){if(console.log("=========> answercheck gap",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;let e=!0;for(let o=0;o<r.answers.length;o++)if(r.answers[o]!==t.choicedValue[o]){e=!1;break}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck gap",r,a)}else if(1===t.basetype&&0===t.subtype){if(2===r.matchType){const e=r.answers.findIndex((e=>e+""===t.choicedValue[0]));a.correct=!(e<0)}else 1===r.matchType&&(console.log("=========> answercheck choice",r.answers[0],t.choicedValue[0]),r.answers[0]+""===t.choicedValue[0]?a.correct=!0:a.correct=!1);a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck choice",r,a)}else if(1===t.basetype&&1===t.subtype){if(2===r.matchType){let e=t.choicedValue.sort();console.log("=========> answercheck choice/multi compare2",e,e.join());const o=r.answers.findIndex((t=>t===e.join()));a.correct=!(o<0)}else if(1===r.matchType){let e=r.answers.slice().sort(),o=t.choicedValue.sort();console.log("=========> answercheck choice/multi compare",e,o),JSON.stringify(e)===JSON.stringify(o)?a.correct=!0:a.correct=!1}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck choice/multi",r,a)}else if(2===t.basetype){if(2===r.matchType&&4===r.subtype){const e=t.choicedValue.length,o=r.answers.length,i=Math.round(o/e);let s=[];for(let t=0;t<i;t++){let i=e*t,n=e*(t+1);n>o&&(n=o),s.push(r.answers.slice(i,n))}console.log("===> answercheck dragdrop tmp",s);let n=!1;for(let e=0;e<s.length;e++){let o=!0;for(let i=0;i<s[e].length;i++){let n=s[e][i].split(",").sort(),c=t.choicedValue[i].split(",").sort();if(n.length!==c.length){o=!1;break}if(JSON.stringify(n)!==JSON.stringify(c)){o=!1;break}}if(o){n=!0;break}}a.correct=n}else if(2===r.matchType&&4!==t.subtype){let e=!1;for(let o=0;o<r.answers.length;o++){let i=r.answers[o].split(",");if(i.length!==t.choicedValue.length)break;if(console.log("===> answercheck dragdrop check",t.subtype,r.matchType,o,i,t.choicedValue),JSON.stringify(i)===JSON.stringify(t.choicedValue)){e=!0;break}}a.correct=e}else if(1===r.matchType){if(console.log("=========> answercheck dragdrop",t.subtype,r.matchType,r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;let e=!0;for(let o=0;o<r.answers.length;o++){console.log("=========> answercheck dragdrop",t.subtype,r.matchType,o,r.answers[o],t.choicedValue[o],r.answers[o]===t.choicedValue[o]);let i=r.answers[o].split(",").sort();if(i.length>1){let s=t.choicedValue[o].split(",").sort();if(i.length!==s.length){e=!1;break}if(i.join()!==s.join()){e=!1;break}}else if(r.answers[o]!==t.choicedValue[o]){e=!1;break}}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck dragdrop",t.subtype,r.matchType,r,a)}else if(3===t.basetype&&0===t.subtype){if(3===r.matchType);else if(2===r.matchType);else if(1===r.matchType){if(console.log("=========> answercheck shade",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;let e=!0;for(let o=0;o<r.answers.length;o++){console.log("=========> answercheck shade",o,r.answers[o],t.choicedValue[o],r.answers[o]===t.choicedValue[o]);let i=r.answers[o].split(",").sort();if(i.length>1){let s=t.choicedValue[o].split(",").sort();if(i.length!==s.length){e=!1;break}if(i.join()!==s.join()){e=!1;break}}else if(r.answers[o]!==t.choicedValue[o]){e=!1;break}}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck shade",r,a)}else if(3===t.basetype&&1===t.subtype){if(3===r.matchType){let e=!0;if(0===t.choicedValue.length)e=!1;else{let o=!1;if(t.choicedValue.length>1)for(let e=1;e<t.choicedValue.length;e++)if(t.choicedValue[0]===t.choicedValue[e]){o=!0;break}if(o)e=!1;else for(let o=0;o<t.choicedValue.length;o++){let i=t.choicedValue[o].split(",");if(r.answers.length!==i.length){e=!1;break}if(r.answers.slice().sort().join(",")===t.choicedValue[o]){e=!1;break}}}a.correct=e}else if(2===r.matchType);else if(1===r.matchType){if(console.log("=========> answercheck shade",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;let e=!0;for(let o=0;o<r.answers.length;o++)if(console.log("contentanswer.answers[i]",o,r.answers[o]),console.log("msg.choicedValue[i]",o,t.choicedValue[o]),r.answers[o]!==t.choicedValue[o]){e=!1;break}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck shade",r,a)}else if(4===t.basetype&&0===t.subtype){if(2===r.matchType){let e=t.choicedValue;console.log("=========> answercheck dragadd",e,e.join());const o=r.answers.findIndex((t=>t===e.join()));a.correct=!(o<0)}else if(1===r.matchType){if(console.log("=========> answercheck dragadd",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;let e=!0;for(let o=0;o<r.answers.length;o++)if(console.log("=========> answercheck dragadd",o,r.answers[o],t.choicedValue[o],r.answers[o]!==t.choicedValue[o]),r.answers[o]!==t.choicedValue[o]){e=!1;break}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck dragadd",r,a)}else if(4===t.basetype&&2===t.subtype){if(2===r.matchType){let e=t.choicedValue;console.log("=========> answercheck tally chart",e,e.join());const o=r.answers.findIndex((t=>t===e.join()));a.correct=!(o<0)}else if(1===r.matchType){if(console.log("=========> answercheck tally chart",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;let e=!0;for(let o=0;o<r.answers.length;o++)if(console.log("=========> answercheck tally chart",o,r.answers[o],t.choicedValue[o],r.answers[o]!==t.choicedValue[o]),r.answers[o]!==t.choicedValue[o]){e=!1;break}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck tally chart",r,a)}else if(4===t.basetype&&3===t.subtype||0===t.basetype&&3===t.subtype){if(2===r.matchType){let e=t.choicedValue;console.log("=========> answercheck gapplus",e,e.join());const o=r.answers.findIndex((t=>t===e.join()));a.correct=!(o<0)}else if(1===r.matchType){if(console.log("=========> answercheck gapplus",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;let e=!0;for(let o=0;o<r.answers.length;o++)if(console.log("=========> answercheck gapplus",o,r.answers[o],t.choicedValue[o],r.answers[o]!==t.choicedValue[o]),r.answers[o]!==t.choicedValue[o]){e=!1;break}a.correct=e}if(a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,4===t.basetype){let e=n.contentAnswers.findIndex((e=>0===e.basetype&&3===e.subtype));if(e<0)return a.completed=!1,-2;const t=n.userChoices[e];if(t&&t.completed&&JSON.stringify(a.choicedValue)!==JSON.stringify(t.choicedValue))return a.correct=!1,c}else{let e=n.contentAnswers.findIndex((e=>4===e.basetype&&3===e.subtype));if(e<0)return a.completed=!1,-2;const t=n.userChoices[e];if(t&&t.completed&&JSON.stringify(a.choicedValue)!==JSON.stringify(t.choicedValue))return a.correct=!1,c}console.log("=========> answercheck gapplus contentresult",n)}else if(5===t.basetype){if(2===r.matchType){const e=t.choicedValue.length,o=r.answers.length,i=Math.round(o/e);let s=[];console.log("===> answercheck connection len",e,o,i);for(let t=0;t<i;t++){let i=e*t,n=e*(t+1);n>o&&(n=o),s.push(r.answers.slice(i,n))}console.log("===> answercheck connection tmp",s);let n=!1;for(let e=0;e<s.length;e++){let o=!0;if(s[e].length===t.choicedValue.length){for(let i=0;i<s[e].length;i++)if(s[e][i]!==t.choicedValue[i]){o=!1;break}if(o){n=!0;break}}else o=!1}a.correct=n}else if(1===r.matchType){if(console.log("=========> answercheck connection",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;let e=!0;for(let o=0;o<r.answers.length;o++)if(console.log("=========> answercheck connection",o,r.answers[o],t.choicedValue[o],r.answers[o]!==t.choicedValue[o]),r.answers[o]!==t.choicedValue[o]){e=!1;break}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck dragadd",r,a)}else if(6===t.basetype){if(2===r.matchType){let e=!1;for(let o=0;o<r.answers.length;o++){let i=r.answers[o].split(",");if(i.length!==t.choicedValue.length)break;if(console.log("===> answercheck number line check",t.subtype,r.matchType,o,i,t.choicedValue),JSON.stringify(i)===JSON.stringify(t.choicedValue)){e=!0;break}}a.correct=e}else if(1===r.matchType){if(r.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;console.log("=========> answercheck number line",r.answers,t.choicedValue),JSON.stringify(r.answers)===JSON.stringify(t.choicedValue)?a.correct=!0:a.correct=!1}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck number line",r,a)}else if(7===t.basetype){if(2===r.matchType){let e=!1;for(let o=0;o<r.answers.length;o++){let i=r.answers[o].split(",");if(i.length!==t.choicedValue.length)break;if(console.log("===> answercheck picture graph check",t.subtype,r.matchType,o,i,t.choicedValue),JSON.stringify(i)===JSON.stringify(t.choicedValue)){e=!0;break}}a.correct=e}else if(1===r.matchType){if(r.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;console.log("=========> answercheck picture graph",r.answers,t.choicedValue),JSON.stringify(r.answers)===JSON.stringify(t.choicedValue)?a.correct=!0:a.correct=!1}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck picture graph",r,a)}else if(8===t.basetype){if(2===r.matchType){let e=!1;for(let o=0;o<r.answers.length;o++){let i=r.answers[o].split(",");if(i.length!==t.choicedValue.length)break;if(console.log("===> answercheck bar graph check",t.subtype,r.matchType,o,i,t.choicedValue),JSON.stringify(i)===JSON.stringify(t.choicedValue)){e=!0;break}}a.correct=e}else if(1===r.matchType){if(r.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;console.log("=========> answercheck bar graph",r.answers,t.choicedValue),JSON.stringify(r.answers)===JSON.stringify(t.choicedValue)?a.correct=!0:a.correct=!1}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck bar graph",r,a)}else if(9===t.basetype){if(2===r.matchType){let e=!1;for(let o=0;o<r.answers.length;o++){let i=r.answers[o].split(",");if(i.length!==t.choicedValue.length)break;if(console.log("===> answercheck line plot check",t.subtype,r.matchType,o,i,t.choicedValue),JSON.stringify(i)===JSON.stringify(t.choicedValue)){e=!0;break}}a.correct=e}else if(1===r.matchType){if(r.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;console.log("=========> answercheck line plot",r.answers,t.choicedValue),JSON.stringify(r.answers)===JSON.stringify(t.choicedValue)?a.correct=!0:a.correct=!1}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck line plot",r,a)}else if(11===t.basetype&&0===t.subtype){if(2===r.matchType);else if(1===r.matchType){if(console.log("=========> answercheck radio",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;let e=!0;for(let o=0;o<r.answers.length;o++)if(console.log("=========> answercheck radio",o,r.answers[o],t.choicedValue[o],r.answers[o]!==t.choicedValue[o]),r.answers[o]!==t.choicedValue[o]){e=!1;break}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck dragadd",r,a)}else if(12===t.basetype&&0===t.subtype){if(2===r.matchType);else if(1===r.matchType){if(console.log("=========> answercheck checkbox",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,a.correct=!1,c;let e=!0;for(let o=0;o<r.answers.length;o++)if(console.log("=========> answercheck checkbox",o,r.answers[o],t.choicedValue[o],r.answers[o]!==t.choicedValue[o]),r.answers[o]!==t.choicedValue[o]){e=!1;break}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck",r,a)}else if(13===t.basetype&&0===t.subtype){if(2===r.matchType){let e=!1;for(let i=0;i<r.answers.length;i++){let s=r.answers[i].split(",");if(s.length!==t.choicedValue.length)break;const n=s.sort(o);if(console.log("===> answercheck grid and chart check",t.subtype,r.matchType,i,s,n,t.choicedValue),JSON.stringify(n)===JSON.stringify(t.choicedValue)){e=!0;break}}a.correct=e}else if(1===r.matchType){if(console.log("=========> answercheck grid and chart",r.answers.length,t.choicedValue.length),r.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,a.correct=!1,c;let e=!0;const i=r.answers.sort(o);console.log("=========> answercheck grid and chart sorted ans",i);for(let o=0;o<i.length;o++)if(console.log("=========> answercheck grid and chart",o,i[o],t.choicedValue[o],i[o]!==t.choicedValue[o]),i[o]!==t.choicedValue[o]){e=!1;break}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck grid and chart",r,a)}else if(13===t.basetype&&1===t.subtype){if(2===r.matchType){let e=!1;if(t.choicedValue.length<2)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,a.correct=!1,c;let o=t.choicedValue.slice(0,t.choicedValue.length-1),n=t.choicedValue.slice(t.choicedValue.length-1),l=(i(n[0].substring(0,1)),parseInt(n[0].substring(1)));for(let n=0;n<r.answers.length;n++){let d=r.answers[n].split(",");if(2!==d.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,a.correct=!1,-1;let h=d[0],u=i(h.substring(0,1)),p=parseInt(h.substring(1)),_=d[1],m=i(_.substring(0,1)),g=parseInt(_.substring(1));if(isNaN(u)||isNaN(p)||isNaN(m)||isNaN(g))return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,a.correct=!1,c;let f=[];if(u===m)for(let e=p;e<=g;e++)f.push(s(u)+e);else for(let e=u;e<=m;e++)if(e==u)for(let t=p;t<=l;t++)f.push(s(e)+t);else if(e>u&&e<m)for(let t=1;t<=l;t++)f.push(s(e)+t);else if(e==m)for(let t=1;t<=g;t++)f.push(s(e)+t);if(JSON.stringify(f)===JSON.stringify(o)){e=!0;break}}a.correct=e}else if(1===r.matchType){if(console.log("=========> answercheck grid and chart 2",r.answers.length,t.choicedValue.length),2!==r.answers.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,a.correct=!1,-1;if(t.choicedValue.length<2)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,a.correct=!1,c;let e=t.choicedValue.slice(0,t.choicedValue.length-1),o=t.choicedValue.slice(t.choicedValue.length-1),n=(i(o[0].substring(0,1)),parseInt(o[0].substring(1))),l=r.answers[0],d=i(l.substring(0,1)),h=parseInt(l.substring(1)),u=r.answers[1],p=i(u.substring(0,1)),_=parseInt(u.substring(1));if(isNaN(d)||isNaN(h)||isNaN(p)||isNaN(_))return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,a.correct=!1,c;let m=[];if(d===p)for(let e=h;e<=_;e++)m.push(s(d)+e);else for(let e=d;e<=p;e++)if(e==d)for(let t=h;t<=n;t++)m.push(s(e)+t);else if(e>d&&e<p)for(let t=1;t<=n;t++)m.push(s(e)+t);else if(e==p)for(let t=1;t<=_;t++)m.push(s(e)+t);let g=!1;JSON.stringify(m)===JSON.stringify(e)&&(g=!0),a.correct=g}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck grid and chart 2",r,a)}else if(13===t.basetype&&2===t.subtype){if(2===r.matchType){console.log("=========> answercheck grid and chart 3",r.answers,t.choicedValue[0]);const e=r.answers.findIndex((e=>e+""===t.choicedValue[0]));a.correct=!(e<0)}else if(1===r.matchType){if(console.log("=========> answercheck grid and chart 3",r.answers[0],t.choicedValue[0]),r.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;r.answers[0]+""===t.choicedValue[0]?a.correct=!0:a.correct=!1}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck grid and chart 3",r,a)}return c}},376:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(c=(n<3?s(c):n>3?s(t,o,c):s(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(t,"__esModule",{value:!0}),t.ImgBtn=t.AudioBtn=t.ToggleBtn=void 0;const s=o(804),n=o(965),c=o(98);class r extends s.Component{constructor(e){super(e),this.m_pID=-1,this._inited=this._inited.bind(this),this._onClick=this._onClick.bind(this)}_inited(e){!this.m_el&&e&&(this.m_el=e,this.props.onRef&&this.props.onRef(e),e.setAttribute("touch-action","none"),e.addEventListener("pointerdown",(t=>{if(!(this.m_pID>=0)){if(this.m_pID=t.pointerId,!this.props.disableCapture)try{e.setPointerCapture(this.m_pID)}catch(e){}this.props.onMouseDown&&this.props.onMouseDown(t)}})),e.addEventListener("pointerup",(t=>{if(this.m_pID===t.pointerId){try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1,this.props.onMouseUp&&this.props.onMouseUp(t)}})),e.addEventListener("pointerleave",(t=>{if(this.props.disableCapture){if(this.m_pID!==t.pointerId)return;try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1}this.props.onMouseLeave&&this.props.onMouseLeave(t)})),e.addEventListener("pointercancel",(t=>{if(this.m_pID===t.pointerId){try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1,this.props.onMouseLeave&&this.props.onMouseLeave(t)}})))}_onClick(e){this.props.onClick&&this.props.onClick(e),this.props.preventEvent&&(e.preventDefault(),e.stopPropagation())}componentDidUpdate(e){if((this.props.disabled&&!e.disabled||!this.props.view&&e.view)&&this.m_pID>=0){try{this.m_el&&this.m_el.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1}}}i([n.observable],r.prototype,"m_pID",void 0);let a=class extends r{constructor(e){super(e),this.m_on=!1,this.m_on=!0===e.on}componentWillReceiveProps(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}render(){const e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down");const t=e.join(" ");let o=this.props.style;return!1===this.props.view&&(o||(o={}),o.display="none"),s.createElement("button",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,disabled:!0===this.props.disabled,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:o},this.props.children)}};i([n.observable],a.prototype,"m_on",void 0),a=i([c.observer],a),t.ToggleBtn=a;let l=class extends a{constructor(e){super(e)}play(){this.m_on||(this.m_on=!0,this.props.playFnc(this.props.src,(e=>{this.m_on&&(this.m_on=!1,this.props.onPause&&this.props.onPause(e))})))}_onClick(e){this.m_on?(this.props.pauseFnc(),this.m_on=!1):this.play(),super._onClick(e)}};i([n.action],l.prototype,"play",null),i([n.action],l.prototype,"_onClick",null),l=i([c.observer],l),t.AudioBtn=l;let d=class extends r{constructor(e){super(e),this.m_on=!1,this.m_on=!0===e.on}componentWillReceiveProps(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}render(){const e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down"),!0===this.props.disabled&&e.push("disable");const t=e.join(" ");let o=this.props.style;return!1===this.props.view&&(o||(o={}),o.display="none"),s.createElement("img",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:o,src:this.props.src,useMap:this.props.useMap})}};i([n.observable],d.prototype,"m_on",void 0),d=i([c.observer],d),t.ImgBtn=d},268:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.importLink=t.importHTML=void 0,t.importHTML=function(e){return new Promise(((t,o)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="document",i.onload=e=>{if(!e)return;const s=i.response;s&&s.body&&s.body.firstElementChild?t(s.body.firstElementChild):s&&s.documentElement?t(s.documentElement):o("error")},i.onerror=e=>{o(e)},i.send(null)}))},t.importLink=function(e,t){return new Promise(((t,o)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="document",i.onload=e=>{if(!e)return;const o=i.response;t(o)},i.onerror=e=>{o(e)},i.send(null)}))}},478:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._toStringTimestamp=t.getDateStr=t.nteArray=t.intToHTMLcolor=t.nteBool=t.nteString=t.nteFloat=t.nteInt=t.nteUInt=t.getUnicUrl=t.getUnicNum=t.getUnic=void 0,Date.now||(Date.now=function(){return(new Date).getTime()});let o=0;function i(){return s().toString(36)}function s(){const e=Date.now();return e>o?o=e:o+=1,o}t.getUnic=i,t.getUnicNum=s,t.getUnicUrl=function(e){if(!e)return"";let t=e=e.trim();return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")||(t=t.indexOf("?")>0?t+"&t="+i():t+"?t="+i()),t},t.nteUInt=function(e,t){if(null==e)return t;if("number"==typeof e)return isNaN(e)||e<0?t:Math.round(e);{const o=parseInt(String(e),10);return isNaN(o)||o<0?t:o}},t.nteInt=function(e,t){if(null==e)return t;if("number"==typeof e)return Math.round(e);{const o=parseInt(String(e),10);return isNaN(o)?t:o}},t.nteFloat=function(e,t){if(null==e)return t;if("number"==typeof e)return e;{const o=parseFloat(String(e));return isNaN(o)?t:o}},t.nteString=function(e,t){return null==e?t:String(e)},t.nteBool=function(e,t){if(null==e)return t;if("boolean"==typeof e)return e;const o=String(e);return"true"===o||"false"!==o&&t},t.intToHTMLcolor=function(e){let t,o,i,s=e-0;t=(255&s)<<16,o=65280&s,i=(16711680&s)>>>16,s=t|o|i;let n=s.toString(16);return n="#000000".substring(0,7-n.length)+n,n},t.nteArray=function(e){if(e){if(Array.isArray(e))return e;if("string"==typeof e){const t=e;if(t.indexOf("[")>=0&&t.indexOf("]")>0)try{return JSON.parse(t)}catch(e){}}const t=[];return t.push(e),t}return[]},t.getDateStr=function(e="."){const t=new Date,o=t.getFullYear(),i=t.getMonth()+1,s=t.getDate();return o+e+(i<10?"0"+i:""+i)+e+(s<10?"0"+s:""+s)},t._toStringTimestamp=function(e){let t;const o=e.getFullYear();let i=e.getMonth()+1+"";parseInt(i,10)<10&&(i="0"+i);let s=e.getDate()+"";return parseInt(s,10)<10&&(s="0"+s),t=o+"-"+i+"-"+s+" "+e.toTimeString().substr(0,8),t}},359:function(e,t,o){var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(s,n){function c(e){try{a(i.next(e))}catch(e){n(e)}}function r(e){try{a(i.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getBounds=t.getTimeStr=t.wait=void 0;const s=o(215);t.wait=function(e){return i(this,void 0,void 0,(function*(){return new Promise((t=>{s.delay(t,e)}))}))},t.getTimeStr=function(e,t){const o=Math.round(t/1e3);let i=Math.round(e/1e3),s=Math.floor(i/60),n=Math.floor(s/60),c="";return i%=60,s%=60,n>0||o>=3600?(c=n+":",c+=s>=10?s+":":"0"+s+":"):o>=600?c+=s>=10?s+":":"0"+s+":":c=s+":",c+=i>=10?i:"0"+i,c},t.getBounds=function(e){const t={left:0,top:0,width:0,height:0};if(!e)return t;try{const o=e.getBoundingClientRect();t.left=o.left,t.top=o.top,t.width=o.width,t.height=o.height}catch(e){}const o=e.ownerDocument,i=o.body,s=o.documentElement;t.left=t.left-(s.clientLeft||i.clientLeft||0),t.top=t.top-(s.clientTop||i.clientTop||0);const n=o.defaultView;return t.left+=n.pageXOffset||s.scrollLeft||i.scrollLeft,t.top+=n.pageYOffset||s.scrollTop||i.scrollTop,t}},201:function(e,t,o){var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(s,n){function c(e){try{a(i.next(e))}catch(e){n(e)}}function r(e){try{a(i.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getPreviewDmsResult=t.getPreviewResult=t.clearPenTool=t.hidePenTool=t.showPenTool=t.showRecordTool=t.showSendButton=t.alertToStudent=t.showSLoading=t.showSMathKit=t.clearSPenTool=t.takePicture=t.uploadInclassReport=t.stopVideoRecord=t.startVideoRecord=t.switchCamera=t.stopCamera=t.startCustomCamera=t.startCamera=t.getStudents=t.uploadImageToServer=t.uploadFileToServer=t.stopVoiceRecord=t.startVoiceRecord=t.sendTeacher=t.disableSoftwareKeyboard=t.sendPAD=t.sendPADToID=t.sendLauncher=t.uploadStudentReport=t.addStudentForStudentReportType6=t.hideStudentReportListPage=t.showStudentReportListPage=t.showStudentReportUI=t.hideStudentReportUI=t.startStudentReportProcess=t.finishContentPage=t.showTMathKit=t.alertToTeacher=t.showTLoading=t.clearTPenTool=t.getBookCaptureInfo=t.uploadTImageToServer=t.useFractionBar=t.logOut=t.exitClass=t.getNaviInfo=t.launchPadTool=t.launchTool=t.exitBook=t.gotoBookByKey=t.gotoBook=t.set=void 0;const s=o(215);let n=!1;t.set=function(e){n=e},t.gotoBook=function(e,t){if(console.log("felsocket gotoBook",e,t),!n)try{window.tsoc_o.gotoBook(e,t)}catch(e){}},t.gotoBookByKey=function(e){if(console.log("felsocket gotoBookByKey",e),!n)try{window.tsoc_o.gotoBookByKey(e)}catch(e){}},t.exitBook=function(){if(console.log("felsocket exitBook"),!n)try{window.tsoc_o.exitBook()}catch(e){}},t.launchTool=function(e){if(console.log("felsocket launchTool",e),!n)try{window.tsoc_o.launchTool(e)}catch(e){}},t.launchPadTool=function(e){if(console.log("felsocket launchPadTool",e),!n)try{window.tsoc_o.launchPadTool(e)}catch(e){}},t.getNaviInfo=function(e){if(console.log("felsocket getNaviInfo",e),!n)try{window.tsoc_o.getNaviInfo(e)}catch(e){}},t.exitClass=function(){if(console.log("felsocket exitClass"),!n)try{window.tsoc_o.exitClass()}catch(e){}},t.logOut=function(){if(console.log("felsocket logOut"),!n)try{window.tsoc_o.logOut()}catch(e){}},t.useFractionBar=function(){if(console.log("felsocket useFractionBar"),!n)try{window.tsoc_o.useFractionBar()}catch(e){}},t.uploadTImageToServer=function(e,t,o,i){if(console.log("felsocket uploadTImageToServer",t,o,i),!n)try{window.tsoc_o.uploadImageToServer(e,t,o,i)}catch(e){}},t.getBookCaptureInfo=function(e){if(console.log("felsocket getBookCaptureInfo"),!n)try{window.tsoc_o.getBookCaptureInfo(e)}catch(e){}},t.clearTPenTool=function(){if(console.log("felsocket clearTPenTool"),!n)try{window.tsoc_o.clearPenTool()}catch(e){}},t.showTLoading=function(e){if(console.log("felsocket showTLoading",e),!n)try{window.tsoc_o.showLoading(e)}catch(e){}},t.alertToTeacher=function(e){if(console.log("felsocket alertToTeacher",e),!n)try{window.tsoc_o.alert(e)}catch(e){}},t.showTMathKit=function(e){if(console.log("felsocket showTMathKit",e),!n)try{window.tsoc_o.showMathKit(e)}catch(e){}},t.finishContentPage=function(){if(!n)try{window.tsoc_o.finishContentPage()}catch(e){}},t.startStudentReportProcess=function(e,t,o){if(!n)try{window.tsoc_o.startStudentReportProcess(e,t,o)}catch(e){}},t.hideStudentReportUI=function(){if(!n)try{window.tsoc_o.hideStudentReportUI()}catch(e){}},t.showStudentReportUI=function(){if(!n)try{window.tsoc_o.showStudentReportUI()}catch(e){}},t.showStudentReportListPage=function(){if(!n)try{window.tsoc_o.showStudentReportListPage()}catch(e){}},t.hideStudentReportListPage=function(){if(!n)try{window.tsoc_o.hideStudentReportListPage()}catch(e){}},t.addStudentForStudentReportType6=function(e){if(!n)try{window.tsoc_o.addStudentForStudentReportType6(e)}catch(e){}},t.uploadStudentReport=function(e,t,o){if(!n)try{window.psoc_o.uploadStudentReport(e,t,o)}catch(e){}},t.sendLauncher=function(e,t){if(5!==e||n)if(6!==e||n)if(7!==e||n){if(8===e)if(console.log("felsocket gotoPrevBook"),n)try{window.top.tsoc_o.gotoPrevBook()}catch(e){}else try{window.tsoc_o.gotoPrevBook()}catch(e){}else if(9===e)if(console.log("felsocket gotoNextBook"),n)try{window.top.tsoc_o.gotoNextBook()}catch(e){}else try{window.tsoc_o.gotoNextBook()}catch(e){}}else try{window.tsoc_o.setTitleBar(t)}catch(e){}else try{window.tsoc_o.showTitleBar()}catch(e){}else try{window.tsoc_o.hideTitleBar()}catch(e){}},t.sendPADToID=function(e,t,o){const i={type:t,data:o};if(n)try{window.top.tsoc_o.sendPADToID(e,i)}catch(e){}else try{window.tsoc_o.sendPADToID(e,i)}catch(e){}},t.sendPAD=function(e,t){const o={type:e,data:t};if(n)try{window.top.tsoc_o.sendAll(o)}catch(e){}else try{window.tsoc_o.sendAll(o)}catch(e){}},t.disableSoftwareKeyboard=function(){try{window.psoc_o.disableSoftwareKeyboard()}catch(e){}},t.sendTeacher=function(e,t){const o={type:e,data:t};if(n)try{window.opener.tsoc_o.sendTeacher(o)}catch(e){}else try{window.psoc_o.sendTeacher(o)}catch(e){}},t.startVoiceRecord=function(){try{window.psoc_o.startVoiceRecord()}catch(e){}},t.stopVoiceRecord=function(){try{window.psoc_o.stopVoiceRecord()}catch(e){}},t.uploadFileToServer=function(e){try{window.psoc_o.uploadFileToServer(e)}catch(e){}},t.uploadImageToServer=function(e,t,o,i){try{window.psoc_o.uploadImageToServer(e,t,o,i)}catch(e){}},t.getStudents=function(e){if(n)if(window.top.tsoc_o)try{window.top.tsoc_o.getStudents(e)}catch(e){}else e([],!1);else try{window.tsoc_o.getStudents(e)}catch(e){}},t.startCamera=function(){if(!n)try{window.psoc_o.startCamera()}catch(e){}},t.startCustomCamera=function(e){if(!n)try{window.psoc_o.startCustomCamera(e)}catch(e){}},t.stopCamera=function(){if(!n)try{window.psoc_o.stopCamera()}catch(e){}},t.switchCamera=function(){if(!n)try{window.psoc_o.switchCamera()}catch(e){}},t.startVideoRecord=function(){if(!n)try{window.psoc_o.startVideoRecord()}catch(e){}},t.stopVideoRecord=function(){if(!n)try{window.psoc_o.stopVideoRecord()}catch(e){}},t.uploadInclassReport=function(e){if(!n)try{window.tsoc_o.uploadInclassReport(e)}catch(e){}},t.takePicture=function(e){if(!n)try{window.psoc_o.takePicture(e)}catch(e){}},t.clearSPenTool=function(){if(console.log("felsocket clearPenTool"),!n)try{window.psoc_o.clearPenTool()}catch(e){}},t.showSMathKit=function(e){if(console.log("felsocket showSMathKit",e),!n)try{window.psoc_o.showMathKit(e)}catch(e){}},t.showSLoading=function(e){if(console.log("felsocket showSLoading",e),!n)try{window.psoc_o.showLoading(e)}catch(e){}},t.alertToStudent=function(e){if(console.log("felsocket alertToStudent",e),!n)try{window.psoc_o.alert(e)}catch(e){}},t.showSendButton=function(e){if(console.log("felsocket showSendButton"),!n)try{window.psoc_o.showSendButton(e)}catch(e){}},t.showRecordTool=function(e){if(console.log("felsocket showRecordTool",e),!n)try{window.psoc_o.showRecordTool(e)}catch(e){}},t.showPenTool=function(){if(console.log("felsocket showPentool"),!n)try{window.psoc_o.showPenTool()}catch(e){}},t.hidePenTool=function(){if(console.log("felsocket hidePentool"),!n)try{window.psoc_o.hidePenTool()}catch(e){}},t.clearPenTool=function(){if(console.log("felsocket clearPenTool"),!n)try{window.psoc_o.clearPenTool()}catch(e){}},t.getPreviewResult=function(e){return i(this,void 0,void 0,(function*(){return new Promise((t=>{if(n)t([]);else{let o=!1;const i=e=>{o||(o=!0,t(e))};window.tsoc_o.getPreviewResult(i,e),s.delay((()=>{o||(o=!0,t([]))}),5e3)}}))}))},t.getPreviewDmsResult=function(e){return i(this,void 0,void 0,(function*(){return new Promise((t=>{if(n)t([]);else{let o=!1;const i=e=>{o||(o=!0,t(e))};window.tsoc_o.getPreviewDmsResult(i,e),s.delay((()=>{o||(o=!0,t([]))}),5e3)}}))}))}},615:function(e,t,o){e=o.nmd(e);var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(c=(n<3?s(c):n>3?s(t,o,c):s(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(t,"__esModule",{value:!0}),t.appContext=t.AppProvider=void 0;const s=o(804),n=o(98),c=o(53),r=o(183),a=o(181),l=o(488);Object.defineProperty(t,"appContext",{enumerable:!0,get:function(){return l.sContext}}),Object.defineProperty(t,"AppProvider",{enumerable:!0,get:function(){return l.StudentProvider}});const d=o(342);o(890),o(967);let h=class extends s.Component{render(){const{state:e,actions:t}=this.props,o=e.viewDiv;return s.createElement(s.Fragment,null,s.createElement("div",{className:"content-container"},s.createElement("div",{className:"content-wrapper",style:{left:("direction"===o?0:-1280)+"px"}},s.createElement("div",null,s.createElement(r.default,{className:"video-direction",view:"direction"===e.viewDiv,on:e.directionON,isTeacher:!1,lesson:t.getCurriculum(),bookId:e.bookid,subtitle:"",poster_url:"/content/mathalive_lib/MA/check/common/bg_direction.jpg",video_url:"/content/mathalive_lib/MA/check/common/mv_check.mp4",video_frame:125})),s.createElement("div",null,s.createElement(d.default,{view:"content"===o&&"check"===e.prog,state:e,actions:t,checkProg:e.checkProg}),s.createElement(a.default,{view:"eyeon"===e.viewDiv})))))}};h=i([n.observer],h);const u=l.useStudent((e=>s.createElement(n.Observer,null,(()=>s.createElement(h,{state:e.state,actions:e.actions})))));t.default=c.hot(e)(u)},342:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(c=(n<3?s(c):n>3?s(t,o,c):s(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c},s=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(s,n){function c(e){try{a(i.next(e))}catch(e){n(e)}}function r(e){try{a(i.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=o(804),c=o(98),r=o(965),a=o(762),l=o(359),d=o(201),h=o(215),u=o(746),p=o(376),_=o(6),m=o(330),g=o(495),f=o(719).default,y={direction:"horizontal",observer:!0};let w=class extends n.Component{constructor(e){super(e),this._curIdx=0,this._prog=1,this._showQuizDesc=[],this._resultShowing=[],this._typeSayPop=0,this.quizResult=[],this._viewAlert=!1,this.ifr=[],this.ifr_desc=[],this._swiper=null,this._refSwiper=e=>{if(this._swiper||!e)return;const t=e.swiper;t.on("transitionStart",(()=>{this._curIdx=-1})),t.on("transitionEnd",(()=>{this.props.view&&(d.clearSPenTool(),this._curIdx=t.activeIndex,this.quizResult[this._curIdx].completed||4===this._prog||(3===this._prog&&(this._prog=1),this.initContent()))})),this._swiper=t},this.onClickIdx=e=>{4===this._prog&&this._swiper&&this._swiper.slideTo(e,0)},this.toggleQuizDesc=()=>{this._curIdx<0||this._curIdx>=this._showQuizDesc.length||(this._showQuizDesc[this._curIdx]=!this._showQuizDesc[this._curIdx])},this._onPrev=()=>{0!==this._curIdx&&(a.App.pub_playBtnTab(),this._swiper&&this._swiper.slidePrev())},this._onNext=()=>{const e=this.props.actions.getData().quizs;this._curIdx!==e.length-1&&(a.App.pub_playBtnTab(),this._swiper&&this._swiper.slideNext())},this._onSend=()=>s(this,void 0,void 0,(function*(){if(!this.props.view)return;if(1!==this._prog)return;if(-1===this._curIdx)return;let e=this.quizResult[this._curIdx];if(e.completed&&2!==e.tryCnt){if(this._prog=2,a.App.pub_playToPad(),e.tryCnt+=1,1===e.tryCnt&&!e.correct)return e.completed=!1,this.initContent(),this._typeSayPop=3,void(this._prog=1);if(a.App.student){e.studentid=a.App.student.id;const t={msgtype:"check_result",idx:this._curIdx,result:JSON.stringify(e)};d.sendTeacher(11,t)}yield l.wait(600),1===e.tryCnt&&e.correct?this._typeSayPop=1:2===e.tryCnt&&e.correct?this._typeSayPop=2:2!==e.tryCnt||e.correct||(this._typeSayPop=4),this._curIdx===this.quizResult.length-1?(this._prog=4,this.props.state.checkProg=3):this._prog=3,this.completeContent(),this._resultShowing[this._curIdx]=!0}})),this._onCompletedSayPop=()=>{this._typeSayPop=0;let e=this.quizResult[this._curIdx];1!==e.tryCnt||e.correct},this._onCompletedAlertPop=()=>{if(!this.props.view)return;this._viewAlert=!1;let e=this.quizResult[this._curIdx];if(e.choicedValue.length>0&&(e.tryCnt+=1),a.App.student){e.studentid=a.App.student.id;const t={msgtype:"check_result",idx:this._curIdx,result:JSON.stringify(e)};d.sendTeacher(11,t)}this.props.state.checkProg=3},this.handlePostMessage=e=>{console.log("=====> handlePostMessage",e.data);const t=e.data;if("macontent"===t.from&&"submit"===t.type){if(this._curIdx<-1||this._curIdx>=this.quizResult.length)return;let e=this.quizResult[this._curIdx];g.answercheck(e,t.msg)}};const t=this.props.actions.getData().quizs;for(let e=0;e<t.length;e++)this._showQuizDesc[e]=!1,this._resultShowing[e]=!1,this.quizResult.push({studentid:"",contentSeq:t[e].seq,contentType:t[e].type,answer:t[e].answer,choicedIdx:[],choicedValue:[],correct:!1,tryCnt:0,completed:!1})}componentDidMount(){window.addEventListener("message",this.handlePostMessage,!1)}componentWillUnmount(){window.removeEventListener("message",this.handlePostMessage,!1)}sendPostMessage(e,t,o){console.log("=====> sendPostMessage",e,t);const i={from:"matemplate",to:"macontent",type:e,msg:t};this.ifr[o]&&this.ifr[o].contentWindow.postMessage(i,"*")}initContent(){if(this._curIdx<0)return;const e=this.props.actions.getData().quizs;if(this._curIdx<e.length){let t={idx:this._curIdx,quizmode:"check",isTeacher:!1,content:e[this._curIdx]};this.sendPostMessage("init",t,this._curIdx)}}initContentAll(){const e=this.props.actions.getData().quizs;for(let t=0;t<e.length;t++){let o={idx:t,quizmode:"check",isTeacher:!1,content:e[t]};this.sendPostMessage("init",o,t)}}completeContent(){const e=this.props.actions.getData().quizs;let t={idx:this._curIdx,quizmode:"check",isTeacher:!1,content:e[this._curIdx]};this.sendPostMessage("completed",t,this._curIdx)}completeContentAll(){const e=this.props.actions.getData().quizs;for(let t=0;t<e.length;t++){let o={idx:t,quizmode:"check",isTeacher:!1,content:e[t]};this.sendPostMessage("completed",o,t)}}componentDidUpdate(e){if(this.props.view&&!e.view){this._curIdx=0,this._prog=1,this._viewAlert=!1;const e=this.props.actions.getData().quizs;for(let t=0;t<e.length;t++)this._showQuizDesc[t]=!1,this._resultShowing[t]=!1,this.quizResult[t].studentid="",this.quizResult[t].choicedIdx=[],this.quizResult[t].choicedValue=[],this.quizResult[t].correct=!1,this.quizResult[t].tryCnt=0,this.quizResult[t].completed=!1;this.initContent(),this._swiper&&(this._swiper.update(),this._swiper.slideTo(this._curIdx,0))}else!this.props.view&&e.view&&(this._viewAlert=!1);if(this.props.checkProg!==e.checkProg)if(4===this.props.checkProg&&4!==this._prog){this._viewAlert=!0,this._prog=4,this.completeContentAll();const e=this.props.actions.getData().quizs;for(let t=0;t<e.length;t++)this._resultShowing[t]=!0}else if(this.props.view&&e.view&&3===e.checkProg&&4===this._prog){this._prog=1,this._curIdx=0;const e=this.props.actions.getData().quizs;for(let t=0;t<e.length;t++)this._showQuizDesc[t]=!1,this._resultShowing[t]=!1,this.quizResult[t].studentid="",this.quizResult[t].choicedIdx=[],this.quizResult[t].choicedValue=[],this.quizResult[t].correct=!1,this.quizResult[t].tryCnt=0,this.quizResult[t].completed=!1;this.initContentAll(),this._swiper&&(this._swiper.update(),this._swiper.slideTo(this._curIdx,0))}}render(){const{view:e,state:t,actions:o}=this.props,i=o.getData().quizs;return n.createElement("div",{className:"s_check",style:{display:e?void 0:"none"}},n.createElement("div",{className:"topHeader"},n.createElement("div",{className:"page"},i.map(((e,t)=>{let o="num "+(this._curIdx===t?"on":"");return this._resultShowing[t]&&(1===this.quizResult[t].tryCnt&&this.quizResult[t].correct?o+=" h2":2===this.quizResult[t].tryCnt&&this.quizResult[t].correct?o+=" h1":this.quizResult[t].tryCnt>0&&(o+=" h0")),n.createElement("div",{key:"page"+t,className:o,onClick:this.onClickIdx.bind(this,t)},n.createElement("span",null,t+1))})))),n.createElement("div",{id:"contentWrap",className:"contentWrap"},n.createElement(f,Object.assign({ref:this._refSwiper},y),i.map(((e,t)=>n.createElement("div",{key:t,className:this._prog<4?"swiper-no-swiping":""},n.createElement("iframe",{src:a.App.data_url+e.url+"?idx="+t,style:{zIndex:4!==this._prog?10:-1},ref:e=>{e&&(this.ifr[t]=e)}}),n.createElement("div",{style:{zIndex:4===this._prog?10:-1}}),n.createElement("div",{className:"moreBox "+(this._showQuizDesc[t]?"show":"")},n.createElement("div",{className:"more_content"},n.createElement("button",{className:"btn_close",onClick:this.toggleQuizDesc}),n.createElement("iframe",{src:a.App.data_url+e.desc+"?idx="+t,ref:e=>{e&&(this.ifr_desc[t]=e,h.delay((()=>{if(null!==this.ifr_desc[t].contentWindow&&this.ifr_desc[t].contentWindow.document.body){let o=this.ifr_desc[t].contentWindow.document.body.scrollHeight;o>500&&(o=500),e.height=o+"px"}}),300))}})))))))),n.createElement(_.SayPopup,{view:this._typeSayPop>0,type:1,msgtype:this._typeSayPop,delay:3e3,onComplete:this._onCompletedSayPop}),n.createElement(p.ToggleBtn,{view:4===this._prog,on:this._curIdx>=0&&this._curIdx<this._showQuizDesc.length&&this._showQuizDesc[this._curIdx],className:"btn_bulb",onClick:this.toggleQuizDesc}),n.createElement(p.ToggleBtn,{className:"btn_prev",view:this._curIdx>0&&this._resultShowing[this._curIdx-1],onClick:this._onPrev}),n.createElement(p.ToggleBtn,{className:"btn_next",view:this._curIdx<i.length-1&&this._resultShowing[this._curIdx],onClick:this._onNext}),n.createElement(m.WarningPopup,{view:this._viewAlert,type:0,button:!1,delay:3e3,onComplete:this._onCompletedAlertPop}),n.createElement(u.default,{view:e&&this._curIdx>-1&&this.quizResult[this._curIdx].completed&&1===this._prog,type:"pad",sended:this._prog>=3||this._curIdx>-1&&this._resultShowing[this._curIdx],originY:0,onSend:this._onSend}))}};i([r.observable],w.prototype,"_curIdx",void 0),i([r.observable],w.prototype,"_prog",void 0),i([r.observable],w.prototype,"_showQuizDesc",void 0),i([r.observable],w.prototype,"_resultShowing",void 0),i([r.observable],w.prototype,"_typeSayPop",void 0),i([r.observable],w.prototype,"quizResult",void 0),i([r.observable],w.prototype,"_viewAlert",void 0),w=i([c.observer],w),t.default=w},488:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(c=(n<3?s(c):n>3?s(t,o,c):s(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(t,"__esModule",{value:!0}),t.SENDPROG=t.useStudent=t.StudentContext=t.StudentConsumer=t.StudentProvider=t.sContext=void 0;const s=o(804),n=o(965),c=o(737);var r;!function(e){e[e.MOUNT=0]="MOUNT",e[e.READY=1]="READY",e[e.SENDING=2]="SENDING",e[e.SENDED=3]="SENDED",e[e.COMPLETE=4]="COMPLETE"}(r||(r={})),t.SENDPROG=r;class a extends c.StudentContextBase{constructor(){super(),this.uploaded=e=>{},this.notify=e=>{},this.notifyRecorded=e=>{},this.state.prog="",this.state.checkProg=0,this.actions.getData=()=>this._data,this.actions.getCurriculum=()=>this._curriculum}_setViewDiv(e){this.state,super._setViewDiv(e)}receive(e){if(super.receive(e),console.log("===> receive",e),10===e.type&&e.data){const t=e.data;if("check_send"===t.msgtype)this._setViewDiv("content"),this.state.prog="check",this.state.checkProg=1;else if("check_end"===t.msgtype){if("check"!==this.state.prog)return;this.state.checkProg=4}}}setData(e){this._data=e}}i([n.observable],a.prototype,"state",void 0),i([n.action],a.prototype,"_setViewDiv",null),i([n.action],a.prototype,"receive",null),i([n.action],a.prototype,"notify",void 0),i([n.action],a.prototype,"notifyRecorded",void 0),t.StudentContext=a;const l=new a;t.sContext=l;const{Provider:d,Consumer:h}=s.createContext(l);t.StudentConsumer=h;class u extends s.Component{render(){return s.createElement(d,{value:l},this.props.children)}}t.StudentProvider=u,t.useStudent=function(e){return function(t){return s.createElement(h,null,(t=>s.createElement(e,Object.assign({},t))))}}},181:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=o(804);class s extends i.Component{componentDidUpdate(e){}render(){return i.createElement("div",{className:"attention "+(this.props.view?"":"hide")},i.createElement("span",null,"Attention"))}}t.default=s},6:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(c=(n<3?s(c):n>3?s(t,o,c):s(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(t,"__esModule",{value:!0}),t.SayPopup=void 0;const s=o(804),n=o(98),c=o(215);let r=class extends s.Component{componentDidUpdate(e){if(this.props.view&&!e.view){let e=this.props.delay;e||(e=800),c.delay((()=>{this.props.onComplete()}),e)}else!this.props.view&&e.view}render(){let e,t="";return e=`/content/mathalive_lib/images/saypop_correct_0${Math.ceil(10*Math.random()%3)}.gif`,1===this.props.type&&1===this.props.msgtype?t="Great Job!!":1===this.props.type&&2===this.props.msgtype?(t="Good Job!!",e=`/content/mathalive_lib/images/saypop_re_correct_0${Math.ceil(10*Math.random()%3)}.gif`):1===this.props.type&&3===this.props.msgtype?(t="Incorrect.<br/>Think again",e=`/content/mathalive_lib/images/saypop_incorrect_0${Math.ceil(10*Math.random()%4)}.gif`):1===this.props.type&&4===this.props.msgtype?(t="Cheer up!!",e=`/content/mathalive_lib/images/saypop_re_incorrect_0${Math.ceil(10*Math.random()%2)}.gif`):4===this.props.type&&1===this.props.msgtype?t="Good Work!!":4===this.props.type&&2===this.props.msgtype?t="Awesome!!":4===this.props.type&&3===this.props.msgtype?t="That's it!!":4===this.props.type&&4===this.props.msgtype?t="Perfect!!":4===this.props.type&&5===this.props.msgtype&&(t="Genius!!"),s.createElement("div",{className:"saypop_wrap "+(this.props.view?" show":"")},s.createElement("div",{className:"saypop type0"+(4===this.props.type?"1":this.props.msgtype)+" "+(this.props.view?"show":"")},s.createElement("img",{src:e}),s.createElement("div",{className:"ment",dangerouslySetInnerHTML:{__html:t}})))}};r=i([n.observer],r),t.SayPopup=r},330:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(c=(n<3?s(c):n>3?s(t,o,c):s(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(t,"__esModule",{value:!0}),t.WarningPopup=void 0;const s=o(804),n=o(98),c=o(215);let r=class extends s.Component{componentDidUpdate(e){if(this.props.view&&!e.view){if(!this.props.button){let e=this.props.delay;e||(e=800),c.delay((()=>{this.props.onComplete&&this.props.onComplete()}),e)}}else!this.props.view&&e.view}render(){const{type:e}=this.props;let t="";return 0===e&&(t="Submit your answer within <strong>3 seconds.</strong>"),s.createElement("div",{className:"warningpopup",style:{display:this.props.view?"":"none"}},s.createElement("div",{className:"msg",dangerouslySetInnerHTML:{__html:t}}))}};r=i([n.observer],r),t.WarningPopup=r},737:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(c=(n<3?s(c):n>3?s(t,o,c):s(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(t,"__esModule",{value:!0}),t.StudentContextBase=void 0;const s=o(965),n=o(762),c=o(201);class r{constructor(){this._naviLeftFnc=null,this._naviRightFnc=null,this.state={viewDiv:"direction",directionON:!1,navi:{view:!1,enableLeft:!1,enableRight:!1},loading:!1,bookid:0,curriculumid:0,classid:0,unitid:0,lessonid:0,svg_bg:{view:!0,bPlay:!1,viewCharactor:!0}},this.actions={setNaviView:e=>{this.state.navi.view=e},setNavi:(e,t)=>{this.state.navi.enableLeft=e,this.state.navi.enableRight=t},setNaviFnc:(e,t)=>{this._naviLeftFnc=e,this._naviRightFnc=t},naviLeft:()=>{n.App.pub_playBtnPage(),this._naviLeftFnc&&this._naviLeftFnc()},naviRight:()=>{n.App.pub_playBtnPage(),this._naviRightFnc&&this._naviRightFnc()},setLoading:e=>{c.showSLoading(e)}},this.uploaded=e=>{},this.notify=e=>{},this.notifyRecorded=e=>{},this.notifyVideoRecord=e=>{},this.notifySwitchCamera=()=>{},this.notifyTakePicture=(e,t)=>{},this.notifyBookCaptureInfo=e=>{},this.clickSendButton=()=>{},this.notifyRecordData=(e,t)=>{},this.notifyAlert=e=>{}}_setViewDiv(e){this.state.viewDiv!==e&&(n.App.pub_stop(),"direction"===e?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0):(this.state.directionON=!1,this.state.svg_bg.bPlay=!1,this.state.svg_bg.viewCharactor=!1),this.state.loading=!1,this.state.viewDiv=e)}start(){}receive(e){switch(e.type){case 1:"direction"===this.state.viewDiv?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0):this._setViewDiv("direction");break;case 3:this.state.directionON=!1;break;case 0:this._setViewDiv("eyeon")}}notifyNaviInfo(e,t,o,i,s,n){}notifyPenToolState(e,t){}}i([s.observable],r.prototype,"state",void 0),i([s.action],r.prototype,"_setViewDiv",null),i([s.action],r.prototype,"start",null),i([s.action],r.prototype,"receive",null),t.StudentContextBase=r},746:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(c=(n<3?s(c):n>3?s(t,o,c):s(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(t,"__esModule",{value:!0});const s=o(804),n=o(965),c=o(98),r=o(418),a=o(478),l=.3;let d=class extends s.Component{constructor(e){super(e),this.m_btnH=0,this.m_max=0,this.m_sy=-1,this.m_vy=-1,this.m_time=-1,this.m_bSend=!1,this.m_state={y:0,alpha:1,tDur:0,aDur:0,isOn:!1,disabled:!1},this._ref=e=>{if(this.m_max>0||!e)return;e.setAttribute("touch-action","none");const t=window.getComputedStyle(e),o=a.nteFloat(t.height,0),i=a.nteFloat(t.bottom,0);o>0&&(this.m_btnH=o,this.m_max=o+i+10,this.props.view||(this.m_state.y=this.m_max))},this._down=e=>{this.m_state.isOn||this.m_state.disabled||void 0!==this.props.disable&&this.props.disable||(this.m_state.y=this.props.originY,this.m_state.alpha=1,this.m_state.tDur=0,this.m_state.aDur=0,this.m_state.isOn=!0,this.m_vy=0,this.m_time=Date.now())},this._start=(e,t)=>{this.m_sy=t.y,this.m_bSend=!0},this._drag=(e,t)=>{if(!this.m_state.isOn||this.m_state.disabled)return;let o=t.y-this.m_sy;"teacher"===this.props.type?(t.deltaY<-1?this.m_bSend=!1:t.deltaY>=0&&(this.m_bSend=!0),o<0&&(o=0)):(t.deltaY>1?this.m_bSend=!1:t.deltaY<=0&&(this.m_bSend=!0),o>0&&(o=0)),!1===this.props.preventDrag&&(this.m_state.y=o+this.props.originY);const i=Date.now();this.m_vy=t.deltaY/(i-this.m_time),this.m_time=i},this._stop=(e,t)=>{if(this.m_state.isOn&&!this.m_state.disabled)if(this.m_bSend){let e=.5*this.m_vy*1e3,o=t.y-this.m_sy;"teacher"===this.props.type?(e<this.m_btnH?e=this.m_btnH:e>4*this.m_btnH&&(e=4*this.m_btnH),o<0&&(o=0)):(-1*e<this.m_btnH?e=-this.m_btnH:-1*e>4*this.m_btnH&&(e=-4*this.m_btnH),o>0&&(o=0)),this.m_state.tDur=.5,this.m_state.aDur=.5,this.m_state.alpha=0,this.m_state.y=o+e+this.props.originY,this.props.onSend()}else this.m_state.isOn=!1,this.m_state.tDur=l,this.m_state.aDur=0,this.m_state.y=this.props.originY},e.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):e.view?(this.m_state.y=e.originY,this.m_state.alpha=1,this.m_state.tDur=l,this.m_state.aDur=0,this.m_state.isOn=!1,this.m_state.disabled=!1):e.view||(this.m_state.y=e.originY,this.m_state.alpha=0,this.m_state.tDur=l,this.m_state.aDur=l,this.m_state.isOn=!1,this.m_state.disabled=!0)}componentWillReceiveProps(e){e.sended&&!this.props.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):e.view&&!this.props.view?(this.m_state.y=e.originY,this.m_state.alpha=1,e.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=l):(this.m_state.tDur=l,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1):!e.view&&this.props.view?(this.m_state.y=this.m_max,this.m_state.alpha=0,this.m_state.tDur=l,this.m_state.aDur=l,this.m_state.isOn=!1,this.m_state.disabled=!0):!e.view||e.sended||this.m_state.isOn||e.originY===this.props.originY||(this.m_state.y=e.originY,this.m_state.tDur=l,this.m_state.aDur=0)}render(){const{y:e,tDur:t,aDur:o,alpha:i,isOn:n,disabled:c}=this.m_state;let a={transform:`translateY(${e}px)`,transition:`transform ${t}s, opacity ${o/2}s ${o/2}s`,opacity:i,pointerEvents:c||!this.props.view?"none":"auto"};this.props.preventDrag&&(a={});const l=[];return"pad"===this.props.type?l.push("fel_toteacher"):l.push("fel_topad"),n&&l.push("on"),this.props.isVisiblePenTool&&this.props.isVisiblePenTool&&l.push("up"),s.createElement(r.DraggableCore,{onMouseDown:this._down,onDrag:this._drag,onStart:this._start,onStop:this._stop},s.createElement("button",{ref:this._ref,className:l.join(" ")+(this.props.className?" "+this.props.className:""),style:a},s.createElement("span",{className:"revise",style:{display:"none"}},"revise")))}};i([n.observable],d.prototype,"m_state",void 0),d=i([c.observer],d),t.default=d},183:function(e,t,o){var i=this&&this.__decorate||function(e,t,o,i){var s,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(c=(n<3?s(c):n>3?s(t,o,c):s(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c},s=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(s,n){function c(e){try{a(i.next(e))}catch(e){n(e)}}function r(e){try{a(i.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(c,r)}a((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=o(804),c=o(965),r=o(98),a=o(359);let l=class extends n.Component{constructor(e){super(e),this.m_on=!1,this.m_showMathKit=!1,this.bookInfo=[],this.curIndex=0,this._list=[],this._onClick=()=>{this.props.isTeacher&&this._off()},this._off=()=>s(this,void 0,void 0,(function*(){this.props.view&&this.m_on&&(this.m_on=!1,this.props.onEndStart&&this.props.onEndStart(),yield a.wait(500),this.props.view&&!this.m_on&&this.props.onEnd&&this.props.onEnd())})),this.m_on=e.view&&e.on}_on(){return s(this,void 0,void 0,(function*(){this.m_on=!0}))}componentWillReceiveProps(e){if(void 0===this.props.lesson&&void 0!==e.lesson){for(;this.bookInfo.length>0;)this.bookInfo.pop();e.lesson.childrenList&&e.lesson.childrenList.length>0&&e.lesson.childrenList.map(((t,o)=>{t.book?(t.book.id===e.bookId&&(this.curIndex=o),this.bookInfo.push({bookName:t.name?t.name:"",id:t.id,lesson:e.lesson?e.lesson.name:"",subtitle:t.depth_name})):this.bookInfo.push({bookName:"",id:-1,lesson:"",subtitle:""})}))}}componentDidUpdate(e){this.props.view?e.view?this.props.on&&!e.on?this._on():!this.props.on&&e.on&&this._off():this.props.on?this._on():this.m_on=!1:this.m_on=!1}render(){const{isTeacher:e,subtitle:t}=this.props,o=[];o.push(this.props.className);const i=document.querySelector(".bgm");return this.props.view?(this.m_on&&o.push("on"),i&&i.play()):(o.push("hide"),i&&(i.pause(),i.currentTime=0)),n.createElement("div",{className:o.join(" "),onClick:this._onClick},e&&this.bookInfo&&n.createElement("span",{className:"concept_name"},this.bookInfo.length>0?this.bookInfo[this.curIndex].lesson:""),n.createElement("div",{className:"progress_dot"},e&&this.bookInfo&&this.bookInfo.map(((e,t)=>n.createElement("span",{key:"q_"+t,className:this.curIndex===t?"on":""})))),n.createElement("div",{className:"video"},n.createElement("video",{muted:!0,autoPlay:!0,poster:this.props.poster_url?this.props.poster_url:void 0},n.createElement("source",{src:this.props.video_url,type:"video/mp4"}),n.createElement("strong",null,"Your browser does not support the video tag."))),n.createElement("div",{className:"text"},n.createElement("div",{className:"t1"},this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].bookName:""),e&&n.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].subtitle:""}}),!e&&n.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:t}})),n.createElement("audio",{className:"bgm",autoPlay:!0,src:this.props.audio_url?this.props.audio_url:void 0}))}};i([c.observable],l.prototype,"m_on",void 0),i([c.observable],l.prototype,"_list",void 0),i([c.action],l.prototype,"_off",void 0),l=i([r.observer],l),t.default=l},967:(e,t,o)=>{o.r(t)},989:(e,t,o)=>{o.r(t)},890:(e,t,o)=>{o.r(t)},209:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});var i,s=(i=o(804))&&"object"==typeof i&&"default"in i?i.default:i;function n(e){return n.warnAboutHMRDisabled&&(n.warnAboutHMRDisabled=!0,console.error("React-Hot-Loader: misconfiguration detected, using production version in non-production environment."),console.error("React-Hot-Loader: Hot Module Replacement is not enabled.")),s.Children.only(e.children)}n.warnAboutHMRDisabled=!1;var c=function e(){return e.shouldWrapWithAppContainer?function(e){return function(t){return s.createElement(n,null,s.createElement(e,t))}}:function(e){return e}};c.shouldWrapWithAppContainer=!1,t.AppContainer=n,t.hot=c,t.areComponentsEqual=function(e,t){return e===t},t.setConfig=function(){},t.cold=function(e){return e},t.configureComponent=function(){}},53:(e,t,o)=>{e.exports=o(209)},804:e=>{e.exports=React},196:e=>{e.exports=ReactDOM},418:e=>{e.exports=ReactDraggable},719:e=>{e.exports=ReactIdSwiper},215:e=>{e.exports=_},965:e=>{e.exports=mobx},98:e=>{e.exports=mobxReact}},t={};function o(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{const e=o(53),t=o(804),i=o(196),s=o(762),n=o(201),c=o(268);e.setConfig({ErrorOverlay:e=>t.createElement("div",null)});const r={clear:s.App.pub_clear,importLink:c.importLink,importHTML:c.importHTML};let a,l=!0;a=o(615),l=!1;const d=a,h=d.default,u=d.AppProvider,p=d.appContext;r.set=(e,t,o)=>{s.App.pub_set(e,t,o),p.setData(e)},r.render=()=>{s.App.pub_initAudio(),i.render(t.createElement(u,null,t.createElement(h,null)),document.getElementById("wrap"))},r.init=(e,t,o,i,c,r)=>{s.App.pub_load(null,e,t,o,i,c,r),n.sendTeacher(4,e),p.start()},r.receive=e=>{null!=s.App.student&&p.receive(e)},r.notifyUploadToServerResult=e=>{p.uploaded(e)},r.notify=e=>{p.notify(e)},r.notifyVideoRecord=e=>{p.notifyVideoRecord(e)},r.notifyStartVoice=()=>{p.notify("notifyStartVoice")},r.notifyVoiceRecordResult=e=>{p.notifyRecorded(e)},r.notifyTakePicture=(e,t)=>{p.notifyTakePicture&&p.notifyTakePicture(e,t)},r.clickSendButton=()=>{p.clickSendButton()},r.notifyRecordData=(e,t)=>{p.notifyRecordData(e,t)},r.notifyAlert=e=>{p.notifyAlert(e)},r.notifyPenToolState=(e,t)=>{console.log("app_o notifyPenToolState"),p.notifyPenToolState(e,t)},o(989),o.g.app_o=r})()})();