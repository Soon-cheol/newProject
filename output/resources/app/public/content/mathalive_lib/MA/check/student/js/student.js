!function(e){var t={};function s(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(i,o,function(t){return e[t]}.bind(null,o));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s(s.s=17)}([function(e,t){e.exports=React},function(e,t){e.exports=mobxReact},function(e,t){e.exports=mobx},function(e,t){e.exports=_},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const i=s(10),o=s(5);function n(e){if(!e)return e;console.log("init student",e),e.displayMode=""+e.displayMode=="2"?"2":"1",e.gender=e.gender,""===e.nickname&&(e.nickname=e.name);let t=e.avatar&&""!==e.avatar?e.avatar:"";return""===t&&(t="f"===e.gender||"F"===e.gender?"/content/mathalive_lib/images/default_candy.png":"/content/mathalive_lib/images/default_cheese.png",e.avatar=t),e}class r{static get isMobile(){return r._isMobile}static get tempEl(){return r._tempEl}static pub_init(){const e=navigator.userAgent;r._isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e)||/android/i.test(e),r._tempBnd=document.createElement("div"),r._tempBnd.style.display="none",r._tempEl=document.createElement("div"),r._tempBnd.appendChild(r._tempEl),null===document.body?document.addEventListener("DOMContentLoaded",e=>{document.body.appendChild(r._tempBnd)}):document.body.appendChild(r._tempBnd)}static get students(){return r._students}static get student(){return r._student}static get lang(){return r._lang}static get isDvlp(){return r._isDvlp}static get data_url(){return r._data_url}static get lesson(){return r._lesson}static get book(){return r._book}static get nextBook(){return r._nextBook}static get prevBook(){return r._prevBook}static get addOnHost(){return r._addOnHost}static setaddOnHost(e){r._addOnHost=e}static pub_load(e,t,s,i,o,c,a){r._lesson=i,r._book=s,r._nextBook=c,r._prevBook=a,r._students=[],e&&Array.isArray(e)&&e.forEach((e,t)=>{r._students[t]=n(e)}),r._student=n(t),o&&""!==o&&(r._addOnHost=o)}static pub_reloadStudents(e){o.getStudents((t,s)=>{for(;r._students.length>0;)r._students.pop();for(;r._students_inited.length>0;)r._students_inited.pop();for(let e=0,s=t.length;e<s;e++)r.isDvlp?r._students[e]=n(t[e]):r._students[e]=n({id:t[e].id,name:t[e].name,thumb:t[e].defaultThumbnail,avatar:t[e].profileThumbnail,nickname:""!==t[e].nickName?t[e].nickName:t[e].name,displayMode:t[e].displayMode,gender:t[e].gender,inited:!0}),console.log("student",t[e]),r._students_inited.push(t[e].id);e()})}static pub_parseStyle(e){return r._tempEl.style.cssText=e,r._tempEl.style}static pub_initAudio(){r._common_audio=document.getElementById("common_audio"),r._ding_audio=document.getElementById("ding_audio"),r._dingend_audio=document.getElementById("dingend_audio"),r._btn_audio=document.getElementById("btn_audio"),r._correct_audio=document.getElementById("correct_audio"),r._wrong_audio=document.getElementById("wrong_audio"),r._topad_audio=document.getElementById("topad_audio"),r._goodjob_audio=document.getElementById("goodjob_audio"),r._btn_back_audio=document.getElementById("btn_back_audio"),r._btn_page_audio=document.getElementById("btn_page_audio"),r._popup_audio=document.getElementById("popup_audio"),r._clock_audio=document.getElementById("clock_audio"),r._ts_bgm_audio=document.getElementById("ts_bgm_audio"),r._bs_audio=document.getElementById("bs_audio"),r._bb_audio=document.getElementById("bb_audio"),r._cd_audio=document.getElementById("cd_audio"),r._tc_audio=document.getElementById("tc_audio"),r._te_audio=document.getElementById("te_audio"),r._trg_bgm_audio=document.getElementById("trg_bgm_audio"),r._afc_audio=document.getElementById("afc_audio"),r._trs_audio=document.getElementById("trs_audio"),r._btn_choice_audio=document.getElementById("btn_choice_audio"),r._retry_audio=document.getElementById("retry_audio"),r._sorry_audio=document.getElementById("sorry_audio"),r._great_audio=document.getElementById("great_audio"),r._memorygame_flipcard_audio=document.getElementById("flipcard_audio"),r._ispy_gameclick_audio=document.getElementById("gameclick_audio"),r._game_timesetting_start_audio=document.getElementById("game_timesetting_start"),r._solution_btn_audio=document.getElementById("solution_btn_audio"),r._game_result_audio=document.getElementById("game_result_audio"),r._open_problom_audio=document.getElementById("open_problom_audio"),r._quiz_done_audio=document.getElementById("quiz_done_audio"),r._hit_up_audio=document.getElementById("hu_audio"),r._hit_down_audio=document.getElementById("hd_audio"),r._hit_good_audio=document.getElementById("hg_audio"),r._hit_wrong_audio=document.getElementById("hw_audio"),r._pick_presenter=document.getElementById("pick_presenter"),r._game_good_audio=document.getElementById("gg_audio")}static pub_playClock(){r._clock_audio&&(r._clock_audio.currentTime=4.5,r._clock_audio.play())}static pub_playPopup(){r._popup_audio&&(r._popup_audio.currentTime=0,r._popup_audio.play())}static pub_playBtnPage(){r._btn_page_audio&&(r._btn_page_audio.currentTime=0,r._btn_page_audio.play())}static pub_playBtnBack(){r._btn_back_audio&&(r._btn_back_audio.currentTime=0,r._btn_back_audio.play())}static pub_playGoodjob(){r._goodjob_audio&&(r._goodjob_audio.currentTime=0,r._goodjob_audio.play())}static pub_playDing(){r._ding_audio&&(r._ding_audio.currentTime=0,r._ding_audio.play())}static pub_playDingend(){r._dingend_audio&&(r._dingend_audio.currentTime=0,r._dingend_audio.play())}static pub_playToPad(){r._topad_audio&&(r._topad_audio.currentTime=0,r._topad_audio.play())}static pub_playBtnTab(){r._btn_audio&&(r._btn_audio.currentTime=0,r._btn_audio.play())}static pub_playCorrect(){r._correct_audio&&(r._correct_audio.currentTime=0,r._correct_audio.play())}static pub_playWrong(){r._wrong_audio&&(r._wrong_audio.currentTime=0,r._wrong_audio.play())}static pub_playTeamSelectBgm(){r._ts_bgm_audio&&(r._ts_bgm_audio.currentTime=0,r._ts_bgm_audio.play())}static pub_stopTeamSelectBgm(){r._ts_bgm_audio&&(r._ts_bgm_audio.pause(),r._ts_bgm_audio.currentTime=0)}static pub_playStartButton(){r._bs_audio&&(r._bs_audio.currentTime=0,r._bs_audio.play())}static pub_playBasicButton(){r._bb_audio&&(r._bb_audio.currentTime=0,r._bb_audio.play())}static pub_playCountDown(){r._cd_audio&&(r._cd_audio.currentTime=0,r._cd_audio.play())}static pub_playTimerClock(){r._tc_audio&&(r._tc_audio.currentTime=0,r._tc_audio.play())}static pub_stopTimerClock(){r._tc_audio&&(r._tc_audio.pause(),r._tc_audio.currentTime=0)}static pub_playTimerEnd(){r._te_audio&&(r._te_audio.currentTime=0,r._te_audio.play())}static pub_playResultGraph(){r._trg_bgm_audio&&(r._trg_bgm_audio.currentTime=0,r._trg_bgm_audio.play())}static pub_playFireworksClapping(){r._afc_audio&&(r._afc_audio.currentTime=0,r._afc_audio.play())}static pub_playTotalResult(){r._trs_audio&&(r._trs_audio.currentTime=0,r._trs_audio.play())}static pub_playChoiceBtn(){r._btn_choice_audio&&(r._btn_choice_audio.currentTime=0,r._btn_choice_audio.play())}static pub_playsorry(){r._sorry_audio&&(r._sorry_audio.currentTime=0,r._sorry_audio.play())}static pub_playretry(){r._retry_audio&&(r._retry_audio.currentTime=0,r._retry_audio.play())}static pub_playgreat(){r._great_audio&&(r._great_audio.currentTime=0,r._great_audio.play())}static pub_playFlipCard(){r._memorygame_flipcard_audio&&(r._memorygame_flipcard_audio.currentTime=0,r._memorygame_flipcard_audio.play())}static pub_playGameClick(){r._ispy_gameclick_audio&&(r._ispy_gameclick_audio.currentTime=0,r._ispy_gameclick_audio.play())}static pub_game_timesetting_start(){r._game_timesetting_start_audio&&(r._game_timesetting_start_audio.currentTime=0,r._game_timesetting_start_audio.play())}static pub_solution_btn_click(){r._solution_btn_audio&&(r._solution_btn_audio.currentTime=0,r._solution_btn_audio.play())}static pub_playGameresult(){r._game_result_audio&&(r._game_result_audio.currentTime=0,r._game_result_audio.play())}static pub_openProblom(){r._open_problom_audio&&(r._open_problom_audio.currentTime=0,r._open_problom_audio.play())}static pub_quizDone(){r._quiz_done_audio&&(r._quiz_done_audio.currentTime=0,r._quiz_done_audio.play())}static pub_pick_presenter(){r._pick_presenter&&(r._pick_presenter.currentTime=0,r._pick_presenter.play())}static pub_stop(){null!=r._common_audio.onended&&r._common_audio.onended.call(r._common_audio,new Event("ended")),r._common_audio.oncanplaythrough=null,isNaN(r._common_audio.duration)||r._common_audio.paused||r._common_audio.pause()}static pub_play(e,t){r.pub_stop(),e=i.nteString(e,"");const s=i.nteString(r._common_audio.getAttribute("src"),"");if(""===e&&""===s)return void(null!=t&&t(!0));""!==e&&s!==e&&(r._common_audio.src=e);const o=e=>{r._common_audio.onended=null,null!==t&&t(!0),r._common_audio.removeEventListener("error",o)};r._common_audio.onended=e=>{r._common_audio.onended=null,null!==t&&t(!!e),r._common_audio.removeEventListener("error",o)},r._common_audio.addEventListener("error",o),isNaN(r._common_audio.duration)?(r._common_audio.oncanplaythrough=e=>{0!==r._common_audio.currentTime&&(r._common_audio.currentTime=0),r._common_audio.play(),r._common_audio.oncanplaythrough=null},r._common_audio.load()):(0!==r._common_audio.currentTime&&(r._common_audio.currentTime=0),r._common_audio.oncanplaythrough=null,r._common_audio.play())}static pub_set(e,t,s){r._isDvlp=t,r._lang=s,o.set(t)}static pub_addInitedStudent(e){let t=!0;for(let s=0,i=r._students_inited.length;s<i;s++){r._students_inited[s]===e.id&&(t=!1)}t&&r._students_inited.push(e.id);const s=r._start_idx>0&&r._students.length>0&&r._students_inited.length>=r._students.length;return s&&(window.clearTimeout(r._start_idx),r._start_idx=-1),s}static pub_start(e){0===r._students.length||r._students_inited.length>=r._students.length?e():r._start_idx=window.setTimeout(e,2e3)}static pub_clear(){for(;r._students.length>0;)r._students.pop();for(;r._students_inited.length>0;)r._students_inited.pop()}static pub_playHitup(){r._hit_up_audio&&(r._hit_up_audio.currentTime=0,r._hit_up_audio.play())}static pub_playHitdown(){r._hit_down_audio&&(r._hit_down_audio.currentTime=0,r._hit_down_audio.play())}static pub_playHitgood(){r._hit_good_audio&&(r._hit_good_audio.currentTime=0,r._hit_good_audio.play())}static pub_playHitwrong(){r._hit_wrong_audio&&(r._hit_wrong_audio.currentTime=0,r._hit_wrong_audio.play())}static pub_playGamegood(){r._game_good_audio&&(r._game_good_audio.currentTime=0,r._game_good_audio.play())}}t.App=r,r._isMobile=!1,r._students=[],r._students_inited=[],r._student=null,r._lang="ko",r._isDvlp=!1,r._data_url="../data/",r._lesson="",r._book="",r._nextBook=!1,r._prevBook=!1,r._start_idx=-1,r.isStarted=!1,r._addOnHost="https://addonsapi.fel40.com"},function(e,t,s){"use strict";var i=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(o,n){function r(e){try{a(i.next(e))}catch(e){n(e)}}function c(e){try{a(i.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,c)}a((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.postAttention=t.postViewDiv=t.getPreviewDmsResult=t.getPreviewResult=t.showSGiftBox=t.showSLivePointPop=t.launchSTool=t.clearPenTool=t.hidePenTool=t.showPenTool=t.showRecordTool=t.showSendButton=t.alertToStudent=t.showSLoading=t.showSMathKit=t.clearSPenTool=t.takePicture=t.uploadInclassReport=t.stopVideoRecord=t.startVideoRecord=t.switchCamera=t.stopCamera=t.pauseRecordPlayer=t.playRecordPlayer=t.startCustomCamera=t.startCamera=t.getStudents=t.uploadFileToServerMulti=t.uploadImageToServer=t.uploadFileToServer=t.stopVoiceRecord=t.startVoiceRecord=t.sendTeacher=t.disableSoftwareKeyboard=t.sendPAD=t.sendPADToID=t.sendLauncher=t.uploadStudentReport=t.addStudentForStudentReportType6=t.hideStudentReportListPage=t.showStudentReportListPage=t.showStudentReportUI=t.hideStudentReportUI=t.startStudentReportProcess=t.finishContentPage=t.showTMathKit=t.alertToTeacher=t.showTLoading=t.clearTPenTool=t.getBookCaptureInfo=t.uploadTImageToServer=t.useFractionBar=t.logOut=t.exitClass=t.getNaviInfo=t.launchPadTool=t.launchTool=t.exitBook=t.gotoBookByKey=t.gotoBook=t.set=void 0;const o=s(3);let n=!1;t.set=function(e){n=e},t.gotoBook=function(e,t){if(console.log("felsocket gotoBook",e,t),!n)try{window.tsoc_o.gotoBook(e,t)}catch(e){}},t.gotoBookByKey=function(e){if(console.log("felsocket gotoBookByKey",e),!n)try{window.tsoc_o.gotoBookByKey(e)}catch(e){}},t.exitBook=function(){if(console.log("felsocket exitBook"),!n)try{window.tsoc_o.exitBook()}catch(e){}},t.launchTool=function(e){if(console.log("felsocket launchTool",e),!n)try{window.tsoc_o.launchTool(e)}catch(e){}},t.launchPadTool=function(e){if(console.log("felsocket launchPadTool",e),!n)try{window.tsoc_o.launchPadTool(e)}catch(e){}},t.getNaviInfo=function(e){if(console.log("felsocket getNaviInfo",e),!n)try{window.tsoc_o.getNaviInfo(e)}catch(e){}},t.exitClass=function(){if(console.log("felsocket exitClass"),!n)try{window.tsoc_o.exitClass()}catch(e){}},t.logOut=function(){if(console.log("felsocket logOut"),!n)try{window.tsoc_o.logOut()}catch(e){}},t.useFractionBar=function(){if(console.log("felsocket useFractionBar"),!n)try{window.tsoc_o.useFractionBar()}catch(e){}},t.uploadTImageToServer=function(e,t,s,i){if(console.log("felsocket uploadTImageToServer",t,s,i),!n)try{window.tsoc_o.uploadImageToServer(e,t,s,i)}catch(e){}},t.getBookCaptureInfo=function(e){if(console.log("felsocket getBookCaptureInfo"),!n)try{window.tsoc_o.getBookCaptureInfo(e)}catch(e){}},t.clearTPenTool=function(){if(console.log("felsocket clearTPenTool"),!n)try{window.tsoc_o.clearPenTool()}catch(e){}},t.showTLoading=function(e){if(console.log("felsocket showTLoading",e),!n)try{window.tsoc_o.showLoading(e)}catch(e){}},t.alertToTeacher=function(e){if(console.log("felsocket alertToTeacher",e),!n)try{window.tsoc_o.alert(e)}catch(e){}},t.showTMathKit=function(e){if(console.log("felsocket showTMathKit",e),!n)try{window.tsoc_o.showMathKit(e)}catch(e){}},t.finishContentPage=function(){if(!n)try{window.tsoc_o.finishContentPage()}catch(e){}},t.startStudentReportProcess=function(e,t,s){if(!n)try{window.tsoc_o.startStudentReportProcess(e,t,s)}catch(e){}},t.hideStudentReportUI=function(){if(!n)try{window.tsoc_o.hideStudentReportUI()}catch(e){}},t.showStudentReportUI=function(){if(!n)try{window.tsoc_o.showStudentReportUI()}catch(e){}},t.showStudentReportListPage=function(){if(!n)try{window.tsoc_o.showStudentReportListPage()}catch(e){}},t.hideStudentReportListPage=function(){if(!n)try{window.tsoc_o.hideStudentReportListPage()}catch(e){}},t.addStudentForStudentReportType6=function(e){if(!n)try{window.tsoc_o.addStudentForStudentReportType6(e)}catch(e){}},t.uploadStudentReport=function(e,t,s){if(!n)try{window.psoc_o.uploadStudentReport(e,t,s)}catch(e){}},t.sendLauncher=function(e,t){if(5!==e||n)if(6!==e||n)if(7!==e||n){if(8===e)if(console.log("felsocket gotoPrevBook"),n)try{window.top.tsoc_o.gotoPrevBook()}catch(e){}else try{window.tsoc_o.gotoPrevBook()}catch(e){}else if(9===e)if(console.log("felsocket gotoNextBook"),n)try{window.top.tsoc_o.gotoNextBook()}catch(e){}else try{window.tsoc_o.gotoNextBook()}catch(e){}}else try{window.tsoc_o.setTitleBar(t)}catch(e){}else try{window.tsoc_o.showTitleBar()}catch(e){}else try{window.tsoc_o.hideTitleBar()}catch(e){}},t.sendPADToID=function(e,t,s){const i={type:t,data:s};if(n)try{window.top.tsoc_o.sendPADToID(e,i)}catch(e){}else try{window.tsoc_o.sendPADToID(e,i)}catch(e){}},t.sendPAD=function(e,t){const s={type:e,data:t};if(n)try{window.top.tsoc_o.sendAll(s)}catch(e){}else try{window.tsoc_o.sendAll(s)}catch(e){}},t.disableSoftwareKeyboard=function(){try{window.psoc_o.disableSoftwareKeyboard()}catch(e){}},t.sendTeacher=function(e,t){const s={type:e,data:t};if(n)try{null!==window.opener&&window.opener.tsoc_o.sendTeacher(s)}catch(e){}else try{window.psoc_o.sendTeacher(s)}catch(e){}},t.startVoiceRecord=function(){try{window.psoc_o.startVoiceRecord()}catch(e){}},t.stopVoiceRecord=function(){try{window.psoc_o.stopVoiceRecord()}catch(e){}},t.uploadFileToServer=function(e){try{window.psoc_o.uploadFileToServer(e)}catch(e){}},t.uploadImageToServer=function(e,t,s,i){try{window.psoc_o.uploadImageToServer(e,t,s,i)}catch(e){}},t.uploadFileToServerMulti=function(e){try{window.psoc_o.uploadFileToServerMulti(e)}catch(e){}},t.getStudents=function(e){if(n)if(window.top.tsoc_o)try{window.top.tsoc_o.getStudents(e)}catch(e){}else e([],!1);else try{window.tsoc_o.getStudents(e)}catch(e){}},t.startCamera=function(e){if(!n)try{window.psoc_o.startCamera(e)}catch(e){}},t.startCustomCamera=function(e){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"startCustomCamera",msg:e},"*")},t.playRecordPlayer=function(){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"playRecordPlayer"},"*")},t.pauseRecordPlayer=function(){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"pauseRecordPlayer"},"*")},t.stopCamera=function(){if(!n)try{window.psoc_o.stopCamera()}catch(e){}},t.switchCamera=function(e){if(!n)try{window.psoc_o.switchCamera(e)}catch(e){}},t.startVideoRecord=function(){if(!n)try{window.psoc_o.startVideoRecord()}catch(e){}},t.stopVideoRecord=function(){if(!n)try{window.psoc_o.stopVideoRecord()}catch(e){}},t.uploadInclassReport=function(e){if(!n)try{window.tsoc_o.uploadInclassReport(e)}catch(e){}},t.takePicture=function(e){if(!n)try{window.psoc_o.takePicture(e)}catch(e){}},t.clearSPenTool=function(){if(console.log("felsocket clearPenTool"),!n)try{window.psoc_o.clearPenTool()}catch(e){}},t.showSMathKit=function(e){if(console.log("felsocket showSMathKit",e),!n)try{window.psoc_o.showMathKit(e)}catch(e){}},t.showSLoading=function(e){if(console.log("felsocket showSLoading",e),!n)try{window.psoc_o.showLoading(e)}catch(e){}},t.alertToStudent=function(e){if(console.log("felsocket alertToStudent",e),!n)try{window.psoc_o.alert(e)}catch(e){}},t.showSendButton=function(e,t){if(console.log("felsocket showSendButton"),!n)try{window.psoc_o.showSendButton(e,t)}catch(e){}},t.showRecordTool=function(e){if(console.log("felsocket showRecordTool",e),!n)try{window.psoc_o.showRecordTool(e)}catch(e){}},t.showPenTool=function(){if(console.log("felsocket showPentool"),!n)try{window.psoc_o.showPenTool()}catch(e){}},t.hidePenTool=function(){if(console.log("felsocket hidePentool"),!n)try{window.psoc_o.hidePenTool()}catch(e){}},t.clearPenTool=function(){if(console.log("felsocket clearPenTool"),!n)try{window.psoc_o.clearPenTool()}catch(e){}},t.launchSTool=function(e){if(console.log("felsocket launchTool",e),!n)try{window.psoc_o.launchTool(e)}catch(e){}},t.showSLivePointPop=function(e){if(console.log("felsocket showLivePointPop"),!n)try{window.psoc_o.showLivePointPop(e)}catch(e){}},t.showSGiftBox=function(e,t){if(console.log("felsocket showGiftBox"),!n)try{window.psoc_o.showGiftBox(e,t)}catch(e){}},t.getPreviewResult=function(e){return i(this,void 0,void 0,(function*(){return new Promise(t=>{if(n)t([]);else{let s=!1;const i=e=>{s||(s=!0,t(e))};window.tsoc_o.getPreviewResult(i,e),o.delay(()=>{s||(s=!0,t([]))},5e3)}})}))},t.getPreviewDmsResult=function(e){return i(this,void 0,void 0,(function*(){return new Promise(t=>{if(n)t([]);else{let s=!1;const i=e=>{s||(s=!0,t(e))};window.tsoc_o.getPreviewDmsResult(i,e),o.delay(()=>{s||(s=!0,t([]))},5e3)}})}))},t.postViewDiv=function(e){return i(this,void 0,void 0,(function*(){console.log("postViewDiv",e),window.top.postMessage({type:"viewDiv",msg:e,from:"content"},"*")}))},t.postAttention=function(e){return i(this,void 0,void 0,(function*(){console.log("postAttention",e),window.top.postMessage({type:"attention",msg:e,from:"content"},"*")}))}},function(e,t){e.exports=ReactIdSwiper},function(e,t,s){"use strict";var i=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(o,n){function r(e){try{a(i.next(e))}catch(e){n(e)}}function c(e){try{a(i.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,c)}a((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getBounds=t.getTimeStr=t.wait=void 0;const o=s(3);t.wait=function(e){return i(this,void 0,void 0,(function*(){return new Promise(t=>{o.delay(t,e)})}))},t.getTimeStr=function(e,t){const s=Math.round(t/1e3);let i=Math.round(e/1e3),o=Math.floor(i/60),n=Math.floor(o/60),r="";return i%=60,o%=60,n>0||s>=3600?(r=n+":",r+=o>=10?o+":":"0"+o+":"):s>=600?r+=o>=10?o+":":"0"+o+":":r=o+":",r+=i>=10?i:"0"+i,r},t.getBounds=function(e){const t={left:0,top:0,width:0,height:0};if(!e)return t;try{const s=e.getBoundingClientRect();t.left=s.left,t.top=s.top,t.width=s.width,t.height=s.height}catch(e){}const s=e.ownerDocument,i=s.body,o=s.documentElement;t.left=t.left-(o.clientLeft||i.clientLeft||0),t.top=t.top-(o.clientTop||i.clientTop||0);const n=s.defaultView;return t.left+=n.pageXOffset||o.scrollLeft||i.scrollLeft,t.top+=n.pageYOffset||o.scrollTop||i.scrollTop,t}},function(e,t,s){"use strict";e.exports=s(20)},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.ImgBtn=t.AudioBtn=t.ToggleBtn=void 0;const o=s(0),n=s(2),r=s(1);class c extends o.Component{constructor(e){super(e),this.m_pID=-1,this._inited=this._inited.bind(this),this._onClick=this._onClick.bind(this)}_inited(e){!this.m_el&&e&&(this.m_el=e,this.props.onRef&&this.props.onRef(e),e.setAttribute("touch-action","none"),e.addEventListener("pointerdown",t=>{if(!(this.m_pID>=0)){if(this.m_pID=t.pointerId,!this.props.disableCapture)try{e.setPointerCapture(this.m_pID)}catch(e){}this.props.onMouseDown&&this.props.onMouseDown(t)}}),e.addEventListener("pointerup",t=>{if(this.m_pID===t.pointerId){try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1,this.props.onMouseUp&&this.props.onMouseUp(t)}}),e.addEventListener("pointerleave",t=>{if(this.props.disableCapture){if(this.m_pID!==t.pointerId)return;try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1}this.props.onMouseLeave&&this.props.onMouseLeave(t)}),e.addEventListener("pointercancel",t=>{if(this.m_pID===t.pointerId){try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1,this.props.onMouseLeave&&this.props.onMouseLeave(t)}}))}_onClick(e){this.props.onClick&&this.props.onClick(e),this.props.preventEvent&&(e.preventDefault(),e.stopPropagation())}componentDidUpdate(e){if((this.props.disabled&&!e.disabled||!this.props.view&&e.view)&&this.m_pID>=0){try{this.m_el&&this.m_el.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1}}}i([n.observable],c.prototype,"m_pID",void 0);let a=class extends c{constructor(e){super(e),this.m_on=!1,this.m_on=!0===e.on}componentWillReceiveProps(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}render(){const e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down");const t=e.join(" ");let s=this.props.style;return!1===this.props.view&&(s||(s={}),s.display="none"),o.createElement("button",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,disabled:!0===this.props.disabled,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:s},this.props.children)}};i([n.observable],a.prototype,"m_on",void 0),a=i([r.observer],a),t.ToggleBtn=a;let l=class extends a{constructor(e){super(e)}play(){this.m_on||(this.m_on=!0,this.props.playFnc(this.props.src,e=>{this.m_on&&(this.m_on=!1,this.props.onPause&&this.props.onPause(e))}))}_onClick(e){this.m_on?(this.props.pauseFnc(),this.m_on=!1):this.play(),super._onClick(e)}};i([n.action],l.prototype,"play",null),i([n.action],l.prototype,"_onClick",null),l=i([r.observer],l),t.AudioBtn=l;let h=class extends c{constructor(e){super(e),this.m_on=!1,this.m_on=!0===e.on}componentWillReceiveProps(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}render(){const e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down"),!0===this.props.disabled&&e.push("disable");const t=e.join(" ");let s=this.props.style;return!1===this.props.view&&(s||(s={}),s.display="none"),o.createElement("img",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:s,src:this.props.src,useMap:this.props.useMap})}};i([n.observable],h.prototype,"m_on",void 0),h=i([r.observer],h),t.ImgBtn=h},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._toStringTimestamp=t.getDateStr=t.nteArray=t.intToHTMLcolor=t.nteBool=t.nteString=t.nteFloat=t.nteInt=t.nteUInt=t.getUnicUrl=t.getUnicNum=t.getUnic=void 0,Date.now||(Date.now=function(){return(new Date).getTime()});let i=0;function o(){return n().toString(36)}function n(){const e=Date.now();return e>i?i=e:i+=1,i}t.getUnic=o,t.getUnicNum=n,t.getUnicUrl=function(e){if(!e)return"";let t=e=e.trim();return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")||(t=t.indexOf("?")>0?t+"&t="+o():t+"?t="+o()),t},t.nteUInt=function(e,t){if(null==e)return t;if("number"==typeof e)return isNaN(e)||e<0?t:Math.round(e);{const s=parseInt(String(e),10);return isNaN(s)||s<0?t:s}},t.nteInt=function(e,t){if(null==e)return t;if("number"==typeof e)return Math.round(e);{const s=parseInt(String(e),10);return isNaN(s)?t:s}},t.nteFloat=function(e,t){if(null==e)return t;if("number"==typeof e)return e;{const s=parseFloat(String(e));return isNaN(s)?t:s}},t.nteString=function(e,t){return null==e?t:String(e)},t.nteBool=function(e,t){if(null==e)return t;if("boolean"==typeof e)return e;const s=String(e);return"true"===s||"false"!==s&&t},t.intToHTMLcolor=function(e){let t,s,i,o=e-0;t=(255&o)<<16,s=65280&o,i=(16711680&o)>>>16,o=t|s|i;let n=o.toString(16);return n="#000000".substring(0,7-n.length)+n,n},t.nteArray=function(e){if(e){if(Array.isArray(e))return e;if("string"==typeof e){const t=e;if(t.indexOf("[")>=0&&t.indexOf("]")>0)try{return JSON.parse(t)}catch(e){}}const t=[];return t.push(e),t}return[]},t.getDateStr=function(e="."){const t=new Date,s=t.getFullYear(),i=t.getMonth()+1,o=t.getDate();return s+e+(i<10?"0"+i:""+i)+e+(o<10?"0"+o:""+o)},t._toStringTimestamp=function(e){let t;const s=e.getFullYear();let i=e.getMonth()+1+"";parseInt(i,10)<10&&(i="0"+i);let o=e.getDate()+"";return parseInt(o,10)<10&&(o="0"+o),t=s+"-"+i+"-"+o+" "+e.toTimeString().substr(0,8),t}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},o=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(o,n){function r(e){try{a(i.next(e))}catch(e){n(e)}}function c(e){try{a(i.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,c)}a((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),r=s(2),c=s(1),a=s(7);let l=class extends n.Component{constructor(e){super(e),this.m_on=!1,this.m_showMathKit=!1,this.bookInfo=[],this.curIndex=0,this._list=[],this._onClick=()=>{this.props.isTeacher&&this._off()},this._off=()=>o(this,void 0,void 0,(function*(){this.props.view&&this.m_on&&(this.m_on=!1,this.props.onEndStart&&this.props.onEndStart(),yield a.wait(500),this.props.view&&!this.m_on&&this.props.onEnd&&this.props.onEnd())})),this.m_on=e.view&&e.on}_on(){return o(this,void 0,void 0,(function*(){this.m_on=!0}))}componentWillReceiveProps(e){if(e.lesson&&this.props.lesson!==e.lesson||this.props.view!==e.view){for(;this.bookInfo.length>0;)this.bookInfo.pop();e.lesson&&e.lesson.childrenList&&e.lesson.childrenList.length>0&&e.lesson.childrenList.map((t,s)=>{try{if(t.book){t.book.id===e.bookId&&(this.curIndex=this.bookInfo.length);let s=t.depth_name?t.depth_name:"";s=s.replace(/\&lt;/g,"<"),s=s.replace(/\&gt;/g,">"),this.bookInfo.push({bookName:t.name?t.name:"",id:t.id,lesson:e.lesson?e.lesson.name:"",subtitle:s})}}catch(e){alert("A ee  "+JSON.stringify(e))}})}}componentDidUpdate(e){this.props.view?e.view?this.props.on&&!e.on?this._on():!this.props.on&&e.on&&this._off():this.props.on?this._on():this.m_on=!1:this.m_on=!1}render(){const{isTeacher:e,subtitle:t}=this.props,s=[];s.push(this.props.className);const i=document.querySelector(".bgm");return this.props.view?(this.m_on&&s.push("on"),i&&i.play()):(s.push("hide"),i&&(i.pause(),i.currentTime=0)),n.createElement("div",{className:s.join(" "),onClick:this._onClick},e&&this.bookInfo&&n.createElement("span",{className:"concept_name"},this.bookInfo.length>0?this.bookInfo[this.curIndex].lesson:""),n.createElement("div",{className:"progress_dot"},e&&this.bookInfo&&this.bookInfo.map((e,t)=>n.createElement("span",{key:"q_"+t,className:this.curIndex===t?"on":""}))),n.createElement("div",{className:"video"},n.createElement("video",{muted:!0,autoPlay:!0,poster:this.props.poster_url?this.props.poster_url:void 0},n.createElement("source",{src:this.props.video_url,type:"video/mp4"}),n.createElement("strong",null,"Your browser does not support the video tag."))),n.createElement("div",{className:"text"},n.createElement("div",{className:"t1"},this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].bookName:""),e&&n.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].subtitle:""}}),!e&&n.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:0===t.length&&this.bookInfo[this.curIndex]?this.bookInfo[this.curIndex].subtitle:t}})),n.createElement("audio",{className:"bgm",autoPlay:!0,src:this.props.audio_url?this.props.audio_url:void 0}))}};i([r.observable],l.prototype,"m_on",void 0),i([r.observable],l.prototype,"_list",void 0),i([r.action],l.prototype,"_off",void 0),l=i([c.observer],l),t.default=l},function(e,t,s){"use strict";s.r(t)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseClassColor=t.parseDept5SubDiv=t.parseDept5Div=t.parseDept4Div=t.parseDept3Div=void 0,t.parseDept3Div=function(e){return"M0301"===e?"Number&Operations":"M0302"===e?"Measurement&Date":"M0303"===e?"Operations&Algebra":"M0304"===e?"Geometry":"M0305"===e?"Topic":"M0306"===e?"Module Review":""},t.parseDept4Div=function(e){return"M0401"===e?"Concept":"M0402"===e?"Problem":"M0403"===e?"Strategy":"M0404"===e?"Number&Operations":"M0405"===e?"Measurement&Date":"M0406"===e?"Operations&Algebra":"M0407"===e?"Geometry":"M0408"===e?"Concept Learning":"M0409"===e?"Topic Learning":"M0410"===e?"Module Learning":"M0411"===e?"Module Test":""},t.parseDept5Div=function(e){return"M0501"===e?"Warm-Up":"M0502"===e?"Concept Learning":"M0503"===e?"Concept Learning 2":"M0504"===e?"Concept Learning 3":"M0505"===e?"Problem Solving":"M0506"===e?"Wrap-Up":"M0507"===e?"Topic Learning":"M0508"===e?"Module Learning":"M0509"===e?"Module Test":""},t.parseDept5SubDiv=function(e){return"M050101"===e?"Warm-Up Activity":"M050102"===e?"Learning Objectives":"M050103"===e?"Concept Summary":"M050201"===e?"Concept Learning":"M050202"===e?"Concept Activity":"M050203"===e?"Concept Tool":"M050204"===e?"Concept Summary":"M050301"===e?"Activity":"M050302"===e?"Concept Tool":"M050303"===e?"Summary":"M050304"===e?"Check":"M050401"===e?"Activity":"M050402"===e?"Concept Tool":"M050403"===e?"Summary":"M050404"===e?"Check":"M050501"===e?"Independent Practice":"M050502"===e?"Extended Practice":"M050503"===e?"Strategy":"M050504"===e?"Reasoning (2)":"M050505"===e?"Strategy":"M050601"===e?"Wrap-Up Activity":"M050602"===e?"Portfolio":"M050701"===e?"Topic Strategy":"M050702"===e?"Adaptive Learning":"M050801"===e?"Module Review":"M050802"===e?"Adaptive Learning":"M050803"===e?"Module Portfolio":"M050804"===e?"Module Strategy":"M050901"===e?"Assessment":"M050902"===e?"Module Portfolio":"M050903"===e?"Assessment Review":"M050904"===e?"STEAM Activity":"M050905"===e?"STEAM Portfolio":""},t.parseClassColor=function(e){return"B62001"===e?"Black":"White"}},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0});const o=s(0),n=s(2),r=s(1),c=s(29),a=s(10);let l=class extends o.Component{constructor(e){super(e),this.m_btnH=0,this.m_max=0,this.m_sy=-1,this.m_vy=-1,this.m_time=-1,this.m_bSend=!1,this.m_state={y:0,alpha:1,tDur:0,aDur:0,isOn:!1,disabled:!1},this._ref=e=>{if(this.m_max>0||!e)return;e.setAttribute("touch-action","none");const t=window.getComputedStyle(e),s=a.nteFloat(t.height,0),i=a.nteFloat(t.bottom,0);s>0&&(this.m_btnH=s,"pad"===this.props.type?this.m_max=i-s-35:this.m_max=s+i+10,this.props.view||(this.m_state.y=this.m_max))},this._down=e=>{this.m_state.isOn||this.m_state.disabled||void 0!==this.props.disable&&this.props.disable||(this.m_state.y=this.props.originY,this.m_state.alpha=1,this.m_state.tDur=0,this.m_state.aDur=0,this.m_state.isOn=!0,this.m_vy=0,this.m_time=Date.now())},this._start=(e,t)=>{this.m_sy=t.y,this.m_bSend=!0},this._drag=(e,t)=>{if(!this.m_state.isOn||this.m_state.disabled)return;let s=t.y-this.m_sy;"teacher"===this.props.type?(t.deltaY<-1?this.m_bSend=!1:t.deltaY>=0&&(this.m_bSend=!0),s<0&&(s=0)):(t.deltaY>1?this.m_bSend=!1:t.deltaY<=0&&(this.m_bSend=!0),s>0&&(s=0)),!1===this.props.preventDrag&&(this.m_state.y=s+this.props.originY);const i=Date.now();this.m_vy=t.deltaY/(i-this.m_time),this.m_time=i},this._stop=(e,t)=>{if(this.m_state.isOn&&!this.m_state.disabled)if(this.m_bSend){let e=.5*this.m_vy*1e3,s=t.y-this.m_sy;"teacher"===this.props.type?(e<this.m_btnH?e=this.m_btnH:e>4*this.m_btnH&&(e=4*this.m_btnH),s<0&&(s=0)):(-1*e<this.m_btnH?e=-this.m_btnH:-1*e>4*this.m_btnH&&(e=-4*this.m_btnH),s>0&&(s=0)),this.m_state.tDur=.5,this.m_state.aDur=.5,this.m_state.alpha=0,this.m_state.y=s+e+this.props.originY,this.props.onSend()}else this.m_state.isOn=!1,this.m_state.tDur=.3,this.m_state.aDur=0,this.m_state.y=this.props.originY},e.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):e.view?(this.m_state.y=e.originY,this.m_state.alpha=1,this.m_state.tDur=.3,this.m_state.aDur=0,this.m_state.isOn=!1,this.m_state.disabled=!1):e.view||(this.m_state.y=e.originY,this.m_state.alpha=0,this.m_state.tDur=.3,this.m_state.aDur=.3,this.m_state.isOn=!1,this.m_state.disabled=!0)}componentWillReceiveProps(e){e.sended&&!this.props.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):e.view&&!this.props.view?(this.m_state.y=e.originY,this.m_state.alpha=1,e.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=.3):(this.m_state.tDur=.3,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1):!e.view&&this.props.view?(this.m_state.y=this.m_max,this.m_state.alpha=0,this.m_state.tDur=.3,this.m_state.aDur=.3,this.m_state.isOn=!1,this.m_state.disabled=!0):!e.view||e.sended||this.m_state.isOn||e.originY===this.props.originY||(this.m_state.y=e.originY,this.m_state.tDur=.3,this.m_state.aDur=0),!this.props.isRetry&&e.isRetry&&(this.m_state.y=e.originY,this.m_state.alpha=1,e.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=.3):(this.m_state.tDur=.3,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1)}render(){const{y:e,tDur:t,aDur:s,alpha:i,isOn:n,disabled:r}=this.m_state;let a={transform:`translateY(${e}px)`,transition:`transform ${t}s, opacity ${s/2}s ${s/2}s`,opacity:i,pointerEvents:r||!this.props.view?"none":"auto"};this.props.preventDrag&&(a={});const l=[];return"pad"===this.props.type?l.push("fel_toteacher"):l.push("fel_topad"),n&&l.push("on"),this.props.isVisiblePenTool&&this.props.isVisiblePenTool&&l.push("up"),o.createElement(c.DraggableCore,{onMouseDown:this._down,onDrag:this._drag,onStart:this._start,onStop:this._stop},o.createElement("button",{ref:this._ref,className:l.join(" ")+(this.props.className?" "+this.props.className:""),style:a},o.createElement("span",{className:"revise"+(this.props.isRevise?" on":""),style:{display:this.props.isRevise?"":"none"}})))}};i([n.observable],l.prototype,"m_state",void 0),l=i([r.observer],l),t.default=l},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.AlertPopup=t.WarningPopup=t.StrategyPopup=void 0;const o=s(0),n=s(2),r=s(1),c=s(33),a=s(3),l=s(4);let h=class extends o.Component{componentDidUpdate(e){if(this.props.view&&!e.view){if(!this.props.button){let e=this.props.delay;e||(e=800),a.delay(()=>{this.props.onComplete&&this.props.onComplete()},e)}}else!this.props.view&&e.view}render(){const{type:e}=this.props;let t="";0===e?t="The teacher has stopped you from the activity. After 3 seconds, only the contents has been created so far will be submitted.":1===e?t="All students are already in progress. If you restart, existing data will be deleted. Are you sure you want to request the submission?":2===e?t="You can share a solution only in the problem solving state.":3===e?t="Do you want to save the current learning screen? If there is already saved data, the current data will be overwritten.":4===e?t="Picture not taken.\nYou have reached the maximum number of pictures available.":5===e&&(t="For this activity, We recommend students to wear a headset or an earphone with a microphone.");let s="exclamation";return 4===e?s="nocamera":5===e&&(s="headset"),o.createElement("div",{className:"alertpop strategy"+(this.props.view?" show":"")},o.createElement("div",{className:"alertpop-inner"},o.createElement("div",{className:s}),o.createElement("div",{className:"ment"},t),o.createElement("div",{className:"buttons"+(this.props.isSingle?" single":"")+(this.props.button?"":" hide")},o.createElement("button",{className:"btn cancel",onClick:this.props.onCancel},"Cancel"),o.createElement("button",{className:"btn ok",onClick:this.props.onOk},"Ok"))))}};h=i([r.observer],h),t.StrategyPopup=h;let u=class extends o.Component{constructor(){super(...arguments),this.second=3,this.interval=null}componentDidUpdate(e){if(this.props.view&&!e.view){if(this.second=3,!this.props.button){let e=this.props.delay;e||(e=800),this.interval=setInterval(()=>{this.second--,0===this.second&&(this.props.onComplete&&this.props.onComplete(),null!==this.interval&&clearInterval(this.interval))},1e3)}}else!this.props.view&&e.view&&(null!==this.interval&&clearInterval(this.interval),this.props.onComplete&&this.props.onComplete())}render(){const{type:e}=this.props;let t="";return 0===e&&(t=`Submit your answer within <strong>${this.second} seconds.</strong>`),o.createElement("div",{className:"warningpopup",style:{display:this.props.view?"":"none"}},o.createElement("div",{className:"msg",dangerouslySetInnerHTML:{__html:t}}))}};i([n.observable],u.prototype,"second",void 0),u=i([r.observer],u),t.WarningPopup=u;class d extends o.Component{constructor(){super(...arguments),this._onOk=()=>{this.props.onOk&&this.props.onOk()},this._onClose=()=>{this.props.onClose&&this.props.onClose()}}componentDidUpdate(e){this.props.view&&!e.view||!this.props.view&&e.view&&l.App.pub_playBtnTab()}render(){const{view:e,msg:t,isSingle:s,msgclass:i}=this.props;return o.createElement(c.CoverPopup,{className:"alert_popup",view:e,onClosed:this.props.isSingle?this._onOk:this._onClose},o.createElement("div",{className:"pop_box"},o.createElement("span",{className:"ico_alert"}),o.createElement("span",{className:"text"+(i&&""!==i?" "+i:""),dangerouslySetInnerHTML:{__html:t}}),o.createElement("div",{className:"btns"},o.createElement("button",{className:"btn_cancel",onClick:this._onClose,style:{display:s?"none":""}},o.createElement("span",null,"Cancel")),o.createElement("button",{className:"btn_ok",onClick:this._onOk},o.createElement("span",null,"OK")))))}}t.AlertPopup=d},function(e,t,s){e.exports=s(18)},function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const i=s(8),o=s(0),n=s(21),r=s(4),c=s(5),a=s(22);i.setConfig({ErrorOverlay:e=>o.createElement("div",null)});const l={clear:r.App.pub_clear,importLink:a.importLink,importHTML:a.importHTML};let h,u=!0;ox_check_t?h=s(23):ox_check_s&&(h=s(34),u=!1);let d=!1;const p=h,m=p.default,_=p.AppProvider,g=p.appContext;l.set=(e,t,s)=>{r.App.pub_set(e,t,s),g.setData(e)},l.render=()=>{r.App.pub_initAudio(),n.render(o.createElement(_,null,o.createElement(m,null)),document.getElementById("wrap"))},u?(l.init=(e,t,s,i,o,n)=>{r.App.pub_load(e,null,t,s,i,o,n)},l.start=()=>{d=!0,setTimeout(()=>g.start(),500)},l.receive=e=>{if(4===e.type){const t=e.data;d?t&&t.id&&""!==t.id&&(r.App.isStarted?c.sendPADToID(t.id,0,null):c.sendPADToID(t.id,1,null)):r.App.pub_addInitedStudent(t)&&(d||(d=!0,g.start()))}else g.receive(e)},l.teachingTool=e=>{},l.notifyNaviInfo=(e,t,s,i,o,n)=>{g.notifyNaviInfo(e,t,s,i,o,n)},l.notifyBookCaptureInfo=e=>{g.notifyBookCaptureInfo(e)},l.notifyUploadToServerResult=e=>{g.uploaded(e)},l.notifyUploadToServerMultiResult=e=>{g.multiUploaded(e)},l.notifyAlert=e=>{g.notifyAlert(e)},l.notifyPenToolState=(e,t)=>{g.notifyPenToolState(e,t)},l.notifyHamburgerMenuClicked=e=>{g.notifyHamburgerMenuClicked(e)},l.callThreeminState=()=>{g.callThreeminState()}):(l.init=(e,t,s,i,o,n)=>{r.App.pub_load(null,e,t,s,i,o,n),c.sendTeacher(4,e),g.start()},l.receive=e=>{null!=r.App.student&&g.receive(e)},l.notifyUploadToServerResult=e=>{g.uploaded(e)},l.notifyUploadToServerMultiResult=e=>{g.multiUploaded(e)},l.notify=e=>{g.notify(e)},l.notifyVideoRecord=e=>{g.notifyVideoRecord(e)},l.notifyStartVoice=()=>{g.notify("notifyStartVoice")},l.notifyVoiceRecordResult=e=>{g.notifyRecorded(e)},l.notifyTakePicture=(e,t)=>{g.notifyTakePicture&&g.notifyTakePicture(e,t)},l.clickSendButton=()=>{g.clickSendButton()},l.notifyRecordData=(e,t)=>{g.notifyRecordData(e,t)},l.notifyAlert=e=>{g.notifyAlert(e)},l.notifyPenToolState=(e,t)=>{g.notifyPenToolState(e,t)},l.notifyLiveGivePopupClose=()=>{g.notifyLiveGivePopupClose()}),s(42),e.app_o=l}).call(this,s(19))},function(e,t){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(e){"object"==typeof window&&(s=window)}e.exports=s},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=s(0))&&"object"==typeof i&&"default"in i?i.default:i;function n(e){return n.warnAboutHMRDisabled&&(n.warnAboutHMRDisabled=!0,console.error("React-Hot-Loader: misconfiguration detected, using production version in non-production environment."),console.error("React-Hot-Loader: Hot Module Replacement is not enabled.")),o.Children.only(e.children)}n.warnAboutHMRDisabled=!1;var r=function e(){return e.shouldWrapWithAppContainer?function(e){return function(t){return o.createElement(n,null,o.createElement(e,t))}}:function(e){return e}};r.shouldWrapWithAppContainer=!1;t.AppContainer=n,t.hot=r,t.areComponentsEqual=function(e,t){return e===t},t.setConfig=function(){},t.cold=function(e){return e},t.configureComponent=function(){}},function(e,t){e.exports=ReactDOM},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importLink=t.importHTML=void 0,t.importHTML=function(e){return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="document",i.onload=e=>{if(!e)return;const o=i.response;o&&o.body&&o.body.firstElementChild?t(o.body.firstElementChild):o&&o.documentElement?t(o.documentElement):s("error")},i.onerror=e=>{s(e)},i.send(null)})},t.importLink=function(e,t){return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="document",i.onload=e=>{if(!e)return;const s=i.response;t(s)},i.onerror=e=>{s(e)},i.send(null)})}},function(e,t,s){"use strict";(function(e){var i=this&&this.__decorate||function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.appContext=t.AppProvider=void 0;const o=s(0),n=s(1),r=s(8),c=(s(6).default,s(12)),a=s(24);s(13),s(25);const l=s(26);Object.defineProperty(t,"AppProvider",{enumerable:!0,get:function(){return l.TeacherProvider}}),Object.defineProperty(t,"appContext",{enumerable:!0,get:function(){return l.tContext}});const h=s(28);let u=class extends o.Component{render(){const{state:e,actions:t}=this.props,s=e.viewDiv;return o.createElement(o.Fragment,null,o.createElement("div",{className:"content-container"},o.createElement("div",{className:"content-wrapper",style:{left:("direction"===s?0:-1280)+"px"}},o.createElement("div",null,o.createElement(c.default,{className:"video-direction",view:"direction"===s,on:e.directionON,isTeacher:!0,lesson:t.getCurriculum(),bookId:e.bookid,subtitle:"",poster_url:"/content/mathalive_lib/MA/check/common/bg_direction.jpg",video_url:"/content/mathalive_lib/MA/check/common/mv_check.mp4",video_frame:125,onEndStart:t.onDirectionEndStart,onEnd:t.onDirectionEnded},o.createElement("div",{className:"lesson"},""))),o.createElement("div",null,o.createElement(h.default,{view:"content"===s&&"check"===e.prog,state:e,actions:t})))),o.createElement(a.Navi,Object.assign({},e.navi,{onLeftClick:t.naviLeft,onRightClick:t.naviRight})))}};u=i([n.observer],u);const d=l.useTeacher(e=>o.createElement(n.Observer,null,()=>o.createElement(u,{state:e.state,actions:e.actions})));t.default=r.hot(e)(d)}).call(this,s(11)(e))},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.Navi=void 0;const o=s(0),n=s(2),r=s(1),c=s(9);let a=class extends o.Component{constructor(e){super(e),this.m_on=!1,this.m_isStarted=!1,this._onClick=e=>{this.m_on=!0}}componentDidUpdate(e){this.m_isStarted||!this.props.view||e.view||(this.m_isStarted=!0,this.m_on=!0)}render(){const e=this.m_on?void 0:"off",t={visibility:this.props.view?"visible":"hidden"};return o.createElement(o.Fragment,null,o.createElement("div",{id:"common_navi_left",className:e,style:t},o.createElement("div",null,o.createElement("div",{onClick:this._onClick},o.createElement(c.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),o.createElement(c.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))),o.createElement("div",{id:"common_navi_right",className:e,style:t},o.createElement("div",null,o.createElement("div",{onClick:this._onClick},o.createElement(c.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),o.createElement(c.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))))}};i([n.observable],a.prototype,"m_on",void 0),a=i([r.observer],a),t.Navi=a},function(e,t,s){"use strict";s.r(t)},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.SENDPROG=t.useTeacher=t.tContext=t.TeacherConsumer=t.TeacherProvider=t.TeacherContext=void 0;const o=s(0),n=s(3),r=s(2),c=s(5),a=s(27);var l;!function(e){e[e.READY=0]="READY",e[e.SENDING=1]="SENDING",e[e.SENDED=2]="SENDED",e[e.STOPED=3]="STOPED",e[e.COMPLETE=4]="COMPLETE"}(l||(l={})),t.SENDPROG=l;class h extends a.TeacherContextBase{constructor(){super(),this._quizResultFnc=null,this.state.prog="check",this.state.quizResult=[],this.actions.getData=()=>this._data,this.actions.getCurriculum=()=>this._curriculum,this.actions.gotoDirection=()=>this._setViewDiv("direction"),this.actions.gotoNextBook=()=>{c.sendLauncher(9,null)},this.actions.setQuizResultFnc=e=>{this._quizResultFnc=e}}_setViewDiv(e){super._setViewDiv(e)}receive(e){if(super.receive(e),11===e.type&&e.data){const t=e.data;if("check_result"===t.msgtype){const e=t,s=JSON.parse(e.result);let i=n.findIndex(this.state.quizResult[e.idx],{studentid:s.studentid});i>-1?this.state.quizResult[e.idx][i]=s:this.state.quizResult[e.idx].push(s),this._quizResultFnc&&this._quizResultFnc(e)}}}setData(e){this._data=e;for(let e=0;e<this._data.quizs.length;e++)this.state.quizResult[e]=[]}notifyNaviInfo(e,t,s,i,o,n){this._curriculum=e,this.state.bookid=t,this.state.classid=s}}i([r.observable],h.prototype,"state",void 0),i([r.action],h.prototype,"_setViewDiv",null),t.TeacherContext=h;const u=new h;t.tContext=u;const{Provider:d,Consumer:p}=o.createContext(u);t.TeacherConsumer=p;class m extends o.Component{render(){return o.createElement(d,{value:u},this.props.children)}}t.TeacherProvider=m,t.useTeacher=function(e){return function(t){return o.createElement(p,null,t=>o.createElement(e,Object.assign({},t)))}}},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.TeacherContextBase=void 0;const o=s(2),n=s(4),r=s(5),c=s(14);class a{constructor(){this._naviLeftFnc=null,this._naviRightFnc=null,this.state={viewDiv:"direction",directionON:!1,navi:{view:!1,enableLeft:!1,enableRight:!1},svg_bg:{view:!0,bPlay:!1,viewCharactor:!0},loading:!1,retCnt:0,numOfStudent:0,bookid:0,bookkey:0,curriculumid:0,classid:0,unitid:0,lessonid:0,conceptLibiary:{view:!1,datatype:"grade",resultmode:!1}},this.actions={onDirectionEndStart:()=>{"direction"===this.state.viewDiv&&r.sendPAD(3,null)},onDirectionEnded:()=>{"direction"===this.state.viewDiv&&this._setViewDiv("content"),n.App.isStarted=!0},setNaviView:e=>{this.state.navi.view=e},setNavi:(e,t)=>{this.state.navi.enableLeft=e,this.state.navi.enableRight=t},setNaviFnc:(e,t)=>{this._naviLeftFnc=e,this._naviRightFnc=t},naviLeft:()=>{"direction"===this.state.viewDiv?r.sendLauncher(8,null):(n.App.pub_playBtnPage(),this._naviLeftFnc?this._naviLeftFnc():this._setViewDiv("direction"))},naviRight:()=>{"direction"===this.state.viewDiv?(n.App.pub_playBtnPage(),this.state.directionON=!1):(n.App.pub_playBtnPage(),this._naviRightFnc?this._naviRightFnc():r.sendLauncher(9,null))},setRetCnt:e=>{e>this.state.numOfStudent&&(e=this.state.numOfStudent),this.state.retCnt=e},setNumOfStudent:e=>{this.state.numOfStudent=e},setConcepLibaryView:e=>{this.state.conceptLibiary.view=e},setConcepLibaryDataType:e=>{this.state.conceptLibiary.datatype=e},setConcepLibaryResultMode:e=>{this.state.conceptLibiary.resultmode=e},setLoading:e=>{r.showTLoading(e)}},this.notifyBookCaptureInfo=e=>{},this.clickSendButton=()=>{},this.notifyRecordData=(e,t)=>{}}_setViewDiv(e,t){this.state.viewDiv!==e&&(t||n.App.pub_stop(),"direction"===e?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0,r.sendLauncher(5,null),r.sendPAD(1,null),this.state.navi.view=!0,this.state.navi.enableLeft=n.App.prevBook,this.state.navi.enableRight=!0,this._naviLeftFnc=null,this._naviRightFnc=null,this.state.conceptLibiary.view=!1,this.state.conceptLibiary.datatype="grade",this.state.conceptLibiary.resultmode=!1):(this.state.directionON=!1,this.state.svg_bg.bPlay=!1,this.state.svg_bg.viewCharactor=!1,r.sendLauncher(6,null),r.sendPAD(0,null)),this._naviLeftFnc=null,this._naviRightFnc=null,this.state.numOfStudent=0,this.state.retCnt=0,this.state.viewDiv=e)}start(){if("direction"===this.state.viewDiv&&(this.state.directionON=!0,this.state.navi.view=!0,this.state.navi.enableLeft=n.App.prevBook,this.state.navi.enableRight=!0,this.state.svg_bg.bPlay=!0,r.sendLauncher(5,null),r.sendPAD(1,null)),n.App.isDvlp){let e="";if(""===e)return;let t={id:1e3,code:"",depth:4,depth_name:c.parseDept4Div(e),info:"",div:e,subDiv:"",name:"M0408"===e?"Identify the Number 0, Read and Write 0":"",thumbnail:"",cmsLevel:"",childrenList:[]},s="",i="",o="";if("Concept"===c.parseDept4Div(e))for(let e=0;e<3;e++){0===e?(s="M0503",i="M050303",o=c.parseDept5SubDiv("M050303")):1===e?(s="M0503",i="M050304",o=c.parseDept5SubDiv("M050304")):2===e&&(s="M0506",i="M050601",o=c.parseDept5SubDiv("M050601"));let n={id:16815+e,code:"",depth:5,depth_name:o,info:"",div:s,subDiv:i,name:o,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:9e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(n)}else if("Problem"===c.parseDept4Div(e))for(let e=0;e<3;e++){0===e?(s="M0505",i="M050504",o="Reasoning (1)"):1===e?(s="M0505",i="M050504",o=c.parseDept5SubDiv("M050504")):2===e&&(s="M0506",i="M050602",o=c.parseDept5SubDiv("M050602"));let n={id:16815+e,code:"",depth:5,depth_name:o,info:"",div:s,subDiv:i,name:o,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:8e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(n)}else if("Concept Learning"===c.parseDept4Div(e))for(let e=0;e<12;e++){0===e?(s="M0501",i="M050101",o="WarmUp Quiz"):1===e?(s="M0501",i="M050101",o="I SPY"):2===e?(s="M0501",i="M050101",o="Hit a Mole"):3===e?(s="M0506",i="M050601",o="Memory Game"):4===e?(s="M0506",i="M050601",o="Math Talk"):5===e?(s="M0501",i="M050102",o="Learning Objectives"):6===e?(s="M0502",i="M050202",o="Concept Acivity"):7===e?(s="M0502",i="M050203",o="Concept Tool"):8===e?(s="M0502",i="M050204",o="Concept Summary"):9===e?(s="M0505",i="M050501",o="Independent Practice"):10===e?(s="M0505",i="M050502",o="Extended Practice"):11===e&&(s="M0505",i="M050505",o="CL Strategy");let n={id:16815+e,code:"",depth:5,depth_name:o,info:"",div:s,subDiv:i,name:o,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:1e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(n)}else if("Topic Learning"===c.parseDept4Div(e))for(let e=0;e<1;e++){0===e&&(s="M0507",i="M050701",o=c.parseDept5SubDiv("M050701"));let n={id:16815+e,code:"",depth:5,depth_name:o,info:"",div:s,subDiv:i,name:o,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:2e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(n)}else if("Module Learning"===c.parseDept4Div(e))for(let e=0;e<3;e++){0===e?(s="M0508",i="M050801",o=c.parseDept5SubDiv("M050801")):1===e?(s="M0508",i="M050803",o=c.parseDept5SubDiv("M050803")):2===e&&(s="M0508",i="M050804",o=c.parseDept5SubDiv("M050804"));let n={id:16815+e,code:"",depth:5,depth_name:o,info:"",div:s,subDiv:i,name:o,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:3e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(n)}else if("Module Test"===c.parseDept4Div(e))for(let e=0;e<1;e++){0===e&&(s="M0509",i="M050905",o=c.parseDept5SubDiv("M050905"));let n={id:16815+e,code:"",depth:5,depth_name:o,info:"",div:s,subDiv:i,name:o,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:4e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(n)}let n=1e4;ox_check_t&&(n=9e4)}}receive(e){}uploaded(e){}multiUploaded(e){}notify(e){}notifyRecorded(e){}notifyVideoRecord(e){}notifyNaviInfo(e,t,s,i,o,n){}notifyPenToolState(e,t){}notifyLiveGivePopupClose(){}notifyAlert(e){}notifyHamburgerMenuClicked(e){}callThreeminState(){}}i([o.observable],a.prototype,"state",void 0),i([o.action],a.prototype,"_setViewDiv",null),i([o.action],a.prototype,"start",null),t.TeacherContextBase=a},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},o=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(o,n){function r(e){try{a(i.next(e))}catch(e){n(e)}}function c(e){try{a(i.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,c)}a((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),r=s(1),c=s(2),a=s(3),l=s(4),h=s(15),u=s(5),d=s(7),p=s(30),m=s(31),_=s(32),g=s(9),f=s(16);let y=class extends n.Component{constructor(e){super(e),this._curIdx=0,this._prog=0,this._showQuizDesc=[],this._viewQuizList=!1,this._onQuizList=!0,this._onSummaryResult=!1,this._quizResults=[],this._submitStudents=[],this._viewSubmitList=!1,this._viewAlert=!1,this.ifr=[],this.ifr_desc=[],this.onExitBook=()=>{this._prog>=1&&this._prog<=3||(u.clearTPenTool(),u.exitBook())},this.onGotoBook=(e,t)=>{this._prog>=1&&this._prog<=3||(u.clearTPenTool(),u.gotoBook(e,t))},this.onOpenSubmitList=()=>{this._viewSubmitList=!0},this.onCloseSubmitList=()=>{this._viewSubmitList=!1},this.onPage=e=>{this.props.view&&(this._viewQuizList||(u.clearTPenTool(),this._curIdx=e))},this.toggleQuizDesc=()=>{this._curIdx<0||this._curIdx>=this._showQuizDesc.length||(this._showQuizDesc[this._curIdx]=!this._showQuizDesc[this._curIdx])},this.selectQuiz=e=>{this.props.view&&(this._curIdx=e,this._viewQuizList=!1,this.initContentAll())},this.clickSubmitlistOfQuizlist=e=>{this.props.view&&this._viewQuizList&&(this._curIdx=e,this._viewSubmitList=!0)},this.backToList=()=>{this._viewQuizList=!0},this.toggleQuizList=()=>{this._onQuizList=!this._onQuizList},this.toggleSummaryResult=()=>{this._onSummaryResult=!this._onSummaryResult},this._onPrev=()=>{this.props.view&&0!==this._curIdx&&(u.clearTPenTool(),this._curIdx-=1)},this._onNext=()=>{this.props.view&&this._curIdx!==this._quizResults.length-1&&(u.clearTPenTool(),this._curIdx+=1)},this._onAlertPopup=()=>{this._viewAlert=!0,this._prog=1},this._onAlertOk=()=>{if(!this.props.view)return;this._viewAlert=!1;this.props.actions.getData().quizs.map((e,t)=>{this.props.state.quizResult[t]=[],this._submitStudents[t]=[],this._showQuizDesc[t]=!1,this._quizResults[t].allusers=l.App.students?l.App.students.length:0,this._quizResults[t].submitusers=0,this._quizResults[t].heart2=0,this._quizResults[t].heart1=0,this._quizResults[t].heart0=0,this._quizResults[t].nosubmit=0}),this._onSend()},this._onAlertCancel=()=>{this.props.view&&(this._viewAlert=!1,this._prog=0)},this._onSend=()=>{if(!this.props.view)return;if(this.getResultCnt())return;this._prog=1,l.App.pub_playToPad();u.sendPAD(10,{msgtype:"check_send"}),this.props.actions.setQuizResultFnc(this._onQuizResult),l.App.pub_reloadStudents(()=>o(this,void 0,void 0,(function*(){this.props.view&&1===this._prog&&(yield d.wait(600),this._prog=2,this._setNavi())})))},this._onQuizResult=e=>{if(!this.props.view)return;if(this._curIdx<0)return;const t=JSON.parse(e.result),s=a.find(l.App.students,{id:t.studentid});if(!s)return;if(e.idx<-1||e.idx>this._submitStudents.length-1||e.idx>this._quizResults.length-1)return;const i=this._submitStudents[e.idx].findIndex(e=>e.student.id===t.studentid);i>-1?this._submitStudents[e.idx][i].correct=t.correct:this._submitStudents[e.idx].push({student:s,correct:t.correct,trycnt:t.tryCnt,livePoint:0}),this._quizResults[e.idx].allusers=l.App.students.length,this._quizResults[e.idx].submitusers=this._submitStudents[e.idx].length;const o=this._submitStudents[e.idx].filter(e=>!0===e.correct&&1===e.trycnt);this._quizResults[e.idx].heart2=o?o.length:0;const n=this._submitStudents[e.idx].filter(e=>!0===e.correct&&2===e.trycnt);this._quizResults[e.idx].heart1=n?n.length:0;const r=this._submitStudents[e.idx].filter(e=>!1===e.correct&&e.trycnt>1);this._quizResults[e.idx].heart0=r?r.length:0;const c=l.App.students.length-(o.length+n.length+r.length);this._quizResults[e.idx].nosubmit=c,(3===this._prog&&0===this._quizResults[this._curIdx].nosubmit||e.idx===this._quizResults.length-1&&0===this._quizResults[e.idx].nosubmit)&&(this._prog=0)},this._onSendStop=()=>o(this,void 0,void 0,(function*(){if(!this.props.view)return;if(2!==this._prog)return;if(-1===this._curIdx)return;l.App.pub_playToPad();u.sendPAD(10,{msgtype:"check_end"}),this._prog=3})),this.handlePostMessage=e=>{let t=e.data;"macontent"===t.from&&t.type};const{quizs:t}=this.props.actions.getData();t.map((e,t)=>{this._submitStudents[t]=[],this._showQuizDesc[t]=!1,this._quizResults[t]={seq:e.seq,thumb:e.thumb,url:e.url,quizKind:0,allusers:0,submitusers:0,heart2:0,heart1:0,heart0:0,nosubmit:0}})}getResultCnt(){let e=!1;const t=this.props.actions.getData().quizs;for(let s=0;s<t.length;s++)if(this.props.state.quizResult[s].length>0){e=!0;break}return e}_setNavi(){this.props.actions.setNaviView(this._viewQuizList),this._prog>=1&&this._prog<=3?this.props.actions.setNavi(!1,!1):this.props.actions.setNavi(!0,!0),this.props.actions.setNaviFnc(()=>{u.clearTPenTool(),this.props.actions.gotoDirection()},()=>{u.clearTPenTool(),this.props.actions.gotoNextBook()})}componentDidMount(){window.addEventListener("message",this.handlePostMessage,!1)}componentWillUnmount(){window.removeEventListener("message",this.handlePostMessage,!1)}sendPostMessage(e,t,s){const i={from:"matemplate",to:"macontent",type:e,msg:t};s>-1&&this.ifr[s]&&this.ifr[s].contentWindow.postMessage(i,"*")}initContent(){if(this._curIdx<0)return;const e=this.props.actions.getData().quizs;if(this._curIdx<e.length){let t={idx:this._curIdx,quizmode:"check",isTeacher:!0,content:e[this._curIdx]};this.sendPostMessage("init",t,this._curIdx)}}initContentAll(){const e=this.props.actions.getData().quizs;for(let t=0;t<e.length;t++){let s={idx:t,quizmode:"check",isTeacher:!0,content:e[t]};this.sendPostMessage("init",s,t)}}completeContentAll(){const e=this.props.actions.getData().quizs;for(let t=0;t<e.length;t++){let s={idx:t,quizmode:"check",isTeacher:!0,content:e[t]};this.sendPostMessage("completed",s,t)}}componentDidUpdate(e){if(this.props.view&&!e.view){this._curIdx=0,this._prog=0;this.props.actions.getData().quizs.map((e,t)=>{this._submitStudents[t]=[],this._showQuizDesc[t]=!1,this._quizResults[t].allusers=l.App.students?l.App.students.length:0,this._quizResults[t].submitusers=0,this._quizResults[t].heart2=0,this._quizResults[t].heart1=0,this._quizResults[t].heart0=0,this._quizResults[t].nosubmit=0}),this._viewSubmitList=!1,this.props.actions.setQuizResultFnc(null),this._onQuizList=!0,this._viewQuizList=!0,this._viewAlert=!1,this._onSummaryResult=!0}else!this.props.view&&e.view&&(this.props.actions.setQuizResultFnc(null),this._viewSubmitList=!1,this._onQuizList=!0,this._viewQuizList=!1,this._viewAlert=!1,this._onSummaryResult=!0);this.props.view&&this._setNavi()}render(){const{view:e,state:t,actions:s}=this.props,i=s.getData().quizs;return n.createElement("div",{className:"t_check",style:{display:e?void 0:"none"}},n.createElement("div",{className:"checkContent"},n.createElement(p.MAHeader,{view:e,lesson:this.props.actions.getCurriculum(),bookid:t.bookid,onExitBook:this.onExitBook,onGotoBook:this.onGotoBook,onConceptLibrary:()=>{this.props.state.conceptLibiary.view=!0}}),n.createElement("div",{className:"topHeader"},n.createElement(g.ToggleBtn,{view:this._viewQuizList,on:this._onQuizList,className:"btn_viewMark",onClick:this.toggleQuizList}),n.createElement("button",{className:"back",style:{display:this._viewQuizList?"none":void 0},onClick:this.backToList}),n.createElement("div",{className:"page teacher",style:{display:this._viewQuizList?"none":void 0}},i.map((e,t)=>n.createElement("div",{key:"page"+t,className:"num "+(this._curIdx===t?"on":""),onClick:this.onPage.bind(this,t)},n.createElement("span",null,t+1)))),n.createElement(_.MASubmitUsers,{view:!this._viewQuizList,submitusers:this._submitStudents[this._curIdx]?this._submitStudents[this._curIdx].length:0,totalusers:l.App.students?l.App.students.length:0,onClick:this.onOpenSubmitList}),n.createElement(g.ToggleBtn,{view:!this._viewQuizList,on:this._onSummaryResult,className:"btn_viewSummary",onClick:this.toggleSummaryResult}),n.createElement("div",{className:"result",style:{display:!this._viewQuizList&&this._onSummaryResult?void 0:"none"}},n.createElement("span",{className:"h2"},this._quizResults[this._curIdx]?this._quizResults[this._curIdx].heart2:0),n.createElement("span",{className:"h1"},this._quizResults[this._curIdx]?this._quizResults[this._curIdx].heart1:0),n.createElement("span",{className:"h0"},this._quizResults[this._curIdx]?this._quizResults[this._curIdx].heart0:0),n.createElement("span",{className:"none"},this._quizResults[this._curIdx]?this._quizResults[this._curIdx].nosubmit:0))),n.createElement("div",{id:"contentWrap",className:"contentWrap"},n.createElement(m.MAQuizList,{view:this._viewQuizList,on:this._onQuizList,quizresults:this._quizResults,selectQuiz:this.selectQuiz,clickSubmitlist:this.clickSubmitlistOfQuizlist}),i.map((e,t)=>n.createElement("div",{key:"i"+t,style:{display:this._curIdx!==t||this._viewQuizList?"none":void 0}},n.createElement("iframe",{src:l.App.data_url+e.url+"?idx="+t,ref:e=>{e&&(this.ifr[t]=e)}}),n.createElement("div",{className:"moreBox "+(this._showQuizDesc[t]?"show":"")},n.createElement("div",{className:"more_content"},n.createElement("button",{className:"btn_close",onClick:this.toggleQuizDesc}),n.createElement("iframe",{src:l.App.data_url+e.desc+"?idx="+t,ref:e=>{e&&(this.ifr_desc[t]=e,a.delay(()=>{if(null!==this.ifr_desc[t].contentWindow&&this.ifr_desc[t].contentWindow.document.body){let s=this.ifr_desc[t].contentWindow.document.body.scrollHeight;s>500&&(s=500),e.height=s+"px"}},300))}}))))))),n.createElement(g.ToggleBtn,{view:!this._viewQuizList,on:this._curIdx>=0&&this._curIdx<this._showQuizDesc.length&&this._showQuizDesc[this._curIdx],className:"btn_bulb",onClick:this.toggleQuizDesc}),n.createElement(g.ToggleBtn,{className:"btn_prev",view:!this._viewQuizList&&this._curIdx>0,onClick:this._onPrev}),n.createElement(g.ToggleBtn,{className:"btn_next",view:!this._viewQuizList&&this._curIdx<i.length-1,onClick:this._onNext}),n.createElement(h.default,{view:0===this._prog,type:"teacher",sended:!1,originY:0,onSend:this.getResultCnt()?this._onAlertPopup:this._onSend}),n.createElement(g.ToggleBtn,{view:2===this._prog&&!this._viewAlert,className:"fel_stop",onClick:this._onSendStop}),n.createElement(f.WarningPopup,{view:this._viewAlert,type:1,button:!0,onOk:this._onAlertOk,onCancel:this._onAlertCancel}))}};i([c.observable],y.prototype,"_curIdx",void 0),i([c.observable],y.prototype,"_prog",void 0),i([c.observable],y.prototype,"_showQuizDesc",void 0),i([c.observable],y.prototype,"_viewQuizList",void 0),i([c.observable],y.prototype,"_onQuizList",void 0),i([c.observable],y.prototype,"_onSummaryResult",void 0),i([c.observable],y.prototype,"_quizResults",void 0),i([c.observable],y.prototype,"_submitStudents",void 0),i([c.observable],y.prototype,"_viewSubmitList",void 0),i([c.observable],y.prototype,"_viewAlert",void 0),y=i([r.observer],y),t.default=y},function(e,t){e.exports=ReactDraggable},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.MAHeader=void 0;const o=s(0),n=s(2),r=s(1),c=s(3),a=s(5),l=s(14),h=s(6).default;let u=class extends o.Component{constructor(e){super(e),this.lesson=void 0,this.curStep=void 0,this.step_groups=[],this.step_group_names=[],this.viewUnitSelectBox=!1,this._soption={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},this._refSwiper=e=>{!this._swiper&&e&&(this._swiper=e.swiper)},this.onExitBook=()=>{this.props.onExitBook?this.props.onExitBook():(a.clearTPenTool(),a.exitBook())},this.onConceptLibrary=()=>{this.props.onConceptLibrary&&this.props.onConceptLibrary()},this.onChoiceStep=e=>{if(this.lesson){const t=this.lesson.childrenList.find((t,s)=>t.id===e);let s=[];this.lesson.childrenList.map(e=>{const t=e.book?e.book.id:0;t>0&&s.push(t)}),t&&t.book&&(this.props.onGotoBook?this.props.onGotoBook(t.book.id,s):a.gotoBook(t.book.id,s))}},this.onViewSelectBox=()=>{this.viewUnitSelectBox=!this.viewUnitSelectBox,this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0)),c.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0))},300)}}select_box_parse(){if(this.lesson&&this.curStep&&void 0!==this.lesson.div)if("Concept"===l.parseDept4Div(this.lesson.div)){let e=this.lesson.childrenList.filter(e=>"Warm-Up"===l.parseDept5Div(e.div));e&&(this.step_groups.push(e),this.step_group_names.push("Warm-Up")),e=this.lesson.childrenList.filter(e=>"Concept Learning"===l.parseDept5Div(e.div)),e&&(this.step_groups.push(e),this.step_group_names.push("Concept Learning")),e=this.lesson.childrenList.filter(e=>"Concept Learning 2"===l.parseDept5Div(e.div)),e&&(this.step_groups.push(e),this.step_group_names.push("Concept Learning 2")),e=this.lesson.childrenList.filter(e=>"Concept Learning 3"===l.parseDept5Div(e.div)),e&&(this.step_groups.push(e),this.step_group_names.push("Concept Learning 3")),e=this.lesson.childrenList.filter(e=>"Wrap-Up"===l.parseDept5Div(e.div)),e&&(this.step_groups.push(e),this.step_group_names.push("Wrap-Up"))}else if("Problem"===l.parseDept4Div(this.lesson.div)){let e=this.lesson.childrenList.filter(e=>"Warm-Up"===l.parseDept5Div(e.div));e&&(this.step_groups.push(e),this.step_group_names.push("Warm-Up")),e=this.lesson.childrenList.filter(e=>"Problem Solving"===l.parseDept5Div(e.div)),e&&(this.step_groups.push(e),this.step_group_names.push("Problem Solving")),e=this.lesson.childrenList.filter(e=>"Wrap-Up"===l.parseDept5Div(e.div)),e&&(this.step_groups.push(e),this.step_group_names.push("Wrap-Up"))}}componentDidMount(){this.props.lesson&&(this.lesson=this.props.lesson,this.props.bookid&&this.lesson.childrenList.map(e=>{e.book&&e.book.id===this.props.bookid&&(this.curStep=e)})),this.select_box_parse()}componentDidUpdate(e){this.props.view&&!e.view&&(this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0)),c.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0))},300)),this.props.lesson!==e.lesson&&this.props.lesson&&(this.lesson=this.props.lesson,this.props.bookid&&this.lesson.childrenList.map(e=>{e.book&&e.book.id===this.props.bookid&&(this.curStep=e)}),this.select_box_parse())}render(){let e=[];return o.createElement("div",{className:"maheader"},o.createElement("button",{className:"btn_menu"}),o.createElement("div",{className:"user"},o.createElement("img",{src:"/content/mathalive_lib/images/temp_ico_submituser_01.png"}),o.createElement("span",{className:"name"},"Charlotee")),o.createElement("div",{className:"live_guage twinkle"},o.createElement("div",{className:"heart"}),o.createElement("div",{className:"bar_wrap"},o.createElement("div",{className:"bar",style:{width:"100%"}}),o.createElement("div",{className:"num overmax","data-value":"100"},"100"))),o.createElement("div",{style:{display:"none"}},o.createElement("div",{className:"pulldown"},o.createElement("div",{className:"tit",onClick:this.onViewSelectBox},this.curStep?this.curStep.name:""),o.createElement("button",{className:"btn_arrow",onClick:this.onViewSelectBox})),o.createElement("div",{className:"pulldown_content "+(this.viewUnitSelectBox?"on":"")}),o.createElement("div",null,o.createElement(h,Object.assign({},this._soption,{ref:this._refSwiper}),this.step_groups&&this.step_groups.map((t,s)=>o.createElement("div",{key:"grp"+s},o.createElement("div",{className:"tit"},this.step_group_names[s]),t.map((s,i)=>(this.curStep&&s.id===this.curStep.id&&(e=t),o.createElement("div",{key:"step"+i,className:"tit_sub",onClick:this.onChoiceStep.bind(this,s.id)},s.name))))))),o.createElement("div",{className:"class_name"},e.map((e,t)=>o.createElement("span",{key:"span"+e.id,className:this.curStep&&e.id===this.curStep.id?"now":void 0,onClick:this.onChoiceStep.bind(this,e.id)},e.name))),o.createElement("div",{className:"concept_library",onClick:this.onConceptLibrary},"Concept",o.createElement("br",null),"Library")))}};i([n.observable],u.prototype,"step_groups",void 0),i([n.observable],u.prototype,"step_group_names",void 0),i([n.observable],u.prototype,"viewUnitSelectBox",void 0),u=i([r.observer],u),t.MAHeader=u},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.MAQuizList=void 0;const o=s(0),n=s(1),r=s(4),c=s(3),a=s(6).default;let l=class extends o.Component{constructor(e){super(e),this._soption={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},this._refSwiper=e=>{!this._swiper&&e&&(this._swiper=e.swiper)}}componentDidUpdate(e){this.props.view&&!e.view&&(this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0)),c.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0))},300))}render(){const{view:e,on:t,quizresults:s,selectQuiz:i,clickSubmitlist:n}=this.props;return o.createElement("div",{className:"quizlist",style:{display:e?void 0:"none"}},o.createElement(a,Object.assign({},this._soption,{ref:this._refSwiper}),o.createElement("div",{className:"listWrap"},o.createElement("ul",null,s.map((e,s)=>o.createElement("li",{key:s},o.createElement("div",{className:"top"},this.props.strategyStep?o.createElement("span",{className:"textTitle"},this.props.strategyStep[s]):o.createElement("span",{className:"qNum on"},s+1),o.createElement("div",{className:"return_cnt_box",onClick:n.bind(this,s)},o.createElement("div",null,e.submitusers," / ",o.createElement("span",{className:"numOfS"},e.allusers)))),o.createElement("div",{className:"content",onClick:i.bind(this,s)},o.createElement("img",{src:r.App.data_url+e.thumb}),o.createElement("div",{className:"markingState"+(t?" on":"")},o.createElement("ul",null,o.createElement("li",null,e.heart2),o.createElement("li",null,e.heart1),o.createElement("li",null,e.heart0),o.createElement("li",null,e.nosubmit))))))))))}};l=i([n.observer],l),t.MAQuizList=l},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.MASubmitUsers=t.MASubmitUserList=void 0;const o=s(0),n=s(2),r=s(1),c=s(4),a=s(3),l=s(6).default;let h=class extends o.Component{constructor(e){super(e),this.allStudents=[],this.heartTwoStudents=[],this.heartOneStudents=[],this.wrongStudents=[],this.notsubmitUsers=[],this.submitusersCnt=0,this._soption={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},this._refSwiper=e=>{!this._swiper&&e&&(this._swiper=e.swiper)},this.clickTab=(e,t)=>{switch(this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0)),a.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0))},300),e){case"1":if(this.heartTwoStudents.length<1)return;break;case"2":if(this.heartOneStudents.length<1)return;break;case"3":if(this.wrongStudents.length<1)return;break;case"4":if(this.notsubmitUsers.length<1)return}c.App.pub_playBtnTab(),this.props.onType&&this.props.onType(e,t)}}componentDidUpdate(e){if(this.props.view&&!e.view){for(this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0)),a.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0))},300),c.App.students&&(this.allStudents=c.App.students);this.heartTwoStudents.length>0;)this.heartTwoStudents.pop();for(;this.heartOneStudents.length>0;)this.heartOneStudents.pop();for(;this.wrongStudents.length>0;)this.wrongStudents.pop();for(;this.notsubmitUsers.length>0;)this.notsubmitUsers.pop();this.props.isAssessment?this.props.submitusers.length>0?this.allStudents.map((e,t)=>{let s=this.props.submitusers.find(t=>t.student.id===e.id);s?this.heartTwoStudents.push(s.student):this.notsubmitUsers.push(e)}):this.notsubmitUsers=this.allStudents:3===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((e,t)=>{let s=this.props.submitusers.find(t=>t.student.id===e.id);s&&0!==s.trycnt?s.correct?1===s.trycnt?this.heartTwoStudents.push(s.student):this.heartOneStudents.push(s.student):this.wrongStudents.push(s.student):this.notsubmitUsers.push(e)}):this.notsubmitUsers=this.allStudents:2===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((e,t)=>{let s=this.props.submitusers.find(t=>t.student.id===e.id);s?s.correct?this.heartOneStudents.push(s.student):this.wrongStudents.push(s.student):this.notsubmitUsers.push(e)}):this.notsubmitUsers=this.allStudents:4===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((e,t)=>{let s=this.props.submitusers.find(t=>t.student.id===e.id);s&&0!==s.trycnt?s.correct?1===s.trycnt&&this.heartTwoStudents.push(s.student):this.wrongStudents.push(s.student):this.notsubmitUsers.push(e)}):this.notsubmitUsers=this.allStudents:this.props.submitusers.length>0?this.allStudents.map((e,t)=>{this.props.submitusers.find(t=>t.student.id===e.id)||this.notsubmitUsers.push(e)}):this.notsubmitUsers=this.allStudents,this.submitusersCnt=this.props.submitusers.length,this.props.isStrategy&&this.props.onType&&(this.heartTwoStudents.length>0?this.props.onType("1",this.props.quizIdx):this.heartOneStudents.length>0?this.props.onType("2",this.props.quizIdx):this.wrongStudents.length>0?this.props.onType("3",this.props.quizIdx):this.notsubmitUsers.length>0&&this.props.onType("4",this.props.quizIdx)),this.heartTwoStudents.length>0?this.clickTab("1",this.props.quizIdx):this.heartOneStudents.length>0?this.clickTab("2",this.props.quizIdx):this.wrongStudents.length>0?this.clickTab("3",this.props.quizIdx):this.notsubmitUsers.length>0&&this.clickTab("4",this.props.quizIdx)}else if(this.props.view&&e.view&&this.props.submitusers.length!==this.submitusersCnt){for(this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0)),a.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0))},300),c.App.students&&(this.allStudents=c.App.students);this.heartTwoStudents.length>0;)this.heartTwoStudents.pop();for(;this.heartOneStudents.length>0;)this.heartOneStudents.pop();for(;this.wrongStudents.length>0;)this.wrongStudents.pop();for(;this.notsubmitUsers.length>0;)this.notsubmitUsers.pop();this.props.isAssessment?this.props.submitusers.length>0?this.allStudents.map((e,t)=>{let s=this.props.submitusers.find(t=>t.student.id===e.id);s?this.heartTwoStudents.push(s.student):this.notsubmitUsers.push(e)}):this.notsubmitUsers=this.allStudents:3===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((e,t)=>{let s=this.props.submitusers.find(t=>t.student.id===e.id);s&&0!==s.trycnt?s.correct?1===s.trycnt?this.heartTwoStudents.push(s.student):this.heartOneStudents.push(s.student):this.wrongStudents.push(s.student):this.notsubmitUsers.push(e)}):this.notsubmitUsers=this.allStudents:2===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((e,t)=>{let s=this.props.submitusers.find(t=>t.student.id===e.id);s?s.correct?this.heartOneStudents.push(s.student):this.wrongStudents.push(s.student):this.notsubmitUsers.push(e)}):this.notsubmitUsers=this.allStudents:4===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((e,t)=>{let s=this.props.submitusers.find(t=>t.student.id===e.id);s&&0!==s.trycnt?s.correct?1===s.trycnt&&this.heartTwoStudents.push(s.student):this.wrongStudents.push(s.student):this.notsubmitUsers.push(e)}):this.notsubmitUsers=this.allStudents:this.props.submitusers.length>0?this.allStudents.map((e,t)=>{this.props.submitusers.find(t=>t.student.id===e.id)||this.notsubmitUsers.push(e)}):this.notsubmitUsers=this.allStudents,this.submitusersCnt=this.props.submitusers.length,this.props.isStrategy&&this.props.onType&&(this.heartTwoStudents.length>0?this.props.onType("1",this.props.quizIdx):this.heartOneStudents.length>0?this.props.onType("2",this.props.quizIdx):this.wrongStudents.length>0?this.props.onType("3",this.props.quizIdx):this.notsubmitUsers.length>0&&this.props.onType("4",this.props.quizIdx))}}render(){const{view:e,onClose:t,isNoNum:s,isAssessment:i,quizIdx:n,isStrategy:r,submitusers:c}=this.props;let a="";return s&&(a+=" nonum"),i&&(a+=" assessment"),o.createElement(o.Fragment,null,o.createElement("div",{className:"submituserlist_bg"+(e?" show":"")}),o.createElement("div",{className:"submituserlist"+(e?" show":"")+a},o.createElement("div",{className:"header"},o.createElement("div",{className:"quiz_tit"},"Q"+(n+1)),o.createElement("div",{className:"score_set"},o.createElement("ul",null,o.createElement("li",{className:"type01"+("1"===this.props.type?" arrow":"")+(this.heartTwoStudents.length>0?" on":""),style:{cursor:this.heartTwoStudents.length>0?"pointer":"default"},onClick:this.clickTab.bind(this,"1",n)},this.heartTwoStudents.length),this.props.mode<4&&o.createElement("li",{className:"type02"+("2"===this.props.type?" arrow":"")+(this.heartOneStudents.length>0?" on":""),style:{cursor:this.heartOneStudents.length>0?"pointer":"default"},onClick:this.clickTab.bind(this,"2",n)},this.heartOneStudents.length),o.createElement("li",{className:"type03"+("3"===this.props.type?" arrow":"")+(this.wrongStudents.length>0?" on":""),style:{cursor:this.wrongStudents.length>0?"pointer":"default"},onClick:this.clickTab.bind(this,"3",n)},this.wrongStudents.length),o.createElement("li",{className:"type04"+("4"===this.props.type?" arrow":"")+(this.notsubmitUsers.length>0?" on":""),style:{cursor:this.notsubmitUsers.length>0?"pointer":"default"},onClick:this.clickTab.bind(this,"4",n)},this.notsubmitUsers.length))),o.createElement("div",{className:"submitter"},"Submitter",o.createElement("span",null,o.createElement("strong",null,this.heartTwoStudents.length)," / ",this.allStudents.length)),o.createElement("button",{className:"btn_close",onClick:t})),o.createElement("div",{className:"list_box"},o.createElement("div",{className:"innerbox"},o.createElement(l,Object.assign({},this._soption,{ref:this._refSwiper}),o.createElement("div",{className:"inner"},o.createElement("ul",null,"1"===this.props.type&&this.heartTwoStudents.map((e,t)=>{const s="2"===e.displayMode&&e.nickname?e.nickname:e.name,i="2"===e.displayMode?e.avatar:e.thumb;return o.createElement("li",{key:t},""===i&&o.createElement("div",{className:"F"===e.gender?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,s.substring(0,2).toUpperCase())),""!==i&&o.createElement("img",{src:i}),o.createElement("span",{className:"name"},s))}),"2"===this.props.type&&this.heartOneStudents.map((e,t)=>{const s="2"===e.displayMode&&e.nickname?e.nickname:e.name,i="2"===e.displayMode?e.avatar:e.thumb;return o.createElement("li",{key:t},""===i&&o.createElement("div",{className:"F"===e.gender?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,s.substring(0,2).toUpperCase())),""!==i&&o.createElement("img",{src:i}),o.createElement("span",{className:"name"},s))}),"3"===this.props.type&&this.wrongStudents.map((e,t)=>{const s="2"===e.displayMode&&e.nickname?e.nickname:e.name,i="2"===e.displayMode?e.avatar:e.thumb;return o.createElement("li",{key:t},""===i&&o.createElement("div",{className:"F"===e.gender?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,s.substring(0,2).toUpperCase())),""!==i&&o.createElement("img",{src:i}),o.createElement("span",{className:"name"},s))}),"4"===this.props.type&&this.notsubmitUsers.map((e,t)=>{const s="2"===e.displayMode&&e.nickname?e.nickname:e.name,i="2"===e.displayMode?e.avatar:e.thumb;return o.createElement("li",{key:t},""===i&&o.createElement("div",{className:"F"===e.gender?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,s.substring(0,2).toUpperCase())),""!==i&&o.createElement("img",{src:i}),o.createElement("span",{className:"name"},s))}))))))))}};i([n.observable],h.prototype,"allStudents",void 0),i([n.observable],h.prototype,"heartTwoStudents",void 0),i([n.observable],h.prototype,"heartOneStudents",void 0),i([n.observable],h.prototype,"wrongStudents",void 0),i([n.observable],h.prototype,"notsubmitUsers",void 0),i([n.observable],h.prototype,"submitusersCnt",void 0),h=i([r.observer],h),t.MASubmitUserList=h;let u=class extends o.Component{constructor(e){super(e)}render(){const{view:e,submitusers:t,totalusers:s,onClick:i}=this.props;return o.createElement("div",{className:"submitusers"+(e?"":" hide"),onClick:i||void 0},t," / ",s)}};u=i([r.observer],u),t.MASubmitUsers=u},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},o=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(o,n){function r(e){try{a(i.next(e))}catch(e){n(e)}}function c(e){try{a(i.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,c)}a((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CoverPopup=void 0;const n=s(0),r=s(2),c=s(1),a=s(7);let l=class extends n.Component{constructor(){super(...arguments),this.m_state="closed",this._open=()=>o(this,void 0,void 0,(function*(){"closed"===this.m_state&&(this.m_state="opening",yield a.wait(100),this.m_state="open")})),this._close=()=>o(this,void 0,void 0,(function*(){"open"===this.m_state&&(this.m_state="closing",yield a.wait(400),this.props.onClosed(),this.m_state="closed")}))}componentDidUpdate(e){this.props.view!==e.view&&(this.props.view?this._open():this._close())}render(){return n.createElement("div",{className:this.props.className+" "+this.m_state},this.props.children)}};i([r.observable],l.prototype,"m_state",void 0),l=i([c.observer],l),t.CoverPopup=l},function(e,t,s){"use strict";(function(e){var i=this&&this.__decorate||function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.appContext=t.AppProvider=void 0;const o=s(0),n=s(1),r=s(8),c=s(12),a=s(35),l=s(36);Object.defineProperty(t,"appContext",{enumerable:!0,get:function(){return l.sContext}}),Object.defineProperty(t,"AppProvider",{enumerable:!0,get:function(){return l.StudentProvider}});const h=s(38);s(41),s(13);let u=class extends o.Component{render(){const{state:e,actions:t}=this.props,s=e.viewDiv;return o.createElement(o.Fragment,null,o.createElement("div",{className:"content-container"},o.createElement("div",{className:"content-wrapper",style:{left:("direction"===s?0:-1280)+"px"}},o.createElement("div",null,o.createElement(c.default,{className:"video-direction",view:"direction"===e.viewDiv,on:e.directionON,isTeacher:!1,lesson:t.getCurriculum(),bookId:e.bookid,subtitle:"",poster_url:"/content/mathalive_lib/MA/check/common/bg_direction.jpg",video_url:"/content/mathalive_lib/MA/check/common/mv_check.mp4",video_frame:125})),o.createElement("div",null,o.createElement(h.default,{view:"content"===s&&"check"===e.prog,state:e,actions:t,checkProg:e.checkProg}),o.createElement(a.default,{view:"eyeon"===e.viewDiv})))))}};u=i([n.observer],u);const d=l.useStudent(e=>o.createElement(n.Observer,null,()=>o.createElement(u,{state:e.state,actions:e.actions})));t.default=r.hot(e)(d)}).call(this,s(11)(e))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);class o extends i.Component{componentDidUpdate(e){}render(){return i.createElement("div",{className:"attention "+(this.props.view?"":"hide")},i.createElement("span",null,"Attention"))}}t.default=o},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.SENDPROG=t.useStudent=t.StudentContext=t.StudentConsumer=t.StudentProvider=t.sContext=void 0;const o=s(0),n=s(2),r=s(37);var c;!function(e){e[e.MOUNT=0]="MOUNT",e[e.READY=1]="READY",e[e.SENDING=2]="SENDING",e[e.SENDED=3]="SENDED",e[e.COMPLETE=4]="COMPLETE"}(c||(c={})),t.SENDPROG=c;class a extends r.StudentContextBase{constructor(){super(),this.uploaded=e=>{},this.notify=e=>{},this.notifyRecorded=e=>{},this.state.prog="",this.state.checkProg=0,this.actions.getData=()=>this._data,this.actions.getCurriculum=()=>this._curriculum}_setViewDiv(e){this.state;super._setViewDiv(e)}receive(e){if(super.receive(e),10===e.type&&e.data){const t=e.data;if("check_send"===t.msgtype)this._setViewDiv("content"),this.state.prog="check",this.state.checkProg=1;else if("check_end"===t.msgtype){if("check"!==this.state.prog)return;this.state.checkProg=4}}}setData(e){this._data=e}}i([n.observable],a.prototype,"state",void 0),i([n.action],a.prototype,"_setViewDiv",null),i([n.action],a.prototype,"receive",null),i([n.action],a.prototype,"notify",void 0),i([n.action],a.prototype,"notifyRecorded",void 0),t.StudentContext=a;const l=new a;t.sContext=l;const{Provider:h,Consumer:u}=o.createContext(l);t.StudentConsumer=u;class d extends o.Component{render(){return o.createElement(h,{value:l},this.props.children)}}t.StudentProvider=d,t.useStudent=function(e){return function(t){return o.createElement(u,null,t=>o.createElement(e,Object.assign({},t)))}}},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.StudentContextBase=void 0;const o=s(2),n=s(4),r=s(5);class c{constructor(){this._naviLeftFnc=null,this._naviRightFnc=null,this.state={viewDiv:"direction",directionON:!1,navi:{view:!1,enableLeft:!1,enableRight:!1},loading:!1,bookid:0,bookkey:0,curriculumid:0,classid:0,unitid:0,lessonid:0,svg_bg:{view:!0,bPlay:!1,viewCharactor:!0},is_lock:!1,isRemote:!1},this.actions={setNaviView:e=>{this.state.navi.view=e},setNavi:(e,t)=>{this.state.navi.enableLeft=e,this.state.navi.enableRight=t},setNaviFnc:(e,t)=>{this._naviLeftFnc=e,this._naviRightFnc=t},naviLeft:()=>{n.App.pub_playBtnPage(),this._naviLeftFnc&&this._naviLeftFnc()},naviRight:()=>{n.App.pub_playBtnPage(),this._naviRightFnc&&this._naviRightFnc()},setLoading:e=>{r.showSLoading(e)}},this.uploaded=e=>{},this.notify=e=>{},this.notifyRecorded=e=>{},this.notifyVideoRecord=e=>{},this.notifySwitchCamera=()=>{},this.notifyTakePicture=(e,t)=>{},this.notifyBookCaptureInfo=e=>{},this.clickSendButton=()=>{},this.notifyRecordData=(e,t)=>{},this.notifyAlert=e=>{},this.state.isRemote=document.location.href.indexOf("remote=y")>=0}_setViewDiv(e,t){this.state.viewDiv!==e&&(r.postViewDiv(e),"direction"===e?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0):(this.state.directionON=!1,this.state.svg_bg.bPlay=!1,this.state.svg_bg.viewCharactor=!1),this.state.loading=!1,this.state.viewDiv=e)}start(){}receive(e){switch(e.type){case 1:"direction"===this.state.viewDiv?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0):this._setViewDiv("direction"),r.sendTeacher(1,{id:n.App.student?n.App.student.id:"",name:n.App.student?n.App.student.name:""});break;case 3:this.state.directionON=!1,r.sendTeacher(3,{id:n.App.student?n.App.student.id:"",name:n.App.student?n.App.student.name:""});break;case 0:this._setViewDiv("eyeon"),r.sendTeacher(0,{id:n.App.student?n.App.student.id:"",name:n.App.student?n.App.student.name:""});break;case 10:"page_lock"===e.data.msgtype?this.state.is_lock=!0:"page_unlock"===e.data.msgtype&&(this.state.is_lock=!1)}}multiUploaded(e){}notifyNaviInfo(e,t,s,i,o,n){}notifyPenToolState(e,t){}notifyLiveGivePopupClose(){}notifyHamburgerMenuClicked(e){}callThreeminState(){}}i([o.observable],c.prototype,"state",void 0),i([o.action],c.prototype,"_setViewDiv",null),i([o.action],c.prototype,"start",null),i([o.action],c.prototype,"receive",null),t.StudentContextBase=c},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},o=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(o,n){function r(e){try{a(i.next(e))}catch(e){n(e)}}function c(e){try{a(i.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,c)}a((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),r=s(1),c=s(2),a=s(4),l=s(7),h=s(5),u=s(3),d=s(15),p=s(9),m=s(39),_=s(16),g=s(40),f=s(6).default,y={direction:"horizontal",observer:!0};let b=class extends n.Component{constructor(e){super(e),this._curIdx=0,this._prog=1,this._showQuizDesc=[],this._resultShowing=[],this._typeSayPop=0,this.quizResult=[],this._viewAlert=!1,this.ifr=[],this.ifr_desc=[],this._swiper=null,this._refSwiper=e=>{if(this._swiper||!e)return;const t=e.swiper;t.on("transitionStart",()=>{this._curIdx=-1}),t.on("transitionEnd",()=>{this.props.view&&(h.clearSPenTool(),this._curIdx=t.activeIndex,this.quizResult[this._curIdx].completed||4===this._prog||(3===this._prog&&(this._prog=1),this.initContent()))}),this._swiper=t},this.onClickIdx=e=>{4===this._prog&&this._swiper&&this._swiper.slideTo(e,0)},this.toggleQuizDesc=()=>{this._curIdx<0||this._curIdx>=this._showQuizDesc.length||(this._showQuizDesc[this._curIdx]=!this._showQuizDesc[this._curIdx])},this._onPrev=()=>{0!==this._curIdx&&(a.App.pub_playBtnTab(),this._swiper&&this._swiper.slidePrev())},this._onNext=()=>{const e=this.props.actions.getData().quizs;this._curIdx!==e.length-1&&(a.App.pub_playBtnTab(),this._swiper&&this._swiper.slideNext())},this._onSend=()=>o(this,void 0,void 0,(function*(){if(!this.props.view)return;if(1!==this._prog)return;if(-1===this._curIdx)return;let e=this.quizResult[this._curIdx];if(e.completed&&2!==e.tryCnt){if(this._prog=2,a.App.pub_playToPad(),e.tryCnt+=1,1===e.tryCnt&&!e.correct)return e.completed=!1,this.initContent(),this._typeSayPop=3,void(this._prog=1);if(a.App.student){e.studentid=a.App.student.id;const t={msgtype:"check_result",idx:this._curIdx,result:JSON.stringify(e)};h.sendTeacher(11,t)}yield l.wait(600),1===e.tryCnt&&e.correct?this._typeSayPop=1:2===e.tryCnt&&e.correct?this._typeSayPop=2:2!==e.tryCnt||e.correct||(this._typeSayPop=4),this._curIdx===this.quizResult.length-1?(this._prog=4,this.props.state.checkProg=3):this._prog=3,this.completeContent(),this._resultShowing[this._curIdx]=!0}})),this._onCompletedSayPop=()=>{this._typeSayPop=0;let e=this.quizResult[this._curIdx];1!==e.tryCnt||e.correct},this._onCompletedAlertPop=()=>{if(!this.props.view)return;this._viewAlert=!1;let e=this.quizResult[this._curIdx];if(e.choicedValue.length>0&&(e.tryCnt+=1),a.App.student){e.studentid=a.App.student.id;const t={msgtype:"check_result",idx:this._curIdx,result:JSON.stringify(e)};h.sendTeacher(11,t)}this.props.state.checkProg=3},this.handlePostMessage=e=>{const t=e.data;if("macontent"===t.from&&"submit"===t.type){if(this._curIdx<-1||this._curIdx>=this.quizResult.length)return;let e=this.quizResult[this._curIdx];g.answercheck(e,t.msg)}};const t=this.props.actions.getData().quizs;for(let e=0;e<t.length;e++)this._showQuizDesc[e]=!1,this._resultShowing[e]=!1,this.quizResult.push({studentid:"",contentSeq:t[e].seq,contentType:t[e].type,answer:t[e].answer,choicedIdx:[],choicedValue:[],correct:!1,tryCnt:0,completed:!1})}componentDidMount(){window.addEventListener("message",this.handlePostMessage,!1)}componentWillUnmount(){window.removeEventListener("message",this.handlePostMessage,!1)}sendPostMessage(e,t,s){const i={from:"matemplate",to:"macontent",type:e,msg:t};this.ifr[s]&&this.ifr[s].contentWindow.postMessage(i,"*")}initContent(){if(this._curIdx<0)return;const e=this.props.actions.getData().quizs;if(this._curIdx<e.length){let t={idx:this._curIdx,quizmode:"check",isTeacher:!1,content:e[this._curIdx]};this.sendPostMessage("init",t,this._curIdx)}}initContentAll(){const e=this.props.actions.getData().quizs;for(let t=0;t<e.length;t++){let s={idx:t,quizmode:"check",isTeacher:!1,content:e[t]};this.sendPostMessage("init",s,t)}}completeContent(){const e=this.props.actions.getData().quizs;let t={idx:this._curIdx,quizmode:"check",isTeacher:!1,content:e[this._curIdx]};this.sendPostMessage("completed",t,this._curIdx)}completeContentAll(){const e=this.props.actions.getData().quizs;for(let t=0;t<e.length;t++){let s={idx:t,quizmode:"check",isTeacher:!1,content:e[t]};this.sendPostMessage("completed",s,t)}}componentDidUpdate(e){if(this.props.view&&!e.view){this._curIdx=0,this._prog=1,this._viewAlert=!1;const e=this.props.actions.getData().quizs;for(let t=0;t<e.length;t++)this._showQuizDesc[t]=!1,this._resultShowing[t]=!1,this.quizResult[t].studentid="",this.quizResult[t].choicedIdx=[],this.quizResult[t].choicedValue=[],this.quizResult[t].correct=!1,this.quizResult[t].tryCnt=0,this.quizResult[t].completed=!1;this.initContent(),this._swiper&&(this._swiper.update(),this._swiper.slideTo(this._curIdx,0))}else!this.props.view&&e.view&&(this._viewAlert=!1);if(this.props.checkProg!==e.checkProg)if(4===this.props.checkProg&&4!==this._prog){this._viewAlert=!0,this._prog=4,this.completeContentAll();const e=this.props.actions.getData().quizs;for(let t=0;t<e.length;t++)this._resultShowing[t]=!0}else if(this.props.view&&e.view&&3===e.checkProg&&4===this._prog){this._prog=1,this._curIdx=0;const e=this.props.actions.getData().quizs;for(let t=0;t<e.length;t++)this._showQuizDesc[t]=!1,this._resultShowing[t]=!1,this.quizResult[t].studentid="",this.quizResult[t].choicedIdx=[],this.quizResult[t].choicedValue=[],this.quizResult[t].correct=!1,this.quizResult[t].tryCnt=0,this.quizResult[t].completed=!1;this.initContentAll(),this._swiper&&(this._swiper.update(),this._swiper.slideTo(this._curIdx,0))}}render(){const{view:e,state:t,actions:s}=this.props,i=s.getData().quizs;return n.createElement("div",{className:"s_check",style:{display:e?void 0:"none"}},n.createElement("div",{className:"topHeader"},n.createElement("div",{className:"page"},i.map((e,t)=>{let s="num "+(this._curIdx===t?"on":"");return this._resultShowing[t]&&(1===this.quizResult[t].tryCnt&&this.quizResult[t].correct?s+=" h2":2===this.quizResult[t].tryCnt&&this.quizResult[t].correct?s+=" h1":this.quizResult[t].tryCnt>0&&(s+=" h0")),n.createElement("div",{key:"page"+t,className:s,onClick:this.onClickIdx.bind(this,t)},n.createElement("span",null,t+1))}))),n.createElement("div",{id:"contentWrap",className:"contentWrap"},n.createElement(f,Object.assign({ref:this._refSwiper},y),i.map((e,t)=>n.createElement("div",{key:t,className:this._prog<4?"swiper-no-swiping":""},n.createElement("iframe",{src:a.App.data_url+e.url+"?idx="+t,style:{zIndex:4!==this._prog?10:-1},ref:e=>{e&&(this.ifr[t]=e)}}),n.createElement("div",{style:{zIndex:4===this._prog?10:-1}}),n.createElement("div",{className:"moreBox "+(this._showQuizDesc[t]?"show":"")},n.createElement("div",{className:"more_content"},n.createElement("button",{className:"btn_close",onClick:this.toggleQuizDesc}),n.createElement("iframe",{src:a.App.data_url+e.desc+"?idx="+t,ref:e=>{e&&(this.ifr_desc[t]=e,u.delay(()=>{if(null!==this.ifr_desc[t].contentWindow&&this.ifr_desc[t].contentWindow.document.body){let s=this.ifr_desc[t].contentWindow.document.body.scrollHeight;s>500&&(s=500),e.height=s+"px"}},300))}}))))))),n.createElement(m.SayPopup,{view:this._typeSayPop>0,type:1,msgtype:this._typeSayPop,delay:3e3,onComplete:this._onCompletedSayPop}),n.createElement(p.ToggleBtn,{view:4===this._prog,on:this._curIdx>=0&&this._curIdx<this._showQuizDesc.length&&this._showQuizDesc[this._curIdx],className:"btn_bulb",onClick:this.toggleQuizDesc}),n.createElement(p.ToggleBtn,{className:"btn_prev",view:this._curIdx>0&&this._resultShowing[this._curIdx-1],onClick:this._onPrev}),n.createElement(p.ToggleBtn,{className:"btn_next",view:this._curIdx<i.length-1&&this._resultShowing[this._curIdx],onClick:this._onNext}),n.createElement(_.WarningPopup,{view:this._viewAlert,type:0,button:!1,delay:3e3,onComplete:this._onCompletedAlertPop}),n.createElement(d.default,{view:e&&this._curIdx>-1&&this.quizResult[this._curIdx].completed&&1===this._prog,type:"pad",sended:this._prog>=3||this._curIdx>-1&&this._resultShowing[this._curIdx],originY:0,onSend:this._onSend}))}};i([c.observable],b.prototype,"_curIdx",void 0),i([c.observable],b.prototype,"_prog",void 0),i([c.observable],b.prototype,"_showQuizDesc",void 0),i([c.observable],b.prototype,"_resultShowing",void 0),i([c.observable],b.prototype,"_typeSayPop",void 0),i([c.observable],b.prototype,"quizResult",void 0),i([c.observable],b.prototype,"_viewAlert",void 0),b=i([r.observer],b),t.default=b},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.SayPopup=void 0;const o=s(0),n=s(1),r=s(3);let c=class extends o.Component{componentDidUpdate(e){if(this.props.view&&!e.view){let e=this.props.delay;e||(e=800),r.delay(()=>{this.props.onComplete()},e)}else!this.props.view&&e.view}render(){let e,t="";return e=`/content/mathalive_lib/images/saypop_correct_0${Math.ceil(10*Math.random()%3)}.gif`,1===this.props.type&&1===this.props.msgtype?t="Great Job!!":1===this.props.type&&2===this.props.msgtype?(t="Good Job!!",e=`/content/mathalive_lib/images/saypop_re_correct_0${Math.ceil(10*Math.random()%3)}.gif`):1===this.props.type&&3===this.props.msgtype?(t="Incorrect.<br/>Think again",e=`/content/mathalive_lib/images/saypop_incorrect_0${Math.ceil(10*Math.random()%4)}.gif`):1===this.props.type&&4===this.props.msgtype?(t="Cheer up!!",e=`/content/mathalive_lib/images/saypop_re_incorrect_0${Math.ceil(10*Math.random()%2)}.gif`):4===this.props.type&&1===this.props.msgtype?t="Good Work!!":4===this.props.type&&2===this.props.msgtype?t="Awesome!!":4===this.props.type&&3===this.props.msgtype?t="That's it!!":4===this.props.type&&4===this.props.msgtype?t="Perfect!!":4===this.props.type&&5===this.props.msgtype&&(t="Genius!!"),o.createElement("div",{className:"saypop_wrap "+(this.props.view?" show":"")},o.createElement("div",{className:"saypop type0"+(4===this.props.type?"1":this.props.msgtype)+" "+(this.props.view?"show":"")},o.createElement("img",{src:e}),o.createElement("div",{className:"ment",dangerouslySetInnerHTML:{__html:t}})))}};c=i([n.observer],c),t.SayPopup=c},function(e,t,s){"use strict";function i(e,t){const s=/[^a-zA-Z]/g,i=/[^0-9]/g;var o=e.replace(s,""),n=t.replace(s,"");if(o===n){var r=parseInt(e.replace(i,""),10),c=parseInt(t.replace(i,""),10);return r===c?0:r>c?1:-1}return o>n?1:-1}function o(e){for(var t=0,s=e.length,i=s;(i-=1)>-1;)t+=(e.charCodeAt(i)-64)*Math.pow(26,s-1-i);return t}function n(e){var t=e%26,s=e/26|0,i=t?String.fromCharCode(64+t):(s--,"Z");return s?n(s)+i:i}Object.defineProperty(t,"__esModule",{value:!0}),t.answercheck=void 0,t.answercheck=function(e,t){if(console.log("=========> answercheck result",e),console.log("=========> answercheck msg",t),!t||e.length<0)return-1;const s=e;if(!s)return-1;if(0===t.basetype&&1===t.subtype){console.log("=========> answercheck gap2",s.contentAnswers);let e=[],i=[];return s.contentAnswers.map((s,o)=>{s.basetype===t.basetype&&s.subtype===t.subtype&&(e.push(s),i.push(o))}),e.map((e,o)=>{let n=i[o];const r=s.userChoices[n];if(2===e.matchType){r.correct=!1;for(let s=0;s<e.answers.length;s++)e.answers[s]===t.choicedValue[o]&&(r.correct=!0)}else e.answers[0]===t.choicedValue[o]?r.correct=!0:r.correct=!1;r.choicedIdx=t.choicedIdx[o],r.choicedValue=t.choicedValue[o],r.completed=!0}),i.length>0?i[i.length-1]:-1}if(0===t.basetype&&2===t.subtype){console.log("=========> answercheck gap3",s.contentAnswers);let e=[],i=[];return s.contentAnswers.map((s,o)=>{s.basetype===t.basetype&&s.subtype===t.subtype&&(e.push(s),i.push(o))}),e.map((e,o)=>{let n=i[o];const r=s.userChoices[n];if(2===e.matchType){r.correct=!1;for(let s=0;s<e.answers.length;s++)JSON.stringify(e.answers[s])===JSON.stringify(t.choicedValue[o])&&(r.correct=!0)}else JSON.stringify(e.answers)===JSON.stringify(t.choicedValue[o])?r.correct=!0:r.correct=!1;r.choicedIdx=t.choicedIdx[o],r.choicedValue=t.choicedValue[o],r.completed=!0}),i.length>0?i[i.length-1]:-1}let r=s.contentAnswers.findIndex(e=>e.basetype===t.basetype&&e.subtype===t.subtype);if(r<0)return-1;console.log("=========> answercheck answer idx",r,s.contentAnswers[r]);const c=s.contentAnswers[r],a=s.userChoices[r];if(!a)return-1;if(0===t.basetype&&0===t.subtype){if(console.log("=========> answercheck gap",c),2===c.matchType){let e=t.choicedValue.join(",");console.log("=========> answercheck gap choices",e);let s=!1;for(let t=0;t<c.answers.length;t++)if(c.answers[t]===e){s=!0;break}a.correct=s}else if(1===c.matchType){if(console.log("=========> answercheck gap",c.answers.length,t.choicedValue.length),c.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;let e=!0;for(let s=0;s<c.answers.length;s++)if(c.answers[s]!==t.choicedValue[s]){e=!1;break}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck gap",c,a)}else if(1===t.basetype&&0===t.subtype){if(2===c.matchType){const e=c.answers.findIndex(e=>e+""===t.choicedValue[0]);a.correct=!(e<0)}else 1===c.matchType&&(console.log("=========> answercheck choice",c.answers[0],t.choicedValue[0]),c.answers[0]+""===t.choicedValue[0]?a.correct=!0:a.correct=!1);a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck choice",c,a)}else if(1===t.basetype&&1===t.subtype){if(2===c.matchType){let e=t.choicedValue.sort();console.log("=========> answercheck choice/multi compare2",e,e.join());const s=c.answers.findIndex(t=>t===e.join());a.correct=!(s<0)}else if(1===c.matchType){let e=c.answers.slice().sort(),s=t.choicedValue.sort();console.log("=========> answercheck choice/multi compare",e,s),JSON.stringify(e)===JSON.stringify(s)?a.correct=!0:a.correct=!1}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck choice/multi",c,a)}else if(1===t.basetype&&2===t.subtype){if(2===c.matchType){for(let e=0;e<c.answers.length;e++){if(-1==c.answers[e].indexOf(","))return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,-1}for(let e=0;e<c.answers.length;e++){let s=c.answers[e].split(",").sort(),i=t.choicedValue.sort();if(console.log("=========> answercheck choice/group match one compare",s,i),console.log("JSON.stringify(ans),JSON.stringify(cho)",JSON.stringify(s),JSON.stringify(i)),JSON.stringify(s)===JSON.stringify(i)){a.correct=!0;break}a.correct=!1}}else if(1===c.matchType){if(-1==c.answers[0].indexOf(","))return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,-1;let e=c.answers[0].split(",").sort(),s=t.choicedValue.sort();console.log("=========> answercheck choice/group compare",e,s),console.log("JSON.stringify(ans),JSON.stringify(cho)",JSON.stringify(e),JSON.stringify(s)),JSON.stringify(e)===JSON.stringify(s)?a.correct=!0:a.correct=!1}console.log("=========> answercheck choice/group userChoice.correct",a.correct),a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck choice/group",c,a)}else if(2===t.basetype){if(2===c.matchType&&5===c.subtype){const e=t.choicedValue,s=c.answers;console.log("copy group math one choicedValue",e),console.log("copy group math one answers",s);const i=Array.from(s),o=[];i.forEach(e=>{let t=[];-1!=e.indexOf(",")?t=e.split(","):t.push(e),o.push(t)}),console.log("copy group math one arrGroupAnswers",o);let n=!1;for(let t=0;t<o.length;t++)if(console.log("copy group math one","arrGroupAnswers[i]",JSON.stringify(o[t]),"choicedValue",JSON.stringify(e)),JSON.stringify(o[t])==JSON.stringify(e)){n=!0;break}a.correct=n}else if(2===c.matchType&&4===c.subtype){const e=t.choicedValue.length,s=c.answers.length;console.log();const i=Math.round(s/e);let o=[];for(let t=0;t<i;t++){let i=e*t,n=e*(t+1);n>s&&(n=s),o.push(c.answers.slice(i,n))}console.log("===> answercheck dragdrop tmp",o);let n=!1;for(let e=0;e<o.length;e++){let s=!0;for(let i=0;i<o[e].length;i++){let n=o[e][i].split(",").sort(),r=t.choicedValue[i].split(",").sort();if(n.length!==r.length){s=!1;break}if(JSON.stringify(n)!==JSON.stringify(r)){s=!1;break}}if(s){n=!0;break}}a.correct=n}else if(2===c.matchType&&1===t.subtype){let e=!1;for(let s=0;s<c.answers.length;s++){let i=c.answers[s].split(","),o=t.choicedValue[0].split(",");if(i.length!==o.length)break;if(console.log("JSON.stringify(answerArr)",JSON.stringify(i)),console.log("JSON.stringify(choicedValue)",JSON.stringify(o)),JSON.stringify(i)===JSON.stringify(o)){e=!0;break}}a.correct=e}else if(2===c.matchType&&4!==t.subtype){let e=!1;for(let s=0;s<c.answers.length;s++){let i=c.answers[s].split(",");if(i.length!==t.choicedValue.length)break;if(console.log("===> answercheck dragdrop check",t.subtype,c.matchType,s,i,t.choicedValue),JSON.stringify(i)===JSON.stringify(t.choicedValue)){e=!0;break}}a.correct=e}else if(1===c.matchType){if(console.log("=========> answercheck dragdrop",t.subtype,c.matchType,c.answers.length,t.choicedValue.length),console.log("=========> answers.length/",c.answers.length,t.choicedValue.length),c.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;let e=!0;for(let s=0;s<c.answers.length;s++){console.log("=========> answercheck dragdrop",t.subtype,c.matchType,s,c.answers[s],t.choicedValue[s],c.answers[s]===t.choicedValue[s]);let i=c.answers[s].split(",").sort();if(i.length>1){let o=t.choicedValue[s].split(",").sort();if(i.length!==o.length){e=!1;break}if(i.join()!==o.join()){e=!1;break}}else if(c.answers[s]!==t.choicedValue[s]){e=!1;break}}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck dragdrop",t.subtype,c.matchType,c,a)}else if(3===t.basetype&&0===t.subtype){if(3===c.matchType);else if(2===c.matchType);else if(1===c.matchType){if(console.log("=========> answercheck shade",c.answers.length,t.choicedValue.length),c.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;let e=!0;for(let s=0;s<c.answers.length;s++){console.log("=========> answercheck shade",s,c.answers[s],t.choicedValue[s],c.answers[s]===t.choicedValue[s]);let i=c.answers[s].split(",").sort();if(i.length>1){let o=t.choicedValue[s].split(",").sort();if(i.length!==o.length){e=!1;break}if(i.join()!==o.join()){e=!1;break}}else if(c.answers[s]!==t.choicedValue[s]){e=!1;break}}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck shade",c,a)}else if(3===t.basetype&&1===t.subtype){if(3===c.matchType){let e=!0;if(0===t.choicedValue.length)e=!1;else{let s=!1;if(t.choicedValue.length>1)for(let e=1;e<t.choicedValue.length;e++)if(t.choicedValue[0]===t.choicedValue[e]){s=!0;break}if(s)e=!1;else for(let s=0;s<t.choicedValue.length;s++){let i=t.choicedValue[s].split(",");if(c.answers.length!==i.length){e=!1;break}if(c.answers.slice().sort().join(",")===t.choicedValue[s]){e=!1;break}}}a.correct=e}else if(2===c.matchType);else if(1===c.matchType){if(console.log("=========> answercheck shade",c.answers.length,t.choicedValue.length),c.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;let e=!0;for(let s=0;s<c.answers.length;s++)if(console.log("contentanswer.answers[i]",s,c.answers[s]),console.log("msg.choicedValue[i]",s,t.choicedValue[s]),c.answers[s]!==t.choicedValue[s]){e=!1;break}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck shade",c,a)}else if(4===t.basetype&&0===t.subtype){if(2===c.matchType){let e=t.choicedValue;console.log("=========> answercheck dragadd",e,e.join());const s=c.answers.findIndex(t=>t===e.join());a.correct=!(s<0)}else if(1===c.matchType){if(console.log("=========> answercheck dragadd",c.answers.length,t.choicedValue.length),c.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;let e=!0;for(let s=0;s<c.answers.length;s++)if(console.log("=========> answercheck dragadd",s,c.answers[s],t.choicedValue[s],c.answers[s]!==t.choicedValue[s]),c.answers[s]!==t.choicedValue[s]){e=!1;break}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck dragadd",c,a)}else if(4===t.basetype&&2===t.subtype){if(2===c.matchType){let e=t.choicedValue;console.log("=========> answercheck tally chart",e,e.join());const s=c.answers.findIndex(t=>t===e.join());a.correct=!(s<0)}else if(1===c.matchType){if(console.log("=========> answercheck tally chart",c.answers.length,t.choicedValue.length),c.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;let e=!0;for(let s=0;s<c.answers.length;s++)if(console.log("=========> answercheck tally chart",s,c.answers[s],t.choicedValue[s],c.answers[s]!==t.choicedValue[s]),c.answers[s]!==t.choicedValue[s]){e=!1;break}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck tally chart",c,a)}else if(4===t.basetype&&3===t.subtype||0===t.basetype&&3===t.subtype){if(2===c.matchType){let e=t.choicedValue;console.log("=========> answercheck gapplus",e,e.join());const s=c.answers.findIndex(t=>t===e.join());a.correct=!(s<0)}else if(1===c.matchType){if(console.log("=========> answercheck gapplus",c.answers.length,t.choicedValue.length),c.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;let e=!0;for(let s=0;s<c.answers.length;s++)if(console.log("=========> answercheck gapplus",s,c.answers[s],t.choicedValue[s],c.answers[s]!==t.choicedValue[s]),c.answers[s]!==t.choicedValue[s]){e=!1;break}a.correct=e}if(a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,4===t.basetype){let e=s.contentAnswers.findIndex(e=>0===e.basetype&&3===e.subtype);if(e<0)return a.completed=!1,-2;const t=s.userChoices[e];if(t&&t.completed&&t.correct&&JSON.stringify(a.choicedValue)!==JSON.stringify(t.choicedValue))return console.log("=========> final compare1 contentanswer.matchType",c.matchType),a.correct=!1,r}else{let e=s.contentAnswers.findIndex(e=>4===e.basetype&&3===e.subtype);if(e<0)return a.completed=!1,-2;const t=s.userChoices[e];if(t&&t.completed&&t.correct&&JSON.stringify(a.choicedValue)!==JSON.stringify(t.choicedValue))return console.log("=========> final compare2 contentanswer.matchType",c.matchType),a.correct=!1,r}console.log("=========> answercheck gapplus contentresult",s)}else if(5===t.basetype){if(2===c.matchType){const e=t.choicedValue.length,s=c.answers.length,i=Math.round(s/e);let o=[];console.log("===> answercheck connection len",e,s,i);for(let t=0;t<i;t++){let i=e*t,n=e*(t+1);n>s&&(n=s),o.push(c.answers.slice(i,n))}console.log("===> answercheck connection tmp",o);let n=!1;for(let e=0;e<o.length;e++){let s=!0;if(o[e].length===t.choicedValue.length){for(let i=0;i<o[e].length;i++)if(o[e][i]!==t.choicedValue[i]){s=!1;break}if(s){n=!0;break}}else s=!1}a.correct=n}else if(1===c.matchType){if(console.log("=========> answercheck connection",c.answers.length,t.choicedValue.length),c.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;let e=!0;for(let s=0;s<c.answers.length;s++)if(console.log("=========> answercheck connection",s,c.answers[s],t.choicedValue[s],c.answers[s]!==t.choicedValue[s]),c.answers[s]!==t.choicedValue[s]){e=!1;break}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck dragadd",c,a)}else if(6===t.basetype){if(2===c.matchType){let e=!1;for(let s=0;s<c.answers.length;s++){let i=c.answers[s].split(",");if(i.length!==t.choicedValue.length)break;if(console.log("===> answercheck number line check",t.subtype,c.matchType,s,i,t.choicedValue),JSON.stringify(i)===JSON.stringify(t.choicedValue)){e=!0;break}}a.correct=e}else if(1===c.matchType){if(c.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;console.log("=========> answercheck number line",c.answers,t.choicedValue),JSON.stringify(c.answers)===JSON.stringify(t.choicedValue)?a.correct=!0:a.correct=!1}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck number line",c,a)}else if(7===t.basetype){if(2===c.matchType){let e=!1;for(let s=0;s<c.answers.length;s++){let i=c.answers[s].split(",");if(i.length!==t.choicedValue.length)break;if(console.log("===> answercheck picture graph check",t.subtype,c.matchType,s,i,t.choicedValue),JSON.stringify(i)===JSON.stringify(t.choicedValue)){e=!0;break}}a.correct=e}else if(1===c.matchType){if(c.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;console.log("=========> answercheck picture graph",c.answers,t.choicedValue),JSON.stringify(c.answers)===JSON.stringify(t.choicedValue)?a.correct=!0:a.correct=!1}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck picture graph",c,a)}else if(8===t.basetype){if(2===c.matchType){let e=!1;for(let s=0;s<c.answers.length;s++){let i=c.answers[s].split(",");if(i.length!==t.choicedValue.length)break;if(console.log("===> answercheck bar graph check",t.subtype,c.matchType,s,i,t.choicedValue),JSON.stringify(i)===JSON.stringify(t.choicedValue)){e=!0;break}}a.correct=e}else if(1===c.matchType){if(c.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;console.log("=========> answercheck bar graph",c.answers,t.choicedValue),JSON.stringify(c.answers)===JSON.stringify(t.choicedValue)?a.correct=!0:a.correct=!1}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck bar graph",c,a)}else if(9===t.basetype){if(2===c.matchType){let e=!1;for(let s=0;s<c.answers.length;s++){let i=c.answers[s].split(",");if(i.length!==t.choicedValue.length)break;if(console.log("===> answercheck line plot check",t.subtype,c.matchType,s,i,t.choicedValue),JSON.stringify(i)===JSON.stringify(t.choicedValue)){e=!0;break}}a.correct=e}else if(1===c.matchType){if(c.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;console.log("=========> answercheck line plot",c.answers,t.choicedValue),JSON.stringify(c.answers)===JSON.stringify(t.choicedValue)?a.correct=!0:a.correct=!1}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck line plot",c,a)}else if(10===t.basetype){if(2===c.matchType);else if(1===c.matchType&&0===t.subtype)console.log("=========> answercheck clock hands",Object.assign({},c.answers),t.choicedValue),console.log("arrGroupAnswers",JSON.stringify(c.answers),"/",JSON.stringify(t.choicedValue[0])),JSON.stringify(c.answers)===JSON.stringify(t.choicedValue[0])?a.correct=!0:a.correct=!1;else if(1===c.matchType&&1===t.subtype){console.log("=========> answercheck clock hands group",Object.assign({},c.answers),t.choicedValue);const e=Array.from(c.answers),s=[];e.forEach(e=>{let t=[];-1!=e.indexOf(",")?t=e.split(","):t.push(e),s.push(t)}),console.log("arrGroupAnswers",JSON.stringify(s),"/",JSON.stringify(t.choicedValue)),JSON.stringify(s)===JSON.stringify(t.choicedValue)?a.correct=!0:a.correct=!1}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck clock hands",c,a)}else if(11===t.basetype&&0===t.subtype){if(2===c.matchType);else if(1===c.matchType){if(console.log("=========> answercheck radio",c.answers.length,t.choicedValue.length),c.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;let e=!0;for(let s=0;s<c.answers.length;s++)if(console.log("=========> answercheck radio",s,c.answers[s],t.choicedValue[s],c.answers[s]!==t.choicedValue[s]),c.answers[s]!==t.choicedValue[s]){e=!1;break}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck dragadd",c,a)}else if(12===t.basetype&&0===t.subtype){if(2===c.matchType);else if(1===c.matchType){if(console.log("=========> answercheck checkbox",c.answers.length,t.choicedValue.length),c.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,a.correct=!1,r;let e=!0;for(let s=0;s<c.answers.length;s++)if(console.log("=========> answercheck checkbox",s,c.answers[s],t.choicedValue[s],c.answers[s]!==t.choicedValue[s]),c.answers[s]!==t.choicedValue[s]){e=!1;break}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck",c,a)}else if(13===t.basetype&&0===t.subtype){if(2===c.matchType){let e=!1;for(let s=0;s<c.answers.length;s++){let o=c.answers[s].split(",");if(o.length!==t.choicedValue.length)break;const n=o.sort(i);if(console.log("===> answercheck grid and chart check",t.subtype,c.matchType,s,o,n,t.choicedValue),JSON.stringify(n)===JSON.stringify(t.choicedValue)){e=!0;break}}a.correct=e}else if(1===c.matchType){if(console.log("=========> answercheck grid and chart",c.answers.length,t.choicedValue.length),c.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,a.correct=!1,r;let e=!0;const s=c.answers.sort(i);console.log("=========> answercheck grid and chart sorted ans",s);for(let i=0;i<s.length;i++)if(console.log("=========> answercheck grid and chart",i,s[i],t.choicedValue[i],s[i]!==t.choicedValue[i]),s[i]!==t.choicedValue[i]){e=!1;break}a.correct=e}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck grid and chart",c,a)}else if(13===t.basetype&&1===t.subtype){if(2===c.matchType){let e=!1;if(t.choicedValue.length<2)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,a.correct=!1,r;let s=t.choicedValue.slice(0,t.choicedValue.length-1),i=t.choicedValue.slice(t.choicedValue.length-1),l=(o(i[0].substring(0,1)),parseInt(i[0].substring(1)));for(let i=0;i<c.answers.length;i++){let h=c.answers[i].split(",");if(2!==h.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,a.correct=!1,-1;let u=h[0],d=o(u.substring(0,1)),p=parseInt(u.substring(1)),m=h[1],_=o(m.substring(0,1)),g=parseInt(m.substring(1));if(isNaN(d)||isNaN(p)||isNaN(_)||isNaN(g))return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,a.correct=!1,r;let f=[];if(d===_)for(let e=p;e<=g;e++)f.push(n(d)+e);else for(let e=d;e<=_;e++)if(e==d)for(let t=p;t<=l;t++)f.push(n(e)+t);else if(e>d&&e<_)for(let t=1;t<=l;t++)f.push(n(e)+t);else if(e==_)for(let t=1;t<=g;t++)f.push(n(e)+t);if(JSON.stringify(f)===JSON.stringify(s)){e=!0;break}}a.correct=e}else if(1===c.matchType){if(console.log("=========> answercheck grid and chart 2",c.answers.length,t.choicedValue.length),2!==c.answers.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,a.correct=!1,-1;if(t.choicedValue.length<2)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,a.correct=!1,r;let e=t.choicedValue.slice(0,t.choicedValue.length-1),s=t.choicedValue.slice(t.choicedValue.length-1),i=(o(s[0].substring(0,1)),parseInt(s[0].substring(1))),l=c.answers[0],h=o(l.substring(0,1)),u=parseInt(l.substring(1)),d=c.answers[1],p=o(d.substring(0,1)),m=parseInt(d.substring(1));if(isNaN(h)||isNaN(u)||isNaN(p)||isNaN(m))return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,a.correct=!1,r;let _=[];if(h===p)for(let e=u;e<=m;e++)_.push(n(h)+e);else for(let e=h;e<=p;e++)if(e==h)for(let t=u;t<=i;t++)_.push(n(e)+t);else if(e>h&&e<p)for(let t=1;t<=i;t++)_.push(n(e)+t);else if(e==p)for(let t=1;t<=m;t++)_.push(n(e)+t);let g=!1;JSON.stringify(_)===JSON.stringify(e)&&(g=!0),a.correct=g}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck grid and chart 2",c,a)}else if(13===t.basetype&&2===t.subtype){if(2===c.matchType){console.log("=========> answercheck grid and chart 3",c.answers,t.choicedValue[0]);const e=c.answers.findIndex(e=>e+""===t.choicedValue[0]);a.correct=!(e<0)}else if(1===c.matchType){if(console.log("=========> answercheck grid and chart 3",c.answers[0],t.choicedValue[0]),c.answers.length!==t.choicedValue.length)return a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!1,-2;c.answers[0]+""===t.choicedValue[0]?a.correct=!0:a.correct=!1}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> answercheck grid and chart 3",c,a)}else if(14===t.basetype){console.log("=========> coordinate",c.answers,t.choicedValue);for(let e=0;e<c.answers.length;e++){let s=[],i=[],o=c.answers[e];if(0===t.subtype){if(o=o.replace(/ /gi,""),o=o.replace(/\),\(/gi,"/"),o=o.replace(/\(/gi,""),o=o.replace(/\)/gi,""),console.log("answer re",o),o.indexOf("/")){o.split("/").forEach(e=>{i.push(e)})}else i.push(o);s.push(i)}else if(1===t.subtype){if(o=o.replace(/ /gi,""),o=o.replace(/\),/gi,"/"),o.indexOf("/")){o.split("/").forEach(e=>{e=(e=e.replace(/\(/gi,"")).replace(/\)/gi,""),i.push(e)})}else o=o.replace(/\(/gi,""),o=o.replace(/\)/gi,""),i.push(o);s.push(i),o=o.replace(/\(/gi,""),o=o.replace(/\)/gi,""),console.log("answer re",o)}const n=s[0].sort(),l=t.choicedValue.sort();if(console.log("JSON.stringify(sortedAnswerXYs)",JSON.stringify(n)),console.log("JSON.stringify(sortedChoicedValue)",JSON.stringify(l)),JSON.stringify(n)==JSON.stringify(l)){if(a.correct=!0,2===c.matchType)break}else a.correct=!1;if(1===c.matchType&&0===r)break}a.choicedIdx=t.choicedIdx,a.choicedValue=t.choicedValue,a.completed=!0,console.log("=========> coordinate",c,a)}return r}},function(e,t,s){"use strict";s.r(t)},function(e,t,s){"use strict";s.r(t)}]);