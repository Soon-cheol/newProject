!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s(s.s=22)}([function(t,e){t.exports=React},function(t,e){t.exports=mobx},function(t,e){t.exports=mobxReact},function(t,e,s){"use strict";var i=s(12),n=Object.prototype.toString;function o(t){return"[object Array]"===n.call(t)}function r(t){return void 0===t}function a(t){return null!==t&&"object"==typeof t}function l(t){return"[object Function]"===n.call(t)}function c(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),o(t))for(var s=0,i=t.length;s<i;s++)e.call(null,t[s],s,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}t.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===n.call(t)},isBuffer:function(t){return null!==t&&!r(t)&&null!==t.constructor&&!r(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isUndefined:r,isDate:function(t){return"[object Date]"===n.call(t)},isFile:function(t){return"[object File]"===n.call(t)},isBlob:function(t){return"[object Blob]"===n.call(t)},isFunction:l,isStream:function(t){return a(t)&&l(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function t(){var e={};function s(s,i){"object"==typeof e[i]&&"object"==typeof s?e[i]=t(e[i],s):e[i]=s}for(var i=0,n=arguments.length;i<n;i++)c(arguments[i],s);return e},deepMerge:function t(){var e={};function s(s,i){"object"==typeof e[i]&&"object"==typeof s?e[i]=t(e[i],s):e[i]="object"==typeof s?t({},s):s}for(var i=0,n=arguments.length;i<n;i++)c(arguments[i],s);return e},extend:function(t,e,s){return c(e,(function(e,n){t[n]=s&&"function"==typeof e?i(e,s):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e){t.exports=_},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0;const i=s(11),n=s(6);function o(t){if(!t)return t;console.log("init student",t),t.displayMode=""+t.displayMode=="2"?"2":"1",t.gender=t.gender,""===t.nickname&&(t.nickname=t.name);let e=t.avatar&&""!==t.avatar?t.avatar:"";return""===e&&(e="f"===t.gender||"F"===t.gender?"/content/mathalive_lib/images/default_candy.png":"/content/mathalive_lib/images/default_cheese.png",t.avatar=e),t}class r{static get isMobile(){return r._isMobile}static get tempEl(){return r._tempEl}static pub_init(){const t=navigator.userAgent;r._isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t)||/android/i.test(t),r._tempBnd=document.createElement("div"),r._tempBnd.style.display="none",r._tempEl=document.createElement("div"),r._tempBnd.appendChild(r._tempEl),null===document.body?document.addEventListener("DOMContentLoaded",t=>{document.body.appendChild(r._tempBnd)}):document.body.appendChild(r._tempBnd)}static get students(){return r._students}static get student(){return r._student}static get lang(){return r._lang}static get isDvlp(){return r._isDvlp}static get data_url(){return r._data_url}static get lesson(){return r._lesson}static get book(){return r._book}static get nextBook(){return r._nextBook}static get prevBook(){return r._prevBook}static get addOnHost(){return r._addOnHost}static setaddOnHost(t){r._addOnHost=t}static pub_load(t,e,s,i,n,a,l){r._lesson=i,r._book=s,r._nextBook=a,r._prevBook=l,r._students=[],t&&Array.isArray(t)&&t.forEach((t,e)=>{r._students[e]=o(t)}),r._student=o(e),n&&""!==n&&(r._addOnHost=n)}static pub_reloadStudents(t){n.getStudents((e,s)=>{for(;r._students.length>0;)r._students.pop();for(;r._students_inited.length>0;)r._students_inited.pop();for(let t=0,s=e.length;t<s;t++)r.isDvlp?r._students[t]=o(e[t]):r._students[t]=o({id:e[t].id,name:e[t].name,thumb:e[t].defaultThumbnail,avatar:e[t].profileThumbnail,nickname:""!==e[t].nickName?e[t].nickName:e[t].name,displayMode:e[t].displayMode,gender:e[t].gender,inited:!0}),console.log("student",e[t]),r._students_inited.push(e[t].id);t()})}static pub_parseStyle(t){return r._tempEl.style.cssText=t,r._tempEl.style}static pub_initAudio(){r._common_audio=document.getElementById("common_audio"),r._ding_audio=document.getElementById("ding_audio"),r._dingend_audio=document.getElementById("dingend_audio"),r._btn_audio=document.getElementById("btn_audio"),r._correct_audio=document.getElementById("correct_audio"),r._wrong_audio=document.getElementById("wrong_audio"),r._topad_audio=document.getElementById("topad_audio"),r._goodjob_audio=document.getElementById("goodjob_audio"),r._btn_back_audio=document.getElementById("btn_back_audio"),r._btn_page_audio=document.getElementById("btn_page_audio"),r._popup_audio=document.getElementById("popup_audio"),r._clock_audio=document.getElementById("clock_audio"),r._ts_bgm_audio=document.getElementById("ts_bgm_audio"),r._bs_audio=document.getElementById("bs_audio"),r._bb_audio=document.getElementById("bb_audio"),r._cd_audio=document.getElementById("cd_audio"),r._tc_audio=document.getElementById("tc_audio"),r._te_audio=document.getElementById("te_audio"),r._trg_bgm_audio=document.getElementById("trg_bgm_audio"),r._afc_audio=document.getElementById("afc_audio"),r._trs_audio=document.getElementById("trs_audio"),r._btn_choice_audio=document.getElementById("btn_choice_audio"),r._retry_audio=document.getElementById("retry_audio"),r._sorry_audio=document.getElementById("sorry_audio"),r._great_audio=document.getElementById("great_audio"),r._memorygame_flipcard_audio=document.getElementById("flipcard_audio"),r._ispy_gameclick_audio=document.getElementById("gameclick_audio"),r._game_timesetting_start_audio=document.getElementById("game_timesetting_start"),r._solution_btn_audio=document.getElementById("solution_btn_audio"),r._game_result_audio=document.getElementById("game_result_audio"),r._open_problom_audio=document.getElementById("open_problom_audio"),r._quiz_done_audio=document.getElementById("quiz_done_audio"),r._hit_up_audio=document.getElementById("hu_audio"),r._hit_down_audio=document.getElementById("hd_audio"),r._hit_good_audio=document.getElementById("hg_audio"),r._hit_wrong_audio=document.getElementById("hw_audio"),r._pick_presenter=document.getElementById("pick_presenter"),r._game_good_audio=document.getElementById("gg_audio")}static pub_playClock(){r._clock_audio&&(r._clock_audio.currentTime=4.5,r._clock_audio.play())}static pub_playPopup(){r._popup_audio&&(r._popup_audio.currentTime=0,r._popup_audio.play())}static pub_playBtnPage(){r._btn_page_audio&&(r._btn_page_audio.currentTime=0,r._btn_page_audio.play())}static pub_playBtnBack(){r._btn_back_audio&&(r._btn_back_audio.currentTime=0,r._btn_back_audio.play())}static pub_playGoodjob(){r._goodjob_audio&&(r._goodjob_audio.currentTime=0,r._goodjob_audio.play())}static pub_playDing(){r._ding_audio&&(r._ding_audio.currentTime=0,r._ding_audio.play())}static pub_playDingend(){r._dingend_audio&&(r._dingend_audio.currentTime=0,r._dingend_audio.play())}static pub_playToPad(){r._topad_audio&&(r._topad_audio.currentTime=0,r._topad_audio.play())}static pub_playBtnTab(){r._btn_audio&&(r._btn_audio.currentTime=0,r._btn_audio.play())}static pub_playCorrect(){r._correct_audio&&(r._correct_audio.currentTime=0,r._correct_audio.play())}static pub_playWrong(){r._wrong_audio&&(r._wrong_audio.currentTime=0,r._wrong_audio.play())}static pub_playTeamSelectBgm(){r._ts_bgm_audio&&(r._ts_bgm_audio.currentTime=0,r._ts_bgm_audio.play())}static pub_stopTeamSelectBgm(){r._ts_bgm_audio&&(r._ts_bgm_audio.pause(),r._ts_bgm_audio.currentTime=0)}static pub_playStartButton(){r._bs_audio&&(r._bs_audio.currentTime=0,r._bs_audio.play())}static pub_playBasicButton(){r._bb_audio&&(r._bb_audio.currentTime=0,r._bb_audio.play())}static pub_playCountDown(){r._cd_audio&&(r._cd_audio.currentTime=0,r._cd_audio.play())}static pub_playTimerClock(){r._tc_audio&&(r._tc_audio.currentTime=0,r._tc_audio.play())}static pub_stopTimerClock(){r._tc_audio&&(r._tc_audio.pause(),r._tc_audio.currentTime=0)}static pub_playTimerEnd(){r._te_audio&&(r._te_audio.currentTime=0,r._te_audio.play())}static pub_playResultGraph(){r._trg_bgm_audio&&(r._trg_bgm_audio.currentTime=0,r._trg_bgm_audio.play())}static pub_playFireworksClapping(){r._afc_audio&&(r._afc_audio.currentTime=0,r._afc_audio.play())}static pub_playTotalResult(){r._trs_audio&&(r._trs_audio.currentTime=0,r._trs_audio.play())}static pub_playChoiceBtn(){r._btn_choice_audio&&(r._btn_choice_audio.currentTime=0,r._btn_choice_audio.play())}static pub_playsorry(){r._sorry_audio&&(r._sorry_audio.currentTime=0,r._sorry_audio.play())}static pub_playretry(){r._retry_audio&&(r._retry_audio.currentTime=0,r._retry_audio.play())}static pub_playgreat(){r._great_audio&&(r._great_audio.currentTime=0,r._great_audio.play())}static pub_playFlipCard(){r._memorygame_flipcard_audio&&(r._memorygame_flipcard_audio.currentTime=0,r._memorygame_flipcard_audio.play())}static pub_playGameClick(){r._ispy_gameclick_audio&&(r._ispy_gameclick_audio.currentTime=0,r._ispy_gameclick_audio.play())}static pub_game_timesetting_start(){r._game_timesetting_start_audio&&(r._game_timesetting_start_audio.currentTime=0,r._game_timesetting_start_audio.play())}static pub_solution_btn_click(){r._solution_btn_audio&&(r._solution_btn_audio.currentTime=0,r._solution_btn_audio.play())}static pub_playGameresult(){r._game_result_audio&&(r._game_result_audio.currentTime=0,r._game_result_audio.play())}static pub_openProblom(){r._open_problom_audio&&(r._open_problom_audio.currentTime=0,r._open_problom_audio.play())}static pub_quizDone(){r._quiz_done_audio&&(r._quiz_done_audio.currentTime=0,r._quiz_done_audio.play())}static pub_pick_presenter(){r._pick_presenter&&(r._pick_presenter.currentTime=0,r._pick_presenter.play())}static pub_stop(){null!=r._common_audio.onended&&r._common_audio.onended.call(r._common_audio,new Event("ended")),r._common_audio.oncanplaythrough=null,isNaN(r._common_audio.duration)||r._common_audio.paused||r._common_audio.pause()}static pub_play(t,e){r.pub_stop(),t=i.nteString(t,"");const s=i.nteString(r._common_audio.getAttribute("src"),"");if(""===t&&""===s)return void(null!=e&&e(!0));""!==t&&s!==t&&(r._common_audio.src=t);const n=t=>{r._common_audio.onended=null,null!==e&&e(!0),r._common_audio.removeEventListener("error",n)};r._common_audio.onended=t=>{r._common_audio.onended=null,null!==e&&e(!!t),r._common_audio.removeEventListener("error",n)},r._common_audio.addEventListener("error",n),isNaN(r._common_audio.duration)?(r._common_audio.oncanplaythrough=t=>{0!==r._common_audio.currentTime&&(r._common_audio.currentTime=0),r._common_audio.play(),r._common_audio.oncanplaythrough=null},r._common_audio.load()):(0!==r._common_audio.currentTime&&(r._common_audio.currentTime=0),r._common_audio.oncanplaythrough=null,r._common_audio.play())}static pub_set(t,e,s){r._isDvlp=e,r._lang=s,n.set(e)}static pub_addInitedStudent(t){let e=!0;for(let s=0,i=r._students_inited.length;s<i;s++){r._students_inited[s]===t.id&&(e=!1)}e&&r._students_inited.push(t.id);const s=r._start_idx>0&&r._students.length>0&&r._students_inited.length>=r._students.length;return s&&(window.clearTimeout(r._start_idx),r._start_idx=-1),s}static pub_start(t){0===r._students.length||r._students_inited.length>=r._students.length?t():r._start_idx=window.setTimeout(t,2e3)}static pub_clear(){for(;r._students.length>0;)r._students.pop();for(;r._students_inited.length>0;)r._students_inited.pop()}static pub_playHitup(){r._hit_up_audio&&(r._hit_up_audio.currentTime=0,r._hit_up_audio.play())}static pub_playHitdown(){r._hit_down_audio&&(r._hit_down_audio.currentTime=0,r._hit_down_audio.play())}static pub_playHitgood(){r._hit_good_audio&&(r._hit_good_audio.currentTime=0,r._hit_good_audio.play())}static pub_playHitwrong(){r._hit_wrong_audio&&(r._hit_wrong_audio.currentTime=0,r._hit_wrong_audio.play())}static pub_playGamegood(){r._game_good_audio&&(r._game_good_audio.currentTime=0,r._game_good_audio.play())}}e.App=r,r._isMobile=!1,r._students=[],r._students_inited=[],r._student=null,r._lang="ko",r._isDvlp=!1,r._data_url="../data/",r._lesson="",r._book="",r._nextBook=!1,r._prevBook=!1,r._start_idx=-1,r.isStarted=!1,r._addOnHost="https://addonsapi.fel40.com"},function(t,e,s){"use strict";var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(n,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.postAttention=e.postViewDiv=e.getPreviewDmsResult=e.getPreviewResult=e.showSGiftBox=e.showSLivePointPop=e.launchSTool=e.clearPenTool=e.hidePenTool=e.showPenTool=e.showRecordTool=e.showSendButton=e.alertToStudent=e.showSLoading=e.showSMathKit=e.clearSPenTool=e.takePicture=e.uploadInclassReport=e.stopVideoRecord=e.startVideoRecord=e.switchCamera=e.stopCamera=e.pauseRecordPlayer=e.playRecordPlayer=e.startCustomCamera=e.startCamera=e.getStudents=e.uploadFileToServerMulti=e.uploadImageToServer=e.uploadFileToServer=e.stopVoiceRecord=e.startVoiceRecord=e.sendTeacher=e.disableSoftwareKeyboard=e.sendPAD=e.sendPADToID=e.sendLauncher=e.uploadStudentReport=e.addStudentForStudentReportType6=e.hideStudentReportListPage=e.showStudentReportListPage=e.showStudentReportUI=e.hideStudentReportUI=e.startStudentReportProcess=e.finishContentPage=e.showTMathKit=e.alertToTeacher=e.showTLoading=e.clearTPenTool=e.getBookCaptureInfo=e.uploadTImageToServer=e.useFractionBar=e.logOut=e.exitClass=e.getNaviInfo=e.launchPadTool=e.launchTool=e.exitBook=e.gotoBookByKey=e.gotoBook=e.set=void 0;const n=s(4);let o=!1;e.set=function(t){o=t},e.gotoBook=function(t,e){if(console.log("felsocket gotoBook",t,e),!o)try{window.tsoc_o.gotoBook(t,e)}catch(t){}},e.gotoBookByKey=function(t){if(console.log("felsocket gotoBookByKey",t),!o)try{window.tsoc_o.gotoBookByKey(t)}catch(t){}},e.exitBook=function(){if(console.log("felsocket exitBook"),!o)try{window.tsoc_o.exitBook()}catch(t){}},e.launchTool=function(t){if(console.log("felsocket launchTool",t),!o)try{window.tsoc_o.launchTool(t)}catch(t){}},e.launchPadTool=function(t){if(console.log("felsocket launchPadTool",t),!o)try{window.tsoc_o.launchPadTool(t)}catch(t){}},e.getNaviInfo=function(t){if(console.log("felsocket getNaviInfo",t),!o)try{window.tsoc_o.getNaviInfo(t)}catch(t){}},e.exitClass=function(){if(console.log("felsocket exitClass"),!o)try{window.tsoc_o.exitClass()}catch(t){}},e.logOut=function(){if(console.log("felsocket logOut"),!o)try{window.tsoc_o.logOut()}catch(t){}},e.useFractionBar=function(){if(console.log("felsocket useFractionBar"),!o)try{window.tsoc_o.useFractionBar()}catch(t){}},e.uploadTImageToServer=function(t,e,s,i){if(console.log("felsocket uploadTImageToServer",e,s,i),!o)try{window.tsoc_o.uploadImageToServer(t,e,s,i)}catch(t){}},e.getBookCaptureInfo=function(t){if(console.log("felsocket getBookCaptureInfo"),!o)try{window.tsoc_o.getBookCaptureInfo(t)}catch(t){}},e.clearTPenTool=function(){if(console.log("felsocket clearTPenTool"),!o)try{window.tsoc_o.clearPenTool()}catch(t){}},e.showTLoading=function(t){if(console.log("felsocket showTLoading",t),!o)try{window.tsoc_o.showLoading(t)}catch(t){}},e.alertToTeacher=function(t){if(console.log("felsocket alertToTeacher",t),!o)try{window.tsoc_o.alert(t)}catch(t){}},e.showTMathKit=function(t){if(console.log("felsocket showTMathKit",t),!o)try{window.tsoc_o.showMathKit(t)}catch(t){}},e.finishContentPage=function(){if(!o)try{window.tsoc_o.finishContentPage()}catch(t){}},e.startStudentReportProcess=function(t,e,s){if(!o)try{window.tsoc_o.startStudentReportProcess(t,e,s)}catch(t){}},e.hideStudentReportUI=function(){if(!o)try{window.tsoc_o.hideStudentReportUI()}catch(t){}},e.showStudentReportUI=function(){if(!o)try{window.tsoc_o.showStudentReportUI()}catch(t){}},e.showStudentReportListPage=function(){if(!o)try{window.tsoc_o.showStudentReportListPage()}catch(t){}},e.hideStudentReportListPage=function(){if(!o)try{window.tsoc_o.hideStudentReportListPage()}catch(t){}},e.addStudentForStudentReportType6=function(t){if(!o)try{window.tsoc_o.addStudentForStudentReportType6(t)}catch(t){}},e.uploadStudentReport=function(t,e,s){if(!o)try{window.psoc_o.uploadStudentReport(t,e,s)}catch(t){}},e.sendLauncher=function(t,e){if(5!==t||o)if(6!==t||o)if(7!==t||o){if(8===t)if(console.log("felsocket gotoPrevBook"),o)try{window.top.tsoc_o.gotoPrevBook()}catch(t){}else try{window.tsoc_o.gotoPrevBook()}catch(t){}else if(9===t)if(console.log("felsocket gotoNextBook"),o)try{window.top.tsoc_o.gotoNextBook()}catch(t){}else try{window.tsoc_o.gotoNextBook()}catch(t){}}else try{window.tsoc_o.setTitleBar(e)}catch(t){}else try{window.tsoc_o.showTitleBar()}catch(t){}else try{window.tsoc_o.hideTitleBar()}catch(t){}},e.sendPADToID=function(t,e,s){const i={type:e,data:s};if(o)try{window.top.tsoc_o.sendPADToID(t,i)}catch(t){}else try{window.tsoc_o.sendPADToID(t,i)}catch(t){}},e.sendPAD=function(t,e){const s={type:t,data:e};if(o)try{window.top.tsoc_o.sendAll(s)}catch(t){}else try{window.tsoc_o.sendAll(s)}catch(t){}},e.disableSoftwareKeyboard=function(){try{window.psoc_o.disableSoftwareKeyboard()}catch(t){}},e.sendTeacher=function(t,e){const s={type:t,data:e};if(o)try{null!==window.opener&&window.opener.tsoc_o.sendTeacher(s)}catch(t){}else try{window.psoc_o.sendTeacher(s)}catch(t){}},e.startVoiceRecord=function(){try{window.psoc_o.startVoiceRecord()}catch(t){}},e.stopVoiceRecord=function(){try{window.psoc_o.stopVoiceRecord()}catch(t){}},e.uploadFileToServer=function(t){try{window.psoc_o.uploadFileToServer(t)}catch(t){}},e.uploadImageToServer=function(t,e,s,i){try{window.psoc_o.uploadImageToServer(t,e,s,i)}catch(t){}},e.uploadFileToServerMulti=function(t){try{window.psoc_o.uploadFileToServerMulti(t)}catch(t){}},e.getStudents=function(t){if(o)if(window.top.tsoc_o)try{window.top.tsoc_o.getStudents(t)}catch(t){}else t([],!1);else try{window.tsoc_o.getStudents(t)}catch(t){}},e.startCamera=function(t){if(!o)try{window.psoc_o.startCamera(t)}catch(t){}},e.startCustomCamera=function(t){o||window.parent.postMessage({from:"content",srcFrame:"book",type:"startCustomCamera",msg:t},"*")},e.playRecordPlayer=function(){o||window.parent.postMessage({from:"content",srcFrame:"book",type:"playRecordPlayer"},"*")},e.pauseRecordPlayer=function(){o||window.parent.postMessage({from:"content",srcFrame:"book",type:"pauseRecordPlayer"},"*")},e.stopCamera=function(){if(!o)try{window.psoc_o.stopCamera()}catch(t){}},e.switchCamera=function(t){if(!o)try{window.psoc_o.switchCamera(t)}catch(t){}},e.startVideoRecord=function(){if(!o)try{window.psoc_o.startVideoRecord()}catch(t){}},e.stopVideoRecord=function(){if(!o)try{window.psoc_o.stopVideoRecord()}catch(t){}},e.uploadInclassReport=function(t){if(!o)try{window.tsoc_o.uploadInclassReport(t)}catch(t){}},e.takePicture=function(t){if(!o)try{window.psoc_o.takePicture(t)}catch(t){}},e.clearSPenTool=function(){if(console.log("felsocket clearPenTool"),!o)try{window.psoc_o.clearPenTool()}catch(t){}},e.showSMathKit=function(t){if(console.log("felsocket showSMathKit",t),!o)try{window.psoc_o.showMathKit(t)}catch(t){}},e.showSLoading=function(t){if(console.log("felsocket showSLoading",t),!o)try{window.psoc_o.showLoading(t)}catch(t){}},e.alertToStudent=function(t){if(console.log("felsocket alertToStudent",t),!o)try{window.psoc_o.alert(t)}catch(t){}},e.showSendButton=function(t,e){if(console.log("felsocket showSendButton"),!o)try{window.psoc_o.showSendButton(t,e)}catch(t){}},e.showRecordTool=function(t){if(console.log("felsocket showRecordTool",t),!o)try{window.psoc_o.showRecordTool(t)}catch(t){}},e.showPenTool=function(){if(console.log("felsocket showPentool"),!o)try{window.psoc_o.showPenTool()}catch(t){}},e.hidePenTool=function(){if(console.log("felsocket hidePentool"),!o)try{window.psoc_o.hidePenTool()}catch(t){}},e.clearPenTool=function(){if(console.log("felsocket clearPenTool"),!o)try{window.psoc_o.clearPenTool()}catch(t){}},e.launchSTool=function(t){if(console.log("felsocket launchTool",t),!o)try{window.psoc_o.launchTool(t)}catch(t){}},e.showSLivePointPop=function(t){if(console.log("felsocket showLivePointPop"),!o)try{window.psoc_o.showLivePointPop(t)}catch(t){}},e.showSGiftBox=function(t,e){if(console.log("felsocket showGiftBox"),!o)try{window.psoc_o.showGiftBox(t,e)}catch(t){}},e.getPreviewResult=function(t){return i(this,void 0,void 0,(function*(){return new Promise(e=>{if(o)e([]);else{let s=!1;const i=t=>{s||(s=!0,e(t))};window.tsoc_o.getPreviewResult(i,t),n.delay(()=>{s||(s=!0,e([]))},5e3)}})}))},e.getPreviewDmsResult=function(t){return i(this,void 0,void 0,(function*(){return new Promise(e=>{if(o)e([]);else{let s=!1;const i=t=>{s||(s=!0,e(t))};window.tsoc_o.getPreviewDmsResult(i,t),n.delay(()=>{s||(s=!0,e([]))},5e3)}})}))},e.postViewDiv=function(t){return i(this,void 0,void 0,(function*(){console.log("postViewDiv",t),window.top.postMessage({type:"viewDiv",msg:t,from:"content"},"*")}))},e.postAttention=function(t){return i(this,void 0,void 0,(function*(){console.log("postAttention",t),window.top.postMessage({type:"attention",msg:t,from:"content"},"*")}))}},function(t,e){t.exports=ReactIdSwiper},function(t,e,s){"use strict";var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(n,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.getBounds=e.getTimeStr=e.wait=void 0;const n=s(4);e.wait=function(t){return i(this,void 0,void 0,(function*(){return new Promise(e=>{n.delay(e,t)})}))},e.getTimeStr=function(t,e){const s=Math.round(e/1e3);let i=Math.round(t/1e3),n=Math.floor(i/60),o=Math.floor(n/60),r="";return i%=60,n%=60,o>0||s>=3600?(r=o+":",r+=n>=10?n+":":"0"+n+":"):s>=600?r+=n>=10?n+":":"0"+n+":":r=n+":",r+=i>=10?i:"0"+i,r},e.getBounds=function(t){const e={left:0,top:0,width:0,height:0};if(!t)return e;try{const s=t.getBoundingClientRect();e.left=s.left,e.top=s.top,e.width=s.width,e.height=s.height}catch(t){}const s=t.ownerDocument,i=s.body,n=s.documentElement;e.left=e.left-(n.clientLeft||i.clientLeft||0),e.top=e.top-(n.clientTop||i.clientTop||0);const o=s.defaultView;return e.left+=o.pageXOffset||n.scrollLeft||i.scrollLeft,e.top+=o.pageYOffset||n.scrollTop||i.scrollTop,e}},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var n,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(e,s,r):n(e,s))||r);return o>3&&r&&Object.defineProperty(e,s,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.ImgBtn=e.AudioBtn=e.ToggleBtn=void 0;const n=s(0),o=s(1),r=s(2);class a extends n.Component{constructor(t){super(t),this.m_pID=-1,this._inited=this._inited.bind(this),this._onClick=this._onClick.bind(this)}_inited(t){!this.m_el&&t&&(this.m_el=t,this.props.onRef&&this.props.onRef(t),t.setAttribute("touch-action","none"),t.addEventListener("pointerdown",e=>{if(!(this.m_pID>=0)){if(this.m_pID=e.pointerId,!this.props.disableCapture)try{t.setPointerCapture(this.m_pID)}catch(t){}this.props.onMouseDown&&this.props.onMouseDown(e)}}),t.addEventListener("pointerup",e=>{if(this.m_pID===e.pointerId){try{t.releasePointerCapture(this.m_pID)}catch(t){}this.m_pID=-1,this.props.onMouseUp&&this.props.onMouseUp(e)}}),t.addEventListener("pointerleave",e=>{if(this.props.disableCapture){if(this.m_pID!==e.pointerId)return;try{t.releasePointerCapture(this.m_pID)}catch(t){}this.m_pID=-1}this.props.onMouseLeave&&this.props.onMouseLeave(e)}),t.addEventListener("pointercancel",e=>{if(this.m_pID===e.pointerId){try{t.releasePointerCapture(this.m_pID)}catch(t){}this.m_pID=-1,this.props.onMouseLeave&&this.props.onMouseLeave(e)}}))}_onClick(t){this.props.onClick&&this.props.onClick(t),this.props.preventEvent&&(t.preventDefault(),t.stopPropagation())}componentDidUpdate(t){if((this.props.disabled&&!t.disabled||!this.props.view&&t.view)&&this.m_pID>=0){try{this.m_el&&this.m_el.releasePointerCapture(this.m_pID)}catch(t){}this.m_pID=-1}}}i([o.observable],a.prototype,"m_pID",void 0);let l=class extends a{constructor(t){super(t),this.m_on=!1,this.m_on=!0===t.on}componentWillReceiveProps(t){this.props.on!==t.on&&(this.m_on=!0===t.on)}render(){const t=[];this.props.className&&t.push(this.props.className),this.m_on&&t.push("on"),this.m_pID>0&&t.push("down");const e=t.join(" ");let s=this.props.style;return!1===this.props.view&&(s||(s={}),s.display="none"),n.createElement("button",{id:this.props.id,className:e,onClick:this._onClick,ref:this._inited,disabled:!0===this.props.disabled,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:s},this.props.children)}};i([o.observable],l.prototype,"m_on",void 0),l=i([r.observer],l),e.ToggleBtn=l;let c=class extends l{constructor(t){super(t)}play(){this.m_on||(this.m_on=!0,this.props.playFnc(this.props.src,t=>{this.m_on&&(this.m_on=!1,this.props.onPause&&this.props.onPause(t))}))}_onClick(t){this.m_on?(this.props.pauseFnc(),this.m_on=!1):this.play(),super._onClick(t)}};i([o.action],c.prototype,"play",null),i([o.action],c.prototype,"_onClick",null),c=i([r.observer],c),e.AudioBtn=c;let u=class extends a{constructor(t){super(t),this.m_on=!1,this.m_on=!0===t.on}componentWillReceiveProps(t){this.props.on!==t.on&&(this.m_on=!0===t.on)}render(){const t=[];this.props.className&&t.push(this.props.className),this.m_on&&t.push("on"),this.m_pID>0&&t.push("down"),!0===this.props.disabled&&t.push("disable");const e=t.join(" ");let s=this.props.style;return!1===this.props.view&&(s||(s={}),s.display="none"),n.createElement("img",{id:this.props.id,className:e,onClick:this._onClick,ref:this._inited,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:s,src:this.props.src,useMap:this.props.useMap})}};i([o.observable],u.prototype,"m_on",void 0),u=i([r.observer],u),e.ImgBtn=u},function(t,e,s){"use strict";t.exports=s(25)},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._toStringTimestamp=e.getDateStr=e.nteArray=e.intToHTMLcolor=e.nteBool=e.nteString=e.nteFloat=e.nteInt=e.nteUInt=e.getUnicUrl=e.getUnicNum=e.getUnic=void 0,Date.now||(Date.now=function(){return(new Date).getTime()});let i=0;function n(){return o().toString(36)}function o(){const t=Date.now();return t>i?i=t:i+=1,i}e.getUnic=n,e.getUnicNum=o,e.getUnicUrl=function(t){if(!t)return"";let e=t=t.trim();return 0!==e.indexOf("http://")&&0!==e.indexOf("https://")||(e=e.indexOf("?")>0?e+"&t="+n():e+"?t="+n()),e},e.nteUInt=function(t,e){if(null==t)return e;if("number"==typeof t)return isNaN(t)||t<0?e:Math.round(t);{const s=parseInt(String(t),10);return isNaN(s)||s<0?e:s}},e.nteInt=function(t,e){if(null==t)return e;if("number"==typeof t)return Math.round(t);{const s=parseInt(String(t),10);return isNaN(s)?e:s}},e.nteFloat=function(t,e){if(null==t)return e;if("number"==typeof t)return t;{const s=parseFloat(String(t));return isNaN(s)?e:s}},e.nteString=function(t,e){return null==t?e:String(t)},e.nteBool=function(t,e){if(null==t)return e;if("boolean"==typeof t)return t;const s=String(t);return"true"===s||"false"!==s&&e},e.intToHTMLcolor=function(t){let e,s,i,n=t-0;e=(255&n)<<16,s=65280&n,i=(16711680&n)>>>16,n=e|s|i;let o=n.toString(16);return o="#000000".substring(0,7-o.length)+o,o},e.nteArray=function(t){if(t){if(Array.isArray(t))return t;if("string"==typeof t){const e=t;if(e.indexOf("[")>=0&&e.indexOf("]")>0)try{return JSON.parse(e)}catch(t){}}const e=[];return e.push(t),e}return[]},e.getDateStr=function(t="."){const e=new Date,s=e.getFullYear(),i=e.getMonth()+1,n=e.getDate();return s+t+(i<10?"0"+i:""+i)+t+(n<10?"0"+n:""+n)},e._toStringTimestamp=function(t){let e;const s=t.getFullYear();let i=t.getMonth()+1+"";parseInt(i,10)<10&&(i="0"+i);let n=t.getDate()+"";return parseInt(n,10)<10&&(n="0"+n),e=s+"-"+i+"-"+n+" "+t.toTimeString().substr(0,8),e}},function(t,e,s){"use strict";t.exports=function(t,e){return function(){for(var s=new Array(arguments.length),i=0;i<s.length;i++)s[i]=arguments[i];return t.apply(e,s)}}},function(t,e,s){"use strict";var i=s(3);function n(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,s){if(!e)return t;var o;if(s)o=s(e);else if(i.isURLSearchParams(e))o=e.toString();else{var r=[];i.forEach(e,(function(t,e){null!=t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,(function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),r.push(n(e)+"="+n(t))})))})),o=r.join("&")}if(o){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},function(t,e,s){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,s){"use strict";(function(e){var i=s(3),n=s(44),o={"Content-Type":"application/x-www-form-urlencoded"};function r(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a,l={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e))&&(a=s(16)),a),transformRequest:[function(t,e){return n(e,"Accept"),n(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(r(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(r(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],(function(t){l.headers[t]={}})),i.forEach(["post","put","patch"],(function(t){l.headers[t]=i.merge(o)})),t.exports=l}).call(this,s(43))},function(t,e,s){"use strict";var i=s(3),n=s(45),o=s(13),r=s(47),a=s(50),l=s(51),c=s(17);t.exports=function(t){return new Promise((function(e,u){var p=t.data,d=t.headers;i.isFormData(p)&&delete d["Content-Type"];var h=new XMLHttpRequest;if(t.auth){var m=t.auth.username||"",_=t.auth.password||"";d.Authorization="Basic "+btoa(m+":"+_)}var f=r(t.baseURL,t.url);if(h.open(t.method.toUpperCase(),o(f,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var s="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,i={data:t.responseType&&"text"!==t.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:s,config:t,request:h};n(e,u,i),h=null}},h.onabort=function(){h&&(u(c("Request aborted",t,"ECONNABORTED",h)),h=null)},h.onerror=function(){u(c("Network Error",t,null,h)),h=null},h.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),u(c(e,t,"ECONNABORTED",h)),h=null},i.isStandardBrowserEnv()){var b=s(52),g=(t.withCredentials||l(f))&&t.xsrfCookieName?b.read(t.xsrfCookieName):void 0;g&&(d[t.xsrfHeaderName]=g)}if("setRequestHeader"in h&&i.forEach(d,(function(t,e){void 0===p&&"content-type"===e.toLowerCase()?delete d[e]:h.setRequestHeader(e,t)})),i.isUndefined(t.withCredentials)||(h.withCredentials=!!t.withCredentials),t.responseType)try{h.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){h&&(h.abort(),u(t),h=null)})),void 0===p&&(p=null),h.send(p)}))}},function(t,e,s){"use strict";var i=s(46);t.exports=function(t,e,s,n,o){var r=new Error(t);return i(r,e,s,n,o)}},function(t,e,s){"use strict";var i=s(3);t.exports=function(t,e){e=e||{};var s={},n=["url","method","params","data"],o=["headers","auth","proxy"],r=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];i.forEach(n,(function(t){void 0!==e[t]&&(s[t]=e[t])})),i.forEach(o,(function(n){i.isObject(e[n])?s[n]=i.deepMerge(t[n],e[n]):void 0!==e[n]?s[n]=e[n]:i.isObject(t[n])?s[n]=i.deepMerge(t[n]):void 0!==t[n]&&(s[n]=t[n])})),i.forEach(r,(function(i){void 0!==e[i]?s[i]=e[i]:void 0!==t[i]&&(s[i]=t[i])}));var a=n.concat(o).concat(r),l=Object.keys(e).filter((function(t){return-1===a.indexOf(t)}));return i.forEach(l,(function(i){void 0!==e[i]?s[i]=e[i]:void 0!==t[i]&&(s[i]=t[i])})),s}},function(t,e,s){"use strict";function i(t){this.message=t}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,t.exports=i},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var n,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(e,s,r):n(e,s))||r);return o>3&&r&&Object.defineProperty(e,s,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.AlertPopup=e.WarningPopup=e.StrategyPopup=void 0;const n=s(0),o=s(1),r=s(2),a=s(21),l=s(4),c=s(5);let u=class extends n.Component{componentDidUpdate(t){if(this.props.view&&!t.view){if(!this.props.button){let t=this.props.delay;t||(t=800),l.delay(()=>{this.props.onComplete&&this.props.onComplete()},t)}}else!this.props.view&&t.view}render(){const{type:t}=this.props;let e="";0===t?e="The teacher has stopped you from the activity. After 3 seconds, only the contents has been created so far will be submitted.":1===t?e="All students are already in progress. If you restart, existing data will be deleted. Are you sure you want to request the submission?":2===t?e="You can share a solution only in the problem solving state.":3===t?e="Do you want to save the current learning screen? If there is already saved data, the current data will be overwritten.":4===t?e="Picture not taken.\nYou have reached the maximum number of pictures available.":5===t&&(e="For this activity, We recommend students to wear a headset or an earphone with a microphone.");let s="exclamation";return 4===t?s="nocamera":5===t&&(s="headset"),n.createElement("div",{className:"alertpop strategy"+(this.props.view?" show":"")},n.createElement("div",{className:"alertpop-inner"},n.createElement("div",{className:s}),n.createElement("div",{className:"ment"},e),n.createElement("div",{className:"buttons"+(this.props.isSingle?" single":"")+(this.props.button?"":" hide")},n.createElement("button",{className:"btn cancel",onClick:this.props.onCancel},"Cancel"),n.createElement("button",{className:"btn ok",onClick:this.props.onOk},"Ok"))))}};u=i([r.observer],u),e.StrategyPopup=u;let p=class extends n.Component{constructor(){super(...arguments),this.second=3,this.interval=null}componentDidUpdate(t){if(this.props.view&&!t.view){if(this.second=3,!this.props.button){let t=this.props.delay;t||(t=800),this.interval=setInterval(()=>{this.second--,0===this.second&&(this.props.onComplete&&this.props.onComplete(),null!==this.interval&&clearInterval(this.interval))},1e3)}}else!this.props.view&&t.view&&(null!==this.interval&&clearInterval(this.interval),this.props.onComplete&&this.props.onComplete())}render(){const{type:t}=this.props;let e="";return 0===t&&(e=`Submit your answer within <strong>${this.second} seconds.</strong>`),n.createElement("div",{className:"warningpopup",style:{display:this.props.view?"":"none"}},n.createElement("div",{className:"msg",dangerouslySetInnerHTML:{__html:e}}))}};i([o.observable],p.prototype,"second",void 0),p=i([r.observer],p),e.WarningPopup=p;class d extends n.Component{constructor(){super(...arguments),this._onOk=()=>{this.props.onOk&&this.props.onOk()},this._onClose=()=>{this.props.onClose&&this.props.onClose()}}componentDidUpdate(t){this.props.view&&!t.view||!this.props.view&&t.view&&c.App.pub_playBtnTab()}render(){const{view:t,msg:e,isSingle:s,msgclass:i}=this.props;return n.createElement(a.CoverPopup,{className:"alert_popup",view:t,onClosed:this.props.isSingle?this._onOk:this._onClose},n.createElement("div",{className:"pop_box"},n.createElement("span",{className:"ico_alert"}),n.createElement("span",{className:"text"+(i&&""!==i?" "+i:""),dangerouslySetInnerHTML:{__html:e}}),n.createElement("div",{className:"btns"},n.createElement("button",{className:"btn_cancel",onClick:this._onClose,style:{display:s?"none":""}},n.createElement("span",null,"Cancel")),n.createElement("button",{className:"btn_ok",onClick:this._onOk},n.createElement("span",null,"OK")))))}}e.AlertPopup=d},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var n,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(e,s,r):n(e,s))||r);return o>3&&r&&Object.defineProperty(e,s,r),r},n=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(n,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.CoverPopup=void 0;const o=s(0),r=s(1),a=s(2),l=s(8);let c=class extends o.Component{constructor(){super(...arguments),this.m_state="closed",this._open=()=>n(this,void 0,void 0,(function*(){"closed"===this.m_state&&(this.m_state="opening",yield l.wait(100),this.m_state="open")})),this._close=()=>n(this,void 0,void 0,(function*(){"open"===this.m_state&&(this.m_state="closing",yield l.wait(400),this.props.onClosed(),this.m_state="closed")}))}componentDidUpdate(t){this.props.view!==t.view&&(this.props.view?this._open():this._close())}render(){return o.createElement("div",{className:this.props.className+" "+this.m_state},this.props.children)}};i([r.observable],c.prototype,"m_state",void 0),c=i([a.observer],c),e.CoverPopup=c},function(t,e,s){t.exports=s(23)},function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});const i=s(10),n=s(0),o=s(26),r=s(5),a=s(6),l=s(27);i.setConfig({ErrorOverlay:t=>n.createElement("div",null)});const c={clear:r.App.pub_clear,importLink:l.importLink,importHTML:l.importHTML};let u;u=s(28);let p=!1;const d=u,h=d.default,m=d.AppProvider,_=d.appContext;c.set=(t,e,s)=>{r.App.pub_set(t,e,s),_.setData(t)},c.render=()=>{r.App.pub_initAudio(),o.render(n.createElement(m,null,n.createElement(h,null)),document.getElementById("wrap"))},c.init=(t,e,s,i,n,o)=>{r.App.pub_load(t,null,e,s,i,n,o)},c.start=()=>{p=!0,setTimeout(()=>_.start(),500)},c.receive=t=>{if(4===t.type){const e=t.data;p?e&&e.id&&""!==e.id&&(r.App.isStarted?a.sendPADToID(e.id,0,null):a.sendPADToID(e.id,1,null)):r.App.pub_addInitedStudent(e)&&(p||(p=!0,_.start()))}else _.receive(t)},c.teachingTool=t=>{},c.notifyNaviInfo=(t,e,s,i,n,o)=>{_.notifyNaviInfo(t,e,s,i,n,o)},c.notifyBookCaptureInfo=t=>{_.notifyBookCaptureInfo(t)},c.notifyUploadToServerResult=t=>{_.uploaded(t)},c.notifyUploadToServerMultiResult=t=>{_.multiUploaded(t)},c.notifyAlert=t=>{_.notifyAlert(t)},c.notifyPenToolState=(t,e)=>{_.notifyPenToolState(t,e)},c.notifyHamburgerMenuClicked=t=>{_.notifyHamburgerMenuClicked(t)},c.callThreeminState=()=>{_.callThreeminState()},s(65),t.app_o=c}).call(this,s(24))},function(t,e){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(t){"object"==typeof window&&(s=window)}t.exports=s},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,n=(i=s(0))&&"object"==typeof i&&"default"in i?i.default:i;function o(t){return o.warnAboutHMRDisabled&&(o.warnAboutHMRDisabled=!0,console.error("React-Hot-Loader: misconfiguration detected, using production version in non-production environment."),console.error("React-Hot-Loader: Hot Module Replacement is not enabled.")),n.Children.only(t.children)}o.warnAboutHMRDisabled=!1;var r=function t(){return t.shouldWrapWithAppContainer?function(t){return function(e){return n.createElement(o,null,n.createElement(t,e))}}:function(t){return t}};r.shouldWrapWithAppContainer=!1;e.AppContainer=o,e.hot=r,e.areComponentsEqual=function(t,e){return t===e},e.setConfig=function(){},e.cold=function(t){return t},e.configureComponent=function(){}},function(t,e){t.exports=ReactDOM},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.importLink=e.importHTML=void 0,e.importHTML=function(t){return new Promise((e,s)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="document",i.onload=t=>{if(!t)return;const n=i.response;n&&n.body&&n.body.firstElementChild?e(n.body.firstElementChild):n&&n.documentElement?e(n.documentElement):s("error")},i.onerror=t=>{s(t)},i.send(null)})},e.importLink=function(t,e){return new Promise((e,s)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="document",i.onload=t=>{if(!t)return;const s=i.response;e(s)},i.onerror=t=>{s(t)},i.send(null)})}},function(t,e,s){"use strict";(function(t){var i=this&&this.__decorate||function(t,e,s,i){var n,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(e,s,r):n(e,s))||r);return o>3&&r&&Object.defineProperty(e,s,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.appContext=e.AppProvider=void 0;const n=s(0),o=s(2),r=s(10),a=(s(7).default,s(30)),l=s(31);s(32),s(33);const c=s(34);Object.defineProperty(e,"AppProvider",{enumerable:!0,get:function(){return c.TeacherProvider}}),Object.defineProperty(e,"appContext",{enumerable:!0,get:function(){return c.tContext}});const u=s(55);let p=class extends n.Component{render(){const{state:t,actions:e}=this.props,s=t.viewDiv;return n.createElement(n.Fragment,null,n.createElement("div",{className:"content-container"},n.createElement("div",{className:"content-wrapper",style:{left:("direction"===s?0:-1280)+"px"}},n.createElement("div",null,n.createElement(a.default,{className:"video-direction",view:"direction"===s,on:t.directionON,isTeacher:!0,lesson:e.getCurriculum(),bookId:t.bookid,subtitle:"Learning the Basics",poster_url:"/content/mathalive_lib/MA/independent_practice_r/common/bg_direction.jpg",video_url:"/content/mathalive_lib/MA/independent_practice_r/common/mv_independent_practice.mp4",video_frame:125,onEndStart:e.onDirectionEndStart,onEnd:e.onDirectionEnded,audio_url:"/content/mathalive_lib/mp3/5_IP.mp3"},n.createElement("div",{className:"lesson"},""))),n.createElement("div",null,n.createElement(u.default,{view:"content"===s&&"practice"===t.prog,state:t,actions:e})))),n.createElement(l.Navi,Object.assign({},t.navi,{onLeftClick:e.naviLeft,onRightClick:e.naviRight})))}};p=i([o.observer],p);const d=c.useTeacher(t=>n.createElement(o.Observer,null,()=>n.createElement(p,{state:t.state,actions:t.actions})));e.default=r.hot(t)(d)}).call(this,s(29)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var n,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(e,s,r):n(e,s))||r);return o>3&&r&&Object.defineProperty(e,s,r),r},n=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(n,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=s(0),r=s(1),a=s(2),l=s(8);let c=class extends o.Component{constructor(t){super(t),this.m_on=!1,this.m_showMathKit=!1,this.bookInfo=[],this.curIndex=0,this._list=[],this._onClick=()=>{this.props.isTeacher&&this._off()},this._off=()=>n(this,void 0,void 0,(function*(){this.props.view&&this.m_on&&(this.m_on=!1,this.props.onEndStart&&this.props.onEndStart(),yield l.wait(500),this.props.view&&!this.m_on&&this.props.onEnd&&this.props.onEnd())})),this.m_on=t.view&&t.on}_on(){return n(this,void 0,void 0,(function*(){this.m_on=!0}))}componentWillReceiveProps(t){if(t.lesson&&this.props.lesson!==t.lesson||this.props.view!==t.view){for(;this.bookInfo.length>0;)this.bookInfo.pop();t.lesson&&t.lesson.childrenList&&t.lesson.childrenList.length>0&&t.lesson.childrenList.map((e,s)=>{try{if(e.book){e.book.id===t.bookId&&(this.curIndex=this.bookInfo.length);let s=e.depth_name?e.depth_name:"";s=s.replace(/\&lt;/g,"<"),s=s.replace(/\&gt;/g,">"),this.bookInfo.push({bookName:e.name?e.name:"",id:e.id,lesson:t.lesson?t.lesson.name:"",subtitle:s})}}catch(t){alert("A ee  "+JSON.stringify(t))}})}}componentDidUpdate(t){this.props.view?t.view?this.props.on&&!t.on?this._on():!this.props.on&&t.on&&this._off():this.props.on?this._on():this.m_on=!1:this.m_on=!1}render(){const{isTeacher:t,subtitle:e}=this.props,s=[];s.push(this.props.className);const i=document.querySelector(".bgm");return this.props.view?(this.m_on&&s.push("on"),i&&i.play()):(s.push("hide"),i&&(i.pause(),i.currentTime=0)),o.createElement("div",{className:s.join(" "),onClick:this._onClick},t&&this.bookInfo&&o.createElement("span",{className:"concept_name"},this.bookInfo.length>0?this.bookInfo[this.curIndex].lesson:""),o.createElement("div",{className:"progress_dot"},t&&this.bookInfo&&this.bookInfo.map((t,e)=>o.createElement("span",{key:"q_"+e,className:this.curIndex===e?"on":""}))),o.createElement("div",{className:"video"},o.createElement("video",{muted:!0,autoPlay:!0,poster:this.props.poster_url?this.props.poster_url:void 0},o.createElement("source",{src:this.props.video_url,type:"video/mp4"}),o.createElement("strong",null,"Your browser does not support the video tag."))),o.createElement("div",{className:"text"},o.createElement("div",{className:"t1"},this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].bookName:""),t&&o.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].subtitle:""}}),!t&&o.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:0===e.length&&this.bookInfo[this.curIndex]?this.bookInfo[this.curIndex].subtitle:e}})),o.createElement("audio",{className:"bgm",autoPlay:!0,src:this.props.audio_url?this.props.audio_url:void 0}))}};i([r.observable],c.prototype,"m_on",void 0),i([r.observable],c.prototype,"_list",void 0),i([r.action],c.prototype,"_off",void 0),c=i([a.observer],c),e.default=c},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var n,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(e,s,r):n(e,s))||r);return o>3&&r&&Object.defineProperty(e,s,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.Navi=void 0;const n=s(0),o=s(1),r=s(2),a=s(9);let l=class extends n.Component{constructor(t){super(t),this.m_on=!1,this.m_isStarted=!1,this._onClick=t=>{this.m_on=!0}}componentDidUpdate(t){this.m_isStarted||!this.props.view||t.view||(this.m_isStarted=!0,this.m_on=!0)}render(){const t=this.m_on?void 0:"off",e={visibility:this.props.view?"visible":"hidden"};return n.createElement(n.Fragment,null,n.createElement("div",{id:"common_navi_left",className:t,style:e},n.createElement("div",null,n.createElement("div",{onClick:this._onClick},n.createElement(a.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),n.createElement(a.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))),n.createElement("div",{id:"common_navi_right",className:t,style:e},n.createElement("div",null,n.createElement("div",{onClick:this._onClick},n.createElement(a.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),n.createElement(a.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))))}};i([o.observable],l.prototype,"m_on",void 0),l=i([r.observer],l),e.Navi=l},function(t,e,s){"use strict";s.r(e)},function(t,e,s){"use strict";s.r(e)},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var n,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(e,s,r):n(e,s))||r);return o>3&&r&&Object.defineProperty(e,s,r),r},n=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(n,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.SENDPROG=e.useTeacher=e.tContext=e.TeacherConsumer=e.TeacherProvider=e.TeacherContext=void 0;const o=s(0),r=s(4),a=s(1),l=s(5),c=s(6),u=s(35),p=s(37);var d;!function(t){t[t.READY=0]="READY",t[t.SENDING=1]="SENDING",t[t.SENDED=2]="SENDED",t[t.STOPED=3]="STOPED",t[t.COMPLETE=4]="COMPLETE"}(d||(d={})),e.SENDPROG=d;class h extends u.TeacherContextBase{constructor(){super(),this._resetQuizResultFnc=null,this._quizResultFnc=null,this.state.prog="practice",this.state.quizResult=[],this.state.frIdx=0,this.state.dpGrade="",this.state.dpModule="",this.state.topicDepthItemIdx=0,this.state.conceptDepthItemIdx=0,this.state.mathDomainSubCd="",this.state.course1MtlSeq=0,this.state.course2MtlSeq=0,this.state.course3MtlSeq=0,this.state.course4MtlSeq=0,this.actions.getData=()=>this._data,this.actions.getCurriculum=()=>this._curriculum,this.actions.gotoDirection=()=>this._setViewDiv("direction"),this.actions.gotoNextBook=()=>{c.sendLauncher(9,null)},this.actions.resetQuizResultFnc=t=>{this._resetQuizResultFnc=t},this.actions.setQuizResultFnc=t=>{this._quizResultFnc=t}}_setViewDiv(t){super._setViewDiv(t)}receive(t){if(super.receive(t),11===t.type&&t.data){const e=t.data;if("practice_result"===e.msgtype){const t=e,s=JSON.parse(t.result);let i=r.findIndex(this.state.quizResult[t.idx],{studentid:s.studentid});i>-1?this.state.quizResult[t.idx][i]=s:this.state.quizResult[t.idx].push(s),this._quizResultFnc&&this._quizResultFnc(t)}}}setData(t){this._data={items:[],quizs:[]},this._data.items=t.items}sendStartToAddOn(){return n(this,void 0,void 0,(function*(){let t=new FormData;l.App.isDvlp&&(this.state.classid=1398,this.state.curriculumid=23832),t.append("clsIdx",this.state.classid+""),t.append("depthItemIdx",this.state.curriculumid+""),t.append("studyCd ","IP2"),console.log("sendStartToAddOn formdata",this.state.classid+"",this.state.curriculumid+"","IP2"),console.log("sendStartToAddOn postURL",l.App.addOnHost+"/ma/question/start"),yield p.default({method:"post",url:l.App.addOnHost+"/ma/question/start",data:t}).then(t=>{t.data.success?t.data.additionalData?(this.state.frIdx=t.data.additionalData.frIdx,this.state.dpGrade=t.data.additionalData.dpGrade,this.state.dpModule=t.data.additionalData.dpModule,this.state.topicDepthItemIdx=t.data.additionalData.topicDepthItemIdx,this.state.conceptDepthItemIdx=t.data.additionalData.conceptDepthItemIdx,this.state.mathDomainSubCd=t.data.additionalData.mathDomainSubCd,this.state.course1MtlSeq=t.data.additionalData.course1MtlSeq,this.state.course2MtlSeq=t.data.additionalData.course2MtlSeq,this.state.course3MtlSeq=t.data.additionalData.course3MtlSeq,this.state.course4MtlSeq=t.data.additionalData.course4MtlSeq,console.log("/ma/question/start response",t.data.additionalData,this.state.frIdx,this.state.dpGrade,this.state.dpModule,this.state.topicDepthItemIdx,this.state.conceptDepthItemIdx,this.state.mathDomainSubCd,this.state.course1MtlSeq,this.state.course2MtlSeq,this.state.course3MtlSeq,this.state.course4MtlSeq),this.setDataFromAPI()):console.log("no additionalData"):console.log("Error",t)}).catch(t=>{console.log("Error",t)})}))}setDataFromAPI(){return n(this,void 0,void 0,(function*(){let t="";for(let e=0;e<this._data.items.length;e++)""===t?t=this._data.items[e].quizSeq+"":t+=","+this._data.items[e].quizSeq,this.state.quizResult[e]=[];l.App.isDvlp&&(this.state.classid=1398,this.state.curriculumid=23832),console.log("getURL",l.App.addOnHost+"/ma/question/"+t+"?clsIdx="+this.state.classid+"&depthItemIdx="+this.state.curriculumid+"&studyCd=IP2"),yield p.default.get(l.App.addOnHost+"/ma/question/"+t+"?clsIdx="+this.state.classid+"&depthItemIdx="+this.state.curriculumid+"&studyCd=IP2").then(t=>{if(!t.data.success)return;let e=[],s=[];t.data.resultData.map((t,i)=>{let n=t;0===n.dpMainSeq?e.push(n):s.push(n)}),e.map((t,e)=>{const i=JSON.parse(t.dpAnswer),n=[];for(let t=0;t<i.length;t++){const e=i[t];n.push({basetype:e.base?e.base:0,subtype:e.sub?e.sub:0,basetypename:e.baseName?e.baseName:"",subtypename:e.subName?e.subName:"",matchType:e.matchType?e.matchType:0,answers:e.inputList?e.inputList:[]})}const o={seq:t.seq,url:t.url+"index.html",desc:t.url+"desc.html",thumb:t.url+"thumbnail.png",answers:n,qnumber:e+1,quizKind:0,difiicult:t.dpLevel},r=s.find(e=>e.dpMainSeq===t.seq);if(r){const t=JSON.parse(r.dpAnswer),s=[];for(let e=0;e<t.length;e++){const i=t[e];s.push({basetype:i.base?i.base:0,subtype:i.sub?i.sub:0,basetypename:i.baseName?i.baseName:"",subtypename:i.subName?i.subName:"",matchType:i.matchType?i.matchType:0,answers:i.inputList?i.inputList:[]})}const i={seq:r.seq,url:r.url+"index.html",desc:r.url+"desc.html",thumb:r.url+"thumbnail.png",answers:s,qnumber:e+1,quizKind:1,difiicult:r.dpLevel};this._data.quizs.push(o),this._data.quizs.push(i)}}),this._resetQuizResultFnc&&this._resetQuizResultFnc()}).catch(t=>{console.log("Error",t)})}))}notifyNaviInfo(t,e,s,i,n,o){if(this._curriculum=t,this.state.bookid=e,this.state.classid=s,t.childrenList&&t.childrenList.length>0)for(let s=0;s<t.childrenList.length;s++){const i=t.childrenList[s];if(i&&i.book&&i.book.id===e){this.state.curriculumid=i.id,this.state.bookkey=i.book.key;break}}this.sendStartToAddOn()}}i([a.observable],h.prototype,"state",void 0),i([a.action],h.prototype,"_setViewDiv",null),e.TeacherContext=h;const m=new h;e.tContext=m;const{Provider:_,Consumer:f}=o.createContext(m);e.TeacherConsumer=f;class b extends o.Component{render(){return o.createElement(_,{value:m},this.props.children)}}e.TeacherProvider=b,e.useTeacher=function(t){return function(e){return o.createElement(f,null,e=>o.createElement(t,Object.assign({},e)))}}},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var n,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(e,s,r):n(e,s))||r);return o>3&&r&&Object.defineProperty(e,s,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.TeacherContextBase=void 0;const n=s(1),o=s(5),r=s(6),a=s(36);class l{constructor(){this._naviLeftFnc=null,this._naviRightFnc=null,this.state={viewDiv:"direction",directionON:!1,navi:{view:!1,enableLeft:!1,enableRight:!1},svg_bg:{view:!0,bPlay:!1,viewCharactor:!0},loading:!1,retCnt:0,numOfStudent:0,bookid:0,bookkey:0,curriculumid:0,classid:0,unitid:0,lessonid:0,conceptLibiary:{view:!1,datatype:"grade",resultmode:!1}},this.actions={onDirectionEndStart:()=>{"direction"===this.state.viewDiv&&r.sendPAD(3,null)},onDirectionEnded:()=>{"direction"===this.state.viewDiv&&this._setViewDiv("content"),o.App.isStarted=!0},setNaviView:t=>{this.state.navi.view=t},setNavi:(t,e)=>{this.state.navi.enableLeft=t,this.state.navi.enableRight=e},setNaviFnc:(t,e)=>{this._naviLeftFnc=t,this._naviRightFnc=e},naviLeft:()=>{"direction"===this.state.viewDiv?r.sendLauncher(8,null):(o.App.pub_playBtnPage(),this._naviLeftFnc?this._naviLeftFnc():this._setViewDiv("direction"))},naviRight:()=>{"direction"===this.state.viewDiv?(o.App.pub_playBtnPage(),this.state.directionON=!1):(o.App.pub_playBtnPage(),this._naviRightFnc?this._naviRightFnc():r.sendLauncher(9,null))},setRetCnt:t=>{t>this.state.numOfStudent&&(t=this.state.numOfStudent),this.state.retCnt=t},setNumOfStudent:t=>{this.state.numOfStudent=t},setConcepLibaryView:t=>{this.state.conceptLibiary.view=t},setConcepLibaryDataType:t=>{this.state.conceptLibiary.datatype=t},setConcepLibaryResultMode:t=>{this.state.conceptLibiary.resultmode=t},setLoading:t=>{r.showTLoading(t)}},this.notifyBookCaptureInfo=t=>{},this.clickSendButton=()=>{},this.notifyRecordData=(t,e)=>{}}_setViewDiv(t,e){this.state.viewDiv!==t&&(e||o.App.pub_stop(),"direction"===t?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0,r.sendLauncher(5,null),r.sendPAD(1,null),this.state.navi.view=!0,this.state.navi.enableLeft=o.App.prevBook,this.state.navi.enableRight=!0,this._naviLeftFnc=null,this._naviRightFnc=null,this.state.conceptLibiary.view=!1,this.state.conceptLibiary.datatype="grade",this.state.conceptLibiary.resultmode=!1):(this.state.directionON=!1,this.state.svg_bg.bPlay=!1,this.state.svg_bg.viewCharactor=!1,r.sendLauncher(6,null),r.sendPAD(0,null)),this._naviLeftFnc=null,this._naviRightFnc=null,this.state.numOfStudent=0,this.state.retCnt=0,this.state.viewDiv=t)}start(){if("direction"===this.state.viewDiv&&(this.state.directionON=!0,this.state.navi.view=!0,this.state.navi.enableLeft=o.App.prevBook,this.state.navi.enableRight=!0,this.state.svg_bg.bPlay=!0,r.sendLauncher(5,null),r.sendPAD(1,null)),o.App.isDvlp){0;let t="";if(t="M0408",""===t)return;let e={id:1e3,code:"",depth:4,depth_name:a.parseDept4Div(t),info:"",div:t,subDiv:"",name:"M0408"===t?"Identify the Number 0, Read and Write 0":"",thumbnail:"",cmsLevel:"",childrenList:[]},s="",i="",n="";if("Concept"===a.parseDept4Div(t))for(let t=0;t<3;t++){0===t?(s="M0503",i="M050303",n=a.parseDept5SubDiv("M050303")):1===t?(s="M0503",i="M050304",n=a.parseDept5SubDiv("M050304")):2===t&&(s="M0506",i="M050601",n=a.parseDept5SubDiv("M050601"));let o={id:16815+t,code:"",depth:5,depth_name:n,info:"",div:s,subDiv:i,name:n,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:9e4+t,path:"/content/"+(5787+t),viewMode:2,key:5280+t,cmsKey:5787+t,completed:0,updatetime:""}};e.childrenList.push(o)}else if("Problem"===a.parseDept4Div(t))for(let t=0;t<3;t++){0===t?(s="M0505",i="M050504",n="Reasoning (1)"):1===t?(s="M0505",i="M050504",n=a.parseDept5SubDiv("M050504")):2===t&&(s="M0506",i="M050602",n=a.parseDept5SubDiv("M050602"));let o={id:16815+t,code:"",depth:5,depth_name:n,info:"",div:s,subDiv:i,name:n,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:8e4+t,path:"/content/"+(5787+t),viewMode:2,key:5280+t,cmsKey:5787+t,completed:0,updatetime:""}};e.childrenList.push(o)}else if("Concept Learning"===a.parseDept4Div(t))for(let t=0;t<12;t++){0===t?(s="M0501",i="M050101",n="WarmUp Quiz"):1===t?(s="M0501",i="M050101",n="I SPY"):2===t?(s="M0501",i="M050101",n="Hit a Mole"):3===t?(s="M0506",i="M050601",n="Memory Game"):4===t?(s="M0506",i="M050601",n="Math Talk"):5===t?(s="M0501",i="M050102",n="Learning Objectives"):6===t?(s="M0502",i="M050202",n="Concept Acivity"):7===t?(s="M0502",i="M050203",n="Concept Tool"):8===t?(s="M0502",i="M050204",n="Concept Summary"):9===t?(s="M0505",i="M050501",n="Independent Practice"):10===t?(s="M0505",i="M050502",n="Extended Practice"):11===t&&(s="M0505",i="M050505",n="CL Strategy");let o={id:16815+t,code:"",depth:5,depth_name:n,info:"",div:s,subDiv:i,name:n,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:1e4+t,path:"/content/"+(5787+t),viewMode:2,key:5280+t,cmsKey:5787+t,completed:0,updatetime:""}};e.childrenList.push(o)}else if("Topic Learning"===a.parseDept4Div(t))for(let t=0;t<1;t++){0===t&&(s="M0507",i="M050701",n=a.parseDept5SubDiv("M050701"));let o={id:16815+t,code:"",depth:5,depth_name:n,info:"",div:s,subDiv:i,name:n,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:2e4+t,path:"/content/"+(5787+t),viewMode:2,key:5280+t,cmsKey:5787+t,completed:0,updatetime:""}};e.childrenList.push(o)}else if("Module Learning"===a.parseDept4Div(t))for(let t=0;t<3;t++){0===t?(s="M0508",i="M050801",n=a.parseDept5SubDiv("M050801")):1===t?(s="M0508",i="M050803",n=a.parseDept5SubDiv("M050803")):2===t&&(s="M0508",i="M050804",n=a.parseDept5SubDiv("M050804"));let o={id:16815+t,code:"",depth:5,depth_name:n,info:"",div:s,subDiv:i,name:n,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:3e4+t,path:"/content/"+(5787+t),viewMode:2,key:5280+t,cmsKey:5787+t,completed:0,updatetime:""}};e.childrenList.push(o)}else if("Module Test"===a.parseDept4Div(t))for(let t=0;t<1;t++){0===t&&(s="M0509",i="M050905",n=a.parseDept5SubDiv("M050905"));let o={id:16815+t,code:"",depth:5,depth_name:n,info:"",div:s,subDiv:i,name:n,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:4e4+t,path:"/content/"+(5787+t),viewMode:2,key:5280+t,cmsKey:5787+t,completed:0,updatetime:""}};e.childrenList.push(o)}let o=1e4;o=10009,this.notifyNaviInfo(e,o,1)}else{let t="";0,r.getNaviInfo(t)}}receive(t){}uploaded(t){}multiUploaded(t){}notify(t){}notifyRecorded(t){}notifyVideoRecord(t){}notifyNaviInfo(t,e,s,i,n,o){}notifyPenToolState(t,e){}notifyLiveGivePopupClose(){}notifyAlert(t){}notifyHamburgerMenuClicked(t){}callThreeminState(){}}i([n.observable],l.prototype,"state",void 0),i([n.action],l.prototype,"_setViewDiv",null),i([n.action],l.prototype,"start",null),e.TeacherContextBase=l},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseClassColor=e.parseDept5SubDiv=e.parseDept5Div=e.parseDept4Div=e.parseDept3Div=void 0,e.parseDept3Div=function(t){return"M0301"===t?"Number&Operations":"M0302"===t?"Measurement&Date":"M0303"===t?"Operations&Algebra":"M0304"===t?"Geometry":"M0305"===t?"Topic":"M0306"===t?"Module Review":""},e.parseDept4Div=function(t){return"M0401"===t?"Concept":"M0402"===t?"Problem":"M0403"===t?"Strategy":"M0404"===t?"Number&Operations":"M0405"===t?"Measurement&Date":"M0406"===t?"Operations&Algebra":"M0407"===t?"Geometry":"M0408"===t?"Concept Learning":"M0409"===t?"Topic Learning":"M0410"===t?"Module Learning":"M0411"===t?"Module Test":""},e.parseDept5Div=function(t){return"M0501"===t?"Warm-Up":"M0502"===t?"Concept Learning":"M0503"===t?"Concept Learning 2":"M0504"===t?"Concept Learning 3":"M0505"===t?"Problem Solving":"M0506"===t?"Wrap-Up":"M0507"===t?"Topic Learning":"M0508"===t?"Module Learning":"M0509"===t?"Module Test":""},e.parseDept5SubDiv=function(t){return"M050101"===t?"Warm-Up Activity":"M050102"===t?"Learning Objectives":"M050103"===t?"Concept Summary":"M050201"===t?"Concept Learning":"M050202"===t?"Concept Activity":"M050203"===t?"Concept Tool":"M050204"===t?"Concept Summary":"M050301"===t?"Activity":"M050302"===t?"Concept Tool":"M050303"===t?"Summary":"M050304"===t?"Check":"M050401"===t?"Activity":"M050402"===t?"Concept Tool":"M050403"===t?"Summary":"M050404"===t?"Check":"M050501"===t?"Independent Practice":"M050502"===t?"Extended Practice":"M050503"===t?"Strategy":"M050504"===t?"Reasoning (2)":"M050505"===t?"Strategy":"M050601"===t?"Wrap-Up Activity":"M050602"===t?"Portfolio":"M050701"===t?"Topic Strategy":"M050702"===t?"Adaptive Learning":"M050801"===t?"Module Review":"M050802"===t?"Adaptive Learning":"M050803"===t?"Module Portfolio":"M050804"===t?"Module Strategy":"M050901"===t?"Assessment":"M050902"===t?"Module Portfolio":"M050903"===t?"Assessment Review":"M050904"===t?"STEAM Activity":"M050905"===t?"STEAM Portfolio":""},e.parseClassColor=function(t){return"B62001"===t?"Black":"White"}},function(t,e,s){t.exports=s(38)},function(t,e,s){"use strict";var i=s(3),n=s(12),o=s(39),r=s(18);function a(t){var e=new o(t),s=n(o.prototype.request,e);return i.extend(s,o.prototype,e),i.extend(s,e),s}var l=a(s(15));l.Axios=o,l.create=function(t){return a(r(l.defaults,t))},l.Cancel=s(19),l.CancelToken=s(53),l.isCancel=s(14),l.all=function(t){return Promise.all(t)},l.spread=s(54),t.exports=l,t.exports.default=l},function(t,e,s){"use strict";var i=s(3),n=s(13),o=s(40),r=s(41),a=s(18);function l(t){this.defaults=t,this.interceptors={request:new o,response:new o}}l.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[r,void 0],s=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)s=s.then(e.shift(),e.shift());return s},l.prototype.getUri=function(t){return t=a(this.defaults,t),n(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(t){l.prototype[t]=function(e,s){return this.request(i.merge(s||{},{method:t,url:e}))}})),i.forEach(["post","put","patch"],(function(t){l.prototype[t]=function(e,s,n){return this.request(i.merge(n||{},{method:t,url:e,data:s}))}})),t.exports=l},function(t,e,s){"use strict";var i=s(3);function n(){this.handlers=[]}n.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},n.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},n.prototype.forEach=function(t){i.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=n},function(t,e,s){"use strict";var i=s(3),n=s(42),o=s(14),r=s(15);function a(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return a(t),t.headers=t.headers||{},t.data=n(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||r.adapter)(t).then((function(e){return a(t),e.data=n(e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(a(t),e&&e.response&&(e.response.data=n(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,s){"use strict";var i=s(3);t.exports=function(t,e,s){return i.forEach(s,(function(s){t=s(t,e)})),t}},function(t,e){var s,i,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(t){if(s===setTimeout)return setTimeout(t,0);if((s===o||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:o}catch(t){s=o}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(t){i=r}}();var l,c=[],u=!1,p=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):p=-1,c.length&&h())}function h(){if(!u){var t=a(d);u=!0;for(var e=c.length;e;){for(l=c,c=[];++p<e;)l&&l[p].run();p=-1,e=c.length}l=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function _(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)e[s-1]=arguments[s];c.push(new m(t,e)),1!==c.length||u||a(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=_,n.addListener=_,n.once=_,n.off=_,n.removeListener=_,n.removeAllListeners=_,n.emit=_,n.prependListener=_,n.prependOnceListener=_,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,s){"use strict";var i=s(3);t.exports=function(t,e){i.forEach(t,(function(s,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=s,delete t[i])}))}},function(t,e,s){"use strict";var i=s(17);t.exports=function(t,e,s){var n=s.config.validateStatus;!n||n(s.status)?t(s):e(i("Request failed with status code "+s.status,s.config,null,s.request,s))}},function(t,e,s){"use strict";t.exports=function(t,e,s,i,n){return t.config=e,s&&(t.code=s),t.request=i,t.response=n,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,s){"use strict";var i=s(48),n=s(49);t.exports=function(t,e){return t&&!i(e)?n(t,e):e}},function(t,e,s){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,s){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,s){"use strict";var i=s(3),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,s,o,r={};return t?(i.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=i.trim(t.substr(0,o)).toLowerCase(),s=i.trim(t.substr(o+1)),e){if(r[e]&&n.indexOf(e)>=0)return;r[e]="set-cookie"===e?(r[e]?r[e]:[]).concat([s]):r[e]?r[e]+", "+s:s}})),r):r}},function(t,e,s){"use strict";var i=s(3);t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a");function n(t){var i=t;return e&&(s.setAttribute("href",i),i=s.href),s.setAttribute("href",i),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:"/"===s.pathname.charAt(0)?s.pathname:"/"+s.pathname}}return t=n(window.location.href),function(e){var s=i.isString(e)?n(e):e;return s.protocol===t.protocol&&s.host===t.host}}():function(){return!0}},function(t,e,s){"use strict";var i=s(3);t.exports=i.isStandardBrowserEnv()?{write:function(t,e,s,n,o,r){var a=[];a.push(t+"="+encodeURIComponent(e)),i.isNumber(s)&&a.push("expires="+new Date(s).toGMTString()),i.isString(n)&&a.push("path="+n),i.isString(o)&&a.push("domain="+o),!0===r&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,s){"use strict";var i=s(19);function n(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var s=this;t((function(t){s.reason||(s.reason=new i(t),e(s.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var t;return{token:new n((function(e){t=e})),cancel:t}},t.exports=n},function(t,e,s){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var n,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(e,s,r):n(e,s))||r);return o>3&&r&&Object.defineProperty(e,s,r),r},n=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(n,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=s(0),r=s(2),a=s(1),l=s(4),c=s(5),u=s(56),p=s(6),d=s(8),h=s(58),m=s(59),_=s(60),f=s(20),b=s(61),g=s(62),v=s(63),y=s(64),w=s(4);let k=class extends o.Component{constructor(){super(...arguments),this._type="check"}componentWillReceiveProps(t){}componentDidUpdate(t){this.props.view&&t.view}render(){const{view:t,totalStudents:e,submitStudents:s,checkList:i,retryList:n,prog:r,curIdx:a}=this.props;return o.createElement(o.Fragment,null,o.createElement("button",{className:"btn_check"+(i?" on":""),style:{display:t&&!n&&r<2?"":"none"},onClick:this.props.oncheckClick.bind(this,a,!i)}),o.createElement("button",{className:"btn_retry",style:{display:t&&n&&r<2?"":"none"},onClick:this.props.onretryClick.bind(this,a)}),o.createElement("div",{className:"progressWrap"},o.createElement("button",{className:"btn_progress",style:{display:t&&r>=2?"":"none"},onClick:this.props.onStop},o.createElement("span",null,`${s}/${e}`))))}};i([a.observable],k.prototype,"_type",void 0),k=i([r.observer],k);let E=class extends o.Component{constructor(t){super(t),this._curIdx=0,this._quizIdx=0,this._isEnd=!1,this._prog=0,this._showQuizDesc=[],this._viewQuizList=!1,this._viewCorrectGraph=!1,this._onQuizList=!0,this._onSummaryResult=!1,this._quizResults=[],this._submitStudents=[],this._viewSubmitList=!1,this._viewProblem=!1,this._viewDesc=!1,this._viewAlert=!1,this._viewCheckAlert=!1,this._type=1,this._submittype=[],this._checkedList=[],this._retryList=[],this._initProblemList=!1,this._submitStudentCnt=0,this._studentqcount=[],this.ifr=[],this.ifr_desc=[],this.bgColors=[],this.msg="",this.retryNumber=-1,this._totalUsers=0,this._studentlist=[],this._checkProsessing=()=>{let t=!1;for(let e=0;e<this._retryList.length;e++)this._retryList[e]&&(t=!0);return t},this._init=()=>{const{quizs:t}=this.props.actions.getData();t.map((t,e)=>{this._submitStudents[e]=[],this._showQuizDesc[e]=!1,this._quizResults[e]={seq:t.seq,thumb:t.thumb,url:t.url,allusers:0,submitusers:0,heart2:0,heart1:0,heart0:0,nosubmit:0,qnumber:t.qnumber,quizKind:t.quizKind,difiicult:t.difiicult,isProgress:!1},this._submittype[e]=""});for(let e=0;e<t.length;e++)this._checkedList[e]=!1,this._retryList[e]=!1;this._prog=0,this._submitStudentCnt=0,this._totalUsers=0},this.onExitBook=()=>{this._prog>=1&&this._prog<=3||(p.clearTPenTool(),p.exitBook())},this.onGotoBook=(t,e)=>{this._prog>=1&&this._prog<=3||(p.clearTPenTool(),p.gotoBook(t,e))},this.onCloseSubmitList=()=>{this._viewSubmitList=!1},this.selectQuiz=t=>{this.props.view&&(c.App.pub_playBtnTab(),this._curIdx=t,this._viewQuizList=!1,this.initContent(t))},this.clickSubmitlistOfQuizlist=t=>{this.props.view&&(c.App.pub_playBtnTab(),this._quizIdx=t,this._viewSubmitList=!0)},this.clickSubmitItemofQuizList=t=>{c.App.pub_playBtnTab(),this._submittype[this._quizIdx]=t},this._submitlistClick=(t,e)=>{c.App.pub_playBtnTab(),this._quizIdx=e,this._viewSubmitList=!0},this.backToList=()=>{this._viewQuizList=!0},this.toggleQuizList=()=>{this._onQuizList=!this._onQuizList},this.toggleSummaryResult=()=>{this._onSummaryResult=!this._onSummaryResult},this._onPrev=()=>{this.props.view&&0!==this._curIdx&&(c.App.pub_playBtnTab(),this._viewDesc&&this.showProblem(),p.clearTPenTool(),this._curIdx-=1,this.initContent(this._curIdx),this.ifr&&this.ifr[this._curIdx+1]&&this.sendPostMessage("reload",null,this._curIdx+1))},this._onNext=()=>{this.props.view&&this._curIdx!==this._quizResults.length-1&&(c.App.pub_playBtnTab(),this._viewDesc&&this.showProblem(),p.clearTPenTool(),this._curIdx+=1,this.initContent(this._curIdx),this.ifr&&this.ifr[this._curIdx-1]&&this.sendPostMessage("reload",null,this._curIdx-1))},this._offAlert=()=>{this._viewAlert=!1},this._headerClick=t=>{this._type=t},this._checkClick=(t,e)=>{this._checkedList[t]=e},this._retry=()=>{const{quizs:t}=this.props.actions.getData();if(this._prog>0)return;if(this._retryList[this.retryNumber]=!1,this._submittype[this.retryNumber]="",this._quizResults[this.retryNumber]={seq:t[this.retryNumber].seq,thumb:t[this.retryNumber].thumb,url:t[this.retryNumber].url,allusers:this._totalUsers,submitusers:0,heart2:0,heart1:0,heart0:0,nosubmit:this._totalUsers,qnumber:t[this.retryNumber].qnumber,quizKind:t[this.retryNumber].quizKind,difiicult:t[this.retryNumber].difiicult,isProgress:!1},this._submitStudents[this.retryNumber]=[],this._studentqcount.length>0)for(let t=0;t<this._studentqcount.length;t++)this._studentqcount[t].count=0;this._checkProsessing()||(this._isEnd=!1),this._viewAlert=!1},this._askRetry=t=>{this.msg="Retry?",this._viewAlert=!0,this.retryNumber=t},this._onAlertPopup=()=>{},this._onType=(t,e)=>{this._submittype[e]=t},this._openPop=()=>{this._prog>=3||(this.msg="Force Quit?",this._viewAlert=!0)},this.showQuizList=()=>{c.App.pub_playBtnTab(),this.showProblem(),this._viewQuizList=!0,this.ifr&&this.ifr[this._curIdx]&&this.sendPostMessage("reload",null,this._curIdx)},this._onViewCheck=()=>{this._viewCheckAlert=!0,this._prog=1},this._onCheckAlertOk=()=>{this._viewCheckAlert=!1,this._prog=0},this._onSendStop=()=>n(this,void 0,void 0,(function*(){if(!this.props.view)return;if(2!==this._prog)return;if(-1===this._curIdx)return;if(this._prog>=3)return;c.App.pub_playToPad();p.sendPAD(10,{msgtype:"practice_end"}),this._isEnd=!0,this._viewAlert=!1,this._prog=0;for(let t=0;t<this._checkedList.length;t++)this._checkedList[t]&&(this._retryList[t]=!0,this._checkedList[t]=!1);this._submitStudentCnt=0})),this._closeCorrectGraph=()=>{c.App.pub_playBtnTab(),this._viewCorrectGraph=!1,this._viewQuizList=!0},this.showSolution=()=>{c.App.pub_solution_btn_click(),this._viewProblem=!0,this._viewDesc=!0},this.showProblem=()=>{c.App.pub_playBtnTab(),this._viewProblem=!1,this._viewDesc=!1},this.showResult=()=>{c.App.pub_playBtnTab(),this._viewCorrectGraph=!0,this._viewQuizList=!1},this.onIfmContentLoaded=t=>{this.ifr[t]&&this.chanageBackColor(this.bgColors[t%this.bgColors.length],t,!1)},this.onIfmDescLoaded=t=>{this.ifr_desc[t]&&this.chanageBackColor(this.bgColors[t%this.bgColors.length],t,!0)},this._onSend=()=>{if(!this.props.view)return;this._prog=1,this._isEnd=!1,c.App.pub_playToPad();let t=[];this._checkedList.map((e,s)=>{e&&(t.push(this.bgColors[s%this.bgColors.length]),this._quizResults[s].isProgress=e)});const e={msgtype:"practice_send",bookkey:this.props.state.bookkey,classid:this.props.state.classid,curriculumid:this.props.state.curriculumid,checkedList:JSON.stringify(this._checkedList),bgcolorList:JSON.stringify(t),frIdx:this.props.state.frIdx,dpGrade:this.props.state.dpGrade,dpModule:this.props.state.dpModule,topicDepthItemIdx:this.props.state.topicDepthItemIdx,conceptDepthItemIdx:this.props.state.conceptDepthItemIdx,mathDomainSubCd:this.props.state.mathDomainSubCd,course1MtlSeq:this.props.state.course1MtlSeq,course2MtlSeq:this.props.state.course2MtlSeq,course3MtlSeq:this.props.state.course3MtlSeq,course4MtlSeq:this.props.state.course4MtlSeq};p.sendPAD(10,e),this.props.actions.setQuizResultFnc(this._onQuizResult),c.App.pub_reloadStudents(()=>n(this,void 0,void 0,(function*(){if(this.props.view&&1===this._prog){yield d.wait(600),this._prog=2,this._setNavi(),this._totalUsers=c.App.students?c.App.students.length:0;for(let t=0;t<this._totalUsers;t++){l.findIndex(this._studentlist,e=>e.id===c.App.students[t].id)>-1?(this._studentlist[t].id=c.App.students[t].id,this._studentlist[t].name=c.App.students[t].name,this._studentlist[t].nickname=c.App.students[t].nickname,this._studentlist[t].displayMode=c.App.students[t].displayMode?c.App.students[t].displayMode:""):this._studentlist.push({id:c.App.students[t].id,name:c.App.students[t].name,nickname:c.App.students[t].nickname,displayMode:c.App.students[t].displayMode?c.App.students[t].displayMode:""})}this._quizResults.map((t,e)=>{t.allusers=this._totalUsers,t.nosubmit=this._totalUsers})}})))},this._onQuizClick=t=>{let e=l.findIndex(this._quizResults,{seq:t});e>-1&&(this._viewCorrectGraph=!1,this.selectQuiz(e))},this._onQuizResult=t=>{if(!this.props.view)return;if(this._curIdx<0)return;const e=JSON.parse(t.result),s=l.find(c.App.students,{id:e.studentid});if(!s)return;const i=l.findIndex(this._quizResults,{seq:e.contentSeq});if(i<-1||i>this._submitStudents.length-1||i>this._quizResults.length-1)return;const n=this._submitStudents[i].findIndex(t=>t.student.id===e.studentid);if(n>-1)this._submitStudents[i][n].correct=e.correct;else if(this._submitStudents[i].push({student:s,correct:e.correct,trycnt:e.tryCnt,livePoint:0}),this._studentqcount.length>0){let t=this._studentqcount.findIndex(t=>t.id===e.studentid+"");t>=0?this._studentqcount[t].count++:this._studentqcount.push({id:e.studentid+"",count:1})}else this._studentqcount.push({id:e.studentid+"",count:1});this._quizResults[i].allusers=this._totalUsers,this._quizResults[i].submitusers=this._submitStudents[i].length;const o=this._submitStudents[i].filter(t=>!0===t.correct&&1===t.trycnt);this._quizResults[i].heart2=o?o.length:0;const r=this._submitStudents[i].filter(t=>!0===t.correct&&2===t.trycnt);this._quizResults[i].heart1=r?r.length:0;const a=this._submitStudents[i].filter(t=>!1===t.correct&&t.trycnt>1);this._quizResults[i].heart0=a?a.length:0;const u=this._totalUsers-(o.length+r.length+a.length);if(this._quizResults[i].nosubmit=u,t.idx===w.filter(this._checkedList,t=>!0===t).length-1&&(this._submitStudentCnt++,0===this._quizResults[i].nosubmit)){this._isEnd=!0;for(let t=0;t<this._checkedList.length;t++)this._checkedList[t]&&(this._retryList[t]=!0,this._checkedList[t]=!1);this._prog=0,this._submitStudentCnt=0}},this.handlePostMessage=t=>{let e=t.data;"macontent"===e.from&&e.type};const{items:e}=this.props.actions.getData();e.map((t,e)=>{this._submitStudents[e]=[],this._showQuizDesc[e]=!1,this._quizResults[e]={seq:0,thumb:"",url:"",allusers:0,submitusers:0,heart2:0,heart1:0,heart0:0,nosubmit:0,qnumber:0,quizKind:0,difiicult:0,isProgress:!1},this._submittype.push("")});for(let t=0;t<e.length;t++)this._checkedList.push(!1),this._retryList.push(!1);this.props.actions.resetQuizResultFnc(this._init),this.bgColors.push({main:"#ffe9f0",right:"#ffd7e3"}),this.bgColors.push({main:"#ffeaea",right:"#ffdada"}),this.bgColors.push({main:"#ffefe5",right:"#ffdcd9"}),this.bgColors.push({main:"#feeedf",right:"#fddfc4"}),this.bgColors.push({main:"#ffefd9",right:"#ffe2b9"}),this.bgColors.push({main:"#fff7d9",right:"#ffecb9"}),this.bgColors.push({main:"#fbf9db",right:"#f8f7bd"}),this.bgColors.push({main:"#f1fbdc",right:"#e6f8bf"}),this.bgColors.push({main:"#e4fae2",right:"#caf6c9"}),this.bgColors.push({main:"#dff5f2",right:"#bdeae4"}),this.bgColors.push({main:"#e2f7ff",right:"#c0ecfe"}),this.bgColors=this.bgColors.sort(()=>.5-Math.random())}getResultCnt(){let t=!1;for(let e=0;e<this._checkedList.length;e++)if(this._checkedList[e]){t=!0;break}return t}_setNavi(){if(this._viewCorrectGraph)return;let t=this._checkProsessing();this.props.actions.setNaviView(!!this._viewQuizList),this.props.actions.setNavi(!0,!0),this.props.actions.setNaviFnc(()=>{p.clearTPenTool(),this._init(),this._initProblemList=!0,this.props.actions.gotoDirection()},()=>{p.clearTPenTool(),this._isEnd?(this._viewCorrectGraph=!0,this._viewQuizList=!1):0!==this._prog&&t||this.props.actions.gotoNextBook()})}componentDidMount(){window.addEventListener("message",this.handlePostMessage,!1)}componentWillUnmount(){window.removeEventListener("message",this.handlePostMessage,!1)}sendPostMessage(t,e,s){let i={from:"matemplate",to:"macontent",type:t,msg:e};i=JSON.parse(JSON.stringify(i)),s>-1&&this.ifr[s]&&this.ifr[s].contentWindow.postMessage(i,"*")}sendPostMessageToDesc(t,e,s){let i={from:"matemplate",to:"macontent",type:t,msg:e};i=JSON.parse(JSON.stringify(i)),this.ifr_desc[s]&&this.ifr_desc[s].contentWindow.postMessage(i,"*")}chanageBackColor(t,e,s){if(!t)return;const i={bgColor:Object.assign({},t)};s?this.sendPostMessageToDesc("changeBGStyle",i,e):this.sendPostMessage("changeBGStyle",i,e)}initContent(t){if(t<0)return;const e=this.props.actions.getData().quizs;if(t<e.length){let s={idx:t,quizmode:"ip",isTeacher:!0,content:e[t]};this.sendPostMessage("init",s,t)}}initContentAll(){const t=this.props.actions.getData().quizs;for(let e=0;e<t.length;e++){let s={idx:e,quizmode:"ip",isTeacher:!0,content:t[e]};this.sendPostMessage("init",s,e)}}completeContentAll(){const t=this.props.actions.getData().quizs;for(let e=0;e<t.length;e++){let s={idx:e,quizmode:"ip",isTeacher:!0,content:t[e]};this.sendPostMessage("completed",s,e)}}componentDidUpdate(t){if(this.props.view&&!t.view){this._curIdx=0,this._prog=0,this._isEnd=!1,this.msg="",this.retryNumber=-1;const t=this.props.actions.getData().quizs;this._totalUsers=0,t.map((t,e)=>{this._submitStudents[e]=[],this._showQuizDesc[e]=!1,this._quizResults[e]={seq:t.seq,thumb:t.thumb,url:t.url,allusers:0,submitusers:0,heart2:0,heart1:0,heart0:0,nosubmit:0,qnumber:t.qnumber,quizKind:t.quizKind,difiicult:t.difiicult,isProgress:!1}}),this._viewSubmitList=!1,this.props.actions.setQuizResultFnc(null),this._onQuizList=!0,this._viewQuizList=!0,this._viewAlert=!1,this._onSummaryResult=!0,this._initProblemList=!1,this._studentqcount=[]}else!this.props.view&&t.view&&(this.props.actions.setQuizResultFnc(null),this._viewSubmitList=!1,this._onQuizList=!0,this._viewQuizList=!1,this._viewAlert=!1,this._onSummaryResult=!0,this._studentqcount=[],this.msg="",this.retryNumber=-1);this.props.view&&this._setNavi()}render(){const{view:t,state:e,actions:s}=this.props;let i=[];const n=s.getData().quizs,r=n.length>this._curIdx?n[this._curIdx].difiicult:0;for(let t=0;t<r;t++)i.push(o.createElement("span",{key:t}));return o.createElement("div",{className:"t_independent_practice",style:{display:t?void 0:"none"}},o.createElement("div",{className:"independentContent"},o.createElement(g.MAHeader,{view:!(this._viewQuizList||this._viewCorrectGraph),type:"",submitType:this._submittype.length>this._curIdx?this._submittype[this._curIdx]:"",isStep:!1,isStudent:!1,retryList:this._retryList,onClickSubmitTile:this.clickSubmitlistOfQuizlist,onClickSubmitItem:this.clickSubmitItemofQuizList,quizIdx:this._curIdx,quizResult:this._quizResults}),o.createElement("div",{id:"contentWrap",className:"contentWrap"},o.createElement(b.ProblemList,{view:this._viewQuizList,disable:2===this._prog,isEnd:this._isEnd,quizresults:this._quizResults,submitType:this._submittype,submitusers:this._submitStudents&&this._submitStudents.length>0?this._submitStudents:[],type:this._type,init:this._initProblemList,bgColors:this.bgColors,onClick:this._headerClick,onType:this._onType,checkedList:l.cloneDeep(this._checkedList),retryList:l.cloneDeep(this._retryList),selectQuiz:this.selectQuiz,checkClick:this._checkClick,retryClick:this._askRetry,submitlistClick:this._submitlistClick}),o.createElement(v.CorrectGraph,{view:this._viewCorrectGraph,quizResult:this._quizResults,submitusers:this._submitStudents,qcountstudents:this._studentqcount,actions:this.props.actions,onClose:this._closeCorrectGraph,onQuizClick:this._onQuizClick,studentlist:this._studentlist}),n.map((t,e)=>o.createElement("div",{key:"i"+e,style:{display:this._curIdx!==e||this._viewQuizList?"none":void 0}},o.createElement("iframe",{src:t.url+"?idx="+e,style:{display:this._viewDesc?"none":""},ref:t=>{t&&(this.ifr[e]=t)},onLoad:this.onIfmContentLoaded.bind(this,e)}),o.createElement("iframe",{src:t.desc,style:{display:this._viewDesc?"":"none"},ref:t=>{t&&(this.ifr_desc[e]=t)},onLoad:this.onIfmDescLoaded.bind(this,e)}),o.createElement("div",{className:"footer",style:{display:this._viewQuizList||this._viewCorrectGraph?"none":""}},o.createElement("div",{className:"rate_star"},i),o.createElement("div",{className:"control_page"},o.createElement("button",{className:"btn_left",onClick:this._onPrev}),o.createElement("button",{className:"btn_menu",onClick:this.showQuizList}),o.createElement("button",{className:"btn_right",onClick:this._onNext}))))),o.createElement("button",{className:"btn_solution",onClick:this.showSolution,style:{display:this._viewProblem||this._viewQuizList||this._viewCorrectGraph?"none":"block"}}),o.createElement("button",{className:"btn_problem",onClick:this.showProblem,style:{display:!this._viewProblem||this._viewQuizList||this._viewCorrectGraph?"none":"block"}}))),o.createElement(_.MASubmitUserList,{view:this._viewSubmitList,mode:3,quizIdx:this._quizIdx,type:this._submittype.length>this._curIdx?this._submittype[this._quizIdx]:"",submitusers:this._submitStudents.length>this._quizIdx?this._submitStudents[this._quizIdx]:[],onClose:this.onCloseSubmitList,isNoNum:!0,onType:this._onType}),o.createElement(u.default,{view:0===this._prog&&this._viewQuizList,type:"teacher",disable:!1,sended:!1,originY:0,onSend:this.getResultCnt()?this._onSend:this._onViewCheck}),o.createElement(f.AlertPopup,{view:this._viewAlert,onClose:this._offAlert,onOk:"Retry?"===this.msg?this._retry:this._onSendStop,msg:this.msg}),o.createElement(y.CheckAlert,{view:this._viewCheckAlert,onOk:this._onCheckAlertOk}),o.createElement(k,{view:!this._viewQuizList&&!this._viewCorrectGraph,prog:this._prog,curIdx:this._curIdx,checkList:this._checkedList.length>this._curIdx&&this._checkedList[this._curIdx],retryList:this._retryList.length>this._curIdx&&this._retryList[this._curIdx],totalStudents:this._totalUsers,submitStudents:this._submitStudentCnt,oncheckClick:this._checkClick,onretryClick:this._askRetry,onStop:this._openPop}),o.createElement(h.BtnProgress,{view:this._viewQuizList&&this._prog>=2&&!this._viewCorrectGraph,isEnd:this._isEnd,totalStudents:this._totalUsers,submitStudents:this._submitStudentCnt,onClick:this._openPop}),o.createElement(m.RankingBtn,{view:this._isEnd&&!this._viewCorrectGraph,onClick:this.showResult}))}};i([a.observable],E.prototype,"_curIdx",void 0),i([a.observable],E.prototype,"_quizIdx",void 0),i([a.observable],E.prototype,"_isEnd",void 0),i([a.observable],E.prototype,"_prog",void 0),i([a.observable],E.prototype,"_showQuizDesc",void 0),i([a.observable],E.prototype,"_viewQuizList",void 0),i([a.observable],E.prototype,"_viewCorrectGraph",void 0),i([a.observable],E.prototype,"_onQuizList",void 0),i([a.observable],E.prototype,"_onSummaryResult",void 0),i([a.observable],E.prototype,"_quizResults",void 0),i([a.observable],E.prototype,"_submitStudents",void 0),i([a.observable],E.prototype,"_viewSubmitList",void 0),i([a.observable],E.prototype,"_viewProblem",void 0),i([a.observable],E.prototype,"_viewDesc",void 0),i([a.observable],E.prototype,"_viewAlert",void 0),i([a.observable],E.prototype,"_viewCheckAlert",void 0),i([a.observable],E.prototype,"_type",void 0),i([a.observable],E.prototype,"_submittype",void 0),i([a.observable],E.prototype,"_checkedList",void 0),i([a.observable],E.prototype,"_retryList",void 0),i([a.observable],E.prototype,"_initProblemList",void 0),i([a.observable],E.prototype,"_submitStudentCnt",void 0),i([a.observable],E.prototype,"_studentqcount",void 0),i([a.observable],E.prototype,"bgColors",void 0),i([a.observable],E.prototype,"_totalUsers",void 0),i([a.observable],E.prototype,"_studentlist",void 0),E=i([r.observer],E),e.default=E},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var n,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(e,s,r):n(e,s))||r);return o>3&&r&&Object.defineProperty(e,s,r),r};Object.defineProperty(e,"__esModule",{value:!0});const n=s(0),o=s(1),r=s(2),a=s(57),l=s(11);let c=class extends n.Component{constructor(t){super(t),this.m_btnH=0,this.m_max=0,this.m_sy=-1,this.m_vy=-1,this.m_time=-1,this.m_bSend=!1,this.m_state={y:0,alpha:1,tDur:0,aDur:0,isOn:!1,disabled:!1},this._ref=t=>{if(this.m_max>0||!t)return;t.setAttribute("touch-action","none");const e=window.getComputedStyle(t),s=l.nteFloat(e.height,0),i=l.nteFloat(e.bottom,0);s>0&&(this.m_btnH=s,"pad"===this.props.type?this.m_max=i-s-35:this.m_max=s+i+10,this.props.view||(this.m_state.y=this.m_max))},this._down=t=>{this.m_state.isOn||this.m_state.disabled||void 0!==this.props.disable&&this.props.disable||(this.m_state.y=this.props.originY,this.m_state.alpha=1,this.m_state.tDur=0,this.m_state.aDur=0,this.m_state.isOn=!0,this.m_vy=0,this.m_time=Date.now())},this._start=(t,e)=>{this.m_sy=e.y,this.m_bSend=!0},this._drag=(t,e)=>{if(!this.m_state.isOn||this.m_state.disabled)return;let s=e.y-this.m_sy;"teacher"===this.props.type?(e.deltaY<-1?this.m_bSend=!1:e.deltaY>=0&&(this.m_bSend=!0),s<0&&(s=0)):(e.deltaY>1?this.m_bSend=!1:e.deltaY<=0&&(this.m_bSend=!0),s>0&&(s=0)),!1===this.props.preventDrag&&(this.m_state.y=s+this.props.originY);const i=Date.now();this.m_vy=e.deltaY/(i-this.m_time),this.m_time=i},this._stop=(t,e)=>{if(this.m_state.isOn&&!this.m_state.disabled)if(this.m_bSend){let t=.5*this.m_vy*1e3,s=e.y-this.m_sy;"teacher"===this.props.type?(t<this.m_btnH?t=this.m_btnH:t>4*this.m_btnH&&(t=4*this.m_btnH),s<0&&(s=0)):(-1*t<this.m_btnH?t=-this.m_btnH:-1*t>4*this.m_btnH&&(t=-4*this.m_btnH),s>0&&(s=0)),this.m_state.tDur=.5,this.m_state.aDur=.5,this.m_state.alpha=0,this.m_state.y=s+t+this.props.originY,this.props.onSend()}else this.m_state.isOn=!1,this.m_state.tDur=.3,this.m_state.aDur=0,this.m_state.y=this.props.originY},t.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):t.view?(this.m_state.y=t.originY,this.m_state.alpha=1,this.m_state.tDur=.3,this.m_state.aDur=0,this.m_state.isOn=!1,this.m_state.disabled=!1):t.view||(this.m_state.y=t.originY,this.m_state.alpha=0,this.m_state.tDur=.3,this.m_state.aDur=.3,this.m_state.isOn=!1,this.m_state.disabled=!0)}componentWillReceiveProps(t){t.sended&&!this.props.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):t.view&&!this.props.view?(this.m_state.y=t.originY,this.m_state.alpha=1,t.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=.3):(this.m_state.tDur=.3,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1):!t.view&&this.props.view?(this.m_state.y=this.m_max,this.m_state.alpha=0,this.m_state.tDur=.3,this.m_state.aDur=.3,this.m_state.isOn=!1,this.m_state.disabled=!0):!t.view||t.sended||this.m_state.isOn||t.originY===this.props.originY||(this.m_state.y=t.originY,this.m_state.tDur=.3,this.m_state.aDur=0),!this.props.isRetry&&t.isRetry&&(this.m_state.y=t.originY,this.m_state.alpha=1,t.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=.3):(this.m_state.tDur=.3,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1)}render(){const{y:t,tDur:e,aDur:s,alpha:i,isOn:o,disabled:r}=this.m_state;let l={transform:`translateY(${t}px)`,transition:`transform ${e}s, opacity ${s/2}s ${s/2}s`,opacity:i,pointerEvents:r||!this.props.view?"none":"auto"};this.props.preventDrag&&(l={});const c=[];return"pad"===this.props.type?c.push("fel_toteacher"):c.push("fel_topad"),o&&c.push("on"),this.props.isVisiblePenTool&&this.props.isVisiblePenTool&&c.push("up"),n.createElement(a.DraggableCore,{onMouseDown:this._down,onDrag:this._drag,onStart:this._start,onStop:this._stop},n.createElement("button",{ref:this._ref,className:c.join(" ")+(this.props.className?" "+this.props.className:""),style:l},n.createElement("span",{className:"revise"+(this.props.isRevise?" on":""),style:{display:this.props.isRevise?"":"none"}})))}};i([o.observable],c.prototype,"m_state",void 0),c=i([r.observer],c),e.default=c},function(t,e){t.exports=ReactDraggable},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var n,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(e,s,r):n(e,s))||r);return o>3&&r&&Object.defineProperty(e,s,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.BtnProgress=void 0;const n=s(0),o=s(2),r=s(1),a=s(4),l=s(9),c=s(5);let u=class extends n.Component{constructor(t){super(t),this.isHide=!1,this.timerid=-1,this._onClick=()=>{c.App.pub_playBtnTab(),this.props.onClick()},this.props.isEnd&&a.delay(()=>{this.isHide=!0},2500)}componentDidUpdate(t){this.props.isEnd&&!t.isEnd?this.timerid=a.delay(()=>{this.isHide=!0},2500):!this.props.isEnd&&t.isEnd&&(this.isHide=!1,clearTimeout(this.timerid))}render(){const{submitStudents:t,totalStudents:e,noFinishView:s}=this.props;return n.createElement("div",{className:"progressWrap"+(this.props.isEnd?" end":"")+(this.props.view?" on":"")},(()=>this.props.noRetryView&&this.props.isEnd?n.createElement(n.Fragment,null):n.createElement(l.ToggleBtn,{className:"btn_progress",view:this.props.view,onClick:this._onClick},n.createElement("span",null,`${t}/${e}`)))(),n.createElement("div",{className:"msg"+(this.isHide||s?" hide":"")},"Finish",n.createElement("span",null),n.createElement("span",null),n.createElement("span",null),n.createElement("span",null),n.createElement("span",null)))}};i([r.observable],u.prototype,"isHide",void 0),u=i([o.observer],u),e.BtnProgress=u},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankingBtn=void 0;const i=s(0),n=s(9);class o extends i.Component{render(){return i.createElement(n.ToggleBtn,{className:"btn_ranking",style:{display:this.props.view?"":"none"},onClick:this.props.onClick})}}e.RankingBtn=o},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var n,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(e,s,r):n(e,s))||r);return o>3&&r&&Object.defineProperty(e,s,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.MASubmitUsers=e.MASubmitUserList=void 0;const n=s(0),o=s(1),r=s(2),a=s(5),l=s(4),c=s(7).default;let u=class extends n.Component{constructor(t){super(t),this.allStudents=[],this.heartTwoStudents=[],this.heartOneStudents=[],this.wrongStudents=[],this.notsubmitUsers=[],this.submitusersCnt=0,this._soption={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},this._refSwiper=t=>{!this._swiper&&t&&(this._swiper=t.swiper)},this.clickTab=(t,e)=>{switch(this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0)),l.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0))},300),t){case"1":if(this.heartTwoStudents.length<1)return;break;case"2":if(this.heartOneStudents.length<1)return;break;case"3":if(this.wrongStudents.length<1)return;break;case"4":if(this.notsubmitUsers.length<1)return}a.App.pub_playBtnTab(),this.props.onType&&this.props.onType(t,e)}}componentDidUpdate(t){if(this.props.view&&!t.view){for(this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0)),l.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0))},300),a.App.students&&(this.allStudents=a.App.students);this.heartTwoStudents.length>0;)this.heartTwoStudents.pop();for(;this.heartOneStudents.length>0;)this.heartOneStudents.pop();for(;this.wrongStudents.length>0;)this.wrongStudents.pop();for(;this.notsubmitUsers.length>0;)this.notsubmitUsers.pop();this.props.isAssessment?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let s=this.props.submitusers.find(e=>e.student.id===t.id);s?this.heartTwoStudents.push(s.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:3===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let s=this.props.submitusers.find(e=>e.student.id===t.id);s&&0!==s.trycnt?s.correct?1===s.trycnt?this.heartTwoStudents.push(s.student):this.heartOneStudents.push(s.student):this.wrongStudents.push(s.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:2===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let s=this.props.submitusers.find(e=>e.student.id===t.id);s?s.correct?this.heartOneStudents.push(s.student):this.wrongStudents.push(s.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:4===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let s=this.props.submitusers.find(e=>e.student.id===t.id);s&&0!==s.trycnt?s.correct?1===s.trycnt&&this.heartTwoStudents.push(s.student):this.wrongStudents.push(s.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:this.props.submitusers.length>0?this.allStudents.map((t,e)=>{this.props.submitusers.find(e=>e.student.id===t.id)||this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents,this.submitusersCnt=this.props.submitusers.length,this.props.isStrategy&&this.props.onType&&(this.heartTwoStudents.length>0?this.props.onType("1",this.props.quizIdx):this.heartOneStudents.length>0?this.props.onType("2",this.props.quizIdx):this.wrongStudents.length>0?this.props.onType("3",this.props.quizIdx):this.notsubmitUsers.length>0&&this.props.onType("4",this.props.quizIdx)),this.heartTwoStudents.length>0?this.clickTab("1",this.props.quizIdx):this.heartOneStudents.length>0?this.clickTab("2",this.props.quizIdx):this.wrongStudents.length>0?this.clickTab("3",this.props.quizIdx):this.notsubmitUsers.length>0&&this.clickTab("4",this.props.quizIdx)}else if(this.props.view&&t.view&&this.props.submitusers.length!==this.submitusersCnt){for(this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0)),l.delay(()=>{this._swiper&&(this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize(),this._swiper.slideTo(0))},300),a.App.students&&(this.allStudents=a.App.students);this.heartTwoStudents.length>0;)this.heartTwoStudents.pop();for(;this.heartOneStudents.length>0;)this.heartOneStudents.pop();for(;this.wrongStudents.length>0;)this.wrongStudents.pop();for(;this.notsubmitUsers.length>0;)this.notsubmitUsers.pop();this.props.isAssessment?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let s=this.props.submitusers.find(e=>e.student.id===t.id);s?this.heartTwoStudents.push(s.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:3===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let s=this.props.submitusers.find(e=>e.student.id===t.id);s&&0!==s.trycnt?s.correct?1===s.trycnt?this.heartTwoStudents.push(s.student):this.heartOneStudents.push(s.student):this.wrongStudents.push(s.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:2===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let s=this.props.submitusers.find(e=>e.student.id===t.id);s?s.correct?this.heartOneStudents.push(s.student):this.wrongStudents.push(s.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:4===this.props.mode?this.props.submitusers.length>0?this.allStudents.map((t,e)=>{let s=this.props.submitusers.find(e=>e.student.id===t.id);s&&0!==s.trycnt?s.correct?1===s.trycnt&&this.heartTwoStudents.push(s.student):this.wrongStudents.push(s.student):this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents:this.props.submitusers.length>0?this.allStudents.map((t,e)=>{this.props.submitusers.find(e=>e.student.id===t.id)||this.notsubmitUsers.push(t)}):this.notsubmitUsers=this.allStudents,this.submitusersCnt=this.props.submitusers.length,this.props.isStrategy&&this.props.onType&&(this.heartTwoStudents.length>0?this.props.onType("1",this.props.quizIdx):this.heartOneStudents.length>0?this.props.onType("2",this.props.quizIdx):this.wrongStudents.length>0?this.props.onType("3",this.props.quizIdx):this.notsubmitUsers.length>0&&this.props.onType("4",this.props.quizIdx))}}render(){const{view:t,onClose:e,isNoNum:s,isAssessment:i,quizIdx:o,isStrategy:r,submitusers:a}=this.props;let l="";return s&&(l+=" nonum"),i&&(l+=" assessment"),n.createElement(n.Fragment,null,n.createElement("div",{className:"submituserlist_bg"+(t?" show":"")}),n.createElement("div",{className:"submituserlist"+(t?" show":"")+l},n.createElement("div",{className:"header"},n.createElement("div",{className:"quiz_tit"},"Q"+(o+1)),n.createElement("div",{className:"score_set"},n.createElement("ul",null,n.createElement("li",{className:"type01"+("1"===this.props.type?" arrow":"")+(this.heartTwoStudents.length>0?" on":""),style:{cursor:this.heartTwoStudents.length>0?"pointer":"default"},onClick:this.clickTab.bind(this,"1",o)},this.heartTwoStudents.length),this.props.mode<4&&n.createElement("li",{className:"type02"+("2"===this.props.type?" arrow":"")+(this.heartOneStudents.length>0?" on":""),style:{cursor:this.heartOneStudents.length>0?"pointer":"default"},onClick:this.clickTab.bind(this,"2",o)},this.heartOneStudents.length),n.createElement("li",{className:"type03"+("3"===this.props.type?" arrow":"")+(this.wrongStudents.length>0?" on":""),style:{cursor:this.wrongStudents.length>0?"pointer":"default"},onClick:this.clickTab.bind(this,"3",o)},this.wrongStudents.length),n.createElement("li",{className:"type04"+("4"===this.props.type?" arrow":"")+(this.notsubmitUsers.length>0?" on":""),style:{cursor:this.notsubmitUsers.length>0?"pointer":"default"},onClick:this.clickTab.bind(this,"4",o)},this.notsubmitUsers.length))),n.createElement("div",{className:"submitter"},"Submitter",n.createElement("span",null,n.createElement("strong",null,this.heartTwoStudents.length)," / ",this.allStudents.length)),n.createElement("button",{className:"btn_close",onClick:e})),n.createElement("div",{className:"list_box"},n.createElement("div",{className:"innerbox"},n.createElement(c,Object.assign({},this._soption,{ref:this._refSwiper}),n.createElement("div",{className:"inner"},n.createElement("ul",null,"1"===this.props.type&&this.heartTwoStudents.map((t,e)=>{const s="2"===t.displayMode&&t.nickname?t.nickname:t.name,i="2"===t.displayMode?t.avatar:t.thumb;return n.createElement("li",{key:e},""===i&&n.createElement("div",{className:"F"===t.gender?"defaultImg_f":"defaultImg_m"},n.createElement("div",null,s.substring(0,2).toUpperCase())),""!==i&&n.createElement("img",{src:i}),n.createElement("span",{className:"name"},s))}),"2"===this.props.type&&this.heartOneStudents.map((t,e)=>{const s="2"===t.displayMode&&t.nickname?t.nickname:t.name,i="2"===t.displayMode?t.avatar:t.thumb;return n.createElement("li",{key:e},""===i&&n.createElement("div",{className:"F"===t.gender?"defaultImg_f":"defaultImg_m"},n.createElement("div",null,s.substring(0,2).toUpperCase())),""!==i&&n.createElement("img",{src:i}),n.createElement("span",{className:"name"},s))}),"3"===this.props.type&&this.wrongStudents.map((t,e)=>{const s="2"===t.displayMode&&t.nickname?t.nickname:t.name,i="2"===t.displayMode?t.avatar:t.thumb;return n.createElement("li",{key:e},""===i&&n.createElement("div",{className:"F"===t.gender?"defaultImg_f":"defaultImg_m"},n.createElement("div",null,s.substring(0,2).toUpperCase())),""!==i&&n.createElement("img",{src:i}),n.createElement("span",{className:"name"},s))}),"4"===this.props.type&&this.notsubmitUsers.map((t,e)=>{const s="2"===t.displayMode&&t.nickname?t.nickname:t.name,i="2"===t.displayMode?t.avatar:t.thumb;return n.createElement("li",{key:e},""===i&&n.createElement("div",{className:"F"===t.gender?"defaultImg_f":"defaultImg_m"},n.createElement("div",null,s.substring(0,2).toUpperCase())),""!==i&&n.createElement("img",{src:i}),n.createElement("span",{className:"name"},s))}))))))))}};i([o.observable],u.prototype,"allStudents",void 0),i([o.observable],u.prototype,"heartTwoStudents",void 0),i([o.observable],u.prototype,"heartOneStudents",void 0),i([o.observable],u.prototype,"wrongStudents",void 0),i([o.observable],u.prototype,"notsubmitUsers",void 0),i([o.observable],u.prototype,"submitusersCnt",void 0),u=i([r.observer],u),e.MASubmitUserList=u;let p=class extends n.Component{constructor(t){super(t)}render(){const{view:t,submitusers:e,totalusers:s,onClick:i}=this.props;return n.createElement("div",{className:"submitusers"+(t?"":" hide"),onClick:i||void 0},e," / ",s)}};p=i([r.observer],p),e.MASubmitUsers=p},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var n,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(e,s,r):n(e,s))||r);return o>3&&r&&Object.defineProperty(e,s,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.ProblemList=void 0;const n=s(0),o=s(2),r=s(1),a=s(4),l=s(5),c=s(6),u=s(20);let p=class extends n.Component{constructor(t){super(t),this.quizList=[],this._viewLeftMenu=!1,this.elCheckBtn=[],this.elRetryBtn=[],this.elSubmit=[],this.el=[],this._viewAlert=0,this.alertMsg="",this.doExitClass=()=>{this._viewAlert=0,c.clearTPenTool(),c.exitClass()},this.doLogOut=()=>{this._viewAlert=0,c.clearTPenTool(),c.logOut()},this.cancelAlertPopup=()=>{this._viewAlert=0};for(let t=0;t<this.props.quizresults.length;t++)this.el.push([])}_onClick(t){l.App.pub_playBtnTab(),this.props.onClick(t)}componentWillReceiveProps(t){for(;this.quizList.length>0;)this.quizList.pop();if(t.quizresults.length>0&&t.quizresults){let t=this.props.quizresults.length/2,e=0;for(let s=1;s<=t;s++){const t=a.filter(this.props.quizresults,{qnumber:s});let i=[];for(let s=0;s<t.length;s++)i.push({idx:e++,seq:t[s].seq,thumb:t[s].thumb,url:t[s].thumb,allusers:t[s].allusers,submitusers:t[s].submitusers,heart2:t[s].heart2,heart1:t[s].heart1,heart0:t[s].heart0,nosubmit:t[s].nosubmit,qnumber:t[s].qnumber,difiicult:t[s].difiicult});this.quizList.push(i)}}}componentDidUpdate(t){(this.props.view&&!t.view||!this.props.view&&t.view)&&(this._viewAlert=0)}render(){const{quizresults:t,selectQuiz:e,submitusers:s,submitType:i}=this.props;return n.createElement(n.Fragment,null,n.createElement("div",{className:"t_problem",style:{display:this.props.view?"":"none"}},n.createElement("div",{className:"top_header"},n.createElement("div",{className:"worksheet"},"Worksheet Guide"),n.createElement("div",{className:"select_list"},n.createElement("button",{className:"list_01"+(1===this.props.type?" on":""),onClick:this._onClick.bind(this,1)}),n.createElement("button",{className:"list_02"+(2===this.props.type?" on":""),onClick:this._onClick.bind(this,2)}))),n.createElement("div",{className:"content"+(2===this.props.type?" view12":"")},this.quizList.map((o,r)=>n.createElement("div",{className:"thumbset",key:"qssss_"+r},o.map((o,c)=>{let u=[],p=void 0!==o.difiicult?o.difiicult:0;for(let t=0;t<p;t++)u.push(n.createElement("span",{key:t}));return n.createElement("div",{className:"thumb_cnt"+(c>0?" right":" left"),key:r+"_"+c,onClick:e.bind(this,o.idx)},n.createElement("div",{className:"title"},n.createElement("div",{className:"num"},o.qnumber+(1===c?"+":"")),n.createElement("ul",{className:"result",style:{display:s[o.idx].length>0||this.props.retryList[o.idx]?"":"none"},ref:e=>{if(e){if(this.elSubmit[o.idx])return;this.elSubmit[o.idx]=e,this.elSubmit[o.idx]&&this.elSubmit[o.idx].addEventListener("click",e=>{switch(e.stopPropagation(),i[o.idx]){case"1":if(t[a.findIndex(t,{seq:o.seq})].heart2<1)return;break;case"2":if(t[a.findIndex(t,{seq:o.seq})].heart1<1)return;break;case"3":if(t[a.findIndex(t,{seq:o.seq})].heart0<1)return;break;case"4":if(t[a.findIndex(t,{seq:o.seq})].nosubmit<1)return}this.props.submitlistClick(i[o.idx],o.idx)})}}},n.createElement("li",{className:"type01"+(t[a.findIndex(t,{seq:o.seq})].heart2>0?" on":""),ref:t=>{if(t){if(this.el[o.idx][0])return;this.el[o.idx][0]=t,this.el[o.idx][0]&&this.el[o.idx][0].addEventListener("click",()=>{this.props.onType("1",o.idx)})}}},t[a.findIndex(t,{seq:o.seq})]?t[a.findIndex(t,{seq:o.seq})].heart2:-1),n.createElement("li",{className:"type02"+(t[a.findIndex(t,{seq:o.seq})].heart1>0?" on":""),ref:t=>{if(t){if(this.el[o.idx][1])return;this.el[o.idx][1]=t,this.el[o.idx][1]&&this.el[o.idx][1].addEventListener("click",()=>{this.props.onType("2",o.idx)})}}},t[a.findIndex(t,{seq:o.seq})]?t[a.findIndex(t,{seq:o.seq})].heart1:-1),n.createElement("li",{className:"type03"+(t[a.findIndex(t,{seq:o.seq})].heart0>0?" on":""),ref:t=>{if(t){if(this.el[o.idx][2])return;this.el[o.idx][2]=t,this.el[o.idx][2]&&this.el[o.idx][2].addEventListener("click",()=>{this.props.onType("3",o.idx)})}}},t[a.findIndex(t,{seq:o.seq})]?t[a.findIndex(t,{seq:o.seq})].heart0:-1),n.createElement("li",{className:"type04"+(t[a.findIndex(t,{seq:o.seq})].nosubmit>0?" on":""),ref:t=>{if(t){if(this.el[o.idx][3])return;this.el[o.idx][3]=t,this.el[o.idx][3]&&this.el[o.idx][3].addEventListener("click",()=>{this.props.onType("4",o.idx)})}}},t[a.findIndex(t,{seq:o.seq})]?t[a.findIndex(t,{seq:o.seq})].nosubmit:-1))),"https://"===o.thumb.substring(0,8)||"http://"===o.thumb.substring(0,7)?n.createElement("img",{src:o.thumb,style:{backgroundColor:this.props.bgColors?this.props.bgColors[(2*r+c)%this.props.bgColors.length].main:void 0}}):n.createElement("img",{src:l.App.data_url+o.thumb}),n.createElement("div",{className:"ico_star"},u),n.createElement("button",{style:{display:this.props.retryList[o.idx]?"none":""},className:"btn_check"+(this.props.checkedList[o.idx]?" on":""),value:o.seq,ref:t=>{if(t){if(this.elCheckBtn[o.idx])return;this.elCheckBtn[o.idx]=t,this.elCheckBtn[o.idx]&&this.elCheckBtn[o.idx].addEventListener("click",t=>{if(t.stopPropagation(),this.props.disable)return;let e;l.App.pub_playBtnTab(),e=!this.props.checkedList[o.idx],this.props.checkClick(o.idx,e)})}}}),n.createElement("button",{className:"btn_retry",style:{display:this.props.retryList[o.idx]?"":"none"},ref:t=>{if(t){if(this.elRetryBtn[o.idx])return;this.elRetryBtn[o.idx]=t,this.elRetryBtn[o.idx]&&this.elRetryBtn[o.idx].addEventListener("click",t=>{t.stopPropagation(),this.props.disable||(l.App.pub_playBtnTab(),this.props.retryClick(o.idx))})}}}))}))))),n.createElement("div",{className:"worksheet_guide ",style:{display:"none"}},n.createElement("div",{className:"stage"},n.createElement("div",{className:"header"},"Worksheet Guide",n.createElement("button",{className:"btn_closed"})),n.createElement("div",{className:"contents"},n.createElement("div",{className:"top_imgs"},n.createElement("img",{className:"img01",src:"/content/mathalive_lib/images/img_worksheet_guide_01.png"}),n.createElement("img",{className:"img02",src:"/content/mathalive_lib/images/img_worksheet_guide_02.png"})),n.createElement("div",{className:"screenshot"},n.createElement("img",{src:"/content/mathalive_lib/images/img_sc_worksheet.png"}),n.createElement("button",{className:"btn_download"}))))),n.createElement(u.AlertPopup,{view:this._viewAlert>0,onClose:this.cancelAlertPopup,onOk:2===this._viewAlert?this.doLogOut:this.doExitClass,msg:this.alertMsg}))}};i([r.observable],p.prototype,"quizList",void 0),i([r.observable],p.prototype,"_viewLeftMenu",void 0),i([r.observable],p.prototype,"_viewAlert",void 0),p=i([o.observer],p),e.ProblemList=p},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var n,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(e,s,r):n(e,s))||r);return o>3&&r&&Object.defineProperty(e,s,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.MAHeader=void 0;const n=s(0),o=s(1),r=s(2),a=s(4),l=s(7).default,c=s(5);let u=class extends n.Component{constructor(t){super(t),this.clickable=!0,this.isMore=!1,this.active=[],this._soption={direction:"horizontal",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},this._clickSubmitTitle=t=>{this.props.onClickSubmitTile&&this.clickable&&this.props.onClickSubmitTile(t)},this._onClick=t=>{switch(t){case"1":if(this.props.quizResult&&this.props.quizResult.length>0&&this.props.quizResult[this.props.quizIdx].heart2<1)return void(this.clickable=!1);break;case"2":if(this.props.quizResult&&this.props.quizResult.length>0&&this.props.quizResult[this.props.quizIdx].heart1<1)return void(this.clickable=!1);break;case"3":if(this.props.quizResult&&this.props.quizResult.length>0&&this.props.quizResult[this.props.quizIdx].heart0<1)return void(this.clickable=!1);break;case"4":if(this.props.quizResult&&this.props.quizResult.length>0&&this.props.quizResult[this.props.quizIdx].nosubmit<1)return void(this.clickable=!1)}this.clickable=!0,this.props.onClickSubmitItem&&this.props.onClickSubmitItem(t)},this._swiper=null,this._refSwiper=t=>{if(this._swiper||!t)return;const e=t.swiper;e.on("transitionStart",()=>{}),e.on("transitionEnd",()=>{}),this._swiper=e},this.onClickIdx=(t,e)=>{this.props.onClickIdx&&"notyet"!==e&&(c.App.pub_playBtnTab(),this.props.onClickIdx(t))}}componentDidUpdate(t){this.props.view&&!t.view?(a.delay(()=>{this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize())},300),this.clickable=!0):!this.props.view&&t.view,this.props.quizIdx!==t.quizIdx&&this.props.quizIdx>=8&&this.props.headerResult&&(this.props.headerResult[this.props.headerResult.length-1].compelete||this._swiper&&(this._swiper.update(),this._swiper.slideTo(this.props.quizIdx-7,0)))}render(){const{view:t,isStep:e,isStudent:s,quizIdx:i,quizResult:o,headerResult:r,pageCnt:c,type:u,submitType:p}=this.props;let d=!1;o&&o.length>0&&(d=!(o[i].submitusers<=0));let h="";if(s)r&&r.length>0&&i>-1&&(r.length>=10?this.isMore=!0:this.isMore=!1,h=r[i].quizKind>0?r[i].qnumber+"+":r[i].qnumber+"",r[r.length-1].compelete&&a.delay(()=>{this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize())},600));else if(this.props.quizResult&&this.props.quizResult.length>0){const t=this.props.quizResult[this.props.quizIdx];h=t.quizKind&&t.quizKind>0?t.qnumber+"+":t.qnumber+""}else h=this.props.quizIdx+1+"";return n.createElement("div",{className:"topHeader"+("concept_summary"===u||"learning_object"===u?" summary":"")+(s?" student":""),style:{display:t?"":"none"}},n.createElement("div",{className:"number",style:{display:"learning_object"===u||s?"none":""}},n.createElement("span",null,h)),!s&&!e&&n.createElement("div",{className:"result_score",style:{display:d||this.props.retryList&&this.props.retryList.length>i&&this.props.retryList[i]?"":"none"}},n.createElement("div",{onClick:this._clickSubmitTitle.bind(this,i)},n.createElement("div",{className:"num first"+(o&&o.length>0&&o[i].heart2>0?" on":""),onClick:this._onClick.bind(this,"1")},n.createElement("span",null,o&&o.length>0?o[i].heart2:0)),n.createElement("div",{className:"num second"+(o&&o.length>0&&o[i].heart1>0?" on":""),onClick:this._onClick.bind(this,"2")},n.createElement("span",null,o&&o.length>0?o[i].heart1:0)),n.createElement("div",{className:"num wrong"+(o&&o.length>0&&o[i].heart0>0?" on":""),onClick:this._onClick.bind(this,"3")},n.createElement("span",null,o&&o.length>0?o[i].heart0:0)),n.createElement("div",{className:"num unsubmission notyet"+(o&&o.length>0&&o[i].nosubmit>0?" on":""),onClick:this._onClick.bind(this,"4")},n.createElement("span",null,o&&o.length>0?o[i].nosubmit:0)))),s&&n.createElement(n.Fragment,null,n.createElement("div",{className:"assessment"},n.createElement("div",{className:"pagination"},n.createElement("button",{className:"btn_prev"}),n.createElement("button",{className:"btn_next on"})),n.createElement("div",{className:"numbers"},n.createElement("button",{className:"num"},n.createElement("span",null,"1")),n.createElement("button",{className:"num"},n.createElement("span",null,"2")),n.createElement("button",{className:"num"},n.createElement("span",null,"3")),n.createElement("button",{className:"num"},n.createElement("span",null,"4")),n.createElement("button",{className:"num skip_none"},n.createElement("span",null,"5")),n.createElement("button",{className:"num"},n.createElement("span",null,"6")),n.createElement("button",{className:"num"},n.createElement("span",null,"7")),n.createElement("button",{className:"num skip_exist"},n.createElement("span",null,"8")),n.createElement("button",{className:"num now"},n.createElement("span",null,"9")),n.createElement("button",{className:"num before"},n.createElement("span",null,"10")))),n.createElement("div",{className:"result_score"+(s?" student":"")+(this.isMore?" more":"")},n.createElement("span",{className:"worksheet",style:{display:"none"}},"Worksheet"),n.createElement(l,Object.assign({ref:this._refSwiper},this._soption),r&&r.length>0&&r.map((t,e)=>{let s="",o="",a="";1===t.tryCnt&&t.correct?o="first":2===t.tryCnt&&t.correct?o="second":t.tryCnt>1&&!1===t.correct&&(o="wrong"),r[r.length-1].compelete?(s=i===e?"":"past",0===t.tryCnt&&!1===t.correct&&(o="unsubmission")):(e<i&&t.tryCnt>0&&(s="past"),i!==e||t.compelete?!(i<e)||t.compelete||this.props.active&&this.props.active[e]?i===e&&t.compelete&&(s=""):s="notyet":s=""),a=i===e?"active":"";let l=[s];l.push(o),l.push(a);let c="";return c=t.quizKind>0?t.qnumber+"+":t.qnumber+"",n.createElement("div",{className:"num "+l.join(" "),key:"s_"+e,onClick:this.onClickIdx.bind(this,e,s)},n.createElement("span",{className:"txt"},c),n.createElement("span",{className:"ico"}))})))),n.createElement("div",{className:"progress",style:{display:e?"":"none"}},n.createElement("ul",null,n.createElement("li",{className:"a on"},n.createElement("span",{className:"tit1"},"Understand"),n.createElement("div",{className:"tit2"},n.createElement("span",{className:"a"},"100%"),n.createElement("span",{className:"b"},"75%"))),n.createElement("li",{className:"ab on"},n.createElement("span",{className:"tit1"},"How to solve?"),n.createElement("div",{className:"tit2"},n.createElement("span",{className:"a"},"100%"),n.createElement("span",{className:"b"},"75%"))),n.createElement("li",{className:"ab on"},n.createElement("span",{className:"tit1"},"Step 1"),n.createElement("div",{className:"tit2"},n.createElement("span",{className:"a"},"100%"),n.createElement("span",{className:"b"},"75%"))),n.createElement("li",{className:"ab"},n.createElement("span",{className:"tit1"},"Step 2"),n.createElement("div",{className:"tit2"},n.createElement("span",{className:"a"},"100%"),n.createElement("span",{className:"b"},"75%"))),n.createElement("li",{className:"ab on"},n.createElement("span",{className:"tit1"},"Step 3"),n.createElement("div",{className:"tit2"},n.createElement("span",{className:"a"},"100%"),n.createElement("span",{className:"b"},"75%"))))))}};i([o.observable],u.prototype,"active",void 0),u=i([r.observer],u),e.MAHeader=u},function(t,e,s){"use strict";var i=this&&this.__decorate||function(t,e,s,i){var n,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(o<3?n(r):o>3?n(e,s,r):n(e,s))||r);return o>3&&r&&Object.defineProperty(e,s,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.CorrectGraph=void 0;const n=s(0),o=s(2),r=s(1),a=s(4),l=s(5),c=s(7).default;let u=class extends n.Component{constructor(t){super(t),this.isQuestion=!0,this._quizList=[],this.qsumaverage=0,this.totalAvg=0,this._submitstudent=[],this.submitquestionleng=0,this._clsname=[],this.ref=[],this.sum=[],this.sorted=[],this.rank=[],this._onClick=t=>{l.App.pub_playBtnTab(),this.isQuestion="q"===t},this._onQuizClick=t=>{this.props.onQuizClick(t)},this.m_soption={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},this._refSwiper1=t=>{!this._swiper1&&t&&(this._swiper1=t.swiper)},this._refSwiper2=t=>{!this._swiper2&&t&&(this._swiper2=t.swiper)}}_setNavi(){this.props.view&&(this.props.actions.setNaviView(!0),this.props.actions.setNavi(!0,!0),this.props.actions.setNaviFnc(()=>{this.props.onClose()},()=>{this.props.actions.gotoNextBook()}))}componentDidMount(){this._updateSwiper(this._swiper1),this._updateSwiper(this._swiper2)}_updateSwiper(t){t&&(t.slideTo(0,0),t.update(),t.scrollbar&&t.scrollbar.updateSize(),a.delay(()=>{t&&(t.update(),t.scrollbar&&t.scrollbar.updateSize())},600))}componentWillReceiveProps(t){}componentDidUpdate(t){if(this.props.view&&!t.view){for(;this._quizList.length>0;)this._quizList.pop();if(this.props.quizResult.length>0&&this.props.quizResult){let t=this.props.quizResult.length/2;for(let e=1;e<=t;e++)this._quizList.push(a.filter(this.props.quizResult,{qnumber:e}))}for(let t=0;t<l.App.students.length;t++)this._clsname[t]="";this._setNavi()}if(this.props.view){for(;this._submitstudent.length>0;)this._submitstudent.pop();for(let t=0;t<this.props.submitusers.length;t++)this.props.submitusers[t].map((t,e)=>{!0===t.correct&&1===t.trycnt&&this._submitstudent.push({id:t.student.id,nickname:t.student.nickname,name:t.student.name,tryCnt:t.trycnt,correct:t.correct,avg:0,lank:0,qcount:0,displayMode:void 0!==t.student.displayMode?t.student.displayMode:""})});let t=a.groupBy(this._submitstudent,"id");for(;this.sum.length>0;)this.sum.pop();for(let e in t){let s={id:"",nickname:"",name:"",tryCnt:0,correct:!1,avg:0,lank:0,qcount:0,displayMode:""};s.tryCnt=t[e].reduce((t,e)=>t+e.tryCnt,0),s.id=e,s.nickname=t[e][0].nickname,s.name=t[e][0].name,s.correct=t[e][0].correct,s.avg=0,s.lank=0,s.qcount=0,s.displayMode=t[e][0].displayMode,this.sum.push(s)}for(let t=0;t<this.sum.length;t++){const e=this.props.qcountstudents.find(e=>e.id===this.sum[t].id);e&&(this.sum[t].avg=Math.floor(this.sum[t].tryCnt/e.count*100))}for(;this.sorted.length>0;)this.sorted.pop();for(;this.rank.length>0;)this.rank.pop();this.sorted=this.sum.slice().sort((function(t,e){return e.avg-t.avg})),this.rank=this.sum.map((t,e)=>{let s;return e>0&&(s=this.sorted.indexOf(t)+1),{id:t.id,nickname:t.nickname,name:t.name,correct:t.correct,avg:t.avg,tryCnt:t.tryCnt,lank:this.sorted.indexOf(t)+1,qcount:t.qcount,displayMode:t.displayMode}});let e=[];for(let t=0;t<this.rank.length;t++){e.push(this.rank[t]);for(let s=0;s<t;s++)e[s].avg===this.rank[t].avg&&(this.rank[t].lank=this.rank[s].lank)}for(let t=0;t<this.props.studentlist.length;t++){void 0===a.find(this.rank,e=>e.id+""==this.props.studentlist[t].id+"")&&this.rank.push({id:this.props.studentlist[t].id+"",nickname:this.props.studentlist[t].nickname,name:this.props.studentlist[t].name,correct:!1,avg:0,tryCnt:0,lank:4,qcount:0,displayMode:this.props.studentlist[t].displayMode})}if(this.rank=this.rank.slice().sort((function(t,e){return e.avg-t.avg})),this.isQuestion){let t=0;this.submitquestionleng=0;for(let e=0;e<this.props.quizResult.length;e++)t+=Math.floor(this.props.quizResult[e].heart2/this.props.quizResult[e].allusers*100),this.props.quizResult[e].nosubmit<this.props.quizResult[e].allusers&&this.submitquestionleng++;if(isNaN(t))this.totalAvg=0;else{let e=t/this.submitquestionleng;this.totalAvg=e}}else{let t=0;for(let e=0;e<this.rank.length;e++)t+=this.rank[e].avg;if(isNaN(t)||0===t)this.totalAvg=0;else{let e=t/this.rank.length;this.totalAvg=e}}this.isQuestion?this._updateSwiper(this._swiper1):this._updateSwiper(this._swiper2)}}render(){const{view:t,submitusers:e,quizResult:s}=this.props;let i=this._quizList;return console.log("render"),n.createElement("div",{className:"t_result",style:{display:t?"":"none"}},n.createElement("h1",null,"Result"),n.createElement("div",{className:"status"},n.createElement("div",{className:"inner"},n.createElement("div",{className:"question "+(this.isQuestion?"on":""),onClick:this._onClick.bind(this,"q")},"Question"),n.createElement("div",{className:"student "+(this.isQuestion?"":"on"),onClick:this._onClick.bind(this,"s")},"Student"))),n.createElement("div",{className:"percent"},n.createElement("span",null,"0%"),n.createElement("span",null,"20%"),n.createElement("span",null,"40%"),n.createElement("span",null,"60%"),n.createElement("span",null,"80%"),n.createElement("span",null,"100%")),n.createElement("div",{className:"graph_set"},n.createElement("div",{className:"graph_box",style:{display:this.isQuestion?"":"none"}},n.createElement(c,Object.assign({},this.m_soption,{ref:this._refSwiper1}),i.length>0&&i.map((t,e)=>n.createElement("div",{className:"item",key:"q_main_"+e},t.map((t,s)=>{let i=[],o=void 0!==t.difiicult?t.difiicult:0;for(let t=0;t<o;t++)i.push(n.createElement("span",{key:"innert_"+t}));let r=-1;r=t.heart2>0?Math.floor(t.heart2/t.allusers*100):0===t.heart2&&(t.heart1>0||t.heart0>0)||t.nosubmit===t.allusers&&!0===t.isProgress?0:-1;let a=[0===s?"top":"btm"];return a.push(r>Math.ceil(this.totalAvg)?"":"on"),n.createElement("div",{className:a.join(" "),key:"q_"+e+"_"+t.seq},n.createElement("div",{className:"number pointer",onClick:this._onQuizClick.bind(this,t.seq)},n.createElement("div",{className:"left"},t.qnumber+(1===s?"+":""),n.createElement("div",{className:"star"},i)),n.createElement("div",{className:"text"},r>=0?r:"_")),n.createElement("div",{className:"bar_wrap"},n.createElement("div",{className:"bar",style:{width:r>=0?r+"%":"0%"}})))})))),n.createElement("div",{className:"average"},n.createElement("div",{className:"bar",style:{left:isNaN(Math.ceil(this.totalAvg))?"0%":Math.ceil(this.totalAvg)+"%"}},n.createElement("span",null,`Average ${isNaN(Math.ceil(this.totalAvg))?0:Math.ceil(this.totalAvg)}%`)))),n.createElement("div",{className:"graph_box",style:{display:this.isQuestion?"none":""}},n.createElement(c,Object.assign({},this.m_soption,{ref:this._refSwiper2}),this.rank.map((t,e)=>{let s="";return 1===t.lank?s="n01":2===t.lank?s="n02":3===t.lank&&(s="n03"),n.createElement("div",{className:"item",key:"q_sub_"+e},n.createElement("div",{className:"top"+(t.avg<this.totalAvg?" on":"")},n.createElement("div",{className:"number"},n.createElement("div",{className:"left"},n.createElement("span",{className:"medal "+s}),n.createElement("span",{className:"name"},n.createElement("span",{ref:t=>{t&&(this.ref[e]=t,this.ref[e].clientWidth>90&&(this._clsname[e]=" more"))},className:""+this._clsname[e]},"1"===t.displayMode?t.name:t.nickname))),n.createElement("div",{className:"text"},t.avg)),n.createElement("div",{className:"bar_wrap"},n.createElement("div",{className:"bar",style:{width:t.avg+"%"}}))))})),n.createElement("div",{className:"average"},n.createElement("div",{className:"bar",style:{left:isNaN(this.totalAvg)?"0%":this.totalAvg+"%"}},n.createElement("span",null,`Average ${isNaN(this.totalAvg)?0:Math.floor(this.totalAvg)}%`))))))}};i([r.observable],u.prototype,"isQuestion",void 0),i([r.observable],u.prototype,"_quizList",void 0),i([r.observable],u.prototype,"qsumaverage",void 0),i([r.observable],u.prototype,"totalAvg",void 0),i([r.observable],u.prototype,"_submitstudent",void 0),i([r.observable],u.prototype,"submitquestionleng",void 0),i([r.observable],u.prototype,"_clsname",void 0),u=i([o.observer],u),e.CorrectGraph=u},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CheckAlert=void 0;const i=s(0),n=s(21);class o extends i.Component{render(){const{msg:t}=this.props;return i.createElement(n.CoverPopup,{className:"alert_popup",view:this.props.view,onClosed:this.props.onOk},i.createElement("div",{className:"pop_box"},i.createElement("span",{className:"ico_alert"}),i.createElement("span",{className:"text"},t&&""!==t?t:"Check the Problem"),i.createElement("div",{className:"btns"},i.createElement("button",{className:"btn_ok",onClick:this.props.onOk},i.createElement("span",null,"OK")))))}}e.CheckAlert=o},function(t,e,s){"use strict";s.r(e)}]);