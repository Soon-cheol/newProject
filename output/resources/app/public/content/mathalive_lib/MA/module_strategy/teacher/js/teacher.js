!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s(s.s=25)}([function(e,t){e.exports=React},function(e,t){e.exports=mobxReact},function(e,t,s){"use strict";var i=s(17),n=Object.prototype.toString;function o(e){return"[object Array]"===n.call(e)}function r(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function l(e){return"[object Function]"===n.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var s=0,i=e.length;s<i;s++)t.call(null,e[s],s,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===n.call(e)},isBuffer:function(e){return null!==e&&!r(e)&&null!==e.constructor&&!r(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:r,isDate:function(e){return"[object Date]"===n.call(e)},isFile:function(e){return"[object File]"===n.call(e)},isBlob:function(e){return"[object Blob]"===n.call(e)},isFunction:l,isStream:function(e){return a(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function e(){var t={};function s(s,i){"object"==typeof t[i]&&"object"==typeof s?t[i]=e(t[i],s):t[i]=s}for(var i=0,n=arguments.length;i<n;i++)c(arguments[i],s);return t},deepMerge:function e(){var t={};function s(s,i){"object"==typeof t[i]&&"object"==typeof s?t[i]=e(t[i],s):t[i]="object"==typeof s?e({},s):s}for(var i=0,n=arguments.length;i<n;i++)c(arguments[i],s);return t},extend:function(e,t,s){return c(t,(function(t,n){e[n]=s&&"function"==typeof t?i(t,s):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){e.exports=mobx},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const i=s(13),n=s(5);function o(e){if(!e)return e;console.log("init student",e),e.displayMode=""+e.displayMode=="2"?"2":"1",e.gender=e.gender,""===e.nickname&&(e.nickname=e.name);let t=e.avatar&&""!==e.avatar?e.avatar:"";return""===t&&(t="f"===e.gender||"F"===e.gender?"/content/mathalive_lib/images/default_candy.png":"/content/mathalive_lib/images/default_cheese.png",e.avatar=t),e}class r{static get isMobile(){return r._isMobile}static get tempEl(){return r._tempEl}static pub_init(){const e=navigator.userAgent;r._isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e)||/android/i.test(e),r._tempBnd=document.createElement("div"),r._tempBnd.style.display="none",r._tempEl=document.createElement("div"),r._tempBnd.appendChild(r._tempEl),null===document.body?document.addEventListener("DOMContentLoaded",e=>{document.body.appendChild(r._tempBnd)}):document.body.appendChild(r._tempBnd)}static get students(){return r._students}static get student(){return r._student}static get lang(){return r._lang}static get isDvlp(){return r._isDvlp}static get data_url(){return r._data_url}static get lesson(){return r._lesson}static get book(){return r._book}static get nextBook(){return r._nextBook}static get prevBook(){return r._prevBook}static get addOnHost(){return r._addOnHost}static setaddOnHost(e){r._addOnHost=e}static pub_load(e,t,s,i,n,a,l){r._lesson=i,r._book=s,r._nextBook=a,r._prevBook=l,r._students=[],e&&Array.isArray(e)&&e.forEach((e,t)=>{r._students[t]=o(e)}),r._student=o(t),n&&""!==n&&(r._addOnHost=n)}static pub_reloadStudents(e){n.getStudents((t,s)=>{for(;r._students.length>0;)r._students.pop();for(;r._students_inited.length>0;)r._students_inited.pop();for(let e=0,s=t.length;e<s;e++)r.isDvlp?r._students[e]=o(t[e]):r._students[e]=o({id:t[e].id,name:t[e].name,thumb:t[e].defaultThumbnail,avatar:t[e].profileThumbnail,nickname:""!==t[e].nickName?t[e].nickName:t[e].name,displayMode:t[e].displayMode,gender:t[e].gender,inited:!0}),console.log("student",t[e]),r._students_inited.push(t[e].id);e()})}static pub_parseStyle(e){return r._tempEl.style.cssText=e,r._tempEl.style}static pub_initAudio(){r._common_audio=document.getElementById("common_audio"),r._ding_audio=document.getElementById("ding_audio"),r._dingend_audio=document.getElementById("dingend_audio"),r._btn_audio=document.getElementById("btn_audio"),r._correct_audio=document.getElementById("correct_audio"),r._wrong_audio=document.getElementById("wrong_audio"),r._topad_audio=document.getElementById("topad_audio"),r._goodjob_audio=document.getElementById("goodjob_audio"),r._btn_back_audio=document.getElementById("btn_back_audio"),r._btn_page_audio=document.getElementById("btn_page_audio"),r._popup_audio=document.getElementById("popup_audio"),r._clock_audio=document.getElementById("clock_audio"),r._ts_bgm_audio=document.getElementById("ts_bgm_audio"),r._bs_audio=document.getElementById("bs_audio"),r._bb_audio=document.getElementById("bb_audio"),r._cd_audio=document.getElementById("cd_audio"),r._tc_audio=document.getElementById("tc_audio"),r._te_audio=document.getElementById("te_audio"),r._trg_bgm_audio=document.getElementById("trg_bgm_audio"),r._afc_audio=document.getElementById("afc_audio"),r._trs_audio=document.getElementById("trs_audio"),r._btn_choice_audio=document.getElementById("btn_choice_audio"),r._retry_audio=document.getElementById("retry_audio"),r._sorry_audio=document.getElementById("sorry_audio"),r._great_audio=document.getElementById("great_audio"),r._memorygame_flipcard_audio=document.getElementById("flipcard_audio"),r._ispy_gameclick_audio=document.getElementById("gameclick_audio"),r._game_timesetting_start_audio=document.getElementById("game_timesetting_start"),r._solution_btn_audio=document.getElementById("solution_btn_audio"),r._game_result_audio=document.getElementById("game_result_audio"),r._open_problom_audio=document.getElementById("open_problom_audio"),r._quiz_done_audio=document.getElementById("quiz_done_audio"),r._hit_up_audio=document.getElementById("hu_audio"),r._hit_down_audio=document.getElementById("hd_audio"),r._hit_good_audio=document.getElementById("hg_audio"),r._hit_wrong_audio=document.getElementById("hw_audio"),r._pick_presenter=document.getElementById("pick_presenter"),r._game_good_audio=document.getElementById("gg_audio")}static pub_playClock(){r._clock_audio&&(r._clock_audio.currentTime=4.5,r._clock_audio.play())}static pub_playPopup(){r._popup_audio&&(r._popup_audio.currentTime=0,r._popup_audio.play())}static pub_playBtnPage(){r._btn_page_audio&&(r._btn_page_audio.currentTime=0,r._btn_page_audio.play())}static pub_playBtnBack(){r._btn_back_audio&&(r._btn_back_audio.currentTime=0,r._btn_back_audio.play())}static pub_playGoodjob(){r._goodjob_audio&&(r._goodjob_audio.currentTime=0,r._goodjob_audio.play())}static pub_playDing(){r._ding_audio&&(r._ding_audio.currentTime=0,r._ding_audio.play())}static pub_playDingend(){r._dingend_audio&&(r._dingend_audio.currentTime=0,r._dingend_audio.play())}static pub_playToPad(){r._topad_audio&&(r._topad_audio.currentTime=0,r._topad_audio.play())}static pub_playBtnTab(){r._btn_audio&&(r._btn_audio.currentTime=0,r._btn_audio.play())}static pub_playCorrect(){r._correct_audio&&(r._correct_audio.currentTime=0,r._correct_audio.play())}static pub_playWrong(){r._wrong_audio&&(r._wrong_audio.currentTime=0,r._wrong_audio.play())}static pub_playTeamSelectBgm(){r._ts_bgm_audio&&(r._ts_bgm_audio.currentTime=0,r._ts_bgm_audio.play())}static pub_stopTeamSelectBgm(){r._ts_bgm_audio&&(r._ts_bgm_audio.pause(),r._ts_bgm_audio.currentTime=0)}static pub_playStartButton(){r._bs_audio&&(r._bs_audio.currentTime=0,r._bs_audio.play())}static pub_playBasicButton(){r._bb_audio&&(r._bb_audio.currentTime=0,r._bb_audio.play())}static pub_playCountDown(){r._cd_audio&&(r._cd_audio.currentTime=0,r._cd_audio.play())}static pub_playTimerClock(){r._tc_audio&&(r._tc_audio.currentTime=0,r._tc_audio.play())}static pub_stopTimerClock(){r._tc_audio&&(r._tc_audio.pause(),r._tc_audio.currentTime=0)}static pub_playTimerEnd(){r._te_audio&&(r._te_audio.currentTime=0,r._te_audio.play())}static pub_playResultGraph(){r._trg_bgm_audio&&(r._trg_bgm_audio.currentTime=0,r._trg_bgm_audio.play())}static pub_playFireworksClapping(){r._afc_audio&&(r._afc_audio.currentTime=0,r._afc_audio.play())}static pub_playTotalResult(){r._trs_audio&&(r._trs_audio.currentTime=0,r._trs_audio.play())}static pub_playChoiceBtn(){r._btn_choice_audio&&(r._btn_choice_audio.currentTime=0,r._btn_choice_audio.play())}static pub_playsorry(){r._sorry_audio&&(r._sorry_audio.currentTime=0,r._sorry_audio.play())}static pub_playretry(){r._retry_audio&&(r._retry_audio.currentTime=0,r._retry_audio.play())}static pub_playgreat(){r._great_audio&&(r._great_audio.currentTime=0,r._great_audio.play())}static pub_playFlipCard(){r._memorygame_flipcard_audio&&(r._memorygame_flipcard_audio.currentTime=0,r._memorygame_flipcard_audio.play())}static pub_playGameClick(){r._ispy_gameclick_audio&&(r._ispy_gameclick_audio.currentTime=0,r._ispy_gameclick_audio.play())}static pub_game_timesetting_start(){r._game_timesetting_start_audio&&(r._game_timesetting_start_audio.currentTime=0,r._game_timesetting_start_audio.play())}static pub_solution_btn_click(){r._solution_btn_audio&&(r._solution_btn_audio.currentTime=0,r._solution_btn_audio.play())}static pub_playGameresult(){r._game_result_audio&&(r._game_result_audio.currentTime=0,r._game_result_audio.play())}static pub_openProblom(){r._open_problom_audio&&(r._open_problom_audio.currentTime=0,r._open_problom_audio.play())}static pub_quizDone(){r._quiz_done_audio&&(r._quiz_done_audio.currentTime=0,r._quiz_done_audio.play())}static pub_pick_presenter(){r._pick_presenter&&(r._pick_presenter.currentTime=0,r._pick_presenter.play())}static pub_stop(){null!=r._common_audio.onended&&r._common_audio.onended.call(r._common_audio,new Event("ended")),r._common_audio.oncanplaythrough=null,isNaN(r._common_audio.duration)||r._common_audio.paused||r._common_audio.pause()}static pub_play(e,t){r.pub_stop(),e=i.nteString(e,"");const s=i.nteString(r._common_audio.getAttribute("src"),"");if(""===e&&""===s)return void(null!=t&&t(!0));""!==e&&s!==e&&(r._common_audio.src=e);const n=e=>{r._common_audio.onended=null,null!==t&&t(!0),r._common_audio.removeEventListener("error",n)};r._common_audio.onended=e=>{r._common_audio.onended=null,null!==t&&t(!!e),r._common_audio.removeEventListener("error",n)},r._common_audio.addEventListener("error",n),isNaN(r._common_audio.duration)?(r._common_audio.oncanplaythrough=e=>{0!==r._common_audio.currentTime&&(r._common_audio.currentTime=0),r._common_audio.play(),r._common_audio.oncanplaythrough=null},r._common_audio.load()):(0!==r._common_audio.currentTime&&(r._common_audio.currentTime=0),r._common_audio.oncanplaythrough=null,r._common_audio.play())}static pub_set(e,t,s){r._isDvlp=t,r._lang=s,n.set(t)}static pub_addInitedStudent(e){let t=!0;for(let s=0,i=r._students_inited.length;s<i;s++){r._students_inited[s]===e.id&&(t=!1)}t&&r._students_inited.push(e.id);const s=r._start_idx>0&&r._students.length>0&&r._students_inited.length>=r._students.length;return s&&(window.clearTimeout(r._start_idx),r._start_idx=-1),s}static pub_start(e){0===r._students.length||r._students_inited.length>=r._students.length?e():r._start_idx=window.setTimeout(e,2e3)}static pub_clear(){for(;r._students.length>0;)r._students.pop();for(;r._students_inited.length>0;)r._students_inited.pop()}static pub_playHitup(){r._hit_up_audio&&(r._hit_up_audio.currentTime=0,r._hit_up_audio.play())}static pub_playHitdown(){r._hit_down_audio&&(r._hit_down_audio.currentTime=0,r._hit_down_audio.play())}static pub_playHitgood(){r._hit_good_audio&&(r._hit_good_audio.currentTime=0,r._hit_good_audio.play())}static pub_playHitwrong(){r._hit_wrong_audio&&(r._hit_wrong_audio.currentTime=0,r._hit_wrong_audio.play())}static pub_playGamegood(){r._game_good_audio&&(r._game_good_audio.currentTime=0,r._game_good_audio.play())}}t.App=r,r._isMobile=!1,r._students=[],r._students_inited=[],r._student=null,r._lang="ko",r._isDvlp=!1,r._data_url="../data/",r._lesson="",r._book="",r._nextBook=!1,r._prevBook=!1,r._start_idx=-1,r.isStarted=!1,r._addOnHost="https://addonsapi.fel40.com"},function(e,t,s){"use strict";var i=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.postAttention=t.postViewDiv=t.getPreviewDmsResult=t.getPreviewResult=t.showSGiftBox=t.showSLivePointPop=t.launchSTool=t.clearPenTool=t.hidePenTool=t.showPenTool=t.showRecordTool=t.showSendButton=t.alertToStudent=t.showSLoading=t.showSMathKit=t.clearSPenTool=t.takePicture=t.uploadInclassReport=t.stopVideoRecord=t.startVideoRecord=t.switchCamera=t.stopCamera=t.pauseRecordPlayer=t.playRecordPlayer=t.startCustomCamera=t.startCamera=t.getStudents=t.uploadFileToServerMulti=t.uploadImageToServer=t.uploadFileToServer=t.stopVoiceRecord=t.startVoiceRecord=t.sendTeacher=t.disableSoftwareKeyboard=t.sendPAD=t.sendPADToID=t.sendLauncher=t.uploadStudentReport=t.addStudentForStudentReportType6=t.hideStudentReportListPage=t.showStudentReportListPage=t.showStudentReportUI=t.hideStudentReportUI=t.startStudentReportProcess=t.finishContentPage=t.showTMathKit=t.alertToTeacher=t.showTLoading=t.clearTPenTool=t.getBookCaptureInfo=t.uploadTImageToServer=t.useFractionBar=t.logOut=t.exitClass=t.getNaviInfo=t.launchPadTool=t.launchTool=t.exitBook=t.gotoBookByKey=t.gotoBook=t.set=void 0;const n=s(6);let o=!1;t.set=function(e){o=e},t.gotoBook=function(e,t){if(console.log("felsocket gotoBook",e,t),!o)try{window.tsoc_o.gotoBook(e,t)}catch(e){}},t.gotoBookByKey=function(e){if(console.log("felsocket gotoBookByKey",e),!o)try{window.tsoc_o.gotoBookByKey(e)}catch(e){}},t.exitBook=function(){if(console.log("felsocket exitBook"),!o)try{window.tsoc_o.exitBook()}catch(e){}},t.launchTool=function(e){if(console.log("felsocket launchTool",e),!o)try{window.tsoc_o.launchTool(e)}catch(e){}},t.launchPadTool=function(e){if(console.log("felsocket launchPadTool",e),!o)try{window.tsoc_o.launchPadTool(e)}catch(e){}},t.getNaviInfo=function(e){if(console.log("felsocket getNaviInfo",e),!o)try{window.tsoc_o.getNaviInfo(e)}catch(e){}},t.exitClass=function(){if(console.log("felsocket exitClass"),!o)try{window.tsoc_o.exitClass()}catch(e){}},t.logOut=function(){if(console.log("felsocket logOut"),!o)try{window.tsoc_o.logOut()}catch(e){}},t.useFractionBar=function(){if(console.log("felsocket useFractionBar"),!o)try{window.tsoc_o.useFractionBar()}catch(e){}},t.uploadTImageToServer=function(e,t,s,i){if(console.log("felsocket uploadTImageToServer",t,s,i),!o)try{window.tsoc_o.uploadImageToServer(e,t,s,i)}catch(e){}},t.getBookCaptureInfo=function(e){if(console.log("felsocket getBookCaptureInfo"),!o)try{window.tsoc_o.getBookCaptureInfo(e)}catch(e){}},t.clearTPenTool=function(){if(console.log("felsocket clearTPenTool"),!o)try{window.tsoc_o.clearPenTool()}catch(e){}},t.showTLoading=function(e){if(console.log("felsocket showTLoading",e),!o)try{window.tsoc_o.showLoading(e)}catch(e){}},t.alertToTeacher=function(e){if(console.log("felsocket alertToTeacher",e),!o)try{window.tsoc_o.alert(e)}catch(e){}},t.showTMathKit=function(e){if(console.log("felsocket showTMathKit",e),!o)try{window.tsoc_o.showMathKit(e)}catch(e){}},t.finishContentPage=function(){if(!o)try{window.tsoc_o.finishContentPage()}catch(e){}},t.startStudentReportProcess=function(e,t,s){if(!o)try{window.tsoc_o.startStudentReportProcess(e,t,s)}catch(e){}},t.hideStudentReportUI=function(){if(!o)try{window.tsoc_o.hideStudentReportUI()}catch(e){}},t.showStudentReportUI=function(){if(!o)try{window.tsoc_o.showStudentReportUI()}catch(e){}},t.showStudentReportListPage=function(){if(!o)try{window.tsoc_o.showStudentReportListPage()}catch(e){}},t.hideStudentReportListPage=function(){if(!o)try{window.tsoc_o.hideStudentReportListPage()}catch(e){}},t.addStudentForStudentReportType6=function(e){if(!o)try{window.tsoc_o.addStudentForStudentReportType6(e)}catch(e){}},t.uploadStudentReport=function(e,t,s){if(!o)try{window.psoc_o.uploadStudentReport(e,t,s)}catch(e){}},t.sendLauncher=function(e,t){if(5!==e||o)if(6!==e||o)if(7!==e||o){if(8===e)if(console.log("felsocket gotoPrevBook"),o)try{window.top.tsoc_o.gotoPrevBook()}catch(e){}else try{window.tsoc_o.gotoPrevBook()}catch(e){}else if(9===e)if(console.log("felsocket gotoNextBook"),o)try{window.top.tsoc_o.gotoNextBook()}catch(e){}else try{window.tsoc_o.gotoNextBook()}catch(e){}}else try{window.tsoc_o.setTitleBar(t)}catch(e){}else try{window.tsoc_o.showTitleBar()}catch(e){}else try{window.tsoc_o.hideTitleBar()}catch(e){}},t.sendPADToID=function(e,t,s){const i={type:t,data:s};if(o)try{window.top.tsoc_o.sendPADToID(e,i)}catch(e){}else try{window.tsoc_o.sendPADToID(e,i)}catch(e){}},t.sendPAD=function(e,t){const s={type:e,data:t};if(o)try{window.top.tsoc_o.sendAll(s)}catch(e){}else try{window.tsoc_o.sendAll(s)}catch(e){}},t.disableSoftwareKeyboard=function(){try{window.psoc_o.disableSoftwareKeyboard()}catch(e){}},t.sendTeacher=function(e,t){const s={type:e,data:t};if(o)try{null!==window.opener&&window.opener.tsoc_o.sendTeacher(s)}catch(e){}else try{window.psoc_o.sendTeacher(s)}catch(e){}},t.startVoiceRecord=function(){try{window.psoc_o.startVoiceRecord()}catch(e){}},t.stopVoiceRecord=function(){try{window.psoc_o.stopVoiceRecord()}catch(e){}},t.uploadFileToServer=function(e){try{window.psoc_o.uploadFileToServer(e)}catch(e){}},t.uploadImageToServer=function(e,t,s,i){try{window.psoc_o.uploadImageToServer(e,t,s,i)}catch(e){}},t.uploadFileToServerMulti=function(e){try{window.psoc_o.uploadFileToServerMulti(e)}catch(e){}},t.getStudents=function(e){if(o)if(window.top.tsoc_o)try{window.top.tsoc_o.getStudents(e)}catch(e){}else e([],!1);else try{window.tsoc_o.getStudents(e)}catch(e){}},t.startCamera=function(e){if(!o)try{window.psoc_o.startCamera(e)}catch(e){}},t.startCustomCamera=function(e){o||window.parent.postMessage({from:"content",srcFrame:"book",type:"startCustomCamera",msg:e},"*")},t.playRecordPlayer=function(){o||window.parent.postMessage({from:"content",srcFrame:"book",type:"playRecordPlayer"},"*")},t.pauseRecordPlayer=function(){o||window.parent.postMessage({from:"content",srcFrame:"book",type:"pauseRecordPlayer"},"*")},t.stopCamera=function(){if(!o)try{window.psoc_o.stopCamera()}catch(e){}},t.switchCamera=function(e){if(!o)try{window.psoc_o.switchCamera(e)}catch(e){}},t.startVideoRecord=function(){if(!o)try{window.psoc_o.startVideoRecord()}catch(e){}},t.stopVideoRecord=function(){if(!o)try{window.psoc_o.stopVideoRecord()}catch(e){}},t.uploadInclassReport=function(e){if(!o)try{window.tsoc_o.uploadInclassReport(e)}catch(e){}},t.takePicture=function(e){if(!o)try{window.psoc_o.takePicture(e)}catch(e){}},t.clearSPenTool=function(){if(console.log("felsocket clearPenTool"),!o)try{window.psoc_o.clearPenTool()}catch(e){}},t.showSMathKit=function(e){if(console.log("felsocket showSMathKit",e),!o)try{window.psoc_o.showMathKit(e)}catch(e){}},t.showSLoading=function(e){if(console.log("felsocket showSLoading",e),!o)try{window.psoc_o.showLoading(e)}catch(e){}},t.alertToStudent=function(e){if(console.log("felsocket alertToStudent",e),!o)try{window.psoc_o.alert(e)}catch(e){}},t.showSendButton=function(e,t){if(console.log("felsocket showSendButton"),!o)try{window.psoc_o.showSendButton(e,t)}catch(e){}},t.showRecordTool=function(e){if(console.log("felsocket showRecordTool",e),!o)try{window.psoc_o.showRecordTool(e)}catch(e){}},t.showPenTool=function(){if(console.log("felsocket showPentool"),!o)try{window.psoc_o.showPenTool()}catch(e){}},t.hidePenTool=function(){if(console.log("felsocket hidePentool"),!o)try{window.psoc_o.hidePenTool()}catch(e){}},t.clearPenTool=function(){if(console.log("felsocket clearPenTool"),!o)try{window.psoc_o.clearPenTool()}catch(e){}},t.launchSTool=function(e){if(console.log("felsocket launchTool",e),!o)try{window.psoc_o.launchTool(e)}catch(e){}},t.showSLivePointPop=function(e){if(console.log("felsocket showLivePointPop"),!o)try{window.psoc_o.showLivePointPop(e)}catch(e){}},t.showSGiftBox=function(e,t){if(console.log("felsocket showGiftBox"),!o)try{window.psoc_o.showGiftBox(e,t)}catch(e){}},t.getPreviewResult=function(e){return i(this,void 0,void 0,(function*(){return new Promise(t=>{if(o)t([]);else{let s=!1;const i=e=>{s||(s=!0,t(e))};window.tsoc_o.getPreviewResult(i,e),n.delay(()=>{s||(s=!0,t([]))},5e3)}})}))},t.getPreviewDmsResult=function(e){return i(this,void 0,void 0,(function*(){return new Promise(t=>{if(o)t([]);else{let s=!1;const i=e=>{s||(s=!0,t(e))};window.tsoc_o.getPreviewDmsResult(i,e),n.delay(()=>{s||(s=!0,t([]))},5e3)}})}))},t.postViewDiv=function(e){return i(this,void 0,void 0,(function*(){console.log("postViewDiv",e),window.top.postMessage({type:"viewDiv",msg:e,from:"content"},"*")}))},t.postAttention=function(e){return i(this,void 0,void 0,(function*(){console.log("postAttention",e),window.top.postMessage({type:"attention",msg:e,from:"content"},"*")}))}},function(e,t){e.exports=_},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var n,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,s,r):n(t,s))||r);return o>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.ImgBtn=t.AudioBtn=t.ToggleBtn=void 0;const n=s(0),o=s(3),r=s(1);class a extends n.Component{constructor(e){super(e),this.m_pID=-1,this._inited=this._inited.bind(this),this._onClick=this._onClick.bind(this)}_inited(e){!this.m_el&&e&&(this.m_el=e,this.props.onRef&&this.props.onRef(e),e.setAttribute("touch-action","none"),e.addEventListener("pointerdown",t=>{if(!(this.m_pID>=0)){if(this.m_pID=t.pointerId,!this.props.disableCapture)try{e.setPointerCapture(this.m_pID)}catch(e){}this.props.onMouseDown&&this.props.onMouseDown(t)}}),e.addEventListener("pointerup",t=>{if(this.m_pID===t.pointerId){try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1,this.props.onMouseUp&&this.props.onMouseUp(t)}}),e.addEventListener("pointerleave",t=>{if(this.props.disableCapture){if(this.m_pID!==t.pointerId)return;try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1}this.props.onMouseLeave&&this.props.onMouseLeave(t)}),e.addEventListener("pointercancel",t=>{if(this.m_pID===t.pointerId){try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1,this.props.onMouseLeave&&this.props.onMouseLeave(t)}}))}_onClick(e){this.props.onClick&&this.props.onClick(e),this.props.preventEvent&&(e.preventDefault(),e.stopPropagation())}componentDidUpdate(e){if((this.props.disabled&&!e.disabled||!this.props.view&&e.view)&&this.m_pID>=0){try{this.m_el&&this.m_el.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1}}}i([o.observable],a.prototype,"m_pID",void 0);let l=class extends a{constructor(e){super(e),this.m_on=!1,this.m_on=!0===e.on}componentWillReceiveProps(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}render(){const e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down");const t=e.join(" ");let s=this.props.style;return!1===this.props.view&&(s||(s={}),s.display="none"),n.createElement("button",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,disabled:!0===this.props.disabled,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:s},this.props.children)}};i([o.observable],l.prototype,"m_on",void 0),l=i([r.observer],l),t.ToggleBtn=l;let c=class extends l{constructor(e){super(e)}play(){this.m_on||(this.m_on=!0,this.props.playFnc(this.props.src,e=>{this.m_on&&(this.m_on=!1,this.props.onPause&&this.props.onPause(e))}))}_onClick(e){this.m_on?(this.props.pauseFnc(),this.m_on=!1):this.play(),super._onClick(e)}};i([o.action],c.prototype,"play",null),i([o.action],c.prototype,"_onClick",null),c=i([r.observer],c),t.AudioBtn=c;let h=class extends a{constructor(e){super(e),this.m_on=!1,this.m_on=!0===e.on}componentWillReceiveProps(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}render(){const e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down"),!0===this.props.disabled&&e.push("disable");const t=e.join(" ");let s=this.props.style;return!1===this.props.view&&(s||(s={}),s.display="none"),n.createElement("img",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:s,src:this.props.src,useMap:this.props.useMap})}};i([o.observable],h.prototype,"m_on",void 0),h=i([r.observer],h),t.ImgBtn=h},function(e,t,s){"use strict";var i=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getBounds=t.getTimeStr=t.wait=void 0;const n=s(6);t.wait=function(e){return i(this,void 0,void 0,(function*(){return new Promise(t=>{n.delay(t,e)})}))},t.getTimeStr=function(e,t){const s=Math.round(t/1e3);let i=Math.round(e/1e3),n=Math.floor(i/60),o=Math.floor(n/60),r="";return i%=60,n%=60,o>0||s>=3600?(r=o+":",r+=n>=10?n+":":"0"+n+":"):s>=600?r+=n>=10?n+":":"0"+n+":":r=n+":",r+=i>=10?i:"0"+i,r},t.getBounds=function(e){const t={left:0,top:0,width:0,height:0};if(!e)return t;try{const s=e.getBoundingClientRect();t.left=s.left,t.top=s.top,t.width=s.width,t.height=s.height}catch(e){}const s=e.ownerDocument,i=s.body,n=s.documentElement;t.left=t.left-(n.clientLeft||i.clientLeft||0),t.top=t.top-(n.clientTop||i.clientTop||0);const o=s.defaultView;return t.left+=o.pageXOffset||n.scrollLeft||i.scrollLeft,t.top+=o.pageYOffset||n.scrollTop||i.scrollTop,t}},function(e,t){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(e){"object"==typeof window&&(s=window)}e.exports=s},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var n,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,s,r):n(t,s))||r);return o>3&&r&&Object.defineProperty(t,s,r),r},n=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CoverPopup=void 0;const o=s(0),r=s(3),a=s(1),l=s(8);let c=class extends o.Component{constructor(){super(...arguments),this.m_state="closed",this._open=()=>n(this,void 0,void 0,(function*(){"closed"===this.m_state&&(this.m_state="opening",yield l.wait(100),this.m_state="open")})),this._close=()=>n(this,void 0,void 0,(function*(){"open"===this.m_state&&(this.m_state="closing",yield l.wait(400),this.props.onClosed(),this.m_state="closed")}))}componentDidUpdate(e){this.props.view!==e.view&&(this.props.view?this._open():this._close())}render(){return o.createElement("div",{className:this.props.className+" "+this.m_state},this.props.children)}};i([r.observable],c.prototype,"m_state",void 0),c=i([a.observer],c),t.CoverPopup=c},function(e,t){e.exports=ReactIdSwiper},function(e,t,s){"use strict";e.exports=s(27)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._toStringTimestamp=t.getDateStr=t.nteArray=t.intToHTMLcolor=t.nteBool=t.nteString=t.nteFloat=t.nteInt=t.nteUInt=t.getUnicUrl=t.getUnicNum=t.getUnic=void 0,Date.now||(Date.now=function(){return(new Date).getTime()});let i=0;function n(){return o().toString(36)}function o(){const e=Date.now();return e>i?i=e:i+=1,i}t.getUnic=n,t.getUnicNum=o,t.getUnicUrl=function(e){if(!e)return"";let t=e=e.trim();return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")||(t=t.indexOf("?")>0?t+"&t="+n():t+"?t="+n()),t},t.nteUInt=function(e,t){if(null==e)return t;if("number"==typeof e)return isNaN(e)||e<0?t:Math.round(e);{const s=parseInt(String(e),10);return isNaN(s)||s<0?t:s}},t.nteInt=function(e,t){if(null==e)return t;if("number"==typeof e)return Math.round(e);{const s=parseInt(String(e),10);return isNaN(s)?t:s}},t.nteFloat=function(e,t){if(null==e)return t;if("number"==typeof e)return e;{const s=parseFloat(String(e));return isNaN(s)?t:s}},t.nteString=function(e,t){return null==e?t:String(e)},t.nteBool=function(e,t){if(null==e)return t;if("boolean"==typeof e)return e;const s=String(e);return"true"===s||"false"!==s&&t},t.intToHTMLcolor=function(e){let t,s,i,n=e-0;t=(255&n)<<16,s=65280&n,i=(16711680&n)>>>16,n=t|s|i;let o=n.toString(16);return o="#000000".substring(0,7-o.length)+o,o},t.nteArray=function(e){if(e){if(Array.isArray(e))return e;if("string"==typeof e){const t=e;if(t.indexOf("[")>=0&&t.indexOf("]")>0)try{return JSON.parse(t)}catch(e){}}const t=[];return t.push(e),t}return[]},t.getDateStr=function(e="."){const t=new Date,s=t.getFullYear(),i=t.getMonth()+1,n=t.getDate();return s+e+(i<10?"0"+i:""+i)+e+(n<10?"0"+n:""+n)},t._toStringTimestamp=function(e){let t;const s=e.getFullYear();let i=e.getMonth()+1+"";parseInt(i,10)<10&&(i="0"+i);let n=e.getDate()+"";return parseInt(n,10)<10&&(n="0"+n),t=s+"-"+i+"-"+n+" "+e.toTimeString().substr(0,8),t}},function(e,t,s){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(n.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new o(n.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},s(44),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,s(9))},function(e,t){var s,i,n=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(s===setTimeout)return setTimeout(e,0);if((s===o||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:o}catch(e){s=o}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(e){i=r}}();var l,c=[],h=!1,p=-1;function d(){h&&l&&(h=!1,l.length?c=l.concat(c):p=-1,c.length&&u())}function u(){if(!h){var e=a(d);h=!0;for(var t=c.length;t;){for(l=c,c=[];++p<t;)l&&l[p].run();p=-1,t=c.length}l=null,h=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function _(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];c.push(new m(e,t)),1!==c.length||h||a(u)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=_,n.addListener=_,n.once=_,n.off=_,n.removeListener=_,n.removeAllListeners=_,n.emit=_,n.prependListener=_,n.prependOnceListener=_,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,s){e.exports=s(49)},function(e,t,s){"use strict";e.exports=function(e,t){return function(){for(var s=new Array(arguments.length),i=0;i<s.length;i++)s[i]=arguments[i];return e.apply(t,s)}}},function(e,t,s){"use strict";var i=s(2);function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,s){if(!t)return e;var o;if(s)o=s(t);else if(i.isURLSearchParams(t))o=t.toString();else{var r=[];i.forEach(t,(function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),r.push(n(t)+"="+n(e))})))})),o=r.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,s){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,s){"use strict";(function(t){var i=s(2),n=s(54),o={"Content-Type":"application/x-www-form-urlencoded"};function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,l={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(a=s(21)),a),transformRequest:[function(e,t){return n(t,"Accept"),n(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){l.headers[e]=i.merge(o)})),e.exports=l}).call(this,s(15))},function(e,t,s){"use strict";var i=s(2),n=s(55),o=s(18),r=s(57),a=s(60),l=s(61),c=s(22);e.exports=function(e){return new Promise((function(t,h){var p=e.data,d=e.headers;i.isFormData(p)&&delete d["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",_=e.auth.password||"";d.Authorization="Basic "+btoa(m+":"+_)}var g=r(e.baseURL,e.url);if(u.open(e.method.toUpperCase(),o(g,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,u.onreadystatechange=function(){if(u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))){var s="getAllResponseHeaders"in u?a(u.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:s,config:e,request:u};n(t,h,i),u=null}},u.onabort=function(){u&&(h(c("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function(){h(c("Network Error",e,null,u)),u=null},u.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),h(c(t,e,"ECONNABORTED",u)),u=null},i.isStandardBrowserEnv()){var f=s(62),v=(e.withCredentials||l(g))&&e.xsrfCookieName?f.read(e.xsrfCookieName):void 0;v&&(d[e.xsrfHeaderName]=v)}if("setRequestHeader"in u&&i.forEach(d,(function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete d[t]:u.setRequestHeader(t,e)})),i.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),e.responseType)try{u.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&u.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){u&&(u.abort(),h(e),u=null)})),void 0===p&&(p=null),u.send(p)}))}},function(e,t,s){"use strict";var i=s(56);e.exports=function(e,t,s,n,o){var r=new Error(e);return i(r,t,s,n,o)}},function(e,t,s){"use strict";var i=s(2);e.exports=function(e,t){t=t||{};var s={},n=["url","method","params","data"],o=["headers","auth","proxy"],r=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];i.forEach(n,(function(e){void 0!==t[e]&&(s[e]=t[e])})),i.forEach(o,(function(n){i.isObject(t[n])?s[n]=i.deepMerge(e[n],t[n]):void 0!==t[n]?s[n]=t[n]:i.isObject(e[n])?s[n]=i.deepMerge(e[n]):void 0!==e[n]&&(s[n]=e[n])})),i.forEach(r,(function(i){void 0!==t[i]?s[i]=t[i]:void 0!==e[i]&&(s[i]=e[i])}));var a=n.concat(o).concat(r),l=Object.keys(t).filter((function(e){return-1===a.indexOf(e)}));return i.forEach(l,(function(i){void 0!==t[i]?s[i]=t[i]:void 0!==e[i]&&(s[i]=e[i])})),s}},function(e,t,s){"use strict";function i(e){this.message=e}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,e.exports=i},function(e,t,s){e.exports=s(26)},function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const i=s(12),n=s(0),o=s(28),r=s(4),a=s(5),l=s(29);i.setConfig({ErrorOverlay:e=>n.createElement("div",null)});const c={clear:r.App.pub_clear,importLink:l.importLink,importHTML:l.importHTML};let h;h=s(30);let p=!1;const d=h,u=d.default,m=d.AppProvider,_=d.appContext;c.set=(e,t,s)=>{r.App.pub_set(e,t,s),_.setData(e)},c.render=()=>{r.App.pub_initAudio(),o.render(n.createElement(m,null,n.createElement(u,null)),document.getElementById("wrap"))},c.init=(e,t,s,i,n,o)=>{r.App.pub_load(e,null,t,s,i,n,o)},c.start=()=>{p=!0,setTimeout(()=>_.start(),500)},c.receive=e=>{if(4===e.type){const t=e.data;p?t&&t.id&&""!==t.id&&(r.App.isStarted?a.sendPADToID(t.id,0,null):a.sendPADToID(t.id,1,null)):r.App.pub_addInitedStudent(t)&&(p||(p=!0,_.start()))}else _.receive(e)},c.teachingTool=e=>{},c.notifyNaviInfo=(e,t,s,i,n,o)=>{_.notifyNaviInfo(e,t,s,i,n,o)},c.notifyBookCaptureInfo=e=>{_.notifyBookCaptureInfo(e)},c.notifyUploadToServerResult=e=>{_.uploaded(e)},c.notifyUploadToServerMultiResult=e=>{_.multiUploaded(e)},c.notifyAlert=e=>{_.notifyAlert(e)},c.notifyPenToolState=(e,t)=>{_.notifyPenToolState(e,t)},c.notifyHamburgerMenuClicked=e=>{_.notifyHamburgerMenuClicked(e)},c.callThreeminState=()=>{_.callThreeminState()},s(69),e.app_o=c}).call(this,s(9))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=(i=s(0))&&"object"==typeof i&&"default"in i?i.default:i;function o(e){return o.warnAboutHMRDisabled&&(o.warnAboutHMRDisabled=!0,console.error("React-Hot-Loader: misconfiguration detected, using production version in non-production environment."),console.error("React-Hot-Loader: Hot Module Replacement is not enabled.")),n.Children.only(e.children)}o.warnAboutHMRDisabled=!1;var r=function e(){return e.shouldWrapWithAppContainer?function(e){return function(t){return n.createElement(o,null,n.createElement(e,t))}}:function(e){return e}};r.shouldWrapWithAppContainer=!1;t.AppContainer=o,t.hot=r,t.areComponentsEqual=function(e,t){return e===t},t.setConfig=function(){},t.cold=function(e){return e},t.configureComponent=function(){}},function(e,t){e.exports=ReactDOM},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importLink=t.importHTML=void 0,t.importHTML=function(e){return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="document",i.onload=e=>{if(!e)return;const n=i.response;n&&n.body&&n.body.firstElementChild?t(n.body.firstElementChild):n&&n.documentElement?t(n.documentElement):s("error")},i.onerror=e=>{s(e)},i.send(null)})},t.importLink=function(e,t){return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="document",i.onload=e=>{if(!e)return;const s=i.response;t(s)},i.onerror=e=>{s(e)},i.send(null)})}},function(e,t,s){"use strict";(function(e){var i=this&&this.__decorate||function(e,t,s,i){var n,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,s,r):n(t,s))||r);return o>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.appContext=t.AppProvider=void 0;const n=s(0),o=s(1),r=s(12),a=s(32),l=s(33);s(34),s(35);const c=s(36),h=s(66);Object.defineProperty(t,"AppProvider",{enumerable:!0,get:function(){return h.TeacherProvider}}),Object.defineProperty(t,"appContext",{enumerable:!0,get:function(){return h.tContext}});let p=class extends n.Component{render(){const{state:e,actions:t}=this.props,s=e.viewDiv;return n.createElement(n.Fragment,null,n.createElement("div",{className:"content-container"},n.createElement("div",{className:"content-wrapper",style:{left:("direction"===s?0:-1280)+"px"}},n.createElement("div",null,n.createElement(a.default,{className:"video-direction",view:"direction"===s,on:e.directionON,isTeacher:!0,lesson:t.getCurriculum(),bookId:e.bookid,subtitle:"Various Solving Strategies",poster_url:"/content/mathalive_lib/MA/module_strategy/common/bg_direction.jpg",video_url:"/content/mathalive_lib/MA/module_strategy/common/mv_strategy.mp4",video_frame:125,onEndStart:t.onDirectionEndStart,onEnd:t.onDirectionEnded,audio_url:"/content/mathalive_lib/mp3/7_Startegy.mp3"},n.createElement("div",{className:"lesson"},""))),"content"===s&&n.createElement("div",null,n.createElement(c.default,{view:"content"===s&&"module_strategy"===e.prog,state:e,actions:t})))),n.createElement(l.Navi,Object.assign({},e.navi,{onLeftClick:t.naviLeft,onRightClick:t.naviRight})))}};p=i([o.observer],p);const d=h.useTeacher(e=>n.createElement(o.Observer,null,()=>n.createElement(p,{state:e.state,actions:e.actions})));t.default=r.hot(e)(d)}).call(this,s(31)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var n,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,s,r):n(t,s))||r);return o>3&&r&&Object.defineProperty(t,s,r),r},n=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=s(0),r=s(3),a=s(1),l=s(8);let c=class extends o.Component{constructor(e){super(e),this.m_on=!1,this.m_showMathKit=!1,this.bookInfo=[],this.curIndex=0,this._list=[],this._onClick=()=>{this.props.isTeacher&&this._off()},this._off=()=>n(this,void 0,void 0,(function*(){this.props.view&&this.m_on&&(this.m_on=!1,this.props.onEndStart&&this.props.onEndStart(),yield l.wait(500),this.props.view&&!this.m_on&&this.props.onEnd&&this.props.onEnd())})),this.m_on=e.view&&e.on}_on(){return n(this,void 0,void 0,(function*(){this.m_on=!0}))}componentWillReceiveProps(e){if(e.lesson&&this.props.lesson!==e.lesson||this.props.view!==e.view){for(;this.bookInfo.length>0;)this.bookInfo.pop();e.lesson&&e.lesson.childrenList&&e.lesson.childrenList.length>0&&e.lesson.childrenList.map((t,s)=>{try{if(t.book){t.book.id===e.bookId&&(this.curIndex=this.bookInfo.length);let s=t.depth_name?t.depth_name:"";s=s.replace(/\&lt;/g,"<"),s=s.replace(/\&gt;/g,">"),this.bookInfo.push({bookName:t.name?t.name:"",id:t.id,lesson:e.lesson?e.lesson.name:"",subtitle:s})}}catch(e){alert("A ee  "+JSON.stringify(e))}})}}componentDidUpdate(e){this.props.view?e.view?this.props.on&&!e.on?this._on():!this.props.on&&e.on&&this._off():this.props.on?this._on():this.m_on=!1:this.m_on=!1}render(){const{isTeacher:e,subtitle:t}=this.props,s=[];s.push(this.props.className);const i=document.querySelector(".bgm");return this.props.view?(this.m_on&&s.push("on"),i&&i.play()):(s.push("hide"),i&&(i.pause(),i.currentTime=0)),o.createElement("div",{className:s.join(" "),onClick:this._onClick},e&&this.bookInfo&&o.createElement("span",{className:"concept_name"},this.bookInfo.length>0?this.bookInfo[this.curIndex].lesson:""),o.createElement("div",{className:"progress_dot"},e&&this.bookInfo&&this.bookInfo.map((e,t)=>o.createElement("span",{key:"q_"+t,className:this.curIndex===t?"on":""}))),o.createElement("div",{className:"video"},o.createElement("video",{muted:!0,autoPlay:!0,poster:this.props.poster_url?this.props.poster_url:void 0},o.createElement("source",{src:this.props.video_url,type:"video/mp4"}),o.createElement("strong",null,"Your browser does not support the video tag."))),o.createElement("div",{className:"text"},o.createElement("div",{className:"t1"},this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].bookName:""),e&&o.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].subtitle:""}}),!e&&o.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:0===t.length&&this.bookInfo[this.curIndex]?this.bookInfo[this.curIndex].subtitle:t}})),o.createElement("audio",{className:"bgm",autoPlay:!0,src:this.props.audio_url?this.props.audio_url:void 0}))}};i([r.observable],c.prototype,"m_on",void 0),i([r.observable],c.prototype,"_list",void 0),i([r.action],c.prototype,"_off",void 0),c=i([a.observer],c),t.default=c},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var n,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,s,r):n(t,s))||r);return o>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.Navi=void 0;const n=s(0),o=s(3),r=s(1),a=s(7);let l=class extends n.Component{constructor(e){super(e),this.m_on=!1,this.m_isStarted=!1,this._onClick=e=>{this.m_on=!0}}componentDidUpdate(e){this.m_isStarted||!this.props.view||e.view||(this.m_isStarted=!0,this.m_on=!0)}render(){const e=this.m_on?void 0:"off",t={visibility:this.props.view?"visible":"hidden"};return n.createElement(n.Fragment,null,n.createElement("div",{id:"common_navi_left",className:e,style:t},n.createElement("div",null,n.createElement("div",{onClick:this._onClick},n.createElement(a.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),n.createElement(a.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))),n.createElement("div",{id:"common_navi_right",className:e,style:t},n.createElement("div",null,n.createElement("div",{onClick:this._onClick},n.createElement(a.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),n.createElement(a.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))))}};i([o.observable],l.prototype,"m_on",void 0),l=i([r.observer],l),t.Navi=l},function(e,t,s){"use strict";s.r(t)},function(e,t,s){"use strict";s.r(t)},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var n,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,s,r):n(t,s))||r);return o>3&&r&&Object.defineProperty(t,s,r),r},n=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=s(0),r=s(1),a=s(3),l=s(6),c=s(4),h=s(37),p=s(5),d=s(8),u=s(10),m=s(39),_=s(40),g=s(41),f=s(42),v=s(45),b=s(47),y=s(48),w=s(65),k=s(14);var E;!function(e){e[e.READY=0]="READY",e[e.TRY_1_START=1]="TRY_1_START",e[e.TRY_1_END=2]="TRY_1_END",e[e.TRY_2_START=3]="TRY_2_START",e[e.COMPLETE=4]="COMPLETE"}(E||(E={}));let S=class extends o.Component{constructor(e){super(e),this._curIdx=0,this._isEnd=!1,this._prog=0,this.isReset=!1,this._q3ProcessA=0,this._q3ProcessB=0,this._viewHeader=!0,this._onSummaryResult=!1,this._quizs=[[],[],[]],this._quizResults=[],this._viewProblem=!1,this._viewDesc=!1,this._viewMainIframe=!1,this._viewAlert=!1,this._viewCheckAlert=!1,this._viewCheckAlertMsg="",this._viewStrategySelect=!1,this._viewHowToSolve=!1,this.viewWorkSheet=!1,this._viewTwinkle=!0,this._submitStudentCnt=0,this._submitStudents=[[],[]],this._submitStudentCntOfRevise=0,this.curIframe=void 0,this.step1IframeA=void 0,this.step2IframeA=void 0,this.step3IframeA=void 0,this.step1IframeDescA=void 0,this.step2IframeDescA=void 0,this.step3IframeDescA=void 0,this.step1IframeB=void 0,this.step2IframeB=void 0,this.step3IframeB=void 0,this.step1IframeDescB=void 0,this.step2IframeDescB=void 0,this.step3IframeDescB=void 0,this._viewLookbackBtn=!1,this._viewLookback=!1,this._viewCheckStrategy=!1,this._viewTeamSelect=!1,this._viewStrategyMsg_A=!1,this._viewStrategyMsg_B=!1,this._viewResult=!1,this._viewTeamAStudents=!1,this._viewTeamBStudents=!1,this._viewSubmitList=!1,this._viewBtnSub_A=!1,this._viewBtnSub_B=!1,this._viewPopupProblem=!1,this.curProgress=0,this.step_team_A=[],this.step_team_B=[],this.fadeinout="",this.strategy_A="",this.strategy_B="",this.plan_A="",this.plan_B="",this.stepCnt_A=2,this.stepCnt_B=2,this.swappedTeam=!1,this.problem_explain_A="",this.problem_explain_B="",this.team_A=[],this.team_B=[],this._isPlayed=!1,this.seletedQuiz3Team="",this.team=0,this.team_AUsers=0,this.team_BUsers=0,this.teamA_step1_correct=0,this.teamA_step2_correct=0,this.teamA_step3_correct=0,this.teamB_step1_correct=0,this.teamB_step2_correct=0,this.teamB_step3_correct=0,this.teamA_step1_correct_percent=0,this.teamA_step2_correct_percent=0,this.teamA_step3_correct_percent=0,this.teamB_step1_correct_percent=0,this.teamB_step2_correct_percent=0,this.teamB_step3_correct_percent=0,this.msgAlertPopup="",this.bgColors=[],this.stepSolutions_A=[],this.stepSolutions_B=[],this._totalUsers=0,this.lookbackAnswers=[],this._isLivePoint=!1,this._alerttype="",this._isViewSendLive=!0,this.msg="Do you want to send\nGreen lives?",this.sendType="navi",this.getRandomIntInclusive=(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e),this._init=()=>{for(this._prog=0,this._submitStudentCnt=0,this._totalUsers=0,this._submitStudentCntOfRevise=0,this._curIdx=0;this.stepSolutions_A.length>0;)this.stepSolutions_A.pop();for(;this.stepSolutions_B.length>0;)this.stepSolutions_B.pop();for(;this._quizs.length>0;)this._quizs.pop();const{quizs:e}=this.props.actions.getData();for(this._quizs[0]=e.filter(e=>1===e.idx),this._quizs[1]=e.filter(e=>2===e.idx),this._quizs[2]=e.filter(e=>3===e.idx);this._quizResults.length>0;)this._quizResults.pop();this._quizs.map(e=>{let t={seq:e[0].seq,result:[],allusers:0,submitusers:0,nosubmit:0,completed:!1};this._quizResults.push(t)}),this.step_team_A=this._quizs[this._curIdx][0].step,this.step_team_B=this._quizs[this._curIdx][1].step,this.stepCnt_A=this.step_team_A.length,this.stepCnt_B=this.step_team_B.length,this.strategy_A=this._quizs[this._curIdx][0].smTypeNm,this.strategy_B=this._quizs[this._curIdx][1].smTypeNm;let t=this._quizs[this._curIdx][0].smTypeValue;t&&(this.strategy_A=this.strategy_A.replace(t,"").trim());let s=this._quizs[this._curIdx][1].smTypeValue;s&&(this.strategy_B=this.strategy_B.replace(s,"").trim()),this.plan_A=this._quizs[this._curIdx][0].smTypeReason,this.plan_B=this._quizs[this._curIdx][1].smTypeReason,this._viewTwinkle=!0,this._setNavi()},this.onExitBook=()=>{this._prog>=1&&this._prog<=3||(p.clearTPenTool(),p.exitBook())},this.onGotoBook=(e,t)=>{this._prog>=1&&this._prog<=3||(p.clearTPenTool(),p.gotoBook(e,t))},this.toggleSummaryResult=()=>{this._onSummaryResult=!this._onSummaryResult},this._offAlert=()=>{this._viewAlert=!1},this._openPop=()=>{this._isEnd?(this.msgAlertPopup="Retry?",this._alerttype="retry"):(this.msgAlertPopup="Force Quit?",this._alerttype="force"),this._viewAlert=!0},this._onViewCheck=()=>{c.App.pub_playBtnTab(),this._viewCheckAlert=!0,0===this._curIdx?this._viewCheckAlertMsg="Please setup the teams <br/>by solving strategy before proceeding.":1===this._curIdx&&(this._viewCheckAlertMsg="Please swap teams <br/>by solving strategy before proceeding.")},this._onCheckAlertOk=()=>{this._viewCheckAlert&&(c.App.pub_playBtnTab(),this._viewCheckAlert=!1,0===this._curIdx||this._curIdx)},this._onSendStop=()=>n(this,void 0,void 0,(function*(){if(this.props.view&&-1!==this._curIdx){if(this._curIdx<2&&this._isEnd)return this._viewAlert=!1,void this._onSend();if(4===this._prog)return this.isReset=!0,this._viewAlert=!1,this._init(),p.sendPAD(0,null),this._prog=0,void(this._viewSubmitList=!1);if(c.App.pub_playToPad(),2!==this._curIdx){const e={msgtype:"module_strategy_end"};p.sendPAD(10,e),k.setTimeout(()=>{this._isEnd=!0,this._prog=4,2===this._curIdx&&(this._prog=0,this._isEnd=!1,this._viewSubmitList=!1)},3e3)}else{const e="A"===this.seletedQuiz3Team?this._q3ProcessA:this._q3ProcessB,t={msgtype:1===e?"module_strategy_stop":"module_strategy_end"};p.sendPAD(10,t),1===e?("A"===this.seletedQuiz3Team?this._q3ProcessA=2:this._q3ProcessB=2,this._submitStudentCnt=0,this._submitStudentCntOfRevise=0,this._prog=0,this.props.actions.setQuiz3ResultFnc(this._onImageResult)):3===e&&(this._isEnd||(this._isEnd=!0),"A"===this.seletedQuiz3Team?this._q3ProcessA=4:this._q3ProcessB=4,this._prog=4,this.isReset=!0,this.props.actions.setQuiz3ResultFnc(this._onImageResult))}this._viewAlert=!1}})),this.showSolution=()=>{c.App.pub_solution_btn_click(),this._viewProblem=!0,this._viewDesc=!0},this.showProblem=()=>{c.App.pub_playBtnTab(),this._viewProblem=!1,this._viewDesc=!1},this.showLookBack=()=>{c.App.pub_playBtnTab(),this._viewLookback=!0},this.closeLookBack=()=>{c.App.pub_playBtnTab(),this._viewLookback=!1},this.onIfmDescLoaded=()=>{},this.onIfmLoaded=()=>{this.onGotoProgress(this.curProgress),this.stgAnswerVisibility(!1),k.setTimeout(()=>{this._viewMainIframe=!0},1e3)},this._onSend=()=>{if(!this.props.view)return;if(this._prog=1,this.team_A.length+this.team_B.length===0)return this._prog=0,void this._onViewCheck();if(1===this._curIdx&&!this.swappedTeam)return this._prog=0,void this._onViewCheck();this._isEnd=!1,this._submitStudentCnt=0,this._quizResults[this._curIdx].allusers=this.team_A.length+this.team_B.length,this._quizResults[this._curIdx].nosubmit=this.team_A.length+this.team_B.length,this._quizResults[this._curIdx].submitusers=0,this._quizResults[this._curIdx].completed=!1,this._quizResults[this._curIdx].result=[],c.App.pub_playToPad();let e=this.bgColors[this._curIdx%this.bgColors.length];this.team_A.map((t,s)=>{const i={msgtype:"module_strategy_send",quizIdx:this._curIdx,team:0,bookid:this.props.state.bookid,bookkey:this.props.state.bookid,classid:this.props.state.classid,curriculumid:this.props.state.curriculumid,mainColor:e.main,rightColor:e.right};p.sendPADToID(t.id,10,i)}),this.team_B.map((t,s)=>{const i={msgtype:"module_strategy_send",quizIdx:this._curIdx,team:1,bookid:this.props.state.bookid,bookkey:this.props.state.bookid,classid:this.props.state.classid,curriculumid:this.props.state.curriculumid,mainColor:e.main,rightColor:e.right};p.sendPADToID(t.id,10,i)}),this.props.actions.setQuizResultFnc(this._onQuizResult),c.App.pub_reloadStudents(()=>n(this,void 0,void 0,(function*(){this.props.view&&1===this._prog&&(this._totalUsers=c.App.students?c.App.students.length:0,yield d.wait(600),this._prog=2,this._setNavi())})))},this._onQuizResult=e=>{if(!this.props.view)return;if(this._curIdx<0)return;const t=JSON.parse(e.result);l.find(c.App.students,{id:t.studentid})&&(this._quizResults[this._curIdx].submitusers++,this._quizResults[this._curIdx].nosubmit--,this._quizResults[this._curIdx].allusers===this._quizResults[this._curIdx].submitusers&&(this._quizResults[this._curIdx].completed=!0),this._quizResults[this._curIdx].result.push(t),this._submitStudentCnt=this._quizResults[this._curIdx].submitusers,console.log("this._submitStudentCnt",this._submitStudentCnt),this._quizResults[this._curIdx].completed&&(this._isEnd=!0,this._prog=4,this.onViewResult()))},this._onBtnHeaert=()=>{c.App.isDvlp?(this.sendType="button",this._alerttype="livepoint",this.msgAlertPopup="Do you want to send\nGreen lives?",this._viewAlert=!0):(this.sendType="button",p.alertToTeacher({text:this.msg,from:"book"}))},this.handlePostMessage=e=>{let t=e.data;if("macontent"===t.from)if("submit"===t.type);else if("notifyStgTitle"===t.type)0===this.team?this.problem_explain_A=t.msg.innerHTML:this.problem_explain_B=t.msg.innerHTML;else if("notifyStgSolution"===t.type){let e={leftInnerHTML:t.msg.leftInnerHTML,rightInnerHTML:t.msg.rightInnerHTML};0===this.team?this.stepSolutions_A.push(e):this.stepSolutions_B.push(e)}else if("notifyLookbackAnswer"===t.type&&t.msg.answer&&t.msg.answer.length>0){for(;this.lookbackAnswers.length>0;)this.lookbackAnswers.pop();for(let e=0;e<t.msg.answer.length;e++){let s=t.msg.answer[e];this.lookbackAnswers.push(s)}}},this.onViewResult=()=>{c.App.pub_playBtnTab();this._quizResults[this._curIdx].allusers;let e=this._quizResults[this._curIdx].result,t=e.filter(e=>0===e.team),s=e.filter(e=>1===e.team);this.team_AUsers=t.length,this.team_BUsers=s.length,this.teamA_step1_correct=0,this.teamA_step2_correct=0,this.teamA_step3_correct=0,this.teamB_step1_correct=0,this.teamB_step2_correct=0,this.teamB_step3_correct=0,t.map(e=>{e.step.map(e=>{1===e.id&&e.correct&&1===e.tryCnt?this.teamA_step1_correct++:2===e.id&&e.correct&&1===e.tryCnt?this.teamA_step2_correct++:3===e.id&&e.correct&&1===e.tryCnt&&this.teamA_step3_correct++})}),s.map(e=>{e.step.map(e=>{1===e.id&&e.correct&&1===e.tryCnt?this.teamB_step1_correct++:2===e.id&&e.correct&&1===e.tryCnt?this.teamB_step2_correct++:3===e.id&&e.correct&&1===e.tryCnt&&this.teamB_step3_correct++})}),this.team_AUsers>0?(this.teamA_step1_correct_percent=Math.round(100*this.teamA_step1_correct/this.team_AUsers),this.teamA_step2_correct_percent=Math.round(100*this.teamA_step2_correct/this.team_AUsers),this.teamA_step3_correct_percent=Math.round(100*this.teamA_step3_correct/this.team_AUsers)):(this.teamA_step1_correct_percent=0,this.teamA_step2_correct_percent=0,this.teamA_step3_correct_percent=0),this.team_BUsers>0?(this.teamB_step1_correct_percent=Math.round(100*this.teamB_step1_correct/this.team_BUsers),this.teamB_step2_correct_percent=Math.round(100*this.teamB_step2_correct/this.team_BUsers),this.teamB_step3_correct_percent=Math.round(100*this.teamB_step3_correct/this.team_BUsers)):(this.teamB_step1_correct_percent=0,this.teamB_step2_correct_percent=0,this.teamB_step3_correct_percent=0),this._viewResult=!0},this.onGotoProblem=e=>{if(!(e<0||e>=3)){if(this._isEnd=!1,this._prog=0,this._quizResults[e].completed&&(this._isEnd=!0,this._prog=4,this._totalUsers=this._quizResults[e].allusers),this._curIdx!==e&&this.swappedTeam&&(1===this._curIdx||1===e)){const e=this.team_A;this.team_A=this.team_B,this.team_B=e}for(this._curIdx=e,this._submitStudentCnt=this._quizResults[this._curIdx].submitusers,this.stepCnt_A=this.step_team_A.length,this.stepCnt_B=this.step_team_B.length,this.problem_explain_A="",this.problem_explain_B="";this.stepSolutions_A.length;)this.stepSolutions_A.pop();for(;this.stepSolutions_B.length;)this.stepSolutions_B.pop();if(this._viewMainIframe=!1,this._viewResult=!1,this._viewStrategyMsg_A=!1,this._viewStrategyMsg_B=!1,this.seletedQuiz3Team="",this._viewHowToSolve=!1,this._viewSubmitList=!1,this.isReset=!1,this._viewTwinkle=!0,this.team_A.map((e,t)=>{const s={msgtype:"module_strategy_ready",quizIdx:this._curIdx,team:0};p.sendPADToID(e.id,10,s)}),this.team_B.map((e,t)=>{const s={msgtype:"module_strategy_ready",quizIdx:this._curIdx,team:1};p.sendPADToID(e.id,10,s)}),2===this._curIdx){const e={msgtype:"send_students",students:JSON.stringify(c.App.students)};p.sendPAD(10,e)}}},this.onGotoStep=(e,t)=>{this._viewResult=!1,this.onChangeTeam(e,t)},this.onChangeTeam=(e,t)=>{c.App.pub_playBtnTab(),this.team=e,t>10&&(300===t&&(0===e&&2===this.stepCnt_A||1===e&&2===this.stepCnt_B)?(this.curProgress=200,this.onGotoProgress(200)):(this.curProgress=t,this.onGotoProgress(t)))},this.onGotoProgress=e=>{if(0===this.curProgress&&e>1)return;if(1===this.curProgress&&e>10)return;if(10===this.curProgress&&e>100)return;if(100===this.curProgress&&e>200)return;if(200===this.curProgress&&e>300)return;this.curProgress;if(this.curProgress=e,!this.curIframe)return;this._viewDesc=!1,this._viewProblem=!1,this._viewLookbackBtn=!1;let t=0,s=[],i="";if(0===this.team?(t=this.stepCnt_A,s=this.stepSolutions_A,i=this.problem_explain_A):(t=this.stepCnt_B,s=this.stepSolutions_B,i=this.problem_explain_B),this.curProgress>0){if(s.length!==t){for(;s.length;)s.pop();this.chanageBackColor(this.bgColors[this._curIdx%this.bgColors.length],this._curIdx,0,!1),this.chanageBackColor(this.bgColors[this._curIdx%this.bgColors.length],this._curIdx,0,!0)}(""===i||i.length<10)&&this.sendPostMessage("getStgTitle",null,this._curIdx)}0===this.curProgress?(this.sendPostMessage("hideHighlight",null,this._curIdx),0===this.lookbackAnswers.length&&this.getLookbackAnswer(this._curIdx),this.chanageBackColor(this.bgColors[this._curIdx%this.bgColors.length],this._curIdx,0,!1),this.chanageBackColor(this.bgColors[this._curIdx%this.bgColors.length],this._curIdx,0,!0)):1===this.curProgress?this.sendPostMessage("showHighlight",null,this._curIdx):10===this.curProgress?(this._viewStrategySelect=!0,this._viewResult=!1,1!==this._curIdx||this.swappedTeam||(this.team_A.map((e,t)=>{const s={msgtype:"module_strategy_teamview",quizIdx:this._curIdx,team:0};p.sendPADToID(e.id,10,s)}),this.team_B.map((e,t)=>{const s={msgtype:"module_strategy_teamview",quizIdx:this._curIdx,team:1};p.sendPADToID(e.id,10,s)}))):100===this.curProgress?(this.chanageBackColor(this.bgColors[this._curIdx%this.bgColors.length],this._curIdx,1,!1),this.chanageBackColor(this.bgColors[this._curIdx%this.bgColors.length],this._curIdx,1,!0)):200===this.curProgress?(this.chanageBackColor(this.bgColors[this._curIdx%this.bgColors.length],this._curIdx,2,!1),this.chanageBackColor(this.bgColors[this._curIdx%this.bgColors.length],this._curIdx,2,!0),k.setTimeout(()=>{2===t&&(this._viewLookbackBtn=!0)},100)):300===this.curProgress&&(this.chanageBackColor(this.bgColors[this._curIdx%this.bgColors.length],this._curIdx,3,!1),this.chanageBackColor(this.bgColors[this._curIdx%this.bgColors.length],this._curIdx,3,!0),k.setTimeout(()=>{3===t&&(this._viewLookbackBtn=!0)},100)),this.curProgress>0&&this.initContent()},this.resultClose=()=>{this._viewResult=!1},this.onCloseStrategySelect=()=>{c.App.pub_playBtnTab(),this._viewStrategySelect=!1},this.onShowStrategy=(e,t)=>{c.App.pub_playBtnTab(),e.stopPropagation(),"A"===t&&(this._viewStrategyMsg_A=!0),"B"===t&&(this._viewStrategyMsg_B=!0)},this.onSelectTeam=e=>{},this.onSelectTeamMember=e=>{c.App.pub_playBtnTab();let t=e.target;if(0===this._curIdx)this.team_A.length>0||this.team_B.length>0?this._viewTeamAStudents&&this._viewTeamBStudents?(this._viewTeamAStudents=!1,this._viewTeamBStudents=!1):(this._viewTeamAStudents||this._viewTeamBStudents,this._viewTeamAStudents=!0,this._viewTeamBStudents=!0):(this.onRandomTeamSelect(),this._viewStrategySelect=!1,this._viewTeamSelect=!0);else if(1===this._curIdx){if(this.team_A.length+this.team_B.length===0)return this.onRandomTeamSelect(),this._viewStrategySelect=!1,void(this._viewTeamSelect=!0);this.swappedTeam?this.team_A.length+this.team_B.length>0&&(this._viewTeamAStudents&&this._viewTeamBStudents?(this._viewTeamAStudents=!1,this._viewTeamBStudents=!1):(this._viewTeamAStudents||this._viewTeamBStudents,this._viewTeamAStudents=!0,this._viewTeamBStudents=!0)):(this.swappedTeam=!0,this._viewTeamAStudents=!0,this._viewTeamBStudents=!0,k.setTimeout(()=>{this.fadeinout="fadeout",k.setTimeout(()=>{const e=this.team_A;this.team_A=this.team_B,this.team_B=e,t&&(t.className="btn_team change01",k.setTimeout(()=>{t.className="btn_team change02"},2e3)),this.team_A.map((e,t)=>{const s={msgtype:"module_strategy_teamview",quizIdx:this._curIdx,team:0};p.sendPADToID(e.id,10,s)}),this.team_B.map((e,t)=>{const s={msgtype:"module_strategy_teamview",quizIdx:this._curIdx,team:1};p.sendPADToID(e.id,10,s)}),k.setTimeout(()=>{this.fadeinout="fadein"},500)},1e3)},1e3))}},this.onRandomTeamSelect=()=>{c.App.pub_playBtnTab();const e=c.App.students.length,t=Math.ceil(e/2);for(;this.team_A.length>0;)this.team_A.pop();for(;this.team_B.length>0;)this.team_B.pop();for(;this.team_A.length<t;){let t=this.getRandomIntInclusive(0,e-1),s=c.App.students[t];void 0===this.team_A.find(e=>e.id===s.id)&&this.team_A.push(s)}c.App.students.map(e=>{void 0===this.team_A.find(t=>t.id===e.id)&&this.team_B.push(e)})},this.onDoneTeamSelect=()=>{c.App.pub_playBtnTab(),this._viewTeamSelect=!1,this._viewStrategySelect=!0,this.onGotoProgress(10),this.team_A.map((e,t)=>{const s={msgtype:"module_strategy_teamview",quizIdx:this._curIdx,team:0};p.sendPADToID(e.id,10,s)}),this.team_B.map((e,t)=>{const s={msgtype:"module_strategy_teamview",quizIdx:this._curIdx,team:1};p.sendPADToID(e.id,10,s)})},this.onViewWorkSheet=()=>{c.App.pub_playBtnTab(),this.viewWorkSheet=!0},this.onCloseWorkSheet=()=>{c.App.pub_playBtnTab(),this.viewWorkSheet=!1},this.onDownloadWorkSheet=()=>{c.App.pub_playBtnTab(),this.download()},this.download=()=>{var e=document.createElement("a");const t=window.location.protocol+"//"+window.location.host+"/content/mathalive_lib/images/worksheet.png";e.setAttribute("href",t),e.setAttribute("download","worksheet"),document.body.appendChild(e),e.click(),k.setTimeout(()=>{document.body.removeChild(e)},100)},this.onHowtoSolve=()=>{this.props.actions.setAlertResponse(this._onSendLivePoint),this.props.actions.checkLivePoint(this._onMenuButtonClick),c.App.pub_playBtnTab(),this._viewHowToSolve=!0,this._viewTwinkle=!1},this.onCloseHowtoSolve=()=>{c.App.pub_playBtnTab(),this._viewHowToSolve=!1},this.onViewSubmitList=e=>{c.App.pub_playBtnTab(),2===this._prog&&this.team!==e||(0===e&&2===this._q3ProcessB?this._q3ProcessB=4:1===e&&2===this._q3ProcessA&&(this._q3ProcessA=4),this._viewSubmitList=!0,this.team=e)},this.onReviseQuiz3=()=>{this.onSendQuiz3(this.seletedQuiz3Team)},this.onSendQuiz3=e=>{if(!this.props.view)return;if(2===this._prog)return;this.seletedQuiz3Team=e,"A"===e?(this.team=0,this._viewBtnSub_A=!0,0===this._q3ProcessA?this._q3ProcessA=1:2===this._q3ProcessA&&(this._q3ProcessA=3),0!==this._q3ProcessB&&(this._q3ProcessB=4)):(this.team=1,this._viewBtnSub_B=!0,0===this._q3ProcessB?this._q3ProcessB=1:2===this._q3ProcessB&&(this._q3ProcessB=3),0!==this._q3ProcessA&&(this._q3ProcessA=4)),this._prog=1,this._isEnd=!1,this._submitStudentCnt=0;const t="A"===this.seletedQuiz3Team?this._q3ProcessA:this._q3ProcessB;if(1===t){for(;this._submitStudents[this.team].length>0;)this._submitStudents[this.team].pop();c.App.students.map(e=>{let t={student:e,correct:!1,trycnt:0,images:[],livePoint:0,order:-1,new:!1,nosubmit:!0};this._submitStudents[this.team].push(t)})}this.props.actions.setQuiz3ResultFnc(this._onImageResult),c.App.pub_playToPad();let s=this.bgColors[this._curIdx%this.bgColors.length];const i={msgtype:1===t?"module_strategy_send":"module_strategy_revise",quizIdx:this._curIdx,team:"A"===this.seletedQuiz3Team?0:1,bookid:this.props.state.bookid,bookkey:this.props.state.bookkey,classid:this.props.state.classid,curriculumid:this.props.state.curriculumid,mainColor:s.main,rightColor:s.right};p.sendPAD(10,i),c.App.pub_reloadStudents(()=>n(this,void 0,void 0,(function*(){this.props.view&&1===this._prog&&(this._totalUsers=c.App.students?c.App.students.length:0,yield d.wait(600),this._prog=2,this._setNavi())}))),this._viewSubmitList=!0},this._onMenuButtonClick=()=>{this._isLivePoint&&(this.sendType="button",p.alertToTeacher({text:this.msg,from:"book"}))},this._callBackFnc=(e,t)=>{let s=l.find(this._submitStudents[this.team],t=>t.student.id===e);s&&(s.livePoint=0);let i={live:t};p.sendPADToID(e,21,i)},this._onSendLivePoint=()=>{if("navi"===this.sendType&&(this._viewSubmitList=!1),c.App.isDvlp&&(this._viewAlert=!1),this._submitStudents[this.team].length>0)for(let e=0;e<this._submitStudents[this.team].length;e++){let t={addOnHost:c.App.addOnHost,liveType:"green",plusMinusType:"plus",score:this._submitStudents[this.team][e].livePoint,userIdx:this._submitStudents[this.team][e].student.id,clsIdx:this.props.state.classid,depthItemIdx:this.props.state.curriculumid,callback:e=>{this._callBackFnc(t.userIdx,t.score)},error:e=>{console.log("Request Error ! Check the params")}};!c.App.isDvlp&&t.score>0&&y.setLivePoint(t),c.App.isDvlp&&this._callBackFnc(t.userIdx,t.score)}},this._onImageResult=e=>{if(!this.props.view)return;const t="A"===this.seletedQuiz3Team?this._q3ProcessA:this._q3ProcessB,s=l.find(c.App.students,{id:e.id});if(!s)return;const i=this._submitStudents[this.team].findIndex(t=>t.student.id===e.id);if(i>-1){let s=[];for(let e=0;e<this._submitStudents[this.team].length;e++)s.push(this._submitStudents[this.team][e].order);let n=l.max(s);if(this._submitStudents[this.team][i].trycnt=1,this._submitStudents[this.team][i].order=n+1,this._submitStudents[this.team][i].nosubmit=!1,this._submitStudents[this.team][i].images&&this._submitStudents[this.team][i].images.length>0){this._submitStudents[this.team][i].images=[];JSON.parse(e.imageUrl).map((e,t)=>{this._submitStudents[this.team][i].images.push(e)}),t>=3&&(this._submitStudents[this.team][i].new=!0)}else{this._submitStudents[this.team][i].images=[];JSON.parse(e.imageUrl).map((e,t)=>{this._submitStudents[this.team][i].images.push(e)})}3===t?this._submitStudentCntOfRevise++:this._submitStudentCnt++}else{let i={student:s,correct:!1,trycnt:0,images:[],livePoint:0,order:-1,nosubmit:!1,new:!1};i.images=[];JSON.parse(e.imageUrl).map((e,t)=>{i.images.push(e)}),this._submitStudents[this.team].push(i),3===t?this._submitStudentCntOfRevise++:this._submitStudentCnt++}1===t&&this._totalUsers===this._submitStudentCnt?("A"===this.seletedQuiz3Team?this._q3ProcessA=2:this._q3ProcessB=2,this._submitStudentCnt=0,this._submitStudentCntOfRevise=0,this._prog=0,this.props.actions.setQuiz3ResultFnc(null)):3===t&&this._submitStudentCntOfRevise>0&&this._totalUsers===this._submitStudentCnt+this._submitStudentCntOfRevise&&(this._isEnd||(this._isEnd=!0),"A"===this.seletedQuiz3Team?this._q3ProcessA=4:this._q3ProcessB=4,this._prog=4,this.isReset=!0,this.props.actions.setQuiz3ResultFnc(null))},this._onSendPresenter=(e,t)=>n(this,void 0,void 0,(function*(){const s=l.find(c.App.students,t=>t.id===e),i={msgtype:"presenter_send",id:e,showhide:t,student:JSON.stringify(s),curIdx:this.team};p.sendPAD(10,i),this.props.actions.setLivepointResultFnc(this._onLivePointResult),this._isViewSendLive=!1})),this._onLivePointResult=e=>{const t=this._submitStudents[this.team].findIndex(t=>t.student.id===e.to);100!==this._submitStudents[this.team][t].livePoint&&(this._submitStudents[this.team][t].livePoint+=e.livePoint)},this._onSendLiveget=e=>n(this,void 0,void 0,(function*(){const t=this._submitStudents[this.team].findIndex(t=>t.student.id===e);let s=this._submitStudents[this.team][t].livePoint;const i={msgtype:"presenter_end",studentId:e,livePoint:s};p.sendPAD(10,i),this._isViewSendLive=!0})),this._onHidePresenter=()=>{},this._checkisPlayed=()=>{this._isPlayed=!0},this.onNext=(e,t)=>n(this,void 0,void 0,(function*(){const s=l.find(c.App.students,t=>t.id===e);p.sendPAD(10,{msgtype:"next_presenter"}),yield d.wait(600);const i={msgtype:"presenter_send",id:e,showhide:t,student:JSON.stringify(s),curIdx:this.team};p.sendPAD(10,i)})),this.onPrev=(e,t)=>n(this,void 0,void 0,(function*(){const s=l.find(c.App.students,t=>t.id===e);p.sendPAD(10,{msgtype:"next_presenter"}),yield d.wait(600);const i={msgtype:"presenter_send",id:e,showhide:t,student:JSON.stringify(s),curIdx:this.team};p.sendPAD(10,i)})),this.onShowTeamStudents=e=>{c.App.pub_playBtnTab(),0===e?this._viewTeamAStudents=!this._viewTeamAStudents:1===e&&(this._viewTeamBStudents=!this._viewTeamBStudents)},this.onChangeQuestion=e=>{if(0!==e){if(2===this._prog)return;this._viewPopupProblem=!0,k.setTimeout(()=>{this._viewPopupProblem=!1},2e3)}this.onGotoProblem(e),this.onGotoProgress(0),this._viewMainIframe=!0},this.props.actions.resetQuizResultFnc(this._init),this.bgColors.push({main:"#ffe9f0",right:"#ffd7e3"}),this.bgColors.push({main:"#ffeaea",right:"#ffdada"}),this.bgColors.push({main:"#ffefe5",right:"#ffdcd9"}),this.bgColors.push({main:"#feeedf",right:"#fddfc4"}),this.bgColors.push({main:"#ffefd9",right:"#ffe2b9"}),this.bgColors.push({main:"#fff7d9",right:"#ffecb9"}),this.bgColors.push({main:"#fbf9db",right:"#f8f7bd"}),this.bgColors.push({main:"#f1fbdc",right:"#e6f8bf"}),this.bgColors.push({main:"#e4fae2",right:"#caf6c9"}),this.bgColors.push({main:"#dff5f2",right:"#bdeae4"}),this.bgColors.push({main:"#e2f7ff",right:"#c0ecfe"}),this.bgColors=this.bgColors.sort(()=>.5-Math.random()),this._init()}removeHTML(e){var t=document.createElement("DIV");return t.innerHTML=e,t.innerText}sendPostMessageToDesc(e,t,s,i){var n,o;let r={from:"matemplate",to:"macontent",type:e,msg:t};r=JSON.parse(JSON.stringify(r)),s<0||(i<=1?(this.step1IframeDescA&&(null===(n=this.step1IframeDescA.contentWindow)||void 0===n||n.postMessage(r,"*")),this.step1IframeDescB&&(null===(o=this.step1IframeDescB.contentWindow)||void 0===o||o.postMessage(r,"*"))):2===i?(this.step2IframeDescA&&this.step2IframeDescA.contentWindow.postMessage(r,"*"),this.step2IframeDescB&&this.step2IframeDescB.contentWindow.postMessage(r,"*")):3===i&&(this.step3IframeDescA&&this.step3IframeDescA.contentWindow.postMessage(r,"*"),this.step3IframeDescB&&this.step3IframeDescB.contentWindow.postMessage(r,"*")))}chanageBackColor(e,t,s,i){if(!e)return;const n={bgColor:Object.assign({},e)};i?this.sendPostMessageToDesc("changeBGStyle",n,t,s):this.sendPostMessage("changeBGStyle",n,t,s)}stgAnswerVisibility(e){this.sendPostMessage("stgAnswerVisibility",{isVisible:e},this._curIdx)}_setNavi(){this.props.actions.setNaviView(!0),this.props.actions.setNavi(!0,!0);let e=0;e=0===this.team?this.stepCnt_A:this.stepCnt_B,0===this.curProgress&&(0===this._curIdx||1===this._curIdx?this.props.actions.setNavi(!0,!0):2===this._curIdx&&this.props.actions.setNavi(!0,!1)),0===this._curIdx||1===this._curIdx?this._viewResult&&this.props.actions.setNavi(!0,!1):2===this._curIdx&&(this._viewSubmitList&&this.props.actions.setNavi(!0,!1),this._viewSubmitList||0!==this.curProgress||2!==this._prog||this.props.actions.setNavi(!1,!0),this._viewSubmitList||0!==this.curProgress||2===this._prog||this.props.actions.setNavi(!0,!0)),this.props.actions.setNaviFnc(()=>{if(this._viewSubmitList&&this._curIdx,this._viewResult)this._viewResult=!1;else if(0===this.curProgress)if(this._viewSubmitList){if(this._isLivePoint)return this.sendType="navi",this._alerttype="livepoint",this.msgAlertPopup="Do you want to send\nGreen lives?",void(c.App.isDvlp?this._viewAlert=!0:p.alertToTeacher({text:this.msg,from:"book"}));this._viewSubmitList=!1}else if(this._viewHowToSolve)this._viewHowToSolve=!1;else{if(2===this._prog)return;if(0===this._curIdx)p.clearTPenTool(),this.props.actions.gotoDirection();else{if(2===this._curIdx){const e={msgtype:"module_strategy_ready",quizIdx:this._curIdx,team:0};p.sendPAD(10,e)}this.onGotoProblem(this._curIdx-1),this.stepCnt_B<this.stepCnt_A?this.team=0:this.team=1,3===this.stepCnt_A||3===this.stepCnt_B?(this.curProgress=300,this.onGotoProgress(300)):(this.curProgress=200,this.onGotoProgress(200))}}else 1===this.curProgress?this.onGotoProgress(0):10===this.curProgress?this.onGotoProgress(1):100===this.curProgress?1===this.team?(this.team=0,this.onGotoProgress(100)):this.onGotoProgress(10):200===this.curProgress?1===this.team?(this.team=0,this.onGotoProgress(200)):(this.team=1,this.onGotoProgress(100)):300===this.curProgress&&(1===this.team&&3===this.stepCnt_A?(this.team=0,this.onGotoProgress(300)):(this.team=1,this.onGotoProgress(200)))},()=>{if(0===this.curProgress)2!==this._curIdx||this._viewSubmitList||2!==this._prog?2!==this._curIdx||this._viewSubmitList||2===this._prog?this.onGotoProgress(1):(p.clearTPenTool(),this.props.actions.gotoNextBook()):this._viewSubmitList=!0;else if(1===this.curProgress)this.onGotoProgress(10);else if(10===this.curProgress)this.team=0,this.onGotoProgress(100);else if(100===this.curProgress)0===this.team?(this.team=1,this.onGotoProgress(100)):(this.team=0,this.onGotoProgress(200));else if(200===this.curProgress)if(0===this.team)this.team=1,this.onGotoProgress(200);else if(3===this.stepCnt_A)this.team=0,this.onGotoProgress(300);else if(3===this.stepCnt_B)this.team=1,this.onGotoProgress(300);else{if(2===this._prog)return;this._viewPopupProblem=!0,k.setTimeout(()=>{this._viewPopupProblem=!1},2e3),this.onGotoProblem(this._curIdx+1),this.onGotoProgress(0)}else if(300===this.curProgress)if(0===this.team)this.team=1,this.onGotoProgress(300);else{if(2===this._prog)return;this._viewPopupProblem=!0,k.setTimeout(()=>{this._viewPopupProblem=!1},2e3),this.onGotoProblem(this._curIdx+1),this.onGotoProgress(0)}})}componentDidMount(){window.addEventListener("message",this.handlePostMessage,!1)}componentWillUnmount(){window.removeEventListener("message",this.handlePostMessage,!1)}sendPostMessage(e,t,s,i=0){if("getStgSolution"===e){let e=this.step_team_A[0].url,s=e.indexOf("https://"),i=e.indexOf("http://");s>-1?(e=e.substring(s+8),e="https://"+e.split("/")[0]+"/"):i>-1&&(e=e.substring(i+7),e="http://"+e.split("/")[0]+"/"),t={serverPath:e}}let n={from:"matemplate",to:"macontent",type:e,msg:t};n=JSON.parse(JSON.stringify(n)),"getStgSolution"===e?(k.setTimeout(()=>{s>-1&&this.step1IframeDescA&&this.step1IframeDescA.contentWindow&&0===this.team&&this.step1IframeDescA.contentWindow.postMessage(n,"*"),s>-1&&this.step1IframeDescB&&this.step1IframeDescB.contentWindow&&1===this.team&&this.step1IframeDescB.contentWindow.postMessage(n,"*")},0),k.setTimeout(()=>{s>-1&&this.step2IframeDescA&&this.step2IframeDescA.contentWindow&&0===this.team&&this.step2IframeDescA.contentWindow.postMessage(n,"*"),s>-1&&this.step2IframeDescB&&this.step2IframeDescB.contentWindow&&1===this.team&&this.step2IframeDescB.contentWindow.postMessage(n,"*")},100),k.setTimeout(()=>{s>-1&&this.step3IframeDescA&&this.step3IframeDescA.contentWindow&&0===this.team&&this.step3IframeDescA.contentWindow.postMessage(n,"*"),s>-1&&this.step3IframeDescB&&this.step3IframeDescB.contentWindow&&1===this.team&&this.step3IframeDescB.contentWindow.postMessage(n,"*")},200)):(0===i&&this.curIframe&&this.curIframe.contentWindow.postMessage(n,"*"),1===i&&this.step1IframeA&&this.step1IframeA.contentWindow&&this.step1IframeA.contentWindow.postMessage(n,"*"),2===i&&this.step2IframeA&&this.step2IframeA.contentWindow&&this.step2IframeA.contentWindow.postMessage(n,"*"),3===i&&this.step3IframeA&&this.step3IframeA.contentWindow&&this.step3IframeA.contentWindow.postMessage(n,"*"),1===i&&this.step1IframeB&&this.step1IframeB.contentWindow&&this.step1IframeB.contentWindow.postMessage(n,"*"),2===i&&this.step2IframeB&&this.step2IframeB.contentWindow&&this.step2IframeB.contentWindow.postMessage(n,"*"),3===i&&this.step3IframeB&&this.step3IframeB.contentWindow&&this.step3IframeB.contentWindow.postMessage(n,"*"))}getLookbackAnswer(e){const t=this._quizs;if(e<0||0===t.length||e>=t.length)return;let s=t[e][0];if(!s||!s.answers||s.answers.length<1)return;const i=s.answers.find(e=>1===e.basetype);if(!i)return;const n={type:"choice",values:i.answers};this.sendPostMessage("getLookbackAnswer",n,e)}initContent(){if(this._curIdx<0)return;const e=this._quizs;if(this._curIdx<0||0===e.length||this._curIdx>=e.length)return;let t=e[this._curIdx][this.team],s=null,i=0;if(100===this.curProgress?(i=1,s=t.step[0]):200===this.curProgress?(i=2,s=t.step[1]):300===this.curProgress?(i=3,s=t.step[2]):s=t,!s)return;let n={idx:this._curIdx,quizmode:"module_strategy",isTeacher:!0,content:JSON.parse(JSON.stringify(s))};this.sendPostMessage("init",n,this._curIdx,i)}initContentAll(){const e=this.props.actions.getData().quizs;for(let t=0;t<e.length;t++){let s={idx:t,quizmode:"module_strategy",isTeacher:!0,content:e[t]};this.sendPostMessage("init",s,t)}}completeContentAll(){const e=this.props.actions.getData().quizs;for(let t=0;t<e.length;t++){let s={idx:t,quizmode:"module_strategy",isTeacher:!0,content:e[t]};this.sendPostMessage("completed",s,t)}}_checkLivePoint(){this._submitStudents[this.team].filter((e,t)=>e.livePoint>0).length>0?this._isLivePoint=!0:this._isLivePoint=!1}componentDidUpdate(e){this.props.view&&!e.view?(this._curIdx=0,this._prog=0,this._isEnd=!1,this.props.actions.setQuizResultFnc(null),this._viewAlert=!1,this._onSummaryResult=!0,this._viewHeader=!0,2===this._curIdx&&(this._isViewSendLive=!0)):!this.props.view&&e.view&&(this.props.actions.setQuizResultFnc(null),this.props.actions.setAlertResponse(null),this.props.actions.checkLivePoint(null),this._viewHeader=!0,this._viewAlert=!1,this._onSummaryResult=!0),this.props.view&&this._setNavi(),this.props.view&&this._viewSubmitList&&2===this._curIdx&&this._checkLivePoint()}render(){const{view:e,state:t,actions:s}=this.props;if(0===this._quizs.length)return o.createElement(o.Fragment,null);let i=[];const n=this._quizs[this._curIdx][0].difiicult;for(let e=0;e<n;e++)i.push(o.createElement("span",{key:e}));let r=this._quizs[this._curIdx][this.team],a=0,c=r.url;0!==this._curIdx&&1!==this._curIdx||(a=r.step.length);let p=[];if(2===this._curIdx&&p.push(this._submitStudents[this.team]),2===this._curIdx){let e=document.getElementsByClassName("progressWrap")[0];2===this._prog?e&&(this._viewHowToSolve&&!this._viewSubmitList?("A"===this.seletedQuiz3Team?(e.style.right="915px",e.style.bottom="113px"):"B"===this.seletedQuiz3Team&&(e.style.right="355px",e.style.bottom="113px"),e.style.zIndex="100"):(e.style.right="9px",e.style.bottom="9px",e.style.zIndex="100")):e&&(e.style.right="9px",e.style.bottom="9px",e.style.zIndex="100")}if(this._viewSubmitList){let e=document.getElementsByClassName("t_sendshare")[0];if(e){let t=e.getElementsByClassName("strategy")[0];if(t){let e=t.getElementsByTagName("button")[0],s=t.getElementsByTagName("button")[1];e&&(e.className=0===this.team?"on":"",e.style.display="",e.innerText="Strategy A"),s&&(s.className=1===this.team?"on":"",s.style.display="",s.innerText="Strategy B"),t.style.display=""}}}if(this._viewHowToSolve){if(this._viewBtnSub_A){let e=document.getElementsByClassName("btm_btns")[0];if(e){let t=e.getElementsByClassName("btn_submission")[0];1===e.childElementCount||4===this._prog?t.style.marginLeft="0px":t.style.marginLeft="20px"}}if(this._viewBtnSub_B){let e=document.getElementsByClassName("btm_btns")[1];if(e){let t=e.getElementsByClassName("btn_submission")[0];1===e.childElementCount||4===this._prog?t.style.marginLeft="0px":t.style.marginLeft="20px"}}}const d="A"===this.seletedQuiz3Team?this._q3ProcessA:this._q3ProcessB;return o.createElement("div",{className:"t_module_strategy",style:{display:e?void 0:"none"}},o.createElement("div",{className:"strategyContent",style:{display:this._viewSubmitList?"none":""}},o.createElement(m.MAHeader_STRATEGY,{view:this._viewHeader,curProgress:this.curProgress,onGotoProgress:this.onGotoProgress,isStudent:!1,quizIdx:this._curIdx,stepCnt_A:this.stepCnt_A,stepCnt_B:this.stepCnt_B,team:this.team,onChangeTeam:this.onChangeTeam,typeStrategy:"module_strategy",onViewWorkSheet:this.onViewWorkSheet,onChangeQuestion:this.onChangeQuestion}),o.createElement("div",{id:"contentWrap",className:"contentWrap",style:{background:this.bgColors[this._curIdx].main}},o.createElement("div",{style:{display:0===this.curProgress||1===this.curProgress?"":"none"}},o.createElement("iframe",{src:c,onLoad:this.onIfmLoaded,style:{display:this._viewMainIframe?"":"none"},ref:e=>{e&&(this.curIframe=e)}})),0===this._curIdx&&o.createElement(o.Fragment,null,o.createElement("div",{style:{display:100===this.curProgress&&a>0&&0===this.team?"":"none"}},o.createElement("iframe",{src:this._quizs[0][0].step[0].url,style:{display:this._viewDesc?"none":""},ref:e=>{e&&(this.step1IframeA=e)}}),o.createElement("iframe",{src:this._quizs[0][0].step[0].desc,style:{display:this._viewDesc?"":"none"},ref:e=>{e&&(this.step1IframeDescA=e)},onLoad:this.onIfmDescLoaded})),o.createElement("div",{style:{display:100===this.curProgress&&a>0&&1===this.team?"":"none"}},o.createElement("iframe",{src:this._quizs[0][1].step[0].url,style:{display:this._viewDesc?"none":""},ref:e=>{e&&(this.step1IframeB=e)}}),o.createElement("iframe",{src:this._quizs[0][1].step[0].desc,style:{display:this._viewDesc?"":"none"},ref:e=>{e&&(this.step1IframeDescB=e)},onLoad:this.onIfmDescLoaded})),o.createElement("div",{style:{display:200===this.curProgress&&a>0&&0===this.team?"":"none"}},o.createElement("iframe",{src:this._quizs[0][0].step[1].url,style:{display:this._viewDesc?"none":""},ref:e=>{e&&(this.step2IframeA=e)}}),o.createElement("iframe",{src:this._quizs[0][0].step[1].desc,style:{display:this._viewDesc?"":"none"},ref:e=>{e&&(this.step2IframeDescA=e)},onLoad:this.onIfmDescLoaded})),o.createElement("div",{style:{display:200===this.curProgress&&a>0&&1===this.team?"":"none"}},o.createElement("iframe",{src:this._quizs[0][1].step[1].url,style:{display:this._viewDesc?"none":""},ref:e=>{e&&(this.step2IframeB=e)}}),o.createElement("iframe",{src:this._quizs[0][1].step[1].desc,style:{display:this._viewDesc?"":"none"},ref:e=>{e&&(this.step2IframeDescB=e)},onLoad:this.onIfmDescLoaded})),3===this._quizs[0][0].step.length&&o.createElement("div",{style:{display:300===this.curProgress&&0===this.team?"":"none"}},o.createElement("iframe",{src:this._quizs[0][0].step[2].url,style:{display:this._viewDesc?"none":""},ref:e=>{e&&(this.step3IframeA=e)}}),o.createElement("iframe",{src:this._quizs[0][0].step[2].desc,style:{display:this._viewDesc?"":"none"},ref:e=>{e&&(this.step3IframeDescA=e)},onLoad:this.onIfmDescLoaded})),3===this._quizs[0][1].step.length&&o.createElement("div",{style:{display:300===this.curProgress&&1===this.team?"":"none"}},o.createElement("iframe",{src:this._quizs[0][1].step[2].url,style:{display:this._viewDesc?"none":""},ref:e=>{e&&(this.step3IframeB=e)}}),o.createElement("iframe",{src:this._quizs[0][1].step[2].desc,style:{display:this._viewDesc?"":"none"},ref:e=>{e&&(this.step3IframeDescB=e)},onLoad:this.onIfmDescLoaded}))),1===this._curIdx&&o.createElement(o.Fragment,null,o.createElement("div",{style:{display:100===this.curProgress&&a>0&&0===this.team?"":"none"}},o.createElement("iframe",{src:this._quizs[1][0].step[0].url,style:{display:this._viewDesc?"none":""},ref:e=>{e&&(this.step1IframeA=e)}}),o.createElement("iframe",{src:this._quizs[1][0].step[0].desc,style:{display:this._viewDesc?"":"none"},ref:e=>{e&&(this.step1IframeDescA=e)},onLoad:this.onIfmDescLoaded})),o.createElement("div",{style:{display:100===this.curProgress&&a>0&&1===this.team?"":"none"}},o.createElement("iframe",{src:this._quizs[1][1].step[0].url,style:{display:this._viewDesc?"none":""},ref:e=>{e&&(this.step1IframeB=e)}}),o.createElement("iframe",{src:this._quizs[1][1].step[0].desc,style:{display:this._viewDesc?"":"none"},ref:e=>{e&&(this.step1IframeDescB=e)},onLoad:this.onIfmDescLoaded})),o.createElement("div",{style:{display:200===this.curProgress&&a>0&&0===this.team?"":"none"}},o.createElement("iframe",{src:this._quizs[1][0].step[1].url,style:{display:this._viewDesc?"none":""},ref:e=>{e&&(this.step2IframeA=e)}}),o.createElement("iframe",{src:this._quizs[1][0].step[1].desc,style:{display:this._viewDesc?"":"none"},ref:e=>{e&&(this.step2IframeDescA=e)},onLoad:this.onIfmDescLoaded})),o.createElement("div",{style:{display:200===this.curProgress&&a>0&&1===this.team?"":"none"}},o.createElement("iframe",{src:this._quizs[1][1].step[1].url,style:{display:this._viewDesc?"none":""},ref:e=>{e&&(this.step2IframeB=e)}}),o.createElement("iframe",{src:this._quizs[1][1].step[1].desc,style:{display:this._viewDesc?"":"none"},ref:e=>{e&&(this.step2IframeDescB=e)},onLoad:this.onIfmDescLoaded})),3===this._quizs[1][0].step.length&&o.createElement("div",{style:{display:300===this.curProgress&&0===this.team?"":"none"}},o.createElement("iframe",{src:this._quizs[1][0].step[2].url,style:{display:this._viewDesc?"none":""},ref:e=>{e&&(this.step3IframeA=e)}}),o.createElement("iframe",{src:this._quizs[1][0].step[2].desc,style:{display:this._viewDesc?"":"none"},ref:e=>{e&&(this.step3IframeDescA=e)},onLoad:this.onIfmDescLoaded})),3===this._quizs[1][1].step.length&&o.createElement("div",{style:{display:300===this.curProgress&&1===this.team?"":"none"}},o.createElement("iframe",{src:this._quizs[1][1].step[2].url,style:{display:this._viewDesc?"none":""},ref:e=>{e&&(this.step3IframeB=e)}}),o.createElement("iframe",{src:this._quizs[1][1].step[2].desc,style:{display:this._viewDesc?"":"none"},ref:e=>{e&&(this.step3IframeDescB=e)},onLoad:this.onIfmDescLoaded}))),o.createElement("div",{className:"footer"},o.createElement("div",{className:"rate_star"},i,o.createElement("div",{className:"team_sign "+(0===this.team?"a":"b"),style:{display:this.curProgress>10?"":"none"}},0===this.team?"A":"B"))),(0===this._curIdx||1===this._curIdx)&&o.createElement(o.Fragment,null,o.createElement("div",{className:"team_result"+(this._viewResult?" perform":""),style:{display:this._viewResult||10===this.curProgress&&this._viewStrategySelect?"block":"none"}},o.createElement("div",{className:"top_title"},"Result"),o.createElement("div",{className:"team a",onClick:this.onSelectTeam.bind(this,0)},o.createElement("span",{className:"sign"}),o.createElement("div",{className:"tit"},this.removeHTML(this.strategy_A)),o.createElement("div",{className:"text",style:{display:this._viewResult?"none":"block"}},o.createElement("div",{className:"scroll",dangerouslySetInnerHTML:{__html:this.plan_A}})),o.createElement("div",{className:"graph",style:{display:this._viewResult&&0!==this.team_AUsers?"block":"none"}},o.createElement("div",{className:"bar_wrap step1",onClick:this.onGotoStep.bind(this,0,100)},o.createElement("span",{className:"bar",style:{width:(this.teamA_step1_correct_percent<12?12:this.teamA_step1_correct_percent)+"%"}},o.createElement("span",{className:"per"},this.teamA_step1_correct_percent+"%"))),o.createElement("div",{className:"bar_wrap step2",onClick:this.onGotoStep.bind(this,0,200)},o.createElement("span",{className:"bar",style:{width:(this.teamA_step2_correct_percent<12?12:this.teamA_step2_correct_percent)+"%"}},o.createElement("span",{className:"per"},this.teamA_step2_correct_percent+"%"))),o.createElement("div",{className:"bar_wrap step3",onClick:3===this.step_team_A.length?this.onGotoStep.bind(this,0,300):void 0,style:{display:2===this.step_team_A.length?"none":"block"}},o.createElement("span",{className:"bar",style:{width:(this.teamA_step3_correct_percent<12?12:this.teamA_step3_correct_percent)+"%"}},o.createElement("span",{className:"per"},this.teamA_step3_correct_percent+"%")))),o.createElement("div",{className:"msg"+(this._viewStrategyMsg_A&&!this._viewResult?" show ani":""),dangerouslySetInnerHTML:{__html:this.strategy_A}}),o.createElement("button",{className:"btn",style:{display:this._viewStrategyMsg_A||this._viewResult?"none":"block"},onClick:e=>this.onShowStrategy(e,"A")},"Check"),o.createElement("div",{className:"list"+(this._viewTeamAStudents?" show":"")+" "+this.fadeinout,style:{display:this.team_A.length+this.team_B.length>0?"block":"none"}},o.createElement("div",{className:"title",onClick:this.onShowTeamStudents.bind(this,0)},"Red("+this.team_A.length+")"),o.createElement("div",{className:"scroll"},o.createElement("ul",null,this.team_A.map((e,t)=>{let s="",i="";return"2"===(e.displayMode?e.displayMode:"1")?(s=e.avatar,i=e.nickname):(s=e.thumb,i=e.name),o.createElement("li",{key:t},""===s&&o.createElement("div",{className:"F"===e.gender?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,i.substring(0,2).toUpperCase())),""!==s&&o.createElement("img",{src:s}),t+1+". "+i)}))))),o.createElement("div",{className:"team b",onClick:this.onSelectTeam.bind(this,1)},o.createElement("span",{className:"sign"}),o.createElement("div",{className:"tit"},this.removeHTML(this.strategy_B)),o.createElement("div",{className:"text",style:{display:this._viewResult?"none":"block"}},o.createElement("div",{className:"scroll",dangerouslySetInnerHTML:{__html:this.plan_B}})),o.createElement("div",{className:"graph",style:{display:this._viewResult&&0!==this.team_BUsers?"block":"none"}},o.createElement("div",{className:"bar_wrap step1",onClick:this.onGotoStep.bind(this,1,100)},o.createElement("span",{className:"bar",style:{width:(this.teamB_step1_correct_percent<12?12:this.teamB_step1_correct_percent)+"%"}},o.createElement("span",{className:"per"},this.teamB_step1_correct_percent+"%"))),o.createElement("div",{className:"bar_wrap step2",onClick:this.onGotoStep.bind(this,1,200)},o.createElement("span",{className:"bar",style:{width:(this.teamB_step2_correct_percent<12?12:this.teamB_step2_correct_percent)+"%"}},o.createElement("span",{className:"per"},this.teamB_step2_correct_percent+"%"))),o.createElement("div",{className:"bar_wrap step3",onClick:3===this.step_team_B.length?this.onGotoStep.bind(this,1,300):void 0,style:{display:2===this.step_team_B.length?"none":"block"}},o.createElement("span",{className:"bar",style:{width:(this.teamB_step3_correct_percent<12?12:this.teamB_step3_correct_percent)+"%"}},o.createElement("span",{className:"per"},this.teamB_step3_correct_percent+"%")))),o.createElement("div",{className:"msg"+(this._viewStrategyMsg_B&&!this._viewResult?" show ani":""),dangerouslySetInnerHTML:{__html:this.strategy_B}}),o.createElement("button",{className:"btn",style:{display:this._viewStrategyMsg_B||this._viewResult?"none":"block"},onClick:e=>this.onShowStrategy(e,"B")},"Check"),o.createElement("div",{className:"list"+(this._viewTeamBStudents?" show":"")+" "+this.fadeinout,style:{display:this.team_A.length+this.team_B.length>0?"block":"none"}},o.createElement("div",{className:"title",onClick:this.onShowTeamStudents.bind(this,1)},"Green("+this.team_B.length+")"),o.createElement("div",{className:"scroll"},o.createElement("ul",null,this.team_B.map((e,t)=>{let s="",i="";return"2"===(e.displayMode?e.displayMode:"1")?(s=e.avatar,i=e.nickname):(s=e.thumb,i=e.name),o.createElement("li",{key:t},""===s&&o.createElement("div",{className:"F"===e.gender?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,i.substring(0,2).toUpperCase())),""!==s&&o.createElement("img",{src:s}),t+1+". "+i)}))))),o.createElement("div",{className:"step"},o.createElement("div",{className:"title"}),o.createElement("div",{className:"num s1"},o.createElement("span",null,"1")),o.createElement("div",{className:"num s2"},o.createElement("span",null,"2")),3===this.step_team_A.length||3===this.step_team_B.length?o.createElement("div",{className:"num s3"+(3===this.step_team_A.length&&3===this.step_team_B.length?"":2===this.step_team_A.length?" b":" a")},o.createElement("span",null,"3")):void 0),o.createElement("button",{className:"btn_team"+(this.team_A.length+this.team_B.length>0?" change02":""),onClick:e=>this.onSelectTeamMember(e)},o.createElement("div",{className:"swap on",style:{display:1!==this._curIdx||this.swappedTeam?"none":"block"}},"Swap !"),o.createElement("span",null),o.createElement("span",null),o.createElement("span",null),o.createElement("span",null),o.createElement("span",null),o.createElement("span",null))),o.createElement("div",{className:"team_select",style:{display:this._viewTeamSelect?"block":"none"}},o.createElement("h2",null,"Team Setup by Solving Strategy"),o.createElement("div",{className:"teams"},o.createElement("div",{className:"team a"},o.createElement("span",{className:"sign"}),o.createElement("div",{className:"title"},this.removeHTML(this.strategy_A)),o.createElement("div",{className:"list"},o.createElement("div",{className:"tit"},"Red("+this.team_A.length+")"),o.createElement("div",{className:"scroll"},o.createElement("ul",null,this.team_A.map((e,t)=>{let s="",i="";return"2"===(e.displayMode?e.displayMode:"1")?(s=e.avatar,i=e.nickname):(s=e.thumb,i=e.name),o.createElement("li",{key:t},""===s&&o.createElement("div",{className:"F"===e.gender?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,i.substring(0,2).toUpperCase())),""!==s&&o.createElement("img",{src:s}),t+1+". "+i)}))))),o.createElement("div",{className:"team b"},o.createElement("span",{className:"sign"}),o.createElement("div",{className:"title"},this.removeHTML(this.strategy_B)),o.createElement("div",{className:"list show"},o.createElement("div",{className:"tit"},"Green("+this.team_B.length+")"),o.createElement("div",{className:"scroll"},o.createElement("ul",null,this.team_B.map((e,t)=>{let s="",i="";return"2"===(e.displayMode?e.displayMode:"1")?(s=e.avatar,i=e.nickname):(s=e.thumb,i=e.name),o.createElement("li",{key:t},""===s&&o.createElement("div",{className:"F"===e.gender?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,i.substring(0,2).toUpperCase())),""!==s&&o.createElement("img",{src:s}),t+1+". "+i)})))))),o.createElement("div",{className:"btn_set"},o.createElement("button",{className:"btn random",onClick:this.onRandomTeamSelect}),o.createElement("button",{className:"btn done",onClick:this.onDoneTeamSelect},"Done")))),2===this._curIdx&&o.createElement(o.Fragment,null,o.createElement("div",{className:"team_send",style:{display:this._viewHowToSolve?"block":"none"}},o.createElement("button",{className:"btn_close",onClick:this.onCloseHowtoSolve,style:{display:2===this._curIdx?"block":"none"}}),o.createElement("div",{className:"team a"},o.createElement("span",{className:"sign"}),o.createElement("div",{className:"text"},o.createElement("div",{className:"scroll",dangerouslySetInnerHTML:{__html:this.plan_A}})),o.createElement("div",{className:"msg"+(this._viewStrategyMsg_A?" show ani":""),dangerouslySetInnerHTML:{__html:this.strategy_A}}),o.createElement("button",{className:"btn",style:{display:this._viewStrategyMsg_A?"none":"block"},onClick:e=>this.onShowStrategy(e,"A")},"Check"),o.createElement("div",{className:"btm_btns",style:{display:this._viewHowToSolve?"block":"none"}},"A"!==this.seletedQuiz3Team&&!this._viewBtnSub_A&&o.createElement("button",{className:"btn_send"+(4!==d&&""!==this.seletedQuiz3Team?" disabled":""),onClick:this.onSendQuiz3.bind(this,"A")}),"A"===this.seletedQuiz3Team&&2===this._prog&&o.createElement("button",{className:"btn_stop"}),o.createElement("button",{className:"btn_submission",style:{display:this._viewBtnSub_A?"":"none"},onClick:this.onViewSubmitList.bind(this,0)}))),o.createElement("div",{className:"team b"},o.createElement("span",{className:"sign"}),o.createElement("div",{className:"text"},o.createElement("div",{className:"scroll",dangerouslySetInnerHTML:{__html:this.plan_B}})),o.createElement("div",{className:"msg"+(this._viewStrategyMsg_B?" show ani":""),dangerouslySetInnerHTML:{__html:this.strategy_B}}),o.createElement("button",{className:"btn",style:{display:this._viewStrategyMsg_B?"none":"block"},onClick:e=>this.onShowStrategy(e,"B")},"Check"),o.createElement("div",{className:"btm_btns",style:{display:this._viewHowToSolve?"block":"none"}},"B"!==this.seletedQuiz3Team&&!this._viewBtnSub_B&&o.createElement("button",{className:"btn_send"+(4!==d&&""!==this.seletedQuiz3Team?" disabled":""),onClick:this.onSendQuiz3.bind(this,"B")}),"B"===this.seletedQuiz3Team&&2===this._prog&&o.createElement("button",{className:"btn_stop"}),o.createElement("button",{className:"btn_submission",style:{display:this._viewBtnSub_B?"":"none"},onClick:this.onViewSubmitList.bind(this,1)}))))),o.createElement("button",{className:"btn_howtosolve"+(this._viewTwinkle?" twinkle":""),style:{display:2===this._curIdx?"block":"none"},onClick:this.onHowtoSolve},"How to solve?",o.createElement("span",null),o.createElement("span",null),o.createElement("span",null),o.createElement("span",null),o.createElement("span",null),o.createElement("span",null),o.createElement("div",{className:"waiting",style:{display:2===this._prog?"block":"none"}},o.createElement("div",{className:"circle"}),"Waiting for student responses...")),o.createElement("button",{className:"btn_solution",onClick:this.showSolution,style:{display:this.curProgress>10&&!this._viewProblem?"block":"none"}}),o.createElement("button",{className:"btn_problem",onClick:this.showProblem,style:{display:this.curProgress>10&&this._viewProblem?"block":"none"}}),o.createElement("button",{className:"btn_lookback",onClick:this.showLookBack,style:{display:this.curProgress>10&&this._viewLookbackBtn&&!this._viewProblem?"block":"none"}}),this._viewLookback&&o.createElement(v.LookbackStrategy,{view:this._viewLookback,quiz:r,title:0===this.team?this.problem_explain_A:this.problem_explain_B,solutions:0===this.team?this.stepSolutions_A:this.stepSolutions_B,lookanswers:this.lookbackAnswers,onClose:this.closeLookBack}),o.createElement("div",{className:"worksheet_guide ",style:{display:this.viewWorkSheet?"":"none"}},o.createElement("div",{className:"stage"},o.createElement("div",{className:"header"},"Worksheet Guide",o.createElement("button",{className:"btn_closed",onClick:this.onCloseWorkSheet})),o.createElement("div",{className:"contents"},o.createElement("div",{className:"top_imgs"},o.createElement("img",{className:"img01",src:"/content/mathalive_lib/images/img_worksheet_guide_01.png"}),o.createElement("img",{className:"img02",src:"/content/mathalive_lib/images/img_worksheet_guide_02.png"})),o.createElement("div",{className:"screenshot"},o.createElement("img",{src:"/content/mathalive_lib/images/img_sc_worksheet.png"}),o.createElement("button",{className:"btn_download",onClick:this.onDownloadWorkSheet}))))))),2===this._curIdx&&o.createElement(f.SendnShare,{view:this._viewSubmitList,type:"image",submitStudent:l.cloneDeep(p),isComplete:2===d||4===d,isReset:(this.isReset,!1),onSendPresenter:this._onSendPresenter,onSendLiveget:this._onSendLiveget,onHidePresenter:this._onHidePresenter,quizIdx:0,checkIsPlayed:this._checkisPlayed,isPlayed:this._isPlayed,onNext:this.onNext,onPrev:this.onPrev,clsIdx:this.props.state.classid,curriculumid:this.props.state.curriculumid,typeStrategy:"module_strategy"}),o.createElement("div",{className:"gatepage"+(this._viewPopupProblem?" show":"")},o.createElement("div",{className:"sub_title"},"Module Strategy"),o.createElement("div",{className:"title"},1===this._curIdx?"Swap Solving Strategies":"Worksheet Activity")),o.createElement(u.CoverPopup,{className:"alert_popup module",view:this._viewCheckAlert,onClosed:this._onCheckAlertOk},o.createElement("div",{className:"pop_box",style:{width:"480px"}},o.createElement("span",{className:"ico_alert"}),o.createElement("span",{className:"text",dangerouslySetInnerHTML:{__html:this._viewCheckAlertMsg}}),o.createElement("div",{className:"btns"},o.createElement("button",{className:"btn_ok",onClick:this._onCheckAlertOk},o.createElement("span",null,"OK"))))),o.createElement(h.default,{view:0===this._prog&&this.curProgress>1,type:"teacher",sended:!1,originY:0,onSend:this._onSend}),o.createElement(_.AlertPopup,{view:this._viewAlert,onClose:this._offAlert,onOk:"livepoint"===this._alerttype?this._onSendLivePoint:this._onSendStop,msg:this.msgAlertPopup}),2!==this._curIdx&&o.createElement(g.BtnProgress,{view:this._prog>=2&&!this._viewResult,isEnd:this._isEnd,totalStudents:this._totalUsers,submitStudents:this._submitStudentCnt,onClick:this._openPop}),2===this._curIdx&&o.createElement(o.Fragment,null,o.createElement(w.BtnSendLive,{view:this._viewSubmitList&&this._isViewSendLive,disabled:!this._isLivePoint,on:this._isLivePoint,onClick:this._onBtnHeaert,isStrategy:!0}),o.createElement(g.BtnProgress,{view:this._prog>=2&&4!==d&&!this._viewResult,isEnd:this._isEnd,totalStudents:this._totalUsers,submitStudents:3===d?this._submitStudentCnt+this._submitStudentCntOfRevise:this._submitStudentCnt,noFinishView:3===d,onClick:this._openPop})),o.createElement(b.RankingBtn,{view:!this._viewResult&&2!==this._curIdx&&this._isEnd,onClick:this.onViewResult}),o.createElement("button",{className:"common_back",style:{display:this._viewResult?"":"none"},onClick:this.resultClose}),2===this._curIdx&&2===d&&this._viewSubmitList&&(0===this.team?"A":"B")===this.seletedQuiz3Team&&o.createElement(h.default,{view:!0,type:"teacher",sended:!1,originY:0,isRevise:!0,onSend:this.onReviseQuiz3}))}};i([a.observable],S.prototype,"_curIdx",void 0),i([a.observable],S.prototype,"_isEnd",void 0),i([a.observable],S.prototype,"_prog",void 0),i([a.observable],S.prototype,"isReset",void 0),i([a.observable],S.prototype,"_q3ProcessA",void 0),i([a.observable],S.prototype,"_q3ProcessB",void 0),i([a.observable],S.prototype,"_viewHeader",void 0),i([a.observable],S.prototype,"_onSummaryResult",void 0),i([a.observable],S.prototype,"_quizs",void 0),i([a.observable],S.prototype,"_quizResults",void 0),i([a.observable],S.prototype,"_viewProblem",void 0),i([a.observable],S.prototype,"_viewDesc",void 0),i([a.observable],S.prototype,"_viewMainIframe",void 0),i([a.observable],S.prototype,"_viewAlert",void 0),i([a.observable],S.prototype,"_viewCheckAlert",void 0),i([a.observable],S.prototype,"_viewCheckAlertMsg",void 0),i([a.observable],S.prototype,"_viewStrategySelect",void 0),i([a.observable],S.prototype,"_viewHowToSolve",void 0),i([a.observable],S.prototype,"viewWorkSheet",void 0),i([a.observable],S.prototype,"_viewTwinkle",void 0),i([a.observable],S.prototype,"_submitStudentCnt",void 0),i([a.observable],S.prototype,"_submitStudents",void 0),i([a.observable],S.prototype,"_submitStudentCntOfRevise",void 0),i([a.observable],S.prototype,"_viewLookbackBtn",void 0),i([a.observable],S.prototype,"_viewLookback",void 0),i([a.observable],S.prototype,"_viewCheckStrategy",void 0),i([a.observable],S.prototype,"_viewTeamSelect",void 0),i([a.observable],S.prototype,"_viewStrategyMsg_A",void 0),i([a.observable],S.prototype,"_viewStrategyMsg_B",void 0),i([a.observable],S.prototype,"_viewResult",void 0),i([a.observable],S.prototype,"_viewTeamAStudents",void 0),i([a.observable],S.prototype,"_viewTeamBStudents",void 0),i([a.observable],S.prototype,"_viewSubmitList",void 0),i([a.observable],S.prototype,"_viewBtnSub_A",void 0),i([a.observable],S.prototype,"_viewBtnSub_B",void 0),i([a.observable],S.prototype,"_viewPopupProblem",void 0),i([a.observable],S.prototype,"curProgress",void 0),i([a.observable],S.prototype,"step_team_A",void 0),i([a.observable],S.prototype,"step_team_B",void 0),i([a.observable],S.prototype,"fadeinout",void 0),i([a.observable],S.prototype,"problem_explain_A",void 0),i([a.observable],S.prototype,"problem_explain_B",void 0),i([a.observable],S.prototype,"team_A",void 0),i([a.observable],S.prototype,"team_B",void 0),i([a.observable],S.prototype,"_isPlayed",void 0),i([a.observable],S.prototype,"seletedQuiz3Team",void 0),i([a.observable],S.prototype,"team",void 0),i([a.observable],S.prototype,"bgColors",void 0),i([a.observable],S.prototype,"stepSolutions_A",void 0),i([a.observable],S.prototype,"stepSolutions_B",void 0),i([a.observable],S.prototype,"_totalUsers",void 0),i([a.observable],S.prototype,"lookbackAnswers",void 0),i([a.observable],S.prototype,"_isLivePoint",void 0),i([a.observable],S.prototype,"_alerttype",void 0),i([a.observable],S.prototype,"_isViewSendLive",void 0),i([a.observable],S.prototype,"sendType",void 0),S=i([r.observer],S),t.default=S},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var n,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,s,r):n(t,s))||r);return o>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),o=s(3),r=s(1),a=s(38),l=s(13);let c=class extends n.Component{constructor(e){super(e),this.m_btnH=0,this.m_max=0,this.m_sy=-1,this.m_vy=-1,this.m_time=-1,this.m_bSend=!1,this.m_state={y:0,alpha:1,tDur:0,aDur:0,isOn:!1,disabled:!1},this._ref=e=>{if(this.m_max>0||!e)return;e.setAttribute("touch-action","none");const t=window.getComputedStyle(e),s=l.nteFloat(t.height,0),i=l.nteFloat(t.bottom,0);s>0&&(this.m_btnH=s,"pad"===this.props.type?this.m_max=i-s-35:this.m_max=s+i+10,this.props.view||(this.m_state.y=this.m_max))},this._down=e=>{this.m_state.isOn||this.m_state.disabled||void 0!==this.props.disable&&this.props.disable||(this.m_state.y=this.props.originY,this.m_state.alpha=1,this.m_state.tDur=0,this.m_state.aDur=0,this.m_state.isOn=!0,this.m_vy=0,this.m_time=Date.now())},this._start=(e,t)=>{this.m_sy=t.y,this.m_bSend=!0},this._drag=(e,t)=>{if(!this.m_state.isOn||this.m_state.disabled)return;let s=t.y-this.m_sy;"teacher"===this.props.type?(t.deltaY<-1?this.m_bSend=!1:t.deltaY>=0&&(this.m_bSend=!0),s<0&&(s=0)):(t.deltaY>1?this.m_bSend=!1:t.deltaY<=0&&(this.m_bSend=!0),s>0&&(s=0)),!1===this.props.preventDrag&&(this.m_state.y=s+this.props.originY);const i=Date.now();this.m_vy=t.deltaY/(i-this.m_time),this.m_time=i},this._stop=(e,t)=>{if(this.m_state.isOn&&!this.m_state.disabled)if(this.m_bSend){let e=.5*this.m_vy*1e3,s=t.y-this.m_sy;"teacher"===this.props.type?(e<this.m_btnH?e=this.m_btnH:e>4*this.m_btnH&&(e=4*this.m_btnH),s<0&&(s=0)):(-1*e<this.m_btnH?e=-this.m_btnH:-1*e>4*this.m_btnH&&(e=-4*this.m_btnH),s>0&&(s=0)),this.m_state.tDur=.5,this.m_state.aDur=.5,this.m_state.alpha=0,this.m_state.y=s+e+this.props.originY,this.props.onSend()}else this.m_state.isOn=!1,this.m_state.tDur=.3,this.m_state.aDur=0,this.m_state.y=this.props.originY},e.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):e.view?(this.m_state.y=e.originY,this.m_state.alpha=1,this.m_state.tDur=.3,this.m_state.aDur=0,this.m_state.isOn=!1,this.m_state.disabled=!1):e.view||(this.m_state.y=e.originY,this.m_state.alpha=0,this.m_state.tDur=.3,this.m_state.aDur=.3,this.m_state.isOn=!1,this.m_state.disabled=!0)}componentWillReceiveProps(e){e.sended&&!this.props.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):e.view&&!this.props.view?(this.m_state.y=e.originY,this.m_state.alpha=1,e.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=.3):(this.m_state.tDur=.3,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1):!e.view&&this.props.view?(this.m_state.y=this.m_max,this.m_state.alpha=0,this.m_state.tDur=.3,this.m_state.aDur=.3,this.m_state.isOn=!1,this.m_state.disabled=!0):!e.view||e.sended||this.m_state.isOn||e.originY===this.props.originY||(this.m_state.y=e.originY,this.m_state.tDur=.3,this.m_state.aDur=0),!this.props.isRetry&&e.isRetry&&(this.m_state.y=e.originY,this.m_state.alpha=1,e.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=.3):(this.m_state.tDur=.3,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1)}render(){const{y:e,tDur:t,aDur:s,alpha:i,isOn:o,disabled:r}=this.m_state;let l={transform:`translateY(${e}px)`,transition:`transform ${t}s, opacity ${s/2}s ${s/2}s`,opacity:i,pointerEvents:r||!this.props.view?"none":"auto"};this.props.preventDrag&&(l={});const c=[];return"pad"===this.props.type?c.push("fel_toteacher"):c.push("fel_topad"),o&&c.push("on"),this.props.isVisiblePenTool&&this.props.isVisiblePenTool&&c.push("up"),n.createElement(a.DraggableCore,{onMouseDown:this._down,onDrag:this._drag,onStart:this._start,onStop:this._stop},n.createElement("button",{ref:this._ref,className:c.join(" ")+(this.props.className?" "+this.props.className:""),style:l},n.createElement("span",{className:"revise"+(this.props.isRevise?" on":""),style:{display:this.props.isRevise?"":"none"}})))}};i([o.observable],c.prototype,"m_state",void 0),c=i([r.observer],c),t.default=c},function(e,t){e.exports=ReactDraggable},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var n,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,s,r):n(t,s))||r);return o>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.MAHeader_STRATEGY=void 0;const n=s(0),o=s(1),r=s(6),a=s(11).default,l=s(4);let c=class extends n.Component{constructor(e){super(e),this._soption={direction:"horizontal",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},this._swiper=null,this._refSwiper=e=>{if(this._swiper||!e)return;const t=e.swiper;t.on("transitionStart",()=>{}),t.on("transitionEnd",()=>{}),this._swiper=t},this.onChangeTeam=(e,t)=>{"module_strategy"===this.props.typeStrategy&&-1!==e&&this.props.onChangeTeam&&this.props.onChangeTeam(e,t)},this.onGotoProgress=e=>{this.props.onGotoProgress&&this.props.onGotoProgress(e)},this.onViewWorkSheet=e=>{e.stopPropagation(),l.App.pub_playGameClick(),this.props.onViewWorkSheet&&this.props.onViewWorkSheet()},this.onChangeQuestion=e=>{l.App.pub_playBtnTab(),this.props.onChangeQuestion&&this.props.onChangeQuestion(e)}}componentDidUpdate(e){"module_strategy"===this.props.typeStrategy||(this.props.view&&!e.view?r.delay(()=>{this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize())},300):!this.props.view&&e.view,this.props.quizIdx!==e.quizIdx&&this._swiper&&(this._swiper.update(),this._swiper.slideTo(this.props.quizIdx,0)))}render(){const{view:e,isStudent:t,quizIdx:s,pageCnt:i,headerResult:o,curProgress:l,typeStrategy:c,team:h,stepCnt_A:p,stepCnt_B:d,pageIdx:u,quizresult:m}=this.props;let _=[];if(i&&i>0)for(let e=0;e<i;e++)_.push(n.createElement("span",{key:"p"+e,className:s===e?"on":void 0}));let g="",f=["","",""];if(t){if("topic_strategy"===c);else if(o&&o.length>0&&s>-1){"strategy"===c&&(g=o[s].quizKind>0?o[s].qnumber+"+":o[s].qnumber+""),o[o.length-1].completed&&r.delay(()=>{this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize())},600);let e=o[s];"module_strategy"===c&&(e=o[0]);for(let t=0;t<e.step.length;t++)e.step[t].correct?1===e.step[t].tryCnt?f[t]=" pass1":2===e.step[t].tryCnt&&(f[t]=" pass2"):2===e.step[t].tryCnt?f[t]=" fail1":e.step[t].completed&&(f[t]=" fail2")}}else g="strategy"===c?s%2==0?Math.floor(s/2)+1+"":Math.floor(s/2)+1+"+":s+1+"";let v=[],b=[],y=[],w="",k="",E="";if(m){m.result.map((e,t)=>{v.push(e.step[0]),b.push(e.step[1]),3===e.step.length&&y.push(e.step[2])});let e=0,t=0,s=0;if(m.allusers>0){let i=[],n=[],o=[];i=v.filter((e,t)=>1===e.tryCnt&&!0===e.correct),n=b.filter((e,t)=>1===e.tryCnt&&!0===e.correct),y.length>0&&(o=y.filter((e,t)=>1===e.tryCnt&&!0===e.correct)),e=i.length>0?i.length/m.allusers*100:0,t=n.length>0?n.length/m.allusers*100:0,s=o.length>0?o.length/m.allusers*100:0}w=Number.isInteger(e)?e+"%":e.toFixed(2)+"%",k=Number.isInteger(t)?t+"%":t.toFixed(2)+"%",E=Number.isInteger(s)?s+"%":s.toFixed(2)+"%"}return n.createElement(n.Fragment,null,n.createElement("div",{className:"topHeader_strategy",style:{display:e?"":"none"}},"module_strategy"!==c&&n.createElement(n.Fragment,null,n.createElement("div",{className:"number",style:{display:t?"none":""}},n.createElement("span",null,g)),t&&n.createElement(n.Fragment,null,n.createElement("div",{className:"result_score"+(t?" student":"")},n.createElement(a,Object.assign({ref:this._refSwiper},this._soption),o&&o.length>0&&o.map((e,t)=>{let i="";return i="strategy"===c?e.quizKind>0?e.qnumber+"+":e.qnumber+"":e.contentSeq+"",n.createElement("div",{className:"num"+(s===t?" now":s>t?" past":" notyet"),key:"s_"+t},n.createElement("span",{className:"txt"},i))}),!o&&n.createElement("div",{className:"num now"},n.createElement("span",{className:"txt"},s)))),n.createElement("span",{className:"worksheet",style:{display:t&&0===s&&"topic_strategy"===c?"":"none"},onClick:this.onViewWorkSheet.bind(this)},"Worksheet"))),(t&&"topic_strategy"!==c||!t&&"module_strategy"!==c)&&n.createElement("div",{className:("module_strategy"===c?"progress _module strategy":"progress strategy")+(t?" student":""),style:{display:t&&2===s?"none":""}},n.createElement("ul",null,n.createElement("li",{className:"a"+(l>0?" on":""),onClick:this.onGotoProgress.bind(this,1),style:{width:3===this.props.stepCnt?"20%":"25%"}},n.createElement("span",{className:"tit1"},"Understand")),n.createElement("li",{className:"a"+(l>1?" on":""),onClick:this.onGotoProgress.bind(this,10),style:{width:3===this.props.stepCnt?"20%":"25%"}},n.createElement("span",{className:"tit1"},"How to solve?")),n.createElement("li",{className:"a"+(l>10?" on":"")+f[0],onClick:this.onGotoProgress.bind(this,100),style:{width:3===this.props.stepCnt?"20%":"25%"}},n.createElement("span",{className:"tit1"},""!==w?w:"Step 1")),n.createElement("li",{className:"a"+(l>100?" on":"")+f[1],onClick:this.onGotoProgress.bind(this,200),style:{width:3===this.props.stepCnt?"20%":"25%"}},n.createElement("span",{className:"tit1"},""!==k?k:"Step 2")),3===this.props.stepCnt&&n.createElement("li",{className:"a"+(l>200?" on":"")+f[2],onClick:this.onGotoProgress.bind(this,300),style:{width:3===this.props.stepCnt?"20%":"25%"}},n.createElement("span",{className:"tit1"},""!==E?E:"Step 3")))),"module_strategy"===c&&t&&n.createElement("div",{className:"team_title "+(0===this.props.team?"a":"b")},n.createElement("span",{className:"team"},0===this.props.team?"A":"B"),n.createElement("span",{className:"title"},this.props.plan?this.props.plan:"")),"module_strategy"===c&&2!==s&&!t&&n.createElement("div",{className:"progress strategy module"+(t?" student":"")},n.createElement("ul",null,n.createElement("li",{className:"a"+(l>0?" on":""),onClick:this.onGotoProgress.bind(this,1),style:{width:3===this.props.stepCnt?"20%":"25%"}},n.createElement("span",{className:"tit1"},"Understand")),n.createElement("li",{className:"a"+(l>1?" on":""),onClick:this.onGotoProgress.bind(this,10),style:{width:3===this.props.stepCnt?"20%":"25%"}},n.createElement("span",{className:"tit1"},"How to solve?")),n.createElement("li",{className:(t?"a":"ab")+(l>10?t?" on":0===h?" a_on":" b_on":"")+f[0],style:{width:3===this.props.stepCnt?"20%":"25%"}},n.createElement("div",{className:"btn"},n.createElement("button",{className:"a",onClick:this.onChangeTeam.bind(this,0,100)}),n.createElement("button",{className:"b",onClick:this.onChangeTeam.bind(this,1,100)})),n.createElement("span",{className:"tit1"},"Step 1"),n.createElement("div",{className:"tit2"},n.createElement("span",{id:"s1a",className:"a"},"0%"),n.createElement("span",{id:"s1b",className:"b"},"0%"))),n.createElement("li",{className:(t?"a":"ab")+(l>100?t?" on":0===h?" a_on":" b_on":"")+f[1],style:{width:3===this.props.stepCnt?"20%":"25%"}},n.createElement("div",{className:"btn"},n.createElement("button",{className:"a",onClick:this.onChangeTeam.bind(this,0,200)}),n.createElement("button",{className:"b",onClick:this.onChangeTeam.bind(this,1,200)})),n.createElement("span",{className:"tit1"},"Step 2"),n.createElement("div",{className:"tit2"},n.createElement("span",{id:"s2a",className:"a"},"0%"),n.createElement("span",{id:"s2b",className:"b"},"0%"))),!(2===p&&2===d)&&n.createElement("li",{className:(t?"a":3===p&&3===d?"ab":3===p?"step3_a":"step3_b")+(l>200?t||!t&&(2!==p||2!==d)?" on":0===h?" a_on":" b_on":"")+f[2],style:{width:3===this.props.stepCnt?"20%":"25%"},onClick:this.onChangeTeam.bind(this,3===p?3===d?-1:0:1,300)},n.createElement("div",{className:"btn"},n.createElement("button",{className:"a",onClick:this.onChangeTeam.bind(this,0,300)}),n.createElement("button",{className:"b",onClick:this.onChangeTeam.bind(this,1,300)})),n.createElement("span",{className:"tit1"},"Step 3"),n.createElement("div",{className:"tit2"},n.createElement("span",{id:"s3a",className:"a"},"0%"),n.createElement("span",{id:"s3b",className:"b"},"0%"))))),"module_strategy"===c&&2===s&&n.createElement(n.Fragment,null,n.createElement("span",{className:"worksheet module"+(t?" student":""),onClick:this.onViewWorkSheet.bind(this),style:{display:t?"none":""}},t?"Worksheet":"Worksheet Guide")),!t&&"module_strategy"===c&&n.createElement("div",{className:"pager"},n.createElement("span",{className:0===s?"on":"",onClick:this.onChangeQuestion.bind(this,0)}),n.createElement("span",{className:1===s?"on":"",onClick:this.onChangeQuestion.bind(this,1)}),n.createElement("span",{className:2===s?"on":"",onClick:this.onChangeQuestion.bind(this,2)})),t&&"module_strategy"===c&&2==s&&n.createElement("div",{className:"pagination"},n.createElement("span",{className:void 0===u||0===u?"on":""}),n.createElement("span",{className:1===u?"on":""})),t&&"topic_strategy"===c&&n.createElement("div",{className:"pagination"},n.createElement("span",{className:0===u?"on":""}),n.createElement("span",{className:1===u?"on":""}))))}};c=i([o.observer],c),t.MAHeader_STRATEGY=c},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var n,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,s,r):n(t,s))||r);return o>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.AlertPopup=t.WarningPopup=t.StrategyPopup=void 0;const n=s(0),o=s(3),r=s(1),a=s(10),l=s(6),c=s(4);let h=class extends n.Component{componentDidUpdate(e){if(this.props.view&&!e.view){if(!this.props.button){let e=this.props.delay;e||(e=800),l.delay(()=>{this.props.onComplete&&this.props.onComplete()},e)}}else!this.props.view&&e.view}render(){const{type:e}=this.props;let t="";0===e?t="The teacher has stopped you from the activity. After 3 seconds, only the contents has been created so far will be submitted.":1===e?t="All students are already in progress. If you restart, existing data will be deleted. Are you sure you want to request the submission?":2===e?t="You can share a solution only in the problem solving state.":3===e?t="Do you want to save the current learning screen? If there is already saved data, the current data will be overwritten.":4===e?t="Picture not taken.\nYou have reached the maximum number of pictures available.":5===e&&(t="For this activity, We recommend students to wear a headset or an earphone with a microphone.");let s="exclamation";return 4===e?s="nocamera":5===e&&(s="headset"),n.createElement("div",{className:"alertpop strategy"+(this.props.view?" show":"")},n.createElement("div",{className:"alertpop-inner"},n.createElement("div",{className:s}),n.createElement("div",{className:"ment"},t),n.createElement("div",{className:"buttons"+(this.props.isSingle?" single":"")+(this.props.button?"":" hide")},n.createElement("button",{className:"btn cancel",onClick:this.props.onCancel},"Cancel"),n.createElement("button",{className:"btn ok",onClick:this.props.onOk},"Ok"))))}};h=i([r.observer],h),t.StrategyPopup=h;let p=class extends n.Component{constructor(){super(...arguments),this.second=3,this.interval=null}componentDidUpdate(e){if(this.props.view&&!e.view){if(this.second=3,!this.props.button){let e=this.props.delay;e||(e=800),this.interval=setInterval(()=>{this.second--,0===this.second&&(this.props.onComplete&&this.props.onComplete(),null!==this.interval&&clearInterval(this.interval))},1e3)}}else!this.props.view&&e.view&&(null!==this.interval&&clearInterval(this.interval),this.props.onComplete&&this.props.onComplete())}render(){const{type:e}=this.props;let t="";return 0===e&&(t=`Submit your answer within <strong>${this.second} seconds.</strong>`),n.createElement("div",{className:"warningpopup",style:{display:this.props.view?"":"none"}},n.createElement("div",{className:"msg",dangerouslySetInnerHTML:{__html:t}}))}};i([o.observable],p.prototype,"second",void 0),p=i([r.observer],p),t.WarningPopup=p;class d extends n.Component{constructor(){super(...arguments),this._onOk=()=>{this.props.onOk&&this.props.onOk()},this._onClose=()=>{this.props.onClose&&this.props.onClose()}}componentDidUpdate(e){this.props.view&&!e.view||!this.props.view&&e.view&&c.App.pub_playBtnTab()}render(){const{view:e,msg:t,isSingle:s,msgclass:i}=this.props;return n.createElement(a.CoverPopup,{className:"alert_popup",view:e,onClosed:this.props.isSingle?this._onOk:this._onClose},n.createElement("div",{className:"pop_box"},n.createElement("span",{className:"ico_alert"}),n.createElement("span",{className:"text"+(i&&""!==i?" "+i:""),dangerouslySetInnerHTML:{__html:t}}),n.createElement("div",{className:"btns"},n.createElement("button",{className:"btn_cancel",onClick:this._onClose,style:{display:s?"none":""}},n.createElement("span",null,"Cancel")),n.createElement("button",{className:"btn_ok",onClick:this._onOk},n.createElement("span",null,"OK")))))}}t.AlertPopup=d},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var n,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,s,r):n(t,s))||r);return o>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.BtnProgress=void 0;const n=s(0),o=s(1),r=s(3),a=s(6),l=s(7),c=s(4);let h=class extends n.Component{constructor(e){super(e),this.isHide=!1,this.timerid=-1,this._onClick=()=>{c.App.pub_playBtnTab(),this.props.onClick()},this.props.isEnd&&a.delay(()=>{this.isHide=!0},2500)}componentDidUpdate(e){this.props.isEnd&&!e.isEnd?this.timerid=a.delay(()=>{this.isHide=!0},2500):!this.props.isEnd&&e.isEnd&&(this.isHide=!1,clearTimeout(this.timerid))}render(){const{submitStudents:e,totalStudents:t,noFinishView:s}=this.props;return n.createElement("div",{className:"progressWrap"+(this.props.isEnd?" end":"")+(this.props.view?" on":"")},(()=>this.props.noRetryView&&this.props.isEnd?n.createElement(n.Fragment,null):n.createElement(l.ToggleBtn,{className:"btn_progress",view:this.props.view,onClick:this._onClick},n.createElement("span",null,`${e}/${t}`)))(),n.createElement("div",{className:"msg"+(this.isHide||s?" hide":"")},"Finish",n.createElement("span",null),n.createElement("span",null),n.createElement("span",null),n.createElement("span",null),n.createElement("span",null)))}};i([r.observable],h.prototype,"isHide",void 0),h=i([o.observer],h),t.BtnProgress=h},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var n,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,s,r):n(t,s))||r);return o>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.SendnShare=t.SubmitList=void 0;const n=s(0),o=s(3),r=s(1),a=s(4),l=s(6),c=s(10),h=s(43),p=s(7),d=s(14),u=s(5),m=s(11).default;let _=class extends n.Component{constructor(e){super(e),this.m_view=!1,this._curIdx=-1,this._sIdx=-1,this._imageIdx=0,this._refSwiper=e=>{!this.m_swiper&&e&&(this.m_swiper=e.swiper,this.m_swiper.on("transitionStart",()=>{this._imageIdx=-1}),this.m_swiper.on("transitionEnd",()=>{this._imageIdx=this.m_swiper.activeIndex}))},this._onPage=e=>{this.props.view&&(a.App.pub_playBtnTab(),this._imageIdx=e,this.m_swiper.slideTo(this._imageIdx))},this._onBack=(e,t)=>{let s=this.props.submitStudents[this._curIdx][this._sIdx].student.id;this.props.onClosed(e,s),this.props.onSendLiveget(s)},this._onPrev=()=>{if(!this.props.view)return;if(0===this._sIdx)return;a.App.pub_playBtnTab(),this._sIdx--;let e=this.props.submitStudents[this._curIdx][this._sIdx].student.id;this.props.onPrev(e)},this._onNext=()=>{if(!this.props.view)return;if(this._sIdx===this.props.submitStudents[this._curIdx].length-1)return;a.App.pub_playBtnTab(),this._sIdx++;let e=this.props.submitStudents[this._curIdx][this._sIdx].student.id;this.props.onNext(e)},this._onRNavi=()=>{this.props.view&&(a.App.pub_playBtnTab(),this._imageIdx++,this.m_swiper.slideTo(this._imageIdx))},this._onLNavi=()=>{this.props.view&&(a.App.pub_playBtnTab(),this._imageIdx--,this.m_swiper.slideTo(this._imageIdx))}}componentDidUpdate(e){const t=document.querySelector(".content-container");this.props.view&&!e.view?(this.m_view=!0,this._curIdx=this.props.quizIdx,this._sIdx=l.findIndex(this.props.submitStudents[this._curIdx],{student:{id:this.props.studentId}}),t&&t.classList.add("fix-activity"),this.m_swiper.slideTo(0,0),l.delay(()=>{this.m_swiper&&(this.m_swiper.update(),this.m_swiper.scrollbar&&this.m_swiper.scrollbar.updateSize())},100)):!this.props.view&&e.view&&(a.App.pub_playBtnTab(),this.m_view=!1,this._imageIdx=0,t&&t.classList.remove("fix-activity"))}render(){const{from:e,studentId:t,showhide:s}=this.props;let i,o=0,r="",a="",l="",d="",u=!0,_=!0;if(this.props.submitStudents&&this.props.submitStudents.length>0&&this._curIdx>-1&&this._sIdx>-1&&void 0!==this.props.submitStudents[this._curIdx][this._sIdx])if(o=this.props.submitStudents[this._curIdx][this._sIdx].livePoint,void 0!==this.props.submitStudents[this._curIdx][this._sIdx].student.displayMode&&"1"===this.props.submitStudents[this._curIdx][this._sIdx].student.displayMode?(r=this.props.submitStudents[this._curIdx][this._sIdx].student.thumb,a=this.props.submitStudents[this._curIdx][this._sIdx].student.name):(r=this.props.submitStudents[this._curIdx][this._sIdx].student.avatar,a=void 0!==this.props.submitStudents[this._curIdx][this._sIdx].student.nickname&&""!==this.props.submitStudents[this._curIdx][this._sIdx].student.nickname?this.props.submitStudents[this._curIdx][this._sIdx].student.nickname:this.props.submitStudents[this._curIdx][this._sIdx].student.name),i=this.props.submitStudents[this._curIdx][this._sIdx].images?this.props.submitStudents[this._curIdx][this._sIdx].images:["/content/mathalive_lib/images/img_send_error.png"],l=this.props.submitStudents[this._curIdx][this._sIdx].student.id+"",d=this.props.submitStudents[this._curIdx][this._sIdx].student.gender?this.props.submitStudents[this._curIdx][this._sIdx].student.gender:"",0===this._sIdx&&(u=!1),this._sIdx===this.props.submitStudents[this._curIdx].length-1)_=!1;else if(this._sIdx>-1&&this._sIdx<this.props.submitStudents[this._curIdx].length-1){let e=this.props.submitStudents[this._curIdx][this._sIdx+1].images;(!e||e.length<1)&&(_=!1)}return n.createElement(c.CoverPopup,{className:"result_popup",view:this.m_view,onClosed:this._onBack.bind(this,e,t)},n.createElement(h.MALiveHeader,{view:this.m_view,thumb:r,showhide:s,studentName:a,livePoint:o,gender:d}),n.createElement("div",{className:"progress_dot"},i&&i.length>1&&i.map((e,t)=>n.createElement("span",{key:t,className:t===this._imageIdx?"on":"",onClick:this._onPage.bind(this,t)}))),n.createElement("div",{className:"images_container"},n.createElement(m,{ref:this._refSwiper,direction:"horizontal",observer:!0,noSwiping:!1},i&&i.length>0&&i.map((e,t)=>n.createElement("img",{key:"q_"+t,className:"submitimg",src:e})))),i&&i.length>1&&n.createElement(n.Fragment,null,n.createElement("div",{className:"navi_left"},n.createElement(p.ToggleBtn,{className:"right",disabled:this._imageIdx===i.length-1,onClick:this._onRNavi}),n.createElement(p.ToggleBtn,{className:"left",disabled:this._imageIdx<=0,onClick:this._onLNavi})),n.createElement("div",{className:"navi_right"},n.createElement(p.ToggleBtn,{className:"right",disabled:this._imageIdx===i.length-1,onClick:this._onRNavi}),n.createElement(p.ToggleBtn,{className:"left",disabled:this._imageIdx<=0,onClick:this._onLNavi}))),n.createElement("div",{className:"control_page",style:{display:"list"===e?"":"none"}},n.createElement("button",{className:"btn_left"+(u?"":" off"),onClick:u?this._onPrev:void 0}),n.createElement("button",{className:"btn_menu",onClick:this._onBack.bind(this,e,t)}),n.createElement("button",{className:"btn_right"+(_?"":" off"),onClick:_?this._onNext:void 0})),n.createElement("div",{className:"btn_container",style:{display:"presenter"===e?"":"none"}},n.createElement("button",{className:"btn_01",onClick:this._onBack.bind(this,e,t)},"Back")))}};i([o.observable],_.prototype,"m_view",void 0),i([o.observable],_.prototype,"_curIdx",void 0),i([o.observable],_.prototype,"_sIdx",void 0),i([o.observable],_.prototype,"_imageIdx",void 0),_=i([r.observer],_);let g=class extends n.Component{constructor(){super(...arguments),this._step="setting",this.submitUserNum=0,this.userCnt=0,this.randomThumb0="",this.randomThumb1="",this.randomThumb2="",this.randomThumb3="",this.randomName="",this.displayMode="1",this.randomTime=!1,this.students=[],this.studentsThumb=[],this.studentsName=[],this._onMinus=()=>{this.props.view&&(this.userCnt<=1||(a.App.pub_playChoiceBtn(),this.userCnt--))},this._onPlus=()=>{this.props.view&&0!==this.userCnt&&(this.userCnt>=this.submitUserNum||4===this.userCnt||(a.App.pub_playChoiceBtn(),this.userCnt++))},this._hidePresenter=()=>{this.props.view&&(a.App.pub_playBtnTab(),this.props.hidePresenter())},this._showDetail=e=>{this.props.view&&(a.App.pub_quizDone(),this.props.showDetail(e))},this._onBack=()=>{this.props.view&&(a.App.pub_playBtnTab(),this._step="setting")},this._onSuffle=()=>{for(this.students=[];;){let e=Math.floor(Math.random()*a.App.students.length+0),t=this.students.findIndex(t=>t.id===a.App.students[e].id),s=l.findIndex(this.props.submitStudents[0],{student:{id:a.App.students[e].id}});if(!(t>-1||this.props.submitStudents[0][s].nosubmit)&&(this.students.push({id:a.App.students[e].id,name:a.App.students[e].name,nickname:a.App.students[e].nickname,thumb:a.App.students[e].thumb,avatar:a.App.students[e].avatar,displayMode:a.App.students[e].displayMode,gender:a.App.students[e].gender}),this.displayMode=this.students[0].displayMode,this.students.length===this.userCnt))break}},this._onPick=()=>{this.props.view&&0!==this.userCnt&&(a.App.pub_pick_presenter(),this._step="choose",this.randomThumb0=this.studentsThumb[0],this.randomName=this.studentsName[0],this._randomStart())},this._randomStart=()=>{this.randomTime||(this.randomTime=!0,this._onSuffle(),a.App.students.map((e,t)=>{"1"===this.displayMode?(e.thumb&&""!==e.thumb?this.studentsThumb.push(e.thumb):this.studentsThumb.push(e.name.substring(0,2).toUpperCase()),this.studentsName.push(e.name)):"2"===this.displayMode&&(this.studentsThumb.push(e.avatar),this.studentsName.push(e.nickname))}),this._setTime(),d.setTimeout(()=>{this.randomTime=!1},2e3))},this._setTime=()=>{d.setTimeout(()=>{this.randomThumb0=this.studentsThumb[Math.floor(Math.random()*this.studentsThumb.length)],this.randomThumb1=this.studentsThumb[Math.floor(Math.random()*this.studentsThumb.length)],this.randomThumb2=this.studentsThumb[Math.floor(Math.random()*this.studentsThumb.length)],this.randomThumb3=this.studentsThumb[Math.floor(Math.random()*this.studentsThumb.length)],this.randomName=this.studentsName[Math.floor(Math.random()*this.studentsName.length)],this.randomTime&&this._setTime()},50)}}componentDidUpdate(e){this.props.view&&!e.view&&(this._step="setting",this.submitUserNum=a.App.students.length-this.props.submitStudents[0].filter(e=>e.nosubmit).length,this.userCnt=this.submitUserNum>=4?4:this.submitUserNum)}render(){const{view:e}=this.props;return n.createElement("div",{className:"presenter",style:{display:e?"":"none"}},n.createElement("div",{className:"presenter_content"},n.createElement("h3",null,"Presenter"),n.createElement("button",{className:"btn_close",onClick:this._hidePresenter}),n.createElement("div",{className:"presenter_wrap",style:{display:"choose"===this._step?"":"none"}},n.createElement("ul",null,this.students.map((e,t)=>n.createElement("li",{key:"q_"+t,className:this.randomTime?"on random":"on click"},this.randomTime?void 0:n.createElement("span",{className:"ico_heart"}),this.randomTime?n.createElement("div",{className:"img"},"1"===e.displayMode?n.createElement("div",null,0===t?n.createElement("div",null,n.createElement("img",{src:this.randomThumb0,style:{display:""===e.thumb?"none":""}})):void 0,1===t?n.createElement("div",null,n.createElement("img",{src:this.randomThumb1,style:{display:""===e.thumb?"none":""}})):void 0,2===t?n.createElement("div",null,n.createElement("img",{src:this.randomThumb2,style:{display:""===e.thumb?"none":""}})):void 0,3===t?n.createElement("div",null,n.createElement("img",{src:this.randomThumb3,style:{display:""===e.thumb?"none":""}})):void 0,0===t?n.createElement("div",{className:"F"===e.gender?"defaultImg_f":"defaultImg_m",style:{display:""===e.thumb?"":"none"}},n.createElement("div",null,this.randomThumb0)):void 0,1===t?n.createElement("div",{className:"F"===e.gender?"defaultImg_f":"defaultImg_m",style:{display:""===e.thumb?"":"none"}},n.createElement("div",null,this.randomThumb1)):void 0,2===t?n.createElement("div",{className:"F"===e.gender?"defaultImg_f":"defaultImg_m",style:{display:""===e.thumb?"":"none"}},n.createElement("div",null,this.randomThumb2)):void 0,3===t?n.createElement("div",{className:"F"===e.gender?"defaultImg_f":"defaultImg_m",style:{display:""===e.thumb?"":"none"}},n.createElement("div",null,this.randomThumb3)):void 0):n.createElement("div",null,n.createElement("div",{style:{display:0===t?"":"none"}},n.createElement("img",{src:this.randomThumb0,style:{display:""===e.avatar?"none":""}})),n.createElement("div",{style:{display:1===t?"":"none"}},n.createElement("img",{src:this.randomThumb1,style:{display:""===e.avatar?"none":""}})),n.createElement("div",{style:{display:2===t?"":"none"}},n.createElement("img",{src:this.randomThumb2,style:{display:""===e.avatar?"none":""}})),n.createElement("div",{style:{display:3===t?"":"none"}},n.createElement("img",{src:this.randomThumb3,style:{display:""===e.avatar?"none":""}})))):n.createElement("div",{className:"img",onClick:this._showDetail.bind(this,e.id)},"1"===e.displayMode?n.createElement("div",null,n.createElement("img",{src:e.thumb,style:{display:""===e.thumb?"none":""}}),n.createElement("div",{className:"F"===e.gender?"defaultImg_f":"defaultImg_m",style:{display:""===e.thumb?"":"none"}},n.createElement("div",null,e.name.substring(0,2).toUpperCase()))):n.createElement("div",null,n.createElement("img",{src:e.avatar,style:{display:""===e.avatar?"none":""}}),n.createElement("img",{src:"/content/mathalive_lib/images/default_candy.png",style:{display:""===e.avatar&&"F"===e.gender?"":"none"}}),n.createElement("img",{src:"/content/mathalive_lib/images/default_cheese.png",style:{display:""===e.avatar&&"M"===e.gender?"":"none"}}))),this.randomTime?n.createElement("p",null,this.randomName):n.createElement("p",null,void 0!==e.displayMode&&"1"===e.displayMode?e.name:e.nickname)))),n.createElement("div",{className:"btn_control"},n.createElement("button",{className:"btn_01",onClick:this._onBack},"Back"),n.createElement("button",{className:"btn_02",onClick:this._onPick},"Again"))),n.createElement("div",{className:"timesetting_wrap",style:{display:"setting"===this._step?"":"none"}},n.createElement("div",{className:"timebox"},n.createElement("div",{className:"time"},this.userCnt),n.createElement("button",{className:"btn_time minus",onClick:this._onMinus}),n.createElement("button",{className:"btn_time plus",onClick:this._onPlus})),n.createElement("div",{className:"btn_control"},n.createElement("button",{className:"btn_02",onClick:this._onPick},"Pick")))))}};i([o.observable],g.prototype,"_step",void 0),i([o.observable],g.prototype,"submitUserNum",void 0),i([o.observable],g.prototype,"userCnt",void 0),i([o.observable],g.prototype,"randomThumb0",void 0),i([o.observable],g.prototype,"randomThumb1",void 0),i([o.observable],g.prototype,"randomThumb2",void 0),i([o.observable],g.prototype,"randomThumb3",void 0),i([o.observable],g.prototype,"randomName",void 0),i([o.observable],g.prototype,"displayMode",void 0),i([o.observable],g.prototype,"randomTime",void 0),g=i([r.observer],g);let f=class extends n.Component{constructor(){super(...arguments),this._viewPresenter=!1,this.isFlip=[],this._viewDetail=!1,this._from="list",this._studentId="",this.isFinished=!1,this._onClick=(e,t)=>{a.App.pub_playBtnTab(),this.isFinished?(this._viewDetail=!0,this._from="list",this._studentId=t,this.props.onSendPresenter(t)):this.isFlip[e]=!this.isFlip[e]},this._showDetailPopup=e=>{this._from="presenter",this._viewDetail=!0,this._studentId=e,this.props.onSendPresenter(e)},this._closeDetailPopup=(e,t)=>{this._viewDetail=!1,"presenter"===e&&this.props.onSendLiveget(t)},this.onNext=e=>{this.props.onNext(e)},this.onPrev=e=>{this.props.onPrev(e)}}componentWillReceiveProps(e){if(!this.props.isReset&&e.isReset){if(this.isFlip.length>0)for(let e=0;e<this.isFlip.length;e++)this.isFlip[e]=!1;this.isFinished=!1}if(this.isFlip.length<=0)for(let t=0;t<e.submitStudent[0].length;t++)this.isFlip.push(!1);if(this.props.typeStrategy&&"topic_strategy"===this.props.typeStrategy&&this.props.submitStudent[0]&&e.submitStudent[0]&&this.props.submitStudent[0].length!==e.submitStudent[0].length){for(;this.isFlip.length>0;)this.isFlip.pop();for(let t=0;t<e.submitStudent[0].length;t++)this.isFlip.push(!1)}}componentDidUpdate(e){if(this.props.view&&!e.view&&(this.isFinished=!1,this._from="list"),this.props.isAllFlip&&!e.isAllFlip){for(let e=0;e<this.isFlip.length;e++)this.isFlip[e]=!0;this.isFinished=!0}if(this.props.strategyComplete&&!e.strategyComplete){for(let e=0;e<this.isFlip.length;e++)this.isFlip[e]=!0;this.isFinished=!0}}render(){const{type:e,submitStudent:t,showhide:s}=this.props;let i="";"3"===e?i="r3":"4"===e&&(i="r4");let o=[[]];if(t&&t.length>0){for(let e=0;e<t.length;e++)o.push(t[e]);o[0]=l.orderBy(t[0],["trycnt","order"],["desc","asc"])}return n.createElement(n.Fragment,null,n.createElement("div",{className:"content "+i},n.createElement("div",{className:"thumbset"},(o&&o[0]).map((e,t)=>{if(e.trycnt>0){let i=!1;i=!!e.new;const o="2"===e.student.displayMode&&e.student.nickname?e.student.nickname:e.student.name,r="2"===e.student.displayMode?e.student.avatar:e.student.thumb;return n.createElement("div",{key:"q_"+t,className:"thumb_cnt "+(this.isFlip[t]?"":"user"),onClick:this._onClick.bind(this,t,e.student.id)},n.createElement("div",{className:"front"},n.createElement("span",{className:"new_icon",style:{display:i?"":"none"}}),""===r&&n.createElement("div",{className:"F"===e.student.gender?"defaultImg_f":"defaultImg_m"},n.createElement("div",null,o.substring(0,2).toUpperCase())),""!==r&&n.createElement("img",{src:r,style:{display:"show"===s?"":"none"}}),n.createElement("img",{src:"/content/mathalive_lib/images/penimage.png",style:{display:"hide"===s?"":"none"}}),n.createElement("div",{className:"name",style:{display:"show"===s?"":"none"}},o)),n.createElement("div",{className:"back"},n.createElement("span",{className:"new_icon",style:{display:i?"":"none"}}),n.createElement("img",{src:e.images&&e.images.length>0?e.images[0]:"/content/mathalive_lib/images/img_send_error.png"}),n.createElement("div",{className:"title user",style:{display:"show"===s?"":"none"}},""===r&&n.createElement("div",{className:"F"===e.student.gender?"defaultImg_f":"defaultImg_m"},n.createElement("div",null,o.substring(0,2).toUpperCase())),""!==r&&n.createElement("div",{className:"img"},n.createElement("img",{src:r})),o,n.createElement("div",{className:"live_bubble",style:{display:e.livePoint>0?"":" none"}},e.livePoint))))}{const i="2"===e.student.displayMode&&e.student.nickname?e.student.nickname:e.student.name,o="2"===e.student.displayMode?e.student.avatar:e.student.thumb;return n.createElement("div",{key:"q_"+t,className:"thumb_cnt"},n.createElement("div",{className:"not_submitted"}),"show"===s&&n.createElement("div",{className:"title user"},""===o&&n.createElement("div",{className:"F"===e.student.gender?"defaultImg_f":"defaultImg_m"},n.createElement("div",null,i.substring(0,2).toUpperCase())),""!==o&&n.createElement("div",{className:"img"},n.createElement("img",{src:o})),i))}}))),n.createElement(g,{view:this.props.viewPresenter,submitStudents:l.cloneDeep(o),hidePresenter:this.props.hidePresenter,showDetail:this._showDetailPopup}),n.createElement(_,{view:this._viewDetail,showhide:s,from:this._from,submitStudents:l.cloneDeep(o),onClosed:this._closeDetailPopup,onSendLiveget:this.props.onSendLiveget,quizIdx:this.props.quizIdx,studentId:this._studentId,onNext:this.onNext,onPrev:this.onPrev}))}};i([o.observable],f.prototype,"_viewPresenter",void 0),i([o.observable],f.prototype,"isFlip",void 0),i([o.observable],f.prototype,"_viewDetail",void 0),i([o.observable],f.prototype,"_from",void 0),i([o.observable],f.prototype,"_studentId",void 0),f=i([r.observer],f),t.SubmitList=f;let v=class extends n.Component{constructor(e){super(e),this._type="show",this._step="selection",this._listType="3",this._submitusers=[],this._viewPresenter=!1,this.isAllFlip=!1,this._showPresenter=()=>{var e,t,s;this.props.view&&this.isAllFlip&&(null===(e=document.querySelector("#wrap > .content-container"))||void 0===e||e.setAttribute("style","z-index: 1000;"),null===(t=document.querySelector(".progressWrap"))||void 0===t||t.setAttribute("style","display: none"),null===(s=document.querySelector(".btn_heart"))||void 0===s||s.setAttribute("style","display: none"),a.App.pub_quizDone(),this._viewPresenter=!0)},this._hidePresenter=()=>{var e,t,s;null===(e=document.querySelector("#wrap > .content-container"))||void 0===e||e.removeAttribute("style"),null===(t=document.querySelector(".progressWrap"))||void 0===t||t.removeAttribute("style"),null===(s=document.querySelector(".btn_heart"))||void 0===s||s.removeAttribute("style"),this._viewPresenter=!1,this.props.onHidePresenter()},this._onShowHide=e=>{"show"===e?(this._type="show",this._step="list"):"hide"===e&&(this._type="hide",this._step="list"),a.App.pub_playBtnTab(),this.props.checkIsPlayed()},this.onSendLiveget=e=>{this.props.onSendLiveget(e)},this.onSendPresenter=e=>{this.props.onSendPresenter(e,this._type)},this._toggleBtn=e=>{a.App.pub_playBtnTab(),"show"===e?this._type="show":"hide"===e&&(this._type="hide")},this._callBackFnc=(e,t)=>{let s={live:t};u.sendPADToID(e,21,s)},this._onClickList=e=>{a.App.pub_playBtnTab(),this._listType=e},this.onNext=e=>{this.props.onNext(e,this._type)},this.onPrev=e=>{this.props.onPrev(e,this._type)}}componentWillReceiveProps(e){e.submitStudent.length>0&&(this._submitusers=l.cloneDeep(e.submitStudent))}componentDidUpdate(e){this.props.view&&!e.view&&(this._listType="3",this._viewPresenter=!1,this.isAllFlip=!1,this.props.isPlayed||(this._step="selection")),this.props.isComplete&&!e.isComplete||this.props.isComplete&&e.isComplete?this.isAllFlip=!0:this.isAllFlip=!1}render(){const{view:e,typeStrategy:t}=this.props;return n.createElement("div",{className:"t_sendshare"+("selection"===this._step?" selection":""),style:{display:e?"":"none"}},n.createElement("div",{className:"top_header"},n.createElement("div",{className:this.isAllFlip?"presenter btn complete":"presenter btn",onClick:this._showPresenter},"Presenter"),n.createElement("div",{className:"select_list"},n.createElement("button",{className:"list_01"+("2"===this._listType?" on":""),onClick:this._onClickList.bind(this,"2")},n.createElement("span",null),n.createElement("span",null)),n.createElement("button",{className:"list_02"+("3"===this._listType?" on":""),onClick:this._onClickList.bind(this,"3")},n.createElement("span",null),n.createElement("span",null),n.createElement("span",null)),n.createElement("button",{className:"list_03"+("4"===this._listType?" on":""),onClick:this._onClickList.bind(this,"4")},n.createElement("span",null),n.createElement("span",null),n.createElement("span",null),n.createElement("span",null))),n.createElement("div",{className:"msg_text",style:{opacity:this.isAllFlip?0:1}},"Waiting for student responses...")),n.createElement("div",{className:"openhiding",style:{display:"list"===this._step?"":"none"}},"module_strategy"===t&&n.createElement("div",{className:"strategy"},n.createElement("button",{className:"on"},"A Strategy"),n.createElement("button",{className:""},"B Strategy")),n.createElement("div",{className:"inner"},n.createElement("button",{className:"show"===this._type?"on":"",onClick:this._toggleBtn.bind(this,"show")},"Show"),n.createElement("button",{className:"hide"===this._type?"on":"",onClick:this._toggleBtn.bind(this,"hide")},"Hide"))),n.createElement("div",{className:"content selection",style:{display:"selection"===this._step?"":"none"}},n.createElement("div",{className:"profile"},n.createElement("img",{src:"/content/mathalive_lib/images/ico_student_profile.png"}),n.createElement("p",{className:"t1"},"Student info"),n.createElement("p",{className:"t2",style:{opacity:this.isAllFlip?0:1}},"Waiting for student responses...")),n.createElement("div",{className:"btn_set"},n.createElement("button",{onClick:this._onShowHide.bind(this,"show")},n.createElement("span",null,"Show")),n.createElement("button",{onClick:this._onShowHide.bind(this,"hide")},n.createElement("span",null,"Hide")))),n.createElement(f,{view:"selection"===this._step,viewPresenter:this._viewPresenter,type:this._listType,submitStudent:this._submitusers,showhide:this._type,isReset:this.props.isReset,onSendLiveget:this.onSendLiveget,onSendPresenter:this.onSendPresenter,hidePresenter:this._hidePresenter,isAllFlip:this.isAllFlip,quizIdx:this.props.quizIdx,onNext:this.onNext,onPrev:this.onPrev,typeStrategy:t,strategyComplete:this.props.strategyComplete}))}};i([o.observable],v.prototype,"_type",void 0),i([o.observable],v.prototype,"_step",void 0),i([o.observable],v.prototype,"_listType",void 0),i([o.observable],v.prototype,"_submitusers",void 0),i([o.observable],v.prototype,"_viewPresenter",void 0),i([o.observable],v.prototype,"isAllFlip",void 0),v=i([r.observer],v),t.SendnShare=v},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var n,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,s,r):n(t,s))||r);return o>3&&r&&Object.defineProperty(t,s,r),r},n=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MALiveHeader=void 0;const o=s(0),r=s(1),a=s(8),l=s(4);s(11).default;let c=class extends o.Component{constructor(e){super(e),this.editClassName=()=>n(this,void 0,void 0,(function*(){let e=document.getElementsByClassName("live_guage");yield a.wait(1900),e[0].className="live_guage"}))}componentDidUpdate(e){return n(this,void 0,void 0,(function*(){this.props.view&&e.view}))}render(){const{studentName:e,livePoint:t,thumb:s,showhide:i,gender:n,contentType:r,contentName:a}=this.props;let c=0,h=!1,p=!1;return t&&t>300?c=300:t&&300===t?(this.props.view&&!1===h&&l.App.pub_playgreat(),p=!0,h=!0,c=t,this.editClassName()):t&&t<300&&(c=t,h=!1),o.createElement("div",{className:"maheader "+r},o.createElement("div",{className:"user",style:{opacity:"show"===i?1:0}},""===s&&o.createElement("div",{className:"F"===n?"defaultImg_f":"defaultImg_m"},o.createElement("div",null,e.substring(0,2).toUpperCase())),""!==s&&o.createElement("img",{src:s}),o.createElement("span",{className:"name"},e)),o.createElement("div",{className:"live_guage"+(p?" twinkle":"")},o.createElement("div",{className:"heart"}),o.createElement("div",{className:"bar_wrap"},o.createElement("div",{className:"bar",style:{width:c/3+"%"}}),o.createElement("div",{className:"num"+(h?" overmax":""),"data-value":c+""},c))),o.createElement("div",{className:"typeName"},a))}};c=i([r.observer],c),t.MALiveHeader=c},function(e,t,s){(function(e,t){!function(e,s){"use strict";if(!e.setImmediate){var i,n,o,r,a,l=1,c={},h=!1,p=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick((function(){m(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,s=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=s,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){m(e.data)},i=function(e){o.port2.postMessage(e)}):p&&"onreadystatechange"in p.createElement("script")?(n=p.documentElement,i=function(e){var t=p.createElement("script");t.onreadystatechange=function(){m(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):i=function(e){setTimeout(m,0,e)}:(r="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(r)&&m(+t.data.slice(r.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),i=function(t){e.postMessage(r+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),s=0;s<t.length;s++)t[s]=arguments[s+1];var n={callback:e,args:t};return c[l]=n,i(l),l++},d.clearImmediate=u}function u(e){delete c[e]}function m(e){if(h)setTimeout(m,0,e);else{var t=c[e];if(t){h=!0;try{!function(e){var t=e.callback,s=e.args;switch(s.length){case 0:t();break;case 1:t(s[0]);break;case 2:t(s[0],s[1]);break;case 3:t(s[0],s[1],s[2]);break;default:t.apply(void 0,s)}}(t)}finally{u(e),h=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,s(9),s(15))},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var n,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,s,r):n(t,s))||r);return o>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.LookbackStrategy=void 0;const n=s(0),o=s(1),r=s(3);s(46);let a=class extends n.Component{constructor(e){super(e),this.understand="",this.lookback_step1_left="",this.lookback_step1_right="",this.lookback_step2_left="",this.lookback_step2_right="",this.lookback_step3_left="",this.lookback_step3_right="",this.onShow=()=>{const{quiz:e,title:t,solutions:s,lookanswers:i}=this.props;let n=e.smTypeReason?e.smTypeReason:"",o=e.smTypeNm?e.smTypeNm:"",r=e.smTypeValue?e.smTypeValue:"";if(o=o.replace(r,"").trim(),e.lookback_title)this.understand="<img src='"+e.lookback_title+"' style='max-width: 847px;' />";else{let e=t,s=/>/gi;e=e.replace(s,">\n");let i=e.match(/[^\r\n]+/g),n="";i&&i.map((e,t)=>{(e.indexOf('class="title')>0||e.indexOf('class="problem_explain')>0||e.indexOf('class="legend')>0)&&(e=(e=e.replace('class="title','class="lookback_title')).replace("style=","_style=")),n+=e.trim()}),this.understand=n}const a=document.getElementById("plan");a&&(a.innerHTML=n,a.innerHTML+='<div class="arrow_strategy">'+o+"</div>");const l=document.getElementById("answer_content");if(l)if(l.innerHTML="",e.lookback_answer)l.innerHTML="<img src='"+e.lookback_answer+"' style='max-width: 847px;' />";else if(i&&i.length>0)i.map(e=>{"img"===e.type?e.data.indexOf("data:image")>-1?""!==l.innerHTML?l.innerHTML+='<span>,</span><img src="'+e.data+'"/>':l.innerHTML+='<img src="'+e.data+'"/>':""!==l.innerHTML?l.innerHTML+="<span>,</span>"+e.data:l.innerHTML+=e.data:""!==l.innerHTML?l.innerHTML+=", "+e.data:l.innerHTML+=" "+e.data});else{let t=[];e.answers.map(e=>{if(2===e.matchType){if(e.answers.length>0){e.answers[0].split(",").map(e=>{t.push(e.trim())})}}else e.answers.map(e=>{t.push(e)})}),t.map(e=>{""!==l.innerHTML?l.innerHTML+=", "+e:l.innerHTML+=" "+e})}let c=e.step.length;c>0&&""!==e.step[0].lookback_stepleft?(this.lookback_step1_left="<img src='"+e.step[0].lookback_stepleft+"' style='max-width: 847px;' />",""!==e.step[0].lookback_stepright&&(this.lookback_step1_right="<img src='"+e.step[0].lookback_stepright+"' style='max-width: 847px;' />")):s.length>0&&s[0]&&(this.lookback_step1_left=s[0].leftInnerHTML,this.lookback_step1_right=s[0].rightInnerHTML),c>1&&""!==e.step[1].lookback_stepleft?(this.lookback_step2_left="<img src='"+e.step[1].lookback_stepleft+"' style='max-width: 847px;' />",""!==e.step[1].lookback_stepright&&(this.lookback_step2_right="<img src='"+e.step[1].lookback_stepright+"' style='max-width: 847px;' />")):s.length>0&&s[1]&&(this.lookback_step2_left=s[1].leftInnerHTML,this.lookback_step2_right=s[1].rightInnerHTML),c>2&&""!==e.step[2].lookback_stepleft?(this.lookback_step3_left="<img src='"+e.step[2].lookback_stepleft+"' style='max-width: 847px;' />",""!==e.step[1].lookback_stepright&&(this.lookback_step3_right="<img src='"+e.step[2].lookback_stepright+"' style='max-width: 847px;' />")):s.length>2&&s[2]&&(this.lookback_step3_left=s[2].leftInnerHTML,this.lookback_step3_right=s[2].rightInnerHTML)},this.onClose=()=>{this.props.onClose&&this.props.onClose()}}componentDidMount(){this.onShow()}componentWillUnmount(){}componentDidUpdate(e){this.props.view&&!e.view?(this.lookback_step1_left="",this.lookback_step1_right="",this.lookback_step2_left="",this.lookback_step2_right="",this.lookback_step3_left="",this.lookback_step3_right="",this.onShow()):!this.props.view&&e.view&&(this.lookback_step1_left="",this.lookback_step1_right="",this.lookback_step2_left="",this.lookback_step2_right="",this.lookback_step3_left="",this.lookback_step3_right="")}render(){const{view:e,quiz:t}=this.props;let s=t.step.length;return n.createElement("div",{className:"lookback",style:{display:e?"block":"none"}},n.createElement("div",{className:"stage"},n.createElement("div",{className:"header"},n.createElement("span",{className:"logo"}),n.createElement("button",{className:"btn_close",onClick:this.onClose})),n.createElement("div",{className:"content"},n.createElement("table",null,n.createElement("tbody",null,n.createElement("tr",{className:"step s01"},n.createElement("td",{className:"title"},n.createElement("span",{className:"img"}),"Understand"),n.createElement("td",{className:"cnt"+(""!==t.lookback_title?" new":"")},n.createElement("div",{id:"understand",dangerouslySetInnerHTML:{__html:this.understand}}))),n.createElement("tr",{className:"step s02"},n.createElement("td",{className:"title"},n.createElement("span",{className:"img"}),"Plan"),n.createElement("td",{className:"cnt",id:"plan"})),n.createElement("tr",{className:"step s03"},n.createElement("td",{className:"title"},n.createElement("span",{className:"img"}),"Do it"),n.createElement("td",{className:"cnt"},n.createElement("div",{className:"icon_step"},"Step 1"),n.createElement("div",{className:"lookback_step"+(s>0&&""!==t.step[0].lookback_stepleft?" new":""),id:"lookback_step1"},n.createElement("div",{className:"answer",dangerouslySetInnerHTML:{__html:this.lookback_step1_left}}),n.createElement("div",{className:"solution",dangerouslySetInnerHTML:{__html:this.lookback_step1_right}})),n.createElement("div",{className:"icon_step"},"Step 2"),n.createElement("div",{className:"lookback_step"+(s>1&&""!==t.step[1].lookback_stepleft?" new":""),id:"lookback_step2"},n.createElement("div",{className:"answer",dangerouslySetInnerHTML:{__html:this.lookback_step2_left}}),n.createElement("div",{className:"solution",dangerouslySetInnerHTML:{__html:this.lookback_step2_right}})),n.createElement("div",{className:"icon_step",style:{display:3===s?"":"none"}},"Step 3"),n.createElement("div",{className:"lookback_step"+(s>2&&""!==t.step[2].lookback_stepleft?" new":""),id:"lookback_step3"},n.createElement("div",{className:"answer",dangerouslySetInnerHTML:{__html:this.lookback_step3_left}}),n.createElement("div",{className:"solution",dangerouslySetInnerHTML:{__html:this.lookback_step3_right}})))),n.createElement("tr",{className:"step s04"},n.createElement("td",{className:"title"},n.createElement("span",{className:"img"}),"Answer"),n.createElement("td",{className:"cnt"+(""!==t.lookback_answer?" new":"")},n.createElement("div",{id:"answer_content"}))))))))}};i([r.observable],a.prototype,"understand",void 0),i([r.observable],a.prototype,"lookback_step1_left",void 0),i([r.observable],a.prototype,"lookback_step1_right",void 0),i([r.observable],a.prototype,"lookback_step2_left",void 0),i([r.observable],a.prototype,"lookback_step2_right",void 0),i([r.observable],a.prototype,"lookback_step3_left",void 0),i([r.observable],a.prototype,"lookback_step3_right",void 0),a=i([o.observer],a),t.LookbackStrategy=a},function(e,t,s){"use strict";s.r(t)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RankingBtn=void 0;const i=s(0),n=s(7);class o extends i.Component{render(){return i.createElement(n.ToggleBtn,{className:"btn_ranking",style:{display:this.props.view?"":"none"},onClick:this.props.onClick})}}t.RankingBtn=o},function(e,t,s){"use strict";var i=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.setLivePoint=void 0;const n=s(16),o=s(5);t.setLivePoint=function(e){return i(this,void 0,void 0,(function*(){let t=new FormData;t.append("score",e.score+""),t.append("userIdx",e.userIdx),t.append("clsIdx",e.clsIdx+""),t.append("depthItemIdx",e.depthItemIdx+""),o.showTLoading(!0),yield n.default({method:"post",url:e.addOnHost+`/ma/rw/${e.plusMinusType}/${e.liveType}`,data:t}).then(t=>i(this,void 0,void 0,(function*(){yield n.default.get(e.addOnHost+"/ma/rw/info",{params:{userIdx:e.userIdx}}).then(t=>i(this,void 0,void 0,(function*(){o.showTLoading(!1),t.data&&t.data.resultData&&t.data.resultData.map(t=>{e.callback({redScore:t.redScore,redAccScore:t.redAccScore,greenScore:t.greenScore,greenAccScore:t.greenAccScore})})}))).catch(t=>{o.showTLoading(!1),o.alertToTeacher("    ."),e.error(t)})}))).catch(t=>{o.showTLoading(!1),o.alertToTeacher("    ."),e.error(t)})}))}},function(e,t,s){"use strict";var i=s(2),n=s(17),o=s(50),r=s(23);function a(e){var t=new o(e),s=n(o.prototype.request,t);return i.extend(s,o.prototype,t),i.extend(s,t),s}var l=a(s(20));l.Axios=o,l.create=function(e){return a(r(l.defaults,e))},l.Cancel=s(24),l.CancelToken=s(63),l.isCancel=s(19),l.all=function(e){return Promise.all(e)},l.spread=s(64),e.exports=l,e.exports.default=l},function(e,t,s){"use strict";var i=s(2),n=s(18),o=s(51),r=s(52),a=s(23);function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[r,void 0],s=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)s=s.then(t.shift(),t.shift());return s},l.prototype.getUri=function(e){return e=a(this.defaults,e),n(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,s){return this.request(i.merge(s||{},{method:e,url:t}))}})),i.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,s,n){return this.request(i.merge(n||{},{method:e,url:t,data:s}))}})),e.exports=l},function(e,t,s){"use strict";var i=s(2);function n(){this.handlers=[]}n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=n},function(e,t,s){"use strict";var i=s(2),n=s(53),o=s(19),r=s(20);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=n(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||r.adapter)(e).then((function(t){return a(e),t.data=n(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(a(e),t&&t.response&&(t.response.data=n(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,s){"use strict";var i=s(2);e.exports=function(e,t,s){return i.forEach(s,(function(s){e=s(e,t)})),e}},function(e,t,s){"use strict";var i=s(2);e.exports=function(e,t){i.forEach(e,(function(s,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=s,delete e[i])}))}},function(e,t,s){"use strict";var i=s(22);e.exports=function(e,t,s){var n=s.config.validateStatus;!n||n(s.status)?e(s):t(i("Request failed with status code "+s.status,s.config,null,s.request,s))}},function(e,t,s){"use strict";e.exports=function(e,t,s,i,n){return e.config=t,s&&(e.code=s),e.request=i,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,s){"use strict";var i=s(58),n=s(59);e.exports=function(e,t){return e&&!i(t)?n(e,t):t}},function(e,t,s){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,s){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,s){"use strict";var i=s(2),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,s,o,r={};return e?(i.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=i.trim(e.substr(0,o)).toLowerCase(),s=i.trim(e.substr(o+1)),t){if(r[t]&&n.indexOf(t)>=0)return;r[t]="set-cookie"===t?(r[t]?r[t]:[]).concat([s]):r[t]?r[t]+", "+s:s}})),r):r}},function(e,t,s){"use strict";var i=s(2);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a");function n(e){var i=e;return t&&(s.setAttribute("href",i),i=s.href),s.setAttribute("href",i),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:"/"===s.pathname.charAt(0)?s.pathname:"/"+s.pathname}}return e=n(window.location.href),function(t){var s=i.isString(t)?n(t):t;return s.protocol===e.protocol&&s.host===e.host}}():function(){return!0}},function(e,t,s){"use strict";var i=s(2);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,s,n,o,r){var a=[];a.push(e+"="+encodeURIComponent(t)),i.isNumber(s)&&a.push("expires="+new Date(s).toGMTString()),i.isString(n)&&a.push("path="+n),i.isString(o)&&a.push("domain="+o),!0===r&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,s){"use strict";var i=s(24);function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var s=this;e((function(e){s.reason||(s.reason=new i(e),t(s.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n((function(t){e=t})),cancel:e}},e.exports=n},function(e,t,s){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var n,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,s,r):n(t,s))||r);return o>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.BtnSendLive=void 0;const n=s(0),o=s(1),r=s(7),a=s(4);let l=class extends n.Component{constructor(e){super(e),this._onClick=()=>{a.App.pub_playBtnTab(),this.props.onClick()}}componentDidUpdate(e){}render(){const{view:e,disabled:t,on:s,isStrategy:i}=this.props;return n.createElement(r.ToggleBtn,{className:"btn_heart",style:{right:i?"9px":"0"},view:e,disabled:t,on:s,onClick:this._onClick})}};l=i([o.observer],l),t.BtnSendLive=l},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var n,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,s,r):n(t,s))||r);return o>3&&r&&Object.defineProperty(t,s,r),r},n=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(n,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SENDPROG=t.useTeacher=t.tContext=t.TeacherConsumer=t.TeacherProvider=t.TeacherContext=void 0;const o=s(0),r=s(3),a=s(4),l=s(5),c=s(67),h=s(16);var p;!function(e){e[e.READY=0]="READY",e[e.SENDING=1]="SENDING",e[e.SENDED=2]="SENDED",e[e.STOPED=3]="STOPED",e[e.COMPLETE=4]="COMPLETE"}(p||(p={})),t.SENDPROG=p;class d extends c.TeacherContextBase{constructor(){super(),this._resetQuizResultFnc=null,this._quizResultFnc=null,this._quiz3ResultFnc=null,this._livepointResultFnc=null,this._setAlertResponse=null,this._checkLivePoint=null,this.state.prog="module_strategy",this.actions.getData=()=>this._data,this.actions.getCurriculum=()=>this._curriculum,this.actions.gotoDirection=()=>this._setViewDiv("direction"),this.actions.gotoNextBook=()=>{l.sendLauncher(9,null)},this.actions.resetQuizResultFnc=e=>{this._resetQuizResultFnc=e},this.actions.setQuizResultFnc=e=>{this._quizResultFnc=e},this.actions.setQuiz3ResultFnc=e=>{this._quiz3ResultFnc=e},this.actions.setLivepointResultFnc=e=>{this._livepointResultFnc=e},this.actions.setAlertResponse=e=>{this._setAlertResponse=e},this.actions.checkLivePoint=e=>{this._checkLivePoint=e}}_setViewDiv(e){super._setViewDiv(e)}receive(e){if(super.receive(e),11===e.type&&e.data){const t=e.data;if("module_strategy_result"===t.msgtype){const e=t;if(e.result){JSON.parse(e.result);this._quizResultFnc&&this._quizResultFnc(e)}else{const e=t;if(e.id){const s=t;let i=[],n=[];let o;JSON.parse(s.imageUrl).map((e,t)=>{n.push(e)});let r=new Date;o=`${r.getFullYear()}-${r.getMonth()+1}-${r.getDate()} ${r.getHours()}:${r.getMinutes()}:${r.getSeconds()}`,i.push({std_cont_seq:0,studentId:s.id,ans_tf:"1",ans_submit:"",ans_starttime:o,ans_endtime:o,sc_div1:"",sc_div2:"",sc_div3:"",sc_div4:"",files:n,ans_correct:"",tab_index:"1",obj_kind:"MW0102",objKindDetailCd:0===s.team?"MW010201":"MW010202"}),i.length>0&&l.uploadInclassReport(i),this._quiz3ResultFnc&&this._quiz3ResultFnc(e)}}}else if("livepoint_send"===t.msgtype){const e=t;this._livepointResultFnc&&this._livepointResultFnc(e)}}}setData(e){this._data={items:[],quizs:[]},this._data.items=e.items}setDataFromAPI(){return n(this,void 0,void 0,(function*(){let e="",t=[0,0,0];for(let s=0;s<this._data.items.length;s++){""===e?e=this._data.items[s].quizSeq+"":e+=","+this._data.items[s].quizSeq;let i=this._data.items[s].seq-1;t[i]=this._data.items[s].quizSeq}a.App.isDvlp&&(this.state.classid=1398,this.state.curriculumid=23805),this.state.loading=!0,yield h.default.get(a.App.addOnHost+"/ma/strategy/"+e+"?clsIdx="+this.state.classid+"&depthItemIdx="+this.state.curriculumid+"&studyCd=MS2").then(e=>{if(!e.data.success)return;let s=[];e.data.resultData.map((e,t)=>{let i=e;s.push(i)}),s.map(e=>{const s=JSON.parse(e.dpAnswer),i=[];for(let e=0;e<s.length;e++){const t=s[e];i.push({basetype:t.base?t.base:0,subtype:t.sub?t.sub:0,basetypename:t.baseName?t.baseName:"",subtypename:t.subName?t.subName:"",matchType:t.matchType?t.matchType:0,answers:t.inputList?t.inputList:[]})}let n=[];e.stepList.map((e,t)=>{const s=JSON.parse(e.dpAnswer),i=[];for(let e=0;e<s.length;e++){const t=s[e];i.push({basetype:t.base?t.base:0,subtype:t.sub?t.sub:0,basetypename:t.baseName?t.baseName:"",subtypename:t.subName?t.subName:"",matchType:t.matchType?t.matchType:0,answers:t.inputList?t.inputList:[]})}const o={id:t+1,seq:e.seq,url:e.url+"index.html",desc:e.url+"desc.html",answers:i,quizKind:2,difiicult:e.dpLevel,lookback_stepleft:e.existLookbackImgs&&e.existLookbackImgs.includes("lookback_stepleft")?e.url+"lookback_stepleft.png":"",lookback_stepright:e.existLookbackImgs&&e.existLookbackImgs.includes("lookback_stepright")?e.url+"lookback_stepright.png":""};n.push(o)});let o=1;Number(e.seq)===t[0]?o=1:Number(e.seq)===t[1]?o=2:Number(e.seq)===t[2]&&(o=3);const r={idx:o,seq:e.seq,url:e.url+"index.html",desc:e.url+"desc.html",thumb:e.url+"thumbnail.png",answers:i,qnumber:o,quizKind:0,difiicult:e.dpLevel,step:n,stepCnt:n.length,smTypeMtlSeq:e.smTypeMtlSeq,smTypeValue:e.smTypeValue,smTypeNm:e.smTypeNm,smTypeReason:e.smTypeReason,lookback_title:e.existLookbackImgs&&e.existLookbackImgs.includes("lookback_title")?e.url+"lookback_title.png":"",lookback_answer:e.existLookbackImgs&&e.existLookbackImgs.includes("lookback_answer")?e.url+"lookback_answer.png":""};this._data.quizs.push(r),this.state.loading=!1}),this._resetQuizResultFnc&&this._resetQuizResultFnc()}).catch(e=>{this.state.loading=!1,console.log("Error",e)})}))}notifyAlert(e){e&&this._setAlertResponse&&this._setAlertResponse()}notifyNaviInfo(e,t,s,i,n,o){if(this._curriculum=e,this.state.bookid=t,this.state.classid=s,e.childrenList&&e.childrenList.length>0)for(let s=0;s<e.childrenList.length;s++){const i=e.childrenList[s];if(i&&i.book&&i.book.id===t){this.state.curriculumid=i.id,this.state.bookkey=i.book.key;break}}this.setDataFromAPI()}notifyHamburgerMenuClicked(e){e&&this._checkLivePoint&&this._checkLivePoint()}}i([r.observable],d.prototype,"state",void 0),i([r.action],d.prototype,"_setViewDiv",null),t.TeacherContext=d;const u=new d;t.tContext=u;const{Provider:m,Consumer:_}=o.createContext(u);t.TeacherConsumer=_;class g extends o.Component{render(){return o.createElement(m,{value:u},this.props.children)}}t.TeacherProvider=g,t.useTeacher=function(e){return function(t){return o.createElement(_,null,t=>o.createElement(e,Object.assign({},t)))}}},function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var n,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,s,r):n(t,s))||r);return o>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.TeacherContextBase=void 0;const n=s(3),o=s(4),r=s(5),a=s(68);class l{constructor(){this._naviLeftFnc=null,this._naviRightFnc=null,this.state={viewDiv:"direction",directionON:!1,navi:{view:!1,enableLeft:!1,enableRight:!1},svg_bg:{view:!0,bPlay:!1,viewCharactor:!0},loading:!1,retCnt:0,numOfStudent:0,bookid:0,bookkey:0,curriculumid:0,classid:0,unitid:0,lessonid:0,conceptLibiary:{view:!1,datatype:"grade",resultmode:!1}},this.actions={onDirectionEndStart:()=>{"direction"===this.state.viewDiv&&r.sendPAD(3,null)},onDirectionEnded:()=>{"direction"===this.state.viewDiv&&this._setViewDiv("content"),o.App.isStarted=!0},setNaviView:e=>{this.state.navi.view=e},setNavi:(e,t)=>{this.state.navi.enableLeft=e,this.state.navi.enableRight=t},setNaviFnc:(e,t)=>{this._naviLeftFnc=e,this._naviRightFnc=t},naviLeft:()=>{"direction"===this.state.viewDiv?r.sendLauncher(8,null):(o.App.pub_playBtnPage(),this._naviLeftFnc?this._naviLeftFnc():this._setViewDiv("direction"))},naviRight:()=>{"direction"===this.state.viewDiv?(o.App.pub_playBtnPage(),this.state.directionON=!1):(o.App.pub_playBtnPage(),this._naviRightFnc?this._naviRightFnc():r.sendLauncher(9,null))},setRetCnt:e=>{e>this.state.numOfStudent&&(e=this.state.numOfStudent),this.state.retCnt=e},setNumOfStudent:e=>{this.state.numOfStudent=e},setConcepLibaryView:e=>{this.state.conceptLibiary.view=e},setConcepLibaryDataType:e=>{this.state.conceptLibiary.datatype=e},setConcepLibaryResultMode:e=>{this.state.conceptLibiary.resultmode=e},setLoading:e=>{r.showTLoading(e)}},this.notifyBookCaptureInfo=e=>{},this.clickSendButton=()=>{},this.notifyRecordData=(e,t)=>{}}_setViewDiv(e,t){this.state.viewDiv!==e&&(t||o.App.pub_stop(),"direction"===e?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0,r.sendLauncher(5,null),r.sendPAD(1,null),this.state.navi.view=!0,this.state.navi.enableLeft=o.App.prevBook,this.state.navi.enableRight=!0,this._naviLeftFnc=null,this._naviRightFnc=null,this.state.conceptLibiary.view=!1,this.state.conceptLibiary.datatype="grade",this.state.conceptLibiary.resultmode=!1):(this.state.directionON=!1,this.state.svg_bg.bPlay=!1,this.state.svg_bg.viewCharactor=!1,r.sendLauncher(6,null),r.sendPAD(0,null)),this._naviLeftFnc=null,this._naviRightFnc=null,this.state.numOfStudent=0,this.state.retCnt=0,this.state.viewDiv=e)}start(){if("direction"===this.state.viewDiv&&(this.state.directionON=!0,this.state.navi.view=!0,this.state.navi.enableLeft=o.App.prevBook,this.state.navi.enableRight=!0,this.state.svg_bg.bPlay=!0,r.sendLauncher(5,null),r.sendPAD(1,null)),o.App.isDvlp){0;let e="";if(e="M0410",""===e)return;let t={id:1e3,code:"",depth:4,depth_name:a.parseDept4Div(e),info:"",div:e,subDiv:"",name:"M0408"===e?"Identify the Number 0, Read and Write 0":"",thumbnail:"",cmsLevel:"",childrenList:[]},s="",i="",n="";if("Concept"===a.parseDept4Div(e))for(let e=0;e<3;e++){0===e?(s="M0503",i="M050303",n=a.parseDept5SubDiv("M050303")):1===e?(s="M0503",i="M050304",n=a.parseDept5SubDiv("M050304")):2===e&&(s="M0506",i="M050601",n=a.parseDept5SubDiv("M050601"));let o={id:16815+e,code:"",depth:5,depth_name:n,info:"",div:s,subDiv:i,name:n,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:9e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(o)}else if("Problem"===a.parseDept4Div(e))for(let e=0;e<3;e++){0===e?(s="M0505",i="M050504",n="Reasoning (1)"):1===e?(s="M0505",i="M050504",n=a.parseDept5SubDiv("M050504")):2===e&&(s="M0506",i="M050602",n=a.parseDept5SubDiv("M050602"));let o={id:16815+e,code:"",depth:5,depth_name:n,info:"",div:s,subDiv:i,name:n,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:8e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(o)}else if("Concept Learning"===a.parseDept4Div(e))for(let e=0;e<12;e++){0===e?(s="M0501",i="M050101",n="WarmUp Quiz"):1===e?(s="M0501",i="M050101",n="I SPY"):2===e?(s="M0501",i="M050101",n="Hit a Mole"):3===e?(s="M0506",i="M050601",n="Memory Game"):4===e?(s="M0506",i="M050601",n="Math Talk"):5===e?(s="M0501",i="M050102",n="Learning Objectives"):6===e?(s="M0502",i="M050202",n="Concept Acivity"):7===e?(s="M0502",i="M050203",n="Concept Tool"):8===e?(s="M0502",i="M050204",n="Concept Summary"):9===e?(s="M0505",i="M050501",n="Independent Practice"):10===e?(s="M0505",i="M050502",n="Extended Practice"):11===e&&(s="M0505",i="M050505",n="CL Strategy");let o={id:16815+e,code:"",depth:5,depth_name:n,info:"",div:s,subDiv:i,name:n,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:1e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(o)}else if("Topic Learning"===a.parseDept4Div(e))for(let e=0;e<1;e++){0===e&&(s="M0507",i="M050701",n=a.parseDept5SubDiv("M050701"));let o={id:16815+e,code:"",depth:5,depth_name:n,info:"",div:s,subDiv:i,name:n,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:2e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(o)}else if("Module Learning"===a.parseDept4Div(e))for(let e=0;e<3;e++){0===e?(s="M0508",i="M050801",n=a.parseDept5SubDiv("M050801")):1===e?(s="M0508",i="M050803",n=a.parseDept5SubDiv("M050803")):2===e&&(s="M0508",i="M050804",n=a.parseDept5SubDiv("M050804"));let o={id:16815+e,code:"",depth:5,depth_name:n,info:"",div:s,subDiv:i,name:n,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:3e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(o)}else if("Module Test"===a.parseDept4Div(e))for(let e=0;e<1;e++){0===e&&(s="M0509",i="M050905",n=a.parseDept5SubDiv("M050905"));let o={id:16815+e,code:"",depth:5,depth_name:n,info:"",div:s,subDiv:i,name:n,thumbnail:"",cmsLevel:"",childrenList:[],book:{id:4e4+e,path:"/content/"+(5787+e),viewMode:2,key:5280+e,cmsKey:5787+e,completed:0,updatetime:""}};t.childrenList.push(o)}let o=1e4;o=30002,this.notifyNaviInfo(t,o,1)}else{let e="";0,r.getNaviInfo(e)}}receive(e){}uploaded(e){}multiUploaded(e){}notify(e){}notifyRecorded(e){}notifyVideoRecord(e){}notifyNaviInfo(e,t,s,i,n,o){}notifyPenToolState(e,t){}notifyLiveGivePopupClose(){}notifyAlert(e){}notifyHamburgerMenuClicked(e){}callThreeminState(){}}i([n.observable],l.prototype,"state",void 0),i([n.action],l.prototype,"_setViewDiv",null),i([n.action],l.prototype,"start",null),t.TeacherContextBase=l},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseClassColor=t.parseDept5SubDiv=t.parseDept5Div=t.parseDept4Div=t.parseDept3Div=void 0,t.parseDept3Div=function(e){return"M0301"===e?"Number&Operations":"M0302"===e?"Measurement&Date":"M0303"===e?"Operations&Algebra":"M0304"===e?"Geometry":"M0305"===e?"Topic":"M0306"===e?"Module Review":""},t.parseDept4Div=function(e){return"M0401"===e?"Concept":"M0402"===e?"Problem":"M0403"===e?"Strategy":"M0404"===e?"Number&Operations":"M0405"===e?"Measurement&Date":"M0406"===e?"Operations&Algebra":"M0407"===e?"Geometry":"M0408"===e?"Concept Learning":"M0409"===e?"Topic Learning":"M0410"===e?"Module Learning":"M0411"===e?"Module Test":""},t.parseDept5Div=function(e){return"M0501"===e?"Warm-Up":"M0502"===e?"Concept Learning":"M0503"===e?"Concept Learning 2":"M0504"===e?"Concept Learning 3":"M0505"===e?"Problem Solving":"M0506"===e?"Wrap-Up":"M0507"===e?"Topic Learning":"M0508"===e?"Module Learning":"M0509"===e?"Module Test":""},t.parseDept5SubDiv=function(e){return"M050101"===e?"Warm-Up Activity":"M050102"===e?"Learning Objectives":"M050103"===e?"Concept Summary":"M050201"===e?"Concept Learning":"M050202"===e?"Concept Activity":"M050203"===e?"Concept Tool":"M050204"===e?"Concept Summary":"M050301"===e?"Activity":"M050302"===e?"Concept Tool":"M050303"===e?"Summary":"M050304"===e?"Check":"M050401"===e?"Activity":"M050402"===e?"Concept Tool":"M050403"===e?"Summary":"M050404"===e?"Check":"M050501"===e?"Independent Practice":"M050502"===e?"Extended Practice":"M050503"===e?"Strategy":"M050504"===e?"Reasoning (2)":"M050505"===e?"Strategy":"M050601"===e?"Wrap-Up Activity":"M050602"===e?"Portfolio":"M050701"===e?"Topic Strategy":"M050702"===e?"Adaptive Learning":"M050801"===e?"Module Review":"M050802"===e?"Adaptive Learning":"M050803"===e?"Module Portfolio":"M050804"===e?"Module Strategy":"M050901"===e?"Assessment":"M050902"===e?"Module Portfolio":"M050903"===e?"Assessment Review":"M050904"===e?"STEAM Activity":"M050905"===e?"STEAM Portfolio":""},t.parseClassColor=function(e){return"B62001"===e?"Black":"White"}},function(e,t,s){"use strict";s.r(t)}]);