!function(e){var t={};function s(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(o,i,function(t){return e[t]}.bind(null,i));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s(s.s=24)}([function(e,t){e.exports=React},function(e,t){e.exports=mobxReact},function(e,t){e.exports=mobx},function(e,t,s){"use strict";var o=s(11),i=Object.prototype.toString;function n(e){return"[object Array]"===i.call(e)}function r(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),n(e))for(var s=0,o=e.length;s<o;s++)t.call(null,e[s],s,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:n,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!r(e)&&null!==e.constructor&&!r(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:r,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return a(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function e(){var t={};function s(s,o){"object"==typeof t[o]&&"object"==typeof s?t[o]=e(t[o],s):t[o]=s}for(var o=0,i=arguments.length;o<i;o++)l(arguments[o],s);return t},deepMerge:function e(){var t={};function s(s,o){"object"==typeof t[o]&&"object"==typeof s?t[o]=e(t[o],s):t[o]="object"==typeof s?e({},s):s}for(var o=0,i=arguments.length;o<i;o++)l(arguments[o],s);return t},extend:function(e,t,s){return l(t,(function(t,i){e[i]=s&&"function"==typeof t?o(t,s):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const o=s(9),i=s(5);function n(e){if(!e)return e;console.log("init student",e),e.displayMode=""+e.displayMode=="2"?"2":"1",e.gender=e.gender,""===e.nickname&&(e.nickname=e.name);let t=e.avatar&&""!==e.avatar?e.avatar:"";return""===t&&(t="f"===e.gender||"F"===e.gender?"/content/mathalive_lib/images/default_candy.png":"/content/mathalive_lib/images/default_cheese.png",e.avatar=t),e}class r{static get isMobile(){return r._isMobile}static get tempEl(){return r._tempEl}static pub_init(){const e=navigator.userAgent;r._isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e)||/android/i.test(e),r._tempBnd=document.createElement("div"),r._tempBnd.style.display="none",r._tempEl=document.createElement("div"),r._tempBnd.appendChild(r._tempEl),null===document.body?document.addEventListener("DOMContentLoaded",e=>{document.body.appendChild(r._tempBnd)}):document.body.appendChild(r._tempBnd)}static get students(){return r._students}static get student(){return r._student}static get lang(){return r._lang}static get isDvlp(){return r._isDvlp}static get data_url(){return r._data_url}static get lesson(){return r._lesson}static get book(){return r._book}static get nextBook(){return r._nextBook}static get prevBook(){return r._prevBook}static get addOnHost(){return r._addOnHost}static setaddOnHost(e){r._addOnHost=e}static pub_load(e,t,s,o,i,a,c){r._lesson=o,r._book=s,r._nextBook=a,r._prevBook=c,r._students=[],e&&Array.isArray(e)&&e.forEach((e,t)=>{r._students[t]=n(e)}),r._student=n(t),i&&""!==i&&(r._addOnHost=i)}static pub_reloadStudents(e){i.getStudents((t,s)=>{for(;r._students.length>0;)r._students.pop();for(;r._students_inited.length>0;)r._students_inited.pop();for(let e=0,s=t.length;e<s;e++)r.isDvlp?r._students[e]=n(t[e]):r._students[e]=n({id:t[e].id,name:t[e].name,thumb:t[e].defaultThumbnail,avatar:t[e].profileThumbnail,nickname:""!==t[e].nickName?t[e].nickName:t[e].name,displayMode:t[e].displayMode,gender:t[e].gender,inited:!0}),console.log("student",t[e]),r._students_inited.push(t[e].id);e()})}static pub_parseStyle(e){return r._tempEl.style.cssText=e,r._tempEl.style}static pub_initAudio(){r._common_audio=document.getElementById("common_audio"),r._ding_audio=document.getElementById("ding_audio"),r._dingend_audio=document.getElementById("dingend_audio"),r._btn_audio=document.getElementById("btn_audio"),r._correct_audio=document.getElementById("correct_audio"),r._wrong_audio=document.getElementById("wrong_audio"),r._topad_audio=document.getElementById("topad_audio"),r._goodjob_audio=document.getElementById("goodjob_audio"),r._btn_back_audio=document.getElementById("btn_back_audio"),r._btn_page_audio=document.getElementById("btn_page_audio"),r._popup_audio=document.getElementById("popup_audio"),r._clock_audio=document.getElementById("clock_audio"),r._ts_bgm_audio=document.getElementById("ts_bgm_audio"),r._bs_audio=document.getElementById("bs_audio"),r._bb_audio=document.getElementById("bb_audio"),r._cd_audio=document.getElementById("cd_audio"),r._tc_audio=document.getElementById("tc_audio"),r._te_audio=document.getElementById("te_audio"),r._trg_bgm_audio=document.getElementById("trg_bgm_audio"),r._afc_audio=document.getElementById("afc_audio"),r._trs_audio=document.getElementById("trs_audio"),r._btn_choice_audio=document.getElementById("btn_choice_audio"),r._retry_audio=document.getElementById("retry_audio"),r._sorry_audio=document.getElementById("sorry_audio"),r._great_audio=document.getElementById("great_audio"),r._memorygame_flipcard_audio=document.getElementById("flipcard_audio"),r._ispy_gameclick_audio=document.getElementById("gameclick_audio"),r._game_timesetting_start_audio=document.getElementById("game_timesetting_start"),r._solution_btn_audio=document.getElementById("solution_btn_audio"),r._game_result_audio=document.getElementById("game_result_audio"),r._open_problom_audio=document.getElementById("open_problom_audio"),r._quiz_done_audio=document.getElementById("quiz_done_audio"),r._hit_up_audio=document.getElementById("hu_audio"),r._hit_down_audio=document.getElementById("hd_audio"),r._hit_good_audio=document.getElementById("hg_audio"),r._hit_wrong_audio=document.getElementById("hw_audio"),r._pick_presenter=document.getElementById("pick_presenter"),r._game_good_audio=document.getElementById("gg_audio")}static pub_playClock(){r._clock_audio&&(r._clock_audio.currentTime=4.5,r._clock_audio.play())}static pub_playPopup(){r._popup_audio&&(r._popup_audio.currentTime=0,r._popup_audio.play())}static pub_playBtnPage(){r._btn_page_audio&&(r._btn_page_audio.currentTime=0,r._btn_page_audio.play())}static pub_playBtnBack(){r._btn_back_audio&&(r._btn_back_audio.currentTime=0,r._btn_back_audio.play())}static pub_playGoodjob(){r._goodjob_audio&&(r._goodjob_audio.currentTime=0,r._goodjob_audio.play())}static pub_playDing(){r._ding_audio&&(r._ding_audio.currentTime=0,r._ding_audio.play())}static pub_playDingend(){r._dingend_audio&&(r._dingend_audio.currentTime=0,r._dingend_audio.play())}static pub_playToPad(){r._topad_audio&&(r._topad_audio.currentTime=0,r._topad_audio.play())}static pub_playBtnTab(){r._btn_audio&&(r._btn_audio.currentTime=0,r._btn_audio.play())}static pub_playCorrect(){r._correct_audio&&(r._correct_audio.currentTime=0,r._correct_audio.play())}static pub_playWrong(){r._wrong_audio&&(r._wrong_audio.currentTime=0,r._wrong_audio.play())}static pub_playTeamSelectBgm(){r._ts_bgm_audio&&(r._ts_bgm_audio.currentTime=0,r._ts_bgm_audio.play())}static pub_stopTeamSelectBgm(){r._ts_bgm_audio&&(r._ts_bgm_audio.pause(),r._ts_bgm_audio.currentTime=0)}static pub_playStartButton(){r._bs_audio&&(r._bs_audio.currentTime=0,r._bs_audio.play())}static pub_playBasicButton(){r._bb_audio&&(r._bb_audio.currentTime=0,r._bb_audio.play())}static pub_playCountDown(){r._cd_audio&&(r._cd_audio.currentTime=0,r._cd_audio.play())}static pub_playTimerClock(){r._tc_audio&&(r._tc_audio.currentTime=0,r._tc_audio.play())}static pub_stopTimerClock(){r._tc_audio&&(r._tc_audio.pause(),r._tc_audio.currentTime=0)}static pub_playTimerEnd(){r._te_audio&&(r._te_audio.currentTime=0,r._te_audio.play())}static pub_playResultGraph(){r._trg_bgm_audio&&(r._trg_bgm_audio.currentTime=0,r._trg_bgm_audio.play())}static pub_playFireworksClapping(){r._afc_audio&&(r._afc_audio.currentTime=0,r._afc_audio.play())}static pub_playTotalResult(){r._trs_audio&&(r._trs_audio.currentTime=0,r._trs_audio.play())}static pub_playChoiceBtn(){r._btn_choice_audio&&(r._btn_choice_audio.currentTime=0,r._btn_choice_audio.play())}static pub_playsorry(){r._sorry_audio&&(r._sorry_audio.currentTime=0,r._sorry_audio.play())}static pub_playretry(){r._retry_audio&&(r._retry_audio.currentTime=0,r._retry_audio.play())}static pub_playgreat(){r._great_audio&&(r._great_audio.currentTime=0,r._great_audio.play())}static pub_playFlipCard(){r._memorygame_flipcard_audio&&(r._memorygame_flipcard_audio.currentTime=0,r._memorygame_flipcard_audio.play())}static pub_playGameClick(){r._ispy_gameclick_audio&&(r._ispy_gameclick_audio.currentTime=0,r._ispy_gameclick_audio.play())}static pub_game_timesetting_start(){r._game_timesetting_start_audio&&(r._game_timesetting_start_audio.currentTime=0,r._game_timesetting_start_audio.play())}static pub_solution_btn_click(){r._solution_btn_audio&&(r._solution_btn_audio.currentTime=0,r._solution_btn_audio.play())}static pub_playGameresult(){r._game_result_audio&&(r._game_result_audio.currentTime=0,r._game_result_audio.play())}static pub_openProblom(){r._open_problom_audio&&(r._open_problom_audio.currentTime=0,r._open_problom_audio.play())}static pub_quizDone(){r._quiz_done_audio&&(r._quiz_done_audio.currentTime=0,r._quiz_done_audio.play())}static pub_pick_presenter(){r._pick_presenter&&(r._pick_presenter.currentTime=0,r._pick_presenter.play())}static pub_stop(){null!=r._common_audio.onended&&r._common_audio.onended.call(r._common_audio,new Event("ended")),r._common_audio.oncanplaythrough=null,isNaN(r._common_audio.duration)||r._common_audio.paused||r._common_audio.pause()}static pub_play(e,t){r.pub_stop(),e=o.nteString(e,"");const s=o.nteString(r._common_audio.getAttribute("src"),"");if(""===e&&""===s)return void(null!=t&&t(!0));""!==e&&s!==e&&(r._common_audio.src=e);const i=e=>{r._common_audio.onended=null,null!==t&&t(!0),r._common_audio.removeEventListener("error",i)};r._common_audio.onended=e=>{r._common_audio.onended=null,null!==t&&t(!!e),r._common_audio.removeEventListener("error",i)},r._common_audio.addEventListener("error",i),isNaN(r._common_audio.duration)?(r._common_audio.oncanplaythrough=e=>{0!==r._common_audio.currentTime&&(r._common_audio.currentTime=0),r._common_audio.play(),r._common_audio.oncanplaythrough=null},r._common_audio.load()):(0!==r._common_audio.currentTime&&(r._common_audio.currentTime=0),r._common_audio.oncanplaythrough=null,r._common_audio.play())}static pub_set(e,t,s){r._isDvlp=t,r._lang=s,i.set(t)}static pub_addInitedStudent(e){let t=!0;for(let s=0,o=r._students_inited.length;s<o;s++){r._students_inited[s]===e.id&&(t=!1)}t&&r._students_inited.push(e.id);const s=r._start_idx>0&&r._students.length>0&&r._students_inited.length>=r._students.length;return s&&(window.clearTimeout(r._start_idx),r._start_idx=-1),s}static pub_start(e){0===r._students.length||r._students_inited.length>=r._students.length?e():r._start_idx=window.setTimeout(e,2e3)}static pub_clear(){for(;r._students.length>0;)r._students.pop();for(;r._students_inited.length>0;)r._students_inited.pop()}static pub_playHitup(){r._hit_up_audio&&(r._hit_up_audio.currentTime=0,r._hit_up_audio.play())}static pub_playHitdown(){r._hit_down_audio&&(r._hit_down_audio.currentTime=0,r._hit_down_audio.play())}static pub_playHitgood(){r._hit_good_audio&&(r._hit_good_audio.currentTime=0,r._hit_good_audio.play())}static pub_playHitwrong(){r._hit_wrong_audio&&(r._hit_wrong_audio.currentTime=0,r._hit_wrong_audio.play())}static pub_playGamegood(){r._game_good_audio&&(r._game_good_audio.currentTime=0,r._game_good_audio.play())}}t.App=r,r._isMobile=!1,r._students=[],r._students_inited=[],r._student=null,r._lang="ko",r._isDvlp=!1,r._data_url="../data/",r._lesson="",r._book="",r._nextBook=!1,r._prevBook=!1,r._start_idx=-1,r.isStarted=!1,r._addOnHost="https://addonsapi.fel40.com"},function(e,t,s){"use strict";var o=this&&this.__awaiter||function(e,t,s,o){return new(s||(s=Promise))((function(i,n){function r(e){try{c(o.next(e))}catch(e){n(e)}}function a(e){try{c(o.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.postAttention=t.postViewDiv=t.getPreviewDmsResult=t.getPreviewResult=t.showSGiftBox=t.showSLivePointPop=t.launchSTool=t.clearPenTool=t.hidePenTool=t.showPenTool=t.showRecordTool=t.showSendButton=t.alertToStudent=t.showSLoading=t.showSMathKit=t.clearSPenTool=t.takePicture=t.uploadInclassReport=t.stopVideoRecord=t.startVideoRecord=t.switchCamera=t.stopCamera=t.pauseRecordPlayer=t.playRecordPlayer=t.startCustomCamera=t.startCamera=t.getStudents=t.uploadFileToServerMulti=t.uploadImageToServer=t.uploadFileToServer=t.stopVoiceRecord=t.startVoiceRecord=t.sendTeacher=t.disableSoftwareKeyboard=t.sendPAD=t.sendPADToID=t.sendLauncher=t.uploadStudentReport=t.addStudentForStudentReportType6=t.hideStudentReportListPage=t.showStudentReportListPage=t.showStudentReportUI=t.hideStudentReportUI=t.startStudentReportProcess=t.finishContentPage=t.showTMathKit=t.alertToTeacher=t.showTLoading=t.clearTPenTool=t.getBookCaptureInfo=t.uploadTImageToServer=t.useFractionBar=t.logOut=t.exitClass=t.getNaviInfo=t.launchPadTool=t.launchTool=t.exitBook=t.gotoBookByKey=t.gotoBook=t.set=void 0;const i=s(6);let n=!1;t.set=function(e){n=e},t.gotoBook=function(e,t){if(console.log("felsocket gotoBook",e,t),!n)try{window.tsoc_o.gotoBook(e,t)}catch(e){}},t.gotoBookByKey=function(e){if(console.log("felsocket gotoBookByKey",e),!n)try{window.tsoc_o.gotoBookByKey(e)}catch(e){}},t.exitBook=function(){if(console.log("felsocket exitBook"),!n)try{window.tsoc_o.exitBook()}catch(e){}},t.launchTool=function(e){if(console.log("felsocket launchTool",e),!n)try{window.tsoc_o.launchTool(e)}catch(e){}},t.launchPadTool=function(e){if(console.log("felsocket launchPadTool",e),!n)try{window.tsoc_o.launchPadTool(e)}catch(e){}},t.getNaviInfo=function(e){if(console.log("felsocket getNaviInfo",e),!n)try{window.tsoc_o.getNaviInfo(e)}catch(e){}},t.exitClass=function(){if(console.log("felsocket exitClass"),!n)try{window.tsoc_o.exitClass()}catch(e){}},t.logOut=function(){if(console.log("felsocket logOut"),!n)try{window.tsoc_o.logOut()}catch(e){}},t.useFractionBar=function(){if(console.log("felsocket useFractionBar"),!n)try{window.tsoc_o.useFractionBar()}catch(e){}},t.uploadTImageToServer=function(e,t,s,o){if(console.log("felsocket uploadTImageToServer",t,s,o),!n)try{window.tsoc_o.uploadImageToServer(e,t,s,o)}catch(e){}},t.getBookCaptureInfo=function(e){if(console.log("felsocket getBookCaptureInfo"),!n)try{window.tsoc_o.getBookCaptureInfo(e)}catch(e){}},t.clearTPenTool=function(){if(console.log("felsocket clearTPenTool"),!n)try{window.tsoc_o.clearPenTool()}catch(e){}},t.showTLoading=function(e){if(console.log("felsocket showTLoading",e),!n)try{window.tsoc_o.showLoading(e)}catch(e){}},t.alertToTeacher=function(e){if(console.log("felsocket alertToTeacher",e),!n)try{window.tsoc_o.alert(e)}catch(e){}},t.showTMathKit=function(e){if(console.log("felsocket showTMathKit",e),!n)try{window.tsoc_o.showMathKit(e)}catch(e){}},t.finishContentPage=function(){if(!n)try{window.tsoc_o.finishContentPage()}catch(e){}},t.startStudentReportProcess=function(e,t,s){if(!n)try{window.tsoc_o.startStudentReportProcess(e,t,s)}catch(e){}},t.hideStudentReportUI=function(){if(!n)try{window.tsoc_o.hideStudentReportUI()}catch(e){}},t.showStudentReportUI=function(){if(!n)try{window.tsoc_o.showStudentReportUI()}catch(e){}},t.showStudentReportListPage=function(){if(!n)try{window.tsoc_o.showStudentReportListPage()}catch(e){}},t.hideStudentReportListPage=function(){if(!n)try{window.tsoc_o.hideStudentReportListPage()}catch(e){}},t.addStudentForStudentReportType6=function(e){if(!n)try{window.tsoc_o.addStudentForStudentReportType6(e)}catch(e){}},t.uploadStudentReport=function(e,t,s){if(!n)try{window.psoc_o.uploadStudentReport(e,t,s)}catch(e){}},t.sendLauncher=function(e,t){if(5!==e||n)if(6!==e||n)if(7!==e||n){if(8===e)if(console.log("felsocket gotoPrevBook"),n)try{window.top.tsoc_o.gotoPrevBook()}catch(e){}else try{window.tsoc_o.gotoPrevBook()}catch(e){}else if(9===e)if(console.log("felsocket gotoNextBook"),n)try{window.top.tsoc_o.gotoNextBook()}catch(e){}else try{window.tsoc_o.gotoNextBook()}catch(e){}}else try{window.tsoc_o.setTitleBar(t)}catch(e){}else try{window.tsoc_o.showTitleBar()}catch(e){}else try{window.tsoc_o.hideTitleBar()}catch(e){}},t.sendPADToID=function(e,t,s){const o={type:t,data:s};if(n)try{window.top.tsoc_o.sendPADToID(e,o)}catch(e){}else try{window.tsoc_o.sendPADToID(e,o)}catch(e){}},t.sendPAD=function(e,t){const s={type:e,data:t};if(n)try{window.top.tsoc_o.sendAll(s)}catch(e){}else try{window.tsoc_o.sendAll(s)}catch(e){}},t.disableSoftwareKeyboard=function(){try{window.psoc_o.disableSoftwareKeyboard()}catch(e){}},t.sendTeacher=function(e,t){const s={type:e,data:t};if(n)try{null!==window.opener&&window.opener.tsoc_o.sendTeacher(s)}catch(e){}else try{window.psoc_o.sendTeacher(s)}catch(e){}},t.startVoiceRecord=function(){try{window.psoc_o.startVoiceRecord()}catch(e){}},t.stopVoiceRecord=function(){try{window.psoc_o.stopVoiceRecord()}catch(e){}},t.uploadFileToServer=function(e){try{window.psoc_o.uploadFileToServer(e)}catch(e){}},t.uploadImageToServer=function(e,t,s,o){try{window.psoc_o.uploadImageToServer(e,t,s,o)}catch(e){}},t.uploadFileToServerMulti=function(e){try{window.psoc_o.uploadFileToServerMulti(e)}catch(e){}},t.getStudents=function(e){if(n)if(window.top.tsoc_o)try{window.top.tsoc_o.getStudents(e)}catch(e){}else e([],!1);else try{window.tsoc_o.getStudents(e)}catch(e){}},t.startCamera=function(e){if(!n)try{window.psoc_o.startCamera(e)}catch(e){}},t.startCustomCamera=function(e){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"startCustomCamera",msg:e},"*")},t.playRecordPlayer=function(){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"playRecordPlayer"},"*")},t.pauseRecordPlayer=function(){n||window.parent.postMessage({from:"content",srcFrame:"book",type:"pauseRecordPlayer"},"*")},t.stopCamera=function(){if(!n)try{window.psoc_o.stopCamera()}catch(e){}},t.switchCamera=function(e){if(!n)try{window.psoc_o.switchCamera(e)}catch(e){}},t.startVideoRecord=function(){if(!n)try{window.psoc_o.startVideoRecord()}catch(e){}},t.stopVideoRecord=function(){if(!n)try{window.psoc_o.stopVideoRecord()}catch(e){}},t.uploadInclassReport=function(e){if(!n)try{window.tsoc_o.uploadInclassReport(e)}catch(e){}},t.takePicture=function(e){if(!n)try{window.psoc_o.takePicture(e)}catch(e){}},t.clearSPenTool=function(){if(console.log("felsocket clearPenTool"),!n)try{window.psoc_o.clearPenTool()}catch(e){}},t.showSMathKit=function(e){if(console.log("felsocket showSMathKit",e),!n)try{window.psoc_o.showMathKit(e)}catch(e){}},t.showSLoading=function(e){if(console.log("felsocket showSLoading",e),!n)try{window.psoc_o.showLoading(e)}catch(e){}},t.alertToStudent=function(e){if(console.log("felsocket alertToStudent",e),!n)try{window.psoc_o.alert(e)}catch(e){}},t.showSendButton=function(e,t){if(console.log("felsocket showSendButton"),!n)try{window.psoc_o.showSendButton(e,t)}catch(e){}},t.showRecordTool=function(e){if(console.log("felsocket showRecordTool",e),!n)try{window.psoc_o.showRecordTool(e)}catch(e){}},t.showPenTool=function(){if(console.log("felsocket showPentool"),!n)try{window.psoc_o.showPenTool()}catch(e){}},t.hidePenTool=function(){if(console.log("felsocket hidePentool"),!n)try{window.psoc_o.hidePenTool()}catch(e){}},t.clearPenTool=function(){if(console.log("felsocket clearPenTool"),!n)try{window.psoc_o.clearPenTool()}catch(e){}},t.launchSTool=function(e){if(console.log("felsocket launchTool",e),!n)try{window.psoc_o.launchTool(e)}catch(e){}},t.showSLivePointPop=function(e){if(console.log("felsocket showLivePointPop"),!n)try{window.psoc_o.showLivePointPop(e)}catch(e){}},t.showSGiftBox=function(e,t){if(console.log("felsocket showGiftBox"),!n)try{window.psoc_o.showGiftBox(e,t)}catch(e){}},t.getPreviewResult=function(e){return o(this,void 0,void 0,(function*(){return new Promise(t=>{if(n)t([]);else{let s=!1;const o=e=>{s||(s=!0,t(e))};window.tsoc_o.getPreviewResult(o,e),i.delay(()=>{s||(s=!0,t([]))},5e3)}})}))},t.getPreviewDmsResult=function(e){return o(this,void 0,void 0,(function*(){return new Promise(t=>{if(n)t([]);else{let s=!1;const o=e=>{s||(s=!0,t(e))};window.tsoc_o.getPreviewDmsResult(o,e),i.delay(()=>{s||(s=!0,t([]))},5e3)}})}))},t.postViewDiv=function(e){return o(this,void 0,void 0,(function*(){console.log("postViewDiv",e),window.top.postMessage({type:"viewDiv",msg:e,from:"content"},"*")}))},t.postAttention=function(e){return o(this,void 0,void 0,(function*(){console.log("postAttention",e),window.top.postMessage({type:"attention",msg:e,from:"content"},"*")}))}},function(e,t){e.exports=_},function(e,t,s){"use strict";var o=this&&this.__awaiter||function(e,t,s,o){return new(s||(s=Promise))((function(i,n){function r(e){try{c(o.next(e))}catch(e){n(e)}}function a(e){try{c(o.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getBounds=t.getTimeStr=t.wait=void 0;const i=s(6);t.wait=function(e){return o(this,void 0,void 0,(function*(){return new Promise(t=>{i.delay(t,e)})}))},t.getTimeStr=function(e,t){const s=Math.round(t/1e3);let o=Math.round(e/1e3),i=Math.floor(o/60),n=Math.floor(i/60),r="";return o%=60,i%=60,n>0||s>=3600?(r=n+":",r+=i>=10?i+":":"0"+i+":"):s>=600?r+=i>=10?i+":":"0"+i+":":r=i+":",r+=o>=10?o:"0"+o,r},t.getBounds=function(e){const t={left:0,top:0,width:0,height:0};if(!e)return t;try{const s=e.getBoundingClientRect();t.left=s.left,t.top=s.top,t.width=s.width,t.height=s.height}catch(e){}const s=e.ownerDocument,o=s.body,i=s.documentElement;t.left=t.left-(i.clientLeft||o.clientLeft||0),t.top=t.top-(i.clientTop||o.clientTop||0);const n=s.defaultView;return t.left+=n.pageXOffset||i.scrollLeft||o.scrollLeft,t.top+=n.pageYOffset||i.scrollTop||o.scrollTop,t}},function(e,t,s){"use strict";e.exports=s(27)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._toStringTimestamp=t.getDateStr=t.nteArray=t.intToHTMLcolor=t.nteBool=t.nteString=t.nteFloat=t.nteInt=t.nteUInt=t.getUnicUrl=t.getUnicNum=t.getUnic=void 0,Date.now||(Date.now=function(){return(new Date).getTime()});let o=0;function i(){return n().toString(36)}function n(){const e=Date.now();return e>o?o=e:o+=1,o}t.getUnic=i,t.getUnicNum=n,t.getUnicUrl=function(e){if(!e)return"";let t=e=e.trim();return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")||(t=t.indexOf("?")>0?t+"&t="+i():t+"?t="+i()),t},t.nteUInt=function(e,t){if(null==e)return t;if("number"==typeof e)return isNaN(e)||e<0?t:Math.round(e);{const s=parseInt(String(e),10);return isNaN(s)||s<0?t:s}},t.nteInt=function(e,t){if(null==e)return t;if("number"==typeof e)return Math.round(e);{const s=parseInt(String(e),10);return isNaN(s)?t:s}},t.nteFloat=function(e,t){if(null==e)return t;if("number"==typeof e)return e;{const s=parseFloat(String(e));return isNaN(s)?t:s}},t.nteString=function(e,t){return null==e?t:String(e)},t.nteBool=function(e,t){if(null==e)return t;if("boolean"==typeof e)return e;const s=String(e);return"true"===s||"false"!==s&&t},t.intToHTMLcolor=function(e){let t,s,o,i=e-0;t=(255&i)<<16,s=65280&i,o=(16711680&i)>>>16,i=t|s|o;let n=i.toString(16);return n="#000000".substring(0,7-n.length)+n,n},t.nteArray=function(e){if(e){if(Array.isArray(e))return e;if("string"==typeof e){const t=e;if(t.indexOf("[")>=0&&t.indexOf("]")>0)try{return JSON.parse(t)}catch(e){}}const t=[];return t.push(e),t}return[]},t.getDateStr=function(e="."){const t=new Date,s=t.getFullYear(),o=t.getMonth()+1,i=t.getDate();return s+e+(o<10?"0"+o:""+o)+e+(i<10?"0"+i:""+i)},t._toStringTimestamp=function(e){let t;const s=e.getFullYear();let o=e.getMonth()+1+"";parseInt(o,10)<10&&(o="0"+o);let i=e.getDate()+"";return parseInt(i,10)<10&&(i="0"+i),t=s+"-"+o+"-"+i+" "+e.toTimeString().substr(0,8),t}},function(e,t,s){e.exports=s(37)},function(e,t,s){"use strict";e.exports=function(e,t){return function(){for(var s=new Array(arguments.length),o=0;o<s.length;o++)s[o]=arguments[o];return e.apply(t,s)}}},function(e,t,s){"use strict";var o=s(3);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,s){if(!t)return e;var n;if(s)n=s(t);else if(o.isURLSearchParams(t))n=t.toString();else{var r=[];o.forEach(t,(function(e,t){null!=e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,(function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),r.push(i(t)+"="+i(e))})))})),n=r.join("&")}if(n){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}},function(e,t,s){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,s){"use strict";(function(t){var o=s(3),i=s(43),n={"Content-Type":"application/x-www-form-urlencoded"};function r(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(a=s(15)),a),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),o.forEach(["post","put","patch"],(function(e){c.headers[e]=o.merge(n)})),e.exports=c}).call(this,s(42))},function(e,t,s){"use strict";var o=s(3),i=s(44),n=s(12),r=s(46),a=s(49),c=s(50),l=s(16);e.exports=function(e){return new Promise((function(t,h){var p=e.data,d=e.headers;o.isFormData(p)&&delete d["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",_=e.auth.password||"";d.Authorization="Basic "+btoa(m+":"+_)}var f=r(e.baseURL,e.url);if(u.open(e.method.toUpperCase(),n(f,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,u.onreadystatechange=function(){if(u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))){var s="getAllResponseHeaders"in u?a(u.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:s,config:e,request:u};i(t,h,o),u=null}},u.onabort=function(){u&&(h(l("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function(){h(l("Network Error",e,null,u)),u=null},u.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),h(l(t,e,"ECONNABORTED",u)),u=null},o.isStandardBrowserEnv()){var g=s(51),y=(e.withCredentials||c(f))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;y&&(d[e.xsrfHeaderName]=y)}if("setRequestHeader"in u&&o.forEach(d,(function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete d[t]:u.setRequestHeader(t,e)})),o.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),e.responseType)try{u.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&u.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){u&&(u.abort(),h(e),u=null)})),void 0===p&&(p=null),u.send(p)}))}},function(e,t,s){"use strict";var o=s(45);e.exports=function(e,t,s,i,n){var r=new Error(e);return o(r,t,s,i,n)}},function(e,t,s){"use strict";var o=s(3);e.exports=function(e,t){t=t||{};var s={},i=["url","method","params","data"],n=["headers","auth","proxy"],r=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];o.forEach(i,(function(e){void 0!==t[e]&&(s[e]=t[e])})),o.forEach(n,(function(i){o.isObject(t[i])?s[i]=o.deepMerge(e[i],t[i]):void 0!==t[i]?s[i]=t[i]:o.isObject(e[i])?s[i]=o.deepMerge(e[i]):void 0!==e[i]&&(s[i]=e[i])})),o.forEach(r,(function(o){void 0!==t[o]?s[o]=t[o]:void 0!==e[o]&&(s[o]=e[o])}));var a=i.concat(n).concat(r),c=Object.keys(t).filter((function(e){return-1===a.indexOf(e)}));return o.forEach(c,(function(o){void 0!==t[o]?s[o]=t[o]:void 0!==e[o]&&(s[o]=e[o])})),s}},function(e,t,s){"use strict";function o(e){this.message=e}o.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},o.prototype.__CANCEL__=!0,e.exports=o},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0});const i=s(0),n=s(2),r=s(1),a=s(59),c=s(9);let l=class extends i.Component{constructor(e){super(e),this.m_btnH=0,this.m_max=0,this.m_sy=-1,this.m_vy=-1,this.m_time=-1,this.m_bSend=!1,this.m_state={y:0,alpha:1,tDur:0,aDur:0,isOn:!1,disabled:!1},this._ref=e=>{if(this.m_max>0||!e)return;e.setAttribute("touch-action","none");const t=window.getComputedStyle(e),s=c.nteFloat(t.height,0),o=c.nteFloat(t.bottom,0);s>0&&(this.m_btnH=s,"pad"===this.props.type?this.m_max=o-s-35:this.m_max=s+o+10,this.props.view||(this.m_state.y=this.m_max))},this._down=e=>{this.m_state.isOn||this.m_state.disabled||void 0!==this.props.disable&&this.props.disable||(this.m_state.y=this.props.originY,this.m_state.alpha=1,this.m_state.tDur=0,this.m_state.aDur=0,this.m_state.isOn=!0,this.m_vy=0,this.m_time=Date.now())},this._start=(e,t)=>{this.m_sy=t.y,this.m_bSend=!0},this._drag=(e,t)=>{if(!this.m_state.isOn||this.m_state.disabled)return;let s=t.y-this.m_sy;"teacher"===this.props.type?(t.deltaY<-1?this.m_bSend=!1:t.deltaY>=0&&(this.m_bSend=!0),s<0&&(s=0)):(t.deltaY>1?this.m_bSend=!1:t.deltaY<=0&&(this.m_bSend=!0),s>0&&(s=0)),!1===this.props.preventDrag&&(this.m_state.y=s+this.props.originY);const o=Date.now();this.m_vy=t.deltaY/(o-this.m_time),this.m_time=o},this._stop=(e,t)=>{if(this.m_state.isOn&&!this.m_state.disabled)if(this.m_bSend){let e=.5*this.m_vy*1e3,s=t.y-this.m_sy;"teacher"===this.props.type?(e<this.m_btnH?e=this.m_btnH:e>4*this.m_btnH&&(e=4*this.m_btnH),s<0&&(s=0)):(-1*e<this.m_btnH?e=-this.m_btnH:-1*e>4*this.m_btnH&&(e=-4*this.m_btnH),s>0&&(s=0)),this.m_state.tDur=.5,this.m_state.aDur=.5,this.m_state.alpha=0,this.m_state.y=s+e+this.props.originY,this.props.onSend()}else this.m_state.isOn=!1,this.m_state.tDur=.3,this.m_state.aDur=0,this.m_state.y=this.props.originY},e.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):e.view?(this.m_state.y=e.originY,this.m_state.alpha=1,this.m_state.tDur=.3,this.m_state.aDur=0,this.m_state.isOn=!1,this.m_state.disabled=!1):e.view||(this.m_state.y=e.originY,this.m_state.alpha=0,this.m_state.tDur=.3,this.m_state.aDur=.3,this.m_state.isOn=!1,this.m_state.disabled=!0)}componentWillReceiveProps(e){e.sended&&!this.props.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):e.view&&!this.props.view?(this.m_state.y=e.originY,this.m_state.alpha=1,e.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=.3):(this.m_state.tDur=.3,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1):!e.view&&this.props.view?(this.m_state.y=this.m_max,this.m_state.alpha=0,this.m_state.tDur=.3,this.m_state.aDur=.3,this.m_state.isOn=!1,this.m_state.disabled=!0):!e.view||e.sended||this.m_state.isOn||e.originY===this.props.originY||(this.m_state.y=e.originY,this.m_state.tDur=.3,this.m_state.aDur=0),!this.props.isRetry&&e.isRetry&&(this.m_state.y=e.originY,this.m_state.alpha=1,e.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=.3):(this.m_state.tDur=.3,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1)}render(){const{y:e,tDur:t,aDur:s,alpha:o,isOn:n,disabled:r}=this.m_state;let c={transform:`translateY(${e}px)`,transition:`transform ${t}s, opacity ${s/2}s ${s/2}s`,opacity:o,pointerEvents:r||!this.props.view?"none":"auto"};this.props.preventDrag&&(c={});const l=[];return"pad"===this.props.type?l.push("fel_toteacher"):l.push("fel_topad"),n&&l.push("on"),this.props.isVisiblePenTool&&this.props.isVisiblePenTool&&l.push("up"),i.createElement(a.DraggableCore,{onMouseDown:this._down,onDrag:this._drag,onStart:this._start,onStop:this._stop},i.createElement("button",{ref:this._ref,className:l.join(" ")+(this.props.className?" "+this.props.className:""),style:c},i.createElement("span",{className:"revise"+(this.props.isRevise?" on":""),style:{display:this.props.isRevise?"":"none"}})))}};o([n.observable],l.prototype,"m_state",void 0),l=o([r.observer],l),t.default=l},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.MAHeader_STRATEGY=void 0;const i=s(0),n=s(1),r=s(6),a=s(61).default,c=s(4);let l=class extends i.Component{constructor(e){super(e),this._soption={direction:"horizontal",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},this._swiper=null,this._refSwiper=e=>{if(this._swiper||!e)return;const t=e.swiper;t.on("transitionStart",()=>{}),t.on("transitionEnd",()=>{}),this._swiper=t},this.onChangeTeam=(e,t)=>{"module_strategy"===this.props.typeStrategy&&-1!==e&&this.props.onChangeTeam&&this.props.onChangeTeam(e,t)},this.onGotoProgress=e=>{this.props.onGotoProgress&&this.props.onGotoProgress(e)},this.onViewWorkSheet=e=>{e.stopPropagation(),c.App.pub_playGameClick(),this.props.onViewWorkSheet&&this.props.onViewWorkSheet()},this.onChangeQuestion=e=>{c.App.pub_playBtnTab(),this.props.onChangeQuestion&&this.props.onChangeQuestion(e)}}componentDidUpdate(e){"module_strategy"===this.props.typeStrategy||(this.props.view&&!e.view?r.delay(()=>{this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize())},300):!this.props.view&&e.view,this.props.quizIdx!==e.quizIdx&&this._swiper&&(this._swiper.update(),this._swiper.slideTo(this.props.quizIdx,0)))}render(){const{view:e,isStudent:t,quizIdx:s,pageCnt:o,headerResult:n,curProgress:c,typeStrategy:l,team:h,stepCnt_A:p,stepCnt_B:d,pageIdx:u,quizresult:m}=this.props;let _=[];if(o&&o>0)for(let e=0;e<o;e++)_.push(i.createElement("span",{key:"p"+e,className:s===e?"on":void 0}));let f="",g=["","",""];if(t){if("topic_strategy"===l);else if(n&&n.length>0&&s>-1){"strategy"===l&&(f=n[s].quizKind>0?n[s].qnumber+"+":n[s].qnumber+""),n[n.length-1].completed&&r.delay(()=>{this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize())},600);let e=n[s];"module_strategy"===l&&(e=n[0]);for(let t=0;t<e.step.length;t++)e.step[t].correct?1===e.step[t].tryCnt?g[t]=" pass1":2===e.step[t].tryCnt&&(g[t]=" pass2"):2===e.step[t].tryCnt?g[t]=" fail1":e.step[t].completed&&(g[t]=" fail2")}}else f="strategy"===l?s%2==0?Math.floor(s/2)+1+"":Math.floor(s/2)+1+"+":s+1+"";let y=[],b=[],w=[],v="",k="",A="";if(m){m.result.map((e,t)=>{y.push(e.step[0]),b.push(e.step[1]),3===e.step.length&&w.push(e.step[2])});let e=0,t=0,s=0;if(m.allusers>0){let o=[],i=[],n=[];o=y.filter((e,t)=>1===e.tryCnt&&!0===e.correct),i=b.filter((e,t)=>1===e.tryCnt&&!0===e.correct),w.length>0&&(n=w.filter((e,t)=>1===e.tryCnt&&!0===e.correct)),e=o.length>0?o.length/m.allusers*100:0,t=i.length>0?i.length/m.allusers*100:0,s=n.length>0?n.length/m.allusers*100:0}v=Number.isInteger(e)?e+"%":e.toFixed(2)+"%",k=Number.isInteger(t)?t+"%":t.toFixed(2)+"%",A=Number.isInteger(s)?s+"%":s.toFixed(2)+"%"}return i.createElement(i.Fragment,null,i.createElement("div",{className:"topHeader_strategy",style:{display:e?"":"none"}},"module_strategy"!==l&&i.createElement(i.Fragment,null,i.createElement("div",{className:"number",style:{display:t?"none":""}},i.createElement("span",null,f)),t&&i.createElement(i.Fragment,null,i.createElement("div",{className:"result_score"+(t?" student":"")},i.createElement(a,Object.assign({ref:this._refSwiper},this._soption),n&&n.length>0&&n.map((e,t)=>{let o="";return o="strategy"===l?e.quizKind>0?e.qnumber+"+":e.qnumber+"":e.contentSeq+"",i.createElement("div",{className:"num"+(s===t?" now":s>t?" past":" notyet"),key:"s_"+t},i.createElement("span",{className:"txt"},o))}),!n&&i.createElement("div",{className:"num now"},i.createElement("span",{className:"txt"},s)))),i.createElement("span",{className:"worksheet",style:{display:t&&0===s&&"topic_strategy"===l?"":"none"},onClick:this.onViewWorkSheet.bind(this)},"Worksheet"))),(t&&"topic_strategy"!==l||!t&&"module_strategy"!==l)&&i.createElement("div",{className:("module_strategy"===l?"progress _module strategy":"progress strategy")+(t?" student":""),style:{display:t&&2===s?"none":""}},i.createElement("ul",null,i.createElement("li",{className:"a"+(c>0?" on":""),onClick:this.onGotoProgress.bind(this,1),style:{width:3===this.props.stepCnt?"20%":"25%"}},i.createElement("span",{className:"tit1"},"Understand")),i.createElement("li",{className:"a"+(c>1?" on":""),onClick:this.onGotoProgress.bind(this,10),style:{width:3===this.props.stepCnt?"20%":"25%"}},i.createElement("span",{className:"tit1"},"How to solve?")),i.createElement("li",{className:"a"+(c>10?" on":"")+g[0],onClick:this.onGotoProgress.bind(this,100),style:{width:3===this.props.stepCnt?"20%":"25%"}},i.createElement("span",{className:"tit1"},""!==v?v:"Step 1")),i.createElement("li",{className:"a"+(c>100?" on":"")+g[1],onClick:this.onGotoProgress.bind(this,200),style:{width:3===this.props.stepCnt?"20%":"25%"}},i.createElement("span",{className:"tit1"},""!==k?k:"Step 2")),3===this.props.stepCnt&&i.createElement("li",{className:"a"+(c>200?" on":"")+g[2],onClick:this.onGotoProgress.bind(this,300),style:{width:3===this.props.stepCnt?"20%":"25%"}},i.createElement("span",{className:"tit1"},""!==A?A:"Step 3")))),"module_strategy"===l&&t&&i.createElement("div",{className:"team_title "+(0===this.props.team?"a":"b")},i.createElement("span",{className:"team"},0===this.props.team?"A":"B"),i.createElement("span",{className:"title"},this.props.plan?this.props.plan:"")),"module_strategy"===l&&2!==s&&!t&&i.createElement("div",{className:"progress strategy module"+(t?" student":"")},i.createElement("ul",null,i.createElement("li",{className:"a"+(c>0?" on":""),onClick:this.onGotoProgress.bind(this,1),style:{width:3===this.props.stepCnt?"20%":"25%"}},i.createElement("span",{className:"tit1"},"Understand")),i.createElement("li",{className:"a"+(c>1?" on":""),onClick:this.onGotoProgress.bind(this,10),style:{width:3===this.props.stepCnt?"20%":"25%"}},i.createElement("span",{className:"tit1"},"How to solve?")),i.createElement("li",{className:(t?"a":"ab")+(c>10?t?" on":0===h?" a_on":" b_on":"")+g[0],style:{width:3===this.props.stepCnt?"20%":"25%"}},i.createElement("div",{className:"btn"},i.createElement("button",{className:"a",onClick:this.onChangeTeam.bind(this,0,100)}),i.createElement("button",{className:"b",onClick:this.onChangeTeam.bind(this,1,100)})),i.createElement("span",{className:"tit1"},"Step 1"),i.createElement("div",{className:"tit2"},i.createElement("span",{id:"s1a",className:"a"},"0%"),i.createElement("span",{id:"s1b",className:"b"},"0%"))),i.createElement("li",{className:(t?"a":"ab")+(c>100?t?" on":0===h?" a_on":" b_on":"")+g[1],style:{width:3===this.props.stepCnt?"20%":"25%"}},i.createElement("div",{className:"btn"},i.createElement("button",{className:"a",onClick:this.onChangeTeam.bind(this,0,200)}),i.createElement("button",{className:"b",onClick:this.onChangeTeam.bind(this,1,200)})),i.createElement("span",{className:"tit1"},"Step 2"),i.createElement("div",{className:"tit2"},i.createElement("span",{id:"s2a",className:"a"},"0%"),i.createElement("span",{id:"s2b",className:"b"},"0%"))),!(2===p&&2===d)&&i.createElement("li",{className:(t?"a":3===p&&3===d?"ab":3===p?"step3_a":"step3_b")+(c>200?t||!t&&(2!==p||2!==d)?" on":0===h?" a_on":" b_on":"")+g[2],style:{width:3===this.props.stepCnt?"20%":"25%"},onClick:this.onChangeTeam.bind(this,3===p?3===d?-1:0:1,300)},i.createElement("div",{className:"btn"},i.createElement("button",{className:"a",onClick:this.onChangeTeam.bind(this,0,300)}),i.createElement("button",{className:"b",onClick:this.onChangeTeam.bind(this,1,300)})),i.createElement("span",{className:"tit1"},"Step 3"),i.createElement("div",{className:"tit2"},i.createElement("span",{id:"s3a",className:"a"},"0%"),i.createElement("span",{id:"s3b",className:"b"},"0%"))))),"module_strategy"===l&&2===s&&i.createElement(i.Fragment,null,i.createElement("span",{className:"worksheet module"+(t?" student":""),onClick:this.onViewWorkSheet.bind(this),style:{display:t?"none":""}},t?"Worksheet":"Worksheet Guide")),!t&&"module_strategy"===l&&i.createElement("div",{className:"pager"},i.createElement("span",{className:0===s?"on":"",onClick:this.onChangeQuestion.bind(this,0)}),i.createElement("span",{className:1===s?"on":"",onClick:this.onChangeQuestion.bind(this,1)}),i.createElement("span",{className:2===s?"on":"",onClick:this.onChangeQuestion.bind(this,2)})),t&&"module_strategy"===l&&2==s&&i.createElement("div",{className:"pagination"},i.createElement("span",{className:void 0===u||0===u?"on":""}),i.createElement("span",{className:1===u?"on":""})),t&&"topic_strategy"===l&&i.createElement("div",{className:"pagination"},i.createElement("span",{className:0===u?"on":""}),i.createElement("span",{className:1===u?"on":""}))))}};l=o([n.observer],l),t.MAHeader_STRATEGY=l},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},i=this&&this.__awaiter||function(e,t,s,o){return new(s||(s=Promise))((function(i,n){function r(e){try{c(o.next(e))}catch(e){n(e)}}function a(e){try{c(o.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.NewSayPopup=void 0;const n=s(0),r=s(2),a=s(1),c=s(6),l=s(7),h=s(4),p=s(5);let d=class extends n.Component{constructor(){super(...arguments),this.showopen=!1,this._innerType=0,this._name="great",this._onComplete=()=>i(this,void 0,void 0,(function*(){yield l.wait(500),this.props.onComplete(),!0!==this.props.hideTeaching&&p.showSMathKit(!0)}))}componentDidUpdate(e){if(this.props.view&&!e.view){let e=this.props.delay;e||(e=800),this.props.type<5?this._innerType=Math.floor(4*Math.random()+1):this._innerType=this.props.type,1===this._innerType?this._name="great":2===this._innerType?this._name="awesome":3===this._innerType?this._name="perfect":4===this._innerType?this._name="excellent":5===this._innerType?this._name="bonus":6===this._innerType?this._name="sorry":7===this._innerType&&(this._name="retry"),c.delay(()=>{this.showopen=!1,this._onComplete()},2e3),c.delay(()=>{this.showopen=!0,!0!==this.props.hideTeaching&&p.showSMathKit(!1),this.props.type<5?h.App.pub_playgreat():6===this.props.type?h.App.pub_playsorry():7===this.props.type&&h.App.pub_playretry()},500)}else!this.props.view&&e.view&&(this._name="great",this._innerType=0)}render(){return n.createElement("div",{className:"msg_rst"+(this.showopen?" open":""),style:{display:this.props.view?"":"none"}},n.createElement("div",{className:"imgtxt "+this._name}),n.createElement("div",{className:"twinkle"},n.createElement("span",null),n.createElement("span",null),n.createElement("span",null),n.createElement("span",null),n.createElement("span",null),n.createElement("span",null),n.createElement("span",null),n.createElement("span",null)))}};o([r.observable],d.prototype,"showopen",void 0),o([r.observable],d.prototype,"_innerType",void 0),o([r.observable],d.prototype,"_name",void 0),d=o([a.observer],d),t.NewSayPopup=d},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.AlertPopup=t.WarningPopup=t.StrategyPopup=void 0;const i=s(0),n=s(2),r=s(1),a=s(23),c=s(6),l=s(4);let h=class extends i.Component{componentDidUpdate(e){if(this.props.view&&!e.view){if(!this.props.button){let e=this.props.delay;e||(e=800),c.delay(()=>{this.props.onComplete&&this.props.onComplete()},e)}}else!this.props.view&&e.view}render(){const{type:e}=this.props;let t="";0===e?t="The teacher has stopped you from the activity. After 3 seconds, only the contents has been created so far will be submitted.":1===e?t="All students are already in progress. If you restart, existing data will be deleted. Are you sure you want to request the submission?":2===e?t="You can share a solution only in the problem solving state.":3===e?t="Do you want to save the current learning screen? If there is already saved data, the current data will be overwritten.":4===e?t="Picture not taken.\nYou have reached the maximum number of pictures available.":5===e&&(t="For this activity, We recommend students to wear a headset or an earphone with a microphone.");let s="exclamation";return 4===e?s="nocamera":5===e&&(s="headset"),i.createElement("div",{className:"alertpop strategy"+(this.props.view?" show":"")},i.createElement("div",{className:"alertpop-inner"},i.createElement("div",{className:s}),i.createElement("div",{className:"ment"},t),i.createElement("div",{className:"buttons"+(this.props.isSingle?" single":"")+(this.props.button?"":" hide")},i.createElement("button",{className:"btn cancel",onClick:this.props.onCancel},"Cancel"),i.createElement("button",{className:"btn ok",onClick:this.props.onOk},"Ok"))))}};h=o([r.observer],h),t.StrategyPopup=h;let p=class extends i.Component{constructor(){super(...arguments),this.second=3,this.interval=null}componentDidUpdate(e){if(this.props.view&&!e.view){if(this.second=3,!this.props.button){let e=this.props.delay;e||(e=800),this.interval=setInterval(()=>{this.second--,0===this.second&&(this.props.onComplete&&this.props.onComplete(),null!==this.interval&&clearInterval(this.interval))},1e3)}}else!this.props.view&&e.view&&(null!==this.interval&&clearInterval(this.interval),this.props.onComplete&&this.props.onComplete())}render(){const{type:e}=this.props;let t="";return 0===e&&(t=`Submit your answer within <strong>${this.second} seconds.</strong>`),i.createElement("div",{className:"warningpopup",style:{display:this.props.view?"":"none"}},i.createElement("div",{className:"msg",dangerouslySetInnerHTML:{__html:t}}))}};o([n.observable],p.prototype,"second",void 0),p=o([r.observer],p),t.WarningPopup=p;class d extends i.Component{constructor(){super(...arguments),this._onOk=()=>{this.props.onOk&&this.props.onOk()},this._onClose=()=>{this.props.onClose&&this.props.onClose()}}componentDidUpdate(e){this.props.view&&!e.view||!this.props.view&&e.view&&l.App.pub_playBtnTab()}render(){const{view:e,msg:t,isSingle:s,msgclass:o}=this.props;return i.createElement(a.CoverPopup,{className:"alert_popup",view:e,onClosed:this.props.isSingle?this._onOk:this._onClose},i.createElement("div",{className:"pop_box"},i.createElement("span",{className:"ico_alert"}),i.createElement("span",{className:"text"+(o&&""!==o?" "+o:""),dangerouslySetInnerHTML:{__html:t}}),i.createElement("div",{className:"btns"},i.createElement("button",{className:"btn_cancel",onClick:this._onClose,style:{display:s?"none":""}},i.createElement("span",null,"Cancel")),i.createElement("button",{className:"btn_ok",onClick:this._onOk},i.createElement("span",null,"OK")))))}}t.AlertPopup=d},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},i=this&&this.__awaiter||function(e,t,s,o){return new(s||(s=Promise))((function(i,n){function r(e){try{c(o.next(e))}catch(e){n(e)}}function a(e){try{c(o.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CoverPopup=void 0;const n=s(0),r=s(2),a=s(1),c=s(7);let l=class extends n.Component{constructor(){super(...arguments),this.m_state="closed",this._open=()=>i(this,void 0,void 0,(function*(){"closed"===this.m_state&&(this.m_state="opening",yield c.wait(100),this.m_state="open")})),this._close=()=>i(this,void 0,void 0,(function*(){"open"===this.m_state&&(this.m_state="closing",yield c.wait(400),this.props.onClosed(),this.m_state="closed")}))}componentDidUpdate(e){this.props.view!==e.view&&(this.props.view?this._open():this._close())}render(){return n.createElement("div",{className:this.props.className+" "+this.m_state},this.props.children)}};o([r.observable],l.prototype,"m_state",void 0),l=o([a.observer],l),t.CoverPopup=l},function(e,t,s){e.exports=s(25)},function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const o=s(8),i=s(0),n=s(28),r=s(4),a=s(5),c=s(29);o.setConfig({ErrorOverlay:e=>i.createElement("div",null)});const l={clear:r.App.pub_clear,importLink:c.importLink,importHTML:c.importHTML};let h,p=!0;h=s(30),p=!1;let d=!1;const u=h,m=u.default,_=u.AppProvider,f=u.appContext;l.set=(e,t,s)=>{r.App.pub_set(e,t,s),f.setData(e)},l.render=()=>{r.App.pub_initAudio(),n.render(i.createElement(_,null,i.createElement(m,null)),document.getElementById("wrap"))},p?(l.init=(e,t,s,o,i,n)=>{r.App.pub_load(e,null,t,s,o,i,n)},l.start=()=>{d=!0,setTimeout(()=>f.start(),500)},l.receive=e=>{if(4===e.type){const t=e.data;d?t&&t.id&&""!==t.id&&(r.App.isStarted?a.sendPADToID(t.id,0,null):a.sendPADToID(t.id,1,null)):r.App.pub_addInitedStudent(t)&&(d||(d=!0,f.start()))}else f.receive(e)},l.teachingTool=e=>{},l.notifyNaviInfo=(e,t,s,o,i,n)=>{f.notifyNaviInfo(e,t,s,o,i,n)},l.notifyBookCaptureInfo=e=>{f.notifyBookCaptureInfo(e)},l.notifyUploadToServerResult=e=>{f.uploaded(e)},l.notifyUploadToServerMultiResult=e=>{f.multiUploaded(e)},l.notifyAlert=e=>{f.notifyAlert(e)},l.notifyPenToolState=(e,t)=>{f.notifyPenToolState(e,t)},l.notifyHamburgerMenuClicked=e=>{f.notifyHamburgerMenuClicked(e)},l.callThreeminState=()=>{f.callThreeminState()}):(l.init=(e,t,s,o,i,n)=>{r.App.pub_load(null,e,t,s,o,i,n),a.sendTeacher(4,e),f.start()},l.receive=e=>{null!=r.App.student&&f.receive(e)},l.notifyUploadToServerResult=e=>{f.uploaded(e)},l.notifyUploadToServerMultiResult=e=>{f.multiUploaded(e)},l.notify=e=>{f.notify(e)},l.notifyVideoRecord=e=>{f.notifyVideoRecord(e)},l.notifyStartVoice=()=>{f.notify("notifyStartVoice")},l.notifyVoiceRecordResult=e=>{f.notifyRecorded(e)},l.notifyTakePicture=(e,t)=>{f.notifyTakePicture&&f.notifyTakePicture(e,t)},l.clickSendButton=()=>{f.clickSendButton()},l.notifyRecordData=(e,t)=>{f.notifyRecordData(e,t)},l.notifyAlert=e=>{f.notifyAlert(e)},l.notifyPenToolState=(e,t)=>{f.notifyPenToolState(e,t)},l.notifyLiveGivePopupClose=()=>{f.notifyLiveGivePopupClose()}),s(70),e.app_o=l}).call(this,s(26))},function(e,t){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(e){"object"==typeof window&&(s=window)}e.exports=s},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=(o=s(0))&&"object"==typeof o&&"default"in o?o.default:o;function n(e){return n.warnAboutHMRDisabled&&(n.warnAboutHMRDisabled=!0,console.error("React-Hot-Loader: misconfiguration detected, using production version in non-production environment."),console.error("React-Hot-Loader: Hot Module Replacement is not enabled.")),i.Children.only(e.children)}n.warnAboutHMRDisabled=!1;var r=function e(){return e.shouldWrapWithAppContainer?function(e){return function(t){return i.createElement(n,null,i.createElement(e,t))}}:function(e){return e}};r.shouldWrapWithAppContainer=!1;t.AppContainer=n,t.hot=r,t.areComponentsEqual=function(e,t){return e===t},t.setConfig=function(){},t.cold=function(e){return e},t.configureComponent=function(){}},function(e,t){e.exports=ReactDOM},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importLink=t.importHTML=void 0,t.importHTML=function(e){return new Promise((t,s)=>{const o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="document",o.onload=e=>{if(!e)return;const i=o.response;i&&i.body&&i.body.firstElementChild?t(i.body.firstElementChild):i&&i.documentElement?t(i.documentElement):s("error")},o.onerror=e=>{s(e)},o.send(null)})},t.importLink=function(e,t){return new Promise((t,s)=>{const o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="document",o.onload=e=>{if(!e)return;const s=o.response;t(s)},o.onerror=e=>{s(e)},o.send(null)})}},function(e,t,s){"use strict";(function(e){var o=this&&this.__decorate||function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.appContext=t.AppProvider=void 0;const i=s(0),n=s(1),r=s(8),a=s(32),c=s(33),l=s(34),h=s(35);Object.defineProperty(t,"appContext",{enumerable:!0,get:function(){return h.sContext}}),Object.defineProperty(t,"AppProvider",{enumerable:!0,get:function(){return h.StudentProvider}});const p=s(54),d=s(56),u=s(58),m=s(65);s(68),s(69);let _=class extends i.Component{render(){const{state:e,actions:t}=this.props,s=e.viewDiv;return i.createElement(i.Fragment,null,i.createElement("div",{className:"content-container"},i.createElement("div",{className:"content-wrapper",style:{left:("direction"===s?0:-1280)+"px"}},i.createElement("div",null,i.createElement(a.default,{className:"video-direction",view:"direction"===e.viewDiv,on:e.directionON,isTeacher:!1,lesson:t.getCurriculum(),bookId:e.bookid,subtitle:"Various Solving Strategies",poster_url:"/content/mathalive_lib/MA/module_strategy/common/bg_direction.jpg",video_url:"/content/mathalive_lib/MA/module_strategy/common/mv_strategy.mp4",video_frame:125})),i.createElement("div",null,"content"===s&&"module_strategy"===e.prog&&i.createElement(u.default,{view:"content"===s&&"module_strategy"===e.prog,state:e,actions:t}),"content"===s&&"module_strategy"!==e.prog&&i.createElement(m.default,{view:!0,state:e,actions:t,students:e.students,teamNum:e.curIdx}),"content"===s&&"teamview"===e.prog&&i.createElement(d.TeamCover,{view:"content"===s&&"teamview"===e.prog,teamnames:e.teamname}),i.createElement(l.default,{view:"eyeon"===e.viewDiv})))),i.createElement(c.Loading,{view:e.loading}),i.createElement(p.Navi,Object.assign({},e.navi,{onLeftClick:t.naviLeft,onRightClick:t.naviRight})))}};_=o([n.observer],_);const f=h.useStudent(e=>i.createElement(n.Observer,null,()=>i.createElement(_,{state:e.state,actions:e.actions})));t.default=r.hot(e)(f)}).call(this,s(31)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},i=this&&this.__awaiter||function(e,t,s,o){return new(s||(s=Promise))((function(i,n){function r(e){try{c(o.next(e))}catch(e){n(e)}}function a(e){try{c(o.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),r=s(2),a=s(1),c=s(7);let l=class extends n.Component{constructor(e){super(e),this.m_on=!1,this.m_showMathKit=!1,this.bookInfo=[],this.curIndex=0,this._list=[],this._onClick=()=>{this.props.isTeacher&&this._off()},this._off=()=>i(this,void 0,void 0,(function*(){this.props.view&&this.m_on&&(this.m_on=!1,this.props.onEndStart&&this.props.onEndStart(),yield c.wait(500),this.props.view&&!this.m_on&&this.props.onEnd&&this.props.onEnd())})),this.m_on=e.view&&e.on}_on(){return i(this,void 0,void 0,(function*(){this.m_on=!0}))}componentWillReceiveProps(e){if(e.lesson&&this.props.lesson!==e.lesson||this.props.view!==e.view){for(;this.bookInfo.length>0;)this.bookInfo.pop();e.lesson&&e.lesson.childrenList&&e.lesson.childrenList.length>0&&e.lesson.childrenList.map((t,s)=>{try{if(t.book){t.book.id===e.bookId&&(this.curIndex=this.bookInfo.length);let s=t.depth_name?t.depth_name:"";s=s.replace(/\&lt;/g,"<"),s=s.replace(/\&gt;/g,">"),this.bookInfo.push({bookName:t.name?t.name:"",id:t.id,lesson:e.lesson?e.lesson.name:"",subtitle:s})}}catch(e){alert("A ee  "+JSON.stringify(e))}})}}componentDidUpdate(e){this.props.view?e.view?this.props.on&&!e.on?this._on():!this.props.on&&e.on&&this._off():this.props.on?this._on():this.m_on=!1:this.m_on=!1}render(){const{isTeacher:e,subtitle:t}=this.props,s=[];s.push(this.props.className);const o=document.querySelector(".bgm");return this.props.view?(this.m_on&&s.push("on"),o&&o.play()):(s.push("hide"),o&&(o.pause(),o.currentTime=0)),n.createElement("div",{className:s.join(" "),onClick:this._onClick},e&&this.bookInfo&&n.createElement("span",{className:"concept_name"},this.bookInfo.length>0?this.bookInfo[this.curIndex].lesson:""),n.createElement("div",{className:"progress_dot"},e&&this.bookInfo&&this.bookInfo.map((e,t)=>n.createElement("span",{key:"q_"+t,className:this.curIndex===t?"on":""}))),n.createElement("div",{className:"video"},n.createElement("video",{muted:!0,autoPlay:!0,poster:this.props.poster_url?this.props.poster_url:void 0},n.createElement("source",{src:this.props.video_url,type:"video/mp4"}),n.createElement("strong",null,"Your browser does not support the video tag."))),n.createElement("div",{className:"text"},n.createElement("div",{className:"t1"},this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].bookName:""),e&&n.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:this.bookInfo&&this.bookInfo.length>0?this.bookInfo[this.curIndex].subtitle:""}}),!e&&n.createElement("div",{className:"t2",dangerouslySetInnerHTML:{__html:0===t.length&&this.bookInfo[this.curIndex]?this.bookInfo[this.curIndex].subtitle:t}})),n.createElement("audio",{className:"bgm",autoPlay:!0,src:this.props.audio_url?this.props.audio_url:void 0}))}};o([r.observable],l.prototype,"m_on",void 0),o([r.observable],l.prototype,"_list",void 0),o([r.action],l.prototype,"_off",void 0),l=o([a.observer],l),t.default=l},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Loading=void 0;const o=s(0);t.Loading=({view:e})=>o.createElement("div",{className:"loading "+(e?"":"hide")},o.createElement("div",{className:"loading_bg"}),o.createElement("div",{className:"loading_img"},o.createElement("span",{className:"img"}),"Loading"))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=s(0);class i extends o.Component{componentDidUpdate(e){}render(){return o.createElement("div",{className:"attention "+(this.props.view?"":"hide")},o.createElement("span",null,"Attention"))}}t.default=i},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},i=this&&this.__awaiter||function(e,t,s,o){return new(s||(s=Promise))((function(i,n){function r(e){try{c(o.next(e))}catch(e){n(e)}}function a(e){try{c(o.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SENDPROG=t.useStudent=t.StudentContext=t.StudentConsumer=t.StudentProvider=t.sContext=void 0;const n=s(0),r=s(6),a=s(2),c=s(4),l=s(5),h=s(36),p=s(10);var d;!function(e){e[e.READY=0]="READY",e[e.SENDING=1]="SENDING",e[e.SENDED=2]="SENDED",e[e.COMPLETE=3]="COMPLETE"}(d||(d={})),t.SENDPROG=d;class u extends h.StudentContextBase{constructor(){super(),this._callbackFnc=null,this._notifyFnc=null,this._notifyTakePhotoFnc=null,this._uploadedFnc=null,this._multiUploadedFnc=null,this.uploaded=e=>{"content"!==this.state.viewDiv||"module_strategy"!==this.state.prog&&"module_strategyQ3"!==this.state.prog||this._uploadedFnc&&this._uploadedFnc(e)},this.multiUploaded=e=>{"content"!==this.state.viewDiv||"module_strategy"!==this.state.prog&&"module_strategyQ3"!==this.state.prog||this._multiUploadedFnc&&this._multiUploadedFnc(e)},this.notify=e=>{"content"!==this.state.viewDiv||"module_strategy"!==this.state.prog&&"module_strategyQ3"!==this.state.prog||this._notifyFnc&&this._notifyFnc(e)},this.notifyRecorded=e=>{},this.notifyTakePicture=(e,t)=>{"content"===this.state.viewDiv&&"module_strategyQ3"===this.state.prog&&this._notifyTakePhotoFnc&&this._notifyTakePhotoFnc(e,t)},this.state.prog="",this.state.strategyProg=0,this.state.bookid=-1,this.state.classid=-1,this.state.curriculumid=-1,this.state.curIdx=0,this.state.teacherEnd=!1,this.state.resetPresenter=!1,this.state.bgColor={main:"",right:""},this.actions.getData=()=>this._data,this.actions.getCurriculum=()=>this._curriculum,this.actions.setCallbackFnc=e=>{this._callbackFnc=e},this.actions.setNotifyFnc=e=>{this._notifyFnc=e},this.actions.setNotifyTakePhotoFnc=e=>{this._notifyTakePhotoFnc=e},this.actions.setUploadedFnc=e=>{this._uploadedFnc=e},this.actions.setMultiUploadedFnc=e=>{this._multiUploadedFnc=e}}_setViewDiv(e){this.state;super._setViewDiv(e)}receive(e){if(super.receive(e),10===e.type&&e.data){const t=e.data;if(l.showSLoading(!1),"module_strategy_send"===t.msgtype)return this._setViewDiv("content"),this.state.teacherEnd=!1,this.state.prog="teamview",0===t.team?this.state.teamname="red":1===t.team&&(this.state.teamname="green"),setTimeout(()=>{let e=document.getElementsByClassName("cover_teamselection")[0];e&&(e.className=e.className+" open")},100),this.state.strategyProg=0,this.state.idx=t.quizIdx,this.state.team=t.team,this.state.bgColor.main=t.mainColor,this.state.bgColor.right=t.rightColor,this.state.bookid=t.bookid,this.state.bookkey=t.bookkey,this.state.classid=t.classid,this.state.curriculumid=t.curriculumid,this.state.resetPresenter=!1,void this.setDataFromAPI(t.quizIdx,t.team,t.msgtype);if("module_strategy_end"===t.msgtype||"module_strategy_stop"===t.msgtype)this.state.strategyProg=3,this.state.teacherEnd=!0;else{if("module_strategy_teamview"===t.msgtype)return this._setViewDiv("content"),this.state.prog="teamview",0===t.team?this.state.teamname="red":1===t.team&&(this.state.teamname="green"),void setTimeout(()=>{let e=document.getElementsByClassName("cover_teamselection")[0];e&&(e.className=e.className+" open")},100);if("module_strategy_revise"===t.msgtype)this.state.teacherEnd=!1,this.state.strategyProg=0;else{if("module_strategy_ready"===t.msgtype)return this.actions.setNaviView(!1),void this._setViewDiv("eyeon");if("presenter_send"===t.msgtype){const e=t;this.state.prog="presenter",this.state.presenter=e.id,this.state.showhide=e.showhide,this.state.curIdx=e.curIdx}else if("presenter_end"===t.msgtype)this.state.prog="module_strategyQ3";else if("next_presenter"===t.msgtype){if("presenter"!==this.state.prog)return;this.state.prog="module_strategyQ3"}else if("send_students"===t.msgtype){const t=e.data,s=JSON.parse(t.students);this.state.students=s}}}setTimeout(()=>{this._callbackFnc&&this._callbackFnc(t.msgtype)},500)}else if(21===e.type){const t=e.data.live;this.state.resetPresenter=!0,r.delay(()=>{this.state.resetPresenter=!1},400),!c.App.isDvlp&&t>0&&l.showSGiftBox(t)}}setDataFromAPI(e,t,s){return i(this,void 0,void 0,(function*(){if(!c.App.student)return;let o="";o=this._data.items[e].quizSeq+"",this.state.loading=!0,yield p.default.get(c.App.addOnHost+"/ma/strategy/"+o+"?clsIdx="+this.state.classid+"&depthItemIdx="+this.state.curriculumid+"&studyCd=MS2").then(e=>{if(!e.data.success)return;for(;this._data.quizs.length>0;)this._data.quizs.pop();let o=[];e.data.resultData.map((e,s)=>{let i=e;s===t&&(i.dpMainSeq,o.push(i))});let i=0;o.map((e,t)=>{const s=JSON.parse(e.dpAnswer),o=[];for(let e=0;e<s.length;e++){const t=s[e];o.push({basetype:t.base?t.base:0,subtype:t.sub?t.sub:0,basetypename:t.baseName?t.baseName:"",subtypename:t.subName?t.subName:"",matchType:t.matchType?t.matchType:0,answers:t.inputList?t.inputList:[]})}let n=[];e.stepList&&e.stepList.map((e,t)=>{const s=JSON.parse(e.dpAnswer),o=[];for(let e=0;e<s.length;e++){const t=s[e];o.push({basetype:t.base?t.base:0,subtype:t.sub?t.sub:0,basetypename:t.baseName?t.baseName:"",subtypename:t.subName?t.subName:"",matchType:t.matchType?t.matchType:0,answers:t.inputList?t.inputList:[]})}const i={id:t+1,seq:e.seq,url:e.url+"index.html",desc:e.url+"desc.html",answers:o,quizKind:2,difiicult:e.dpLevel,mainSeq:e.mainSeq,quesSeq:e.quesSeq,lookback_stepleft:e.existLookbackImgs&&e.existLookbackImgs.includes("lookback_stepleft")?e.url+"lookback_stepleft.png":"",lookback_stepright:e.existLookbackImgs&&e.existLookbackImgs.includes("lookback_stepright")?e.url+"lookback_stepright.png":""};n.push(i)});const r={idx:++i,seq:e.seq,url:e.url+"index.html",desc:e.url+"desc.html",thumb:e.url+"thumbnail.png",answers:o,qnumber:t+1,quizKind:0,difiicult:e.dpLevel,step:n,stepCnt:n.length,smTypeMtlSeq:e.smTypeMtlSeq,smTypeValue:e.smTypeValue,smTypeNm:e.smTypeNm,smTypeReason:e.smTypeReason,mainSeq:e.mainSeq,quesSeq:e.quesSeq,lookback_title:e.existLookbackImgs&&e.existLookbackImgs.includes("lookback_title")?e.url+"lookback_title.png":"",lookback_answer:e.existLookbackImgs&&e.existLookbackImgs.includes("lookback_answer")?e.url+"lookback_answer.png":""};this._data.quizs.push(r)}),setTimeout(()=>{2===this.state.idx?this.state.prog="module_strategyQ3":this.state.prog="module_strategy",setTimeout(()=>{this._callbackFnc&&this._callbackFnc(s)},500)},1e3),this.state.loading=!1}).catch(e=>{console.log("Error",e),this.state.loading=!1})}))}setData(e){this._data={items:[],quizs:[]},this._data.items=e.items}}o([a.observable],u.prototype,"state",void 0),o([a.action],u.prototype,"_setViewDiv",null),o([a.action],u.prototype,"receive",null),o([a.action],u.prototype,"notify",void 0),o([a.action],u.prototype,"notifyRecorded",void 0),t.StudentContext=u;const m=new u;t.sContext=m;const{Provider:_,Consumer:f}=n.createContext(m);t.StudentConsumer=f;class g extends n.Component{render(){return n.createElement(_,{value:m},this.props.children)}}t.StudentProvider=g,t.useStudent=function(e){return function(t){return n.createElement(f,null,t=>n.createElement(e,Object.assign({},t)))}}},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.StudentContextBase=void 0;const i=s(2),n=s(4),r=s(5);class a{constructor(){this._naviLeftFnc=null,this._naviRightFnc=null,this.state={viewDiv:"direction",directionON:!1,navi:{view:!1,enableLeft:!1,enableRight:!1},loading:!1,bookid:0,bookkey:0,curriculumid:0,classid:0,unitid:0,lessonid:0,svg_bg:{view:!0,bPlay:!1,viewCharactor:!0},is_lock:!1,isRemote:!1},this.actions={setNaviView:e=>{this.state.navi.view=e},setNavi:(e,t)=>{this.state.navi.enableLeft=e,this.state.navi.enableRight=t},setNaviFnc:(e,t)=>{this._naviLeftFnc=e,this._naviRightFnc=t},naviLeft:()=>{n.App.pub_playBtnPage(),this._naviLeftFnc&&this._naviLeftFnc()},naviRight:()=>{n.App.pub_playBtnPage(),this._naviRightFnc&&this._naviRightFnc()},setLoading:e=>{r.showSLoading(e)}},this.uploaded=e=>{},this.notify=e=>{},this.notifyRecorded=e=>{},this.notifyVideoRecord=e=>{},this.notifySwitchCamera=()=>{},this.notifyTakePicture=(e,t)=>{},this.notifyBookCaptureInfo=e=>{},this.clickSendButton=()=>{},this.notifyRecordData=(e,t)=>{},this.notifyAlert=e=>{},this.state.isRemote=document.location.href.indexOf("remote=y")>=0}_setViewDiv(e,t){this.state.viewDiv!==e&&(r.postViewDiv(e),"direction"===e?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0):(this.state.directionON=!1,this.state.svg_bg.bPlay=!1,this.state.svg_bg.viewCharactor=!1),this.state.loading=!1,this.state.viewDiv=e)}start(){}receive(e){switch(e.type){case 1:"direction"===this.state.viewDiv?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0):this._setViewDiv("direction"),r.sendTeacher(1,{id:n.App.student?n.App.student.id:"",name:n.App.student?n.App.student.name:""});break;case 3:this.state.directionON=!1,r.sendTeacher(3,{id:n.App.student?n.App.student.id:"",name:n.App.student?n.App.student.name:""});break;case 0:this._setViewDiv("eyeon"),r.sendTeacher(0,{id:n.App.student?n.App.student.id:"",name:n.App.student?n.App.student.name:""});break;case 10:"page_lock"===e.data.msgtype?this.state.is_lock=!0:"page_unlock"===e.data.msgtype&&(this.state.is_lock=!1)}}multiUploaded(e){}notifyNaviInfo(e,t,s,o,i,n){}notifyPenToolState(e,t){}notifyLiveGivePopupClose(){}notifyHamburgerMenuClicked(e){}callThreeminState(){}}o([i.observable],a.prototype,"state",void 0),o([i.action],a.prototype,"_setViewDiv",null),o([i.action],a.prototype,"start",null),o([i.action],a.prototype,"receive",null),t.StudentContextBase=a},function(e,t,s){"use strict";var o=s(3),i=s(11),n=s(38),r=s(17);function a(e){var t=new n(e),s=i(n.prototype.request,t);return o.extend(s,n.prototype,t),o.extend(s,t),s}var c=a(s(14));c.Axios=n,c.create=function(e){return a(r(c.defaults,e))},c.Cancel=s(18),c.CancelToken=s(52),c.isCancel=s(13),c.all=function(e){return Promise.all(e)},c.spread=s(53),e.exports=c,e.exports.default=c},function(e,t,s){"use strict";var o=s(3),i=s(12),n=s(39),r=s(40),a=s(17);function c(e){this.defaults=e,this.interceptors={request:new n,response:new n}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[r,void 0],s=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)s=s.then(t.shift(),t.shift());return s},c.prototype.getUri=function(e){return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},o.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,s){return this.request(o.merge(s||{},{method:e,url:t}))}})),o.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,s,i){return this.request(o.merge(i||{},{method:e,url:t,data:s}))}})),e.exports=c},function(e,t,s){"use strict";var o=s(3);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){o.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,s){"use strict";var o=s(3),i=s(41),n=s(13),r=s(14);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),o.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||r.adapter)(e).then((function(t){return a(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return n(t)||(a(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,s){"use strict";var o=s(3);e.exports=function(e,t,s){return o.forEach(s,(function(s){e=s(e,t)})),e}},function(e,t){var s,o,i=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(s===setTimeout)return setTimeout(e,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:n}catch(e){s=n}try{o="function"==typeof clearTimeout?clearTimeout:r}catch(e){o=r}}();var c,l=[],h=!1,p=-1;function d(){h&&c&&(h=!1,c.length?l=c.concat(l):p=-1,l.length&&u())}function u(){if(!h){var e=a(d);h=!0;for(var t=l.length;t;){for(c=l,l=[];++p<t;)c&&c[p].run();p=-1,t=l.length}c=null,h=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===r||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function _(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];l.push(new m(e,t)),1!==l.length||h||a(u)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,s){"use strict";var o=s(3);e.exports=function(e,t){o.forEach(e,(function(s,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=s,delete e[o])}))}},function(e,t,s){"use strict";var o=s(16);e.exports=function(e,t,s){var i=s.config.validateStatus;!i||i(s.status)?e(s):t(o("Request failed with status code "+s.status,s.config,null,s.request,s))}},function(e,t,s){"use strict";e.exports=function(e,t,s,o,i){return e.config=t,s&&(e.code=s),e.request=o,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,s){"use strict";var o=s(47),i=s(48);e.exports=function(e,t){return e&&!o(t)?i(e,t):t}},function(e,t,s){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,s){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,s){"use strict";var o=s(3),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,s,n,r={};return e?(o.forEach(e.split("\n"),(function(e){if(n=e.indexOf(":"),t=o.trim(e.substr(0,n)).toLowerCase(),s=o.trim(e.substr(n+1)),t){if(r[t]&&i.indexOf(t)>=0)return;r[t]="set-cookie"===t?(r[t]?r[t]:[]).concat([s]):r[t]?r[t]+", "+s:s}})),r):r}},function(e,t,s){"use strict";var o=s(3);e.exports=o.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a");function i(e){var o=e;return t&&(s.setAttribute("href",o),o=s.href),s.setAttribute("href",o),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:"/"===s.pathname.charAt(0)?s.pathname:"/"+s.pathname}}return e=i(window.location.href),function(t){var s=o.isString(t)?i(t):t;return s.protocol===e.protocol&&s.host===e.host}}():function(){return!0}},function(e,t,s){"use strict";var o=s(3);e.exports=o.isStandardBrowserEnv()?{write:function(e,t,s,i,n,r){var a=[];a.push(e+"="+encodeURIComponent(t)),o.isNumber(s)&&a.push("expires="+new Date(s).toGMTString()),o.isString(i)&&a.push("path="+i),o.isString(n)&&a.push("domain="+n),!0===r&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,s){"use strict";var o=s(18);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var s=this;e((function(e){s.reason||(s.reason=new o(e),t(s.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,s){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.Navi=void 0;const i=s(0),n=s(2),r=s(1),a=s(55);let c=class extends i.Component{constructor(e){super(e),this.m_on=!1,this.m_isStarted=!1,this._onClick=e=>{this.m_on=!0}}componentDidUpdate(e){this.m_isStarted||!this.props.view||e.view||(this.m_isStarted=!0,this.m_on=!0)}render(){const e=this.m_on?void 0:"off",t={visibility:this.props.view?"visible":"hidden"};return i.createElement(i.Fragment,null,i.createElement("div",{id:"common_navi_left",className:e,style:t},i.createElement("div",null,i.createElement("div",{onClick:this._onClick},i.createElement(a.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),i.createElement(a.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))),i.createElement("div",{id:"common_navi_right",className:e,style:t},i.createElement("div",null,i.createElement("div",{onClick:this._onClick},i.createElement(a.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),i.createElement(a.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))))}};o([n.observable],c.prototype,"m_on",void 0),c=o([r.observer],c),t.Navi=c},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.ImgBtn=t.AudioBtn=t.ToggleBtn=void 0;const i=s(0),n=s(2),r=s(1);class a extends i.Component{constructor(e){super(e),this.m_pID=-1,this._inited=this._inited.bind(this),this._onClick=this._onClick.bind(this)}_inited(e){!this.m_el&&e&&(this.m_el=e,this.props.onRef&&this.props.onRef(e),e.setAttribute("touch-action","none"),e.addEventListener("pointerdown",t=>{if(!(this.m_pID>=0)){if(this.m_pID=t.pointerId,!this.props.disableCapture)try{e.setPointerCapture(this.m_pID)}catch(e){}this.props.onMouseDown&&this.props.onMouseDown(t)}}),e.addEventListener("pointerup",t=>{if(this.m_pID===t.pointerId){try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1,this.props.onMouseUp&&this.props.onMouseUp(t)}}),e.addEventListener("pointerleave",t=>{if(this.props.disableCapture){if(this.m_pID!==t.pointerId)return;try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1}this.props.onMouseLeave&&this.props.onMouseLeave(t)}),e.addEventListener("pointercancel",t=>{if(this.m_pID===t.pointerId){try{e.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1,this.props.onMouseLeave&&this.props.onMouseLeave(t)}}))}_onClick(e){this.props.onClick&&this.props.onClick(e),this.props.preventEvent&&(e.preventDefault(),e.stopPropagation())}componentDidUpdate(e){if((this.props.disabled&&!e.disabled||!this.props.view&&e.view)&&this.m_pID>=0){try{this.m_el&&this.m_el.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1}}}o([n.observable],a.prototype,"m_pID",void 0);let c=class extends a{constructor(e){super(e),this.m_on=!1,this.m_on=!0===e.on}componentWillReceiveProps(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}render(){const e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down");const t=e.join(" ");let s=this.props.style;return!1===this.props.view&&(s||(s={}),s.display="none"),i.createElement("button",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,disabled:!0===this.props.disabled,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:s},this.props.children)}};o([n.observable],c.prototype,"m_on",void 0),c=o([r.observer],c),t.ToggleBtn=c;let l=class extends c{constructor(e){super(e)}play(){this.m_on||(this.m_on=!0,this.props.playFnc(this.props.src,e=>{this.m_on&&(this.m_on=!1,this.props.onPause&&this.props.onPause(e))}))}_onClick(e){this.m_on?(this.props.pauseFnc(),this.m_on=!1):this.play(),super._onClick(e)}};o([n.action],l.prototype,"play",null),o([n.action],l.prototype,"_onClick",null),l=o([r.observer],l),t.AudioBtn=l;let h=class extends a{constructor(e){super(e),this.m_on=!1,this.m_on=!0===e.on}componentWillReceiveProps(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}render(){const e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down"),!0===this.props.disabled&&e.push("disable");const t=e.join(" ");let s=this.props.style;return!1===this.props.view&&(s||(s={}),s.display="none"),i.createElement("img",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:s,src:this.props.src,useMap:this.props.useMap})}};o([n.observable],h.prototype,"m_on",void 0),h=o([r.observer],h),t.ImgBtn=h},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.TeamCover=void 0;const i=s(0),n=s(1);s(57);let r=class extends i.Component{constructor(){super(...arguments),this.teamSel=null}componentDidUpdate(e){const t=this.teamSel;null!==t&&(this.props.view&&!e.view&&setTimeout(()=>{t.classList.add("open")},10),this.props.teamnames!==e.teamnames&&(t.classList.remove("open"),setTimeout(()=>{t.classList.add("open")},1e3)))}render(){const{view:e,teamnames:t}=this.props;return i.createElement("div",{className:"cover_teamselection "+t,style:{display:e?"":"none"},ref:e=>this.teamSel=e},i.createElement("div",{className:"img_text"}),i.createElement("div",{className:"circle"},i.createElement("div",{className:"c01"}),i.createElement("div",{className:"c02"}),i.createElement("div",{className:"c03"})))}};r=o([n.observer],r),t.TeamCover=r},function(e,t,s){"use strict";s.r(t)},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},i=this&&this.__awaiter||function(e,t,s,o){return new(s||(s=Promise))((function(i,n){function r(e){try{c(o.next(e))}catch(e){n(e)}}function a(e){try{c(o.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),r=s(1),a=s(2),c=s(4),l=s(19),h=s(5),p=s(6),d=s(7),u=s(60),m=s(20),_=s(21),f=s(22),g=s(62),y=s(64);let b=class extends n.Component{constructor(e){super(e),this._curIdx=0,this.ifr=[],this._viewAlert=!1,this._quizs=[],this._quizResult=[],this._prog=0,this._typeSayPop=0,this._curStep=0,this._viewProblem=!1,this._viewDesc=!1,this._viewNewAlertMsg="",this._viewMainIFrame=!1,this._viewLookbackBtn=!1,this._viewLookback=!1,this._viewCheckStrategy=!1,this._viewSendUI=!1,this.curIframe=void 0,this.step1Iframe=void 0,this.step2Iframe=void 0,this.step3Iframe=void 0,this.step1IframeDesc=void 0,this.step2IframeDesc=void 0,this.step3IframeDesc=void 0,this.stepCnt=0,this.curProgress=0,this.strategyNum=1,this.isEnd=!1,this.team=0,this.stepSolutions=[],this.problem_explain="",this.problem_plan="",this.problem_strategy="",this.lookbackAnswers=[],this.callbackFnc=e=>{if("module_strategy_send"===e){this.init(),this.isEnd=!1,this.team=this.props.state.team,this._curStep=0,this._prog=0;const e=this._quizs[this._curIdx],t=e.step;for(this.stepCnt=t.length;this._quizResult.length>0;)this._quizResult.pop();let s=[];for(let e=0;e<this.stepCnt;e++){let o=t[e],i=[];o.answers.map(e=>{i.push({choicedIdx:[],choicedValue:[],correct:!1,completed:!1})}),s.push({id:e+1,studentid:c.App.student?c.App.student.id:"",contentSeq:o.seq,contentAnswers:o.answers,userChoices:i,correct:!1,tryCnt:0,completed:!1,starttime:(new Date).getTime(),endtime:(new Date).getTime()})}let o=[];e.answers.map(e=>{o.push({choicedIdx:[],choicedValue:[],correct:!1,completed:!1})}),this._quizResult.push({studentid:c.App.student?c.App.student.id:"",contentSeq:e.seq,contentAnswers:e.answers,userChoices:o,correct:!1,tryCnt:0,completed:!1,starttime:(new Date).getTime(),endtime:(new Date).getTime(),step:s,qnumber:e.qnumber,quizKind:e.quizKind,team:this.team})}else if("module_strategy_end"===e&&(this.isEnd=!0,c.App.pub_playToPad(),c.App.student)){let e=this._quizResult[this._curIdx];if(e.completed)return;e.studentid=c.App.student.id,e.completed=!0;let t=e.step.filter(e=>!0===e.correct);(t?t.length:0===e.step.length)&&(e.correct=!0),e.endtime=(new Date).getTime();const s={msgtype:"module_strategy_result",idx:this._quizs[this._curIdx].seq,result:JSON.stringify(this._quizResult[this._curIdx])};h.sendTeacher(11,s)}},this.handlePostMessage=e=>{const t=e.data;if("macontent"===t.from)if("submit"===t.type){if(this._curIdx<-1||this._curIdx>=this._quizResult.length)return;if(0===this._curStep)return;let e=-3,s=this._quizResult[this._curIdx].step[this._curStep-1];s&&(e=u.answercheck(s,t.msg))}else if("notifyStgTitle"===t.type)this.problem_explain=t.msg.innerHTML;else if("notifyStgSolution"===t.type){let e={leftInnerHTML:t.msg.leftInnerHTML,rightInnerHTML:t.msg.rightInnerHTML};this.stepSolutions.push(e);const{quizs:s}=this.props.actions.getData();this.stepSolutions.length===s[this._curIdx].step.length||setTimeout(()=>{this.sendPostMessage("getStgSolution",{serverPath:""})},1e3)}else if("notifyLookbackAnswer"===t.type&&t.msg.answer&&t.msg.answer.length>0){for(;this.lookbackAnswers.length>0;)this.lookbackAnswers.pop();for(let e=0;e<t.msg.answer.length;e++){let s=t.msg.answer[e];this.lookbackAnswers.push(s)}}},this._onCompletedAlertPop=()=>i(this,void 0,void 0,(function*(){if(this.props.view){this._viewAlert=!1;for(let e=0;e<this._quizResult.length;e++)if(this._prog=3,c.App.student){this._quizResult[e].studentid=c.App.student.id;const t={msgtype:"module_strategy_result",idx:e-1,result:JSON.stringify(this._quizResult[e])};h.sendTeacher(11,t),d.wait(600)}}})),this._onCompletedSayPop=()=>{1!==this._typeSayPop&&2!==this._typeSayPop||c.App.isDvlp||h.showSLivePointPop(!0),this._typeSayPop=0},this._onSend=()=>i(this,void 0,void 0,(function*(){if(!this.props.view)return;if(this.isEnd)return;if(0===this._curStep)return;let e=this._quizResult[this._curIdx],t=e.step[this._curStep-1];if(!t)return;let s=0;if(t.userChoices.map(e=>{e.correct&&(s+=1)}),t.correct=t.userChoices.length===s,t.completed=!0,t.tryCnt+=1,this._prog=1,c.App.pub_playToPad(),1===t.tryCnt&&!t.correct)return t.completed=!1,this.initContent(),this._typeSayPop=7,void(this._prog=0);let o=0;t.starttime&&t.endtime&&(t.endtime=(new Date).getTime(),o=Math.round((t.endtime-t.starttime)/1e3));const i=this.props.actions.getData().quizs,n=i[p.findIndex(i,{seq:e.contentSeq})];if(!n)return t.tryCnt=0,this._prog=0,void(this._viewNewAlertMsg="Error!!<br/>Please contact the administrator.");if(!n.step[this._curStep-1])return t.tryCnt=0,void(this._prog=0);if(t.correct){let s=1===t.tryCnt?10:5,o={addOnHost:c.App.addOnHost,liveType:"red",plusMinusType:"plus",score:s,userIdx:c.App.isDvlp?"78987":e.studentid,clsIdx:c.App.isDvlp?1398:this.props.state.classid,depthItemIdx:c.App.isDvlp?23807:this.props.state.curriculumid,callback:e=>{console.log("SavePoint 콜백 호출됨",e)},error:e=>{console.log("Request Error ! Check the params")}};y.setLivePoint(o)}let r=!1;if(this._curStep===e.step.length&&(r=!0),r){if(c.App.student){e.studentid=c.App.student.id,e.completed=!0;let t=e.step.filter(e=>!0===e.correct);(t?t.length:0===e.step.length)&&(e.correct=!0),e.endtime=(new Date).getTime();const s={msgtype:"module_strategy_result",idx:this._quizs[this._curIdx].seq,result:JSON.stringify(this._quizResult[this._curIdx])};h.sendTeacher(11,s)}d.wait(600),1===t.tryCnt&&t.correct?this._typeSayPop=1:2===t.tryCnt&&t.correct?this._typeSayPop=2:2!==t.tryCnt||t.correct||(this._typeSayPop=6),this._prog=3,this.completeContent()}else 1===t.tryCnt&&t.correct?this._typeSayPop=1:2===t.tryCnt&&t.correct?this._typeSayPop=2:2!==t.tryCnt||t.correct||(this._typeSayPop=6),this._prog=2,this.completeContent()})),this.onGotoProgress=e=>{if(0===this.curProgress&&e>1)return;if(1===this.curProgress&&e>10)return;if(10===this.curProgress&&e>100)return;if(100===this.curProgress&&e>200)return;if(200===this.curProgress&&e>300)return;if(0===this._quizResult.length)return;let t=this._quizResult[this._curIdx],s=t.step[0].completed,o=t.step[1].completed;if((200!==e||s)&&(300!==e||o)&&(this.curProgress=e,this.curIframe)){if(this._viewDesc=!1,this._viewProblem=!1,this._viewLookbackBtn=!1,this._viewSendUI=!0,this._curStep=0,0===this.curProgress){if(this.sendPostMessage("hideHighlight",null),(""===this.problem_explain||this.problem_explain.length<10)&&(this.sendPostMessage("getStgTitle",null),this.sendPostMessage("getStgAnswer",null)),""===this.problem_plan){const e=this._quizs[this._curIdx];this.problem_plan=e.smTypeReason?e.smTypeReason:"",this.problem_plan,this.problem_strategy=e.smTypeNm?e.smTypeNm:"";let t=e.smTypeValue?e.smTypeValue:"";this.problem_strategy=this.problem_strategy.replace(t,"").trim()}0===this.lookbackAnswers.length&&this.getLookbackAnswer(this._curIdx)}else 1===this.curProgress?this.sendPostMessage("showHighlight",null):10===this.curProgress||(100===this.curProgress?(this._curStep=1,setTimeout(()=>{this.sendPostMessage("getStgSolution",{serverPath:""})},1e3)):200===this.curProgress?(this._curStep=2,setTimeout(()=>{2===this._quizs[this._curIdx].step.length&&(this._viewLookbackBtn=!0)},100)):300===this.curProgress&&(this._curStep=3,setTimeout(()=>{3===this._quizs[this._curIdx].step.length&&(this._viewLookbackBtn=!0)},100)));this._curStep>0&&this.initContent(),this.chanageBackColor(this.props.state.bgColor,!1),this.chanageBackColor(this.props.state.bgColor,!0),this._setNavi()}},this.onIfmDescLoaded=()=>{console.log("onIfmDescLoaded")},this.onIfmLoaded=()=>{this.onGotoProgress(0),this.stgAnswerVisibility(!1),setTimeout(()=>{this._viewMainIFrame=!0},500)},this.showSolution=()=>{c.App.pub_playBtnTab(),this._viewProblem=!0,this._viewDesc=!0},this.showProblem=()=>{c.App.pub_playBtnTab(),this._viewProblem=!1,this._viewDesc=!1},this.changeThinkAbout=e=>{this.strategyNum=e},this.showLookBack=()=>{c.App.pub_playBtnTab(),this._viewLookback=!0},this.closeLookBack=()=>{c.App.pub_playBtnTab(),this._viewLookback=!1},this.onViewCheckStrategy=()=>{c.App.pub_playBtnTab(),this._viewCheckStrategy=!0}}init(){for(this._curIdx=0,this._viewAlert=!1,this.isEnd=!1;this._quizs.length>0;)this._quizs.pop();this.props.actions.getData().quizs.map((e,t)=>{this._quizs.push(e)})}componentDidMount(){window.addEventListener("message",this.handlePostMessage,!1),this.props.actions.setCallbackFnc(this.callbackFnc)}componentWillUnmount(){window.removeEventListener("message",this.handlePostMessage,!1)}sendPostMessage(e,t){if("getStgSolution"===e){let e=this._quizs[this._curIdx].url,s=e.indexOf("https://"),o=e.indexOf("http://");s>-1?(e=e.substring(s+8),e="https://"+e.split("/")[0]+"/"):o>-1&&(e=e.substring(o+7),e="http://"+e.split("/")[0]+"/"),t={serverPath:e}}let s={from:"matemplate",to:"macontent",type:e,msg:t};s=JSON.parse(JSON.stringify(s)),"getStgSolution"===e?0===this.stepSolutions.length?this.step1IframeDesc&&this.step1IframeDesc.contentWindow.postMessage(s,"*"):1===this.stepSolutions.length?this.step2IframeDesc&&this.step2IframeDesc.contentWindow.postMessage(s,"*"):2===this.stepSolutions.length&&this.step3IframeDesc&&this.step3IframeDesc.contentWindow.postMessage(s,"*"):this.curProgress<10&&this.curIframe?this.curIframe.contentWindow.postMessage(s,"*"):100===this.curProgress&&this.step1Iframe?this.step1Iframe.contentWindow.postMessage(s,"*"):200===this.curProgress&&this.step2Iframe?this.step2Iframe.contentWindow.postMessage(s,"*"):300===this.curProgress&&this.step3Iframe&&this.step3Iframe.contentWindow.postMessage(s,"*")}sendPostMessageToDesc(e,t){let s={from:"matemplate",to:"macontent",type:e,msg:t};s=JSON.parse(JSON.stringify(s)),100===this.curProgress&&this.step1IframeDesc?this.step1IframeDesc.contentWindow.postMessage(s,"*"):200===this.curProgress&&this.step2IframeDesc?this.step2IframeDesc.contentWindow.postMessage(s,"*"):300===this.curProgress&&this.step3IframeDesc&&this.step3IframeDesc.contentWindow.postMessage(s,"*")}chanageBackColor(e,t){if(!this.props.view)return;if(!e)return;const s={bgColor:Object.assign({},e)};t?this.sendPostMessageToDesc("changeBGStyle",s):this.sendPostMessage("changeBGStyle",s)}stgAnswerVisibility(e){this.sendPostMessage("stgAnswerVisibility",{isVisible:e})}getLookbackAnswer(e){const t=this._quizs;if(e<0||0===t.length||e>=t.length)return;let s=t[e];if(!s||!s.answers||s.answers.length<1)return;const o=s.answers.find(e=>1===e.basetype);if(!o)return;const i={type:"choice",values:o.answers};this.sendPostMessage("getLookbackAnswer",i)}initContent(){const e=this._quizs;if(this._curIdx<0||0===e.length||this._curIdx>=e.length)return;let t=e[this._curIdx],s=null;if(1===this.curProgress?s=t:100===this.curProgress&&t.step.length>0?s=t.step[0]:200===this.curProgress&&t.step.length>1?s=t.step[1]:300===this.curProgress&&t.step.length>2&&(s=t.step[2]),!s)return;let o={idx:this._curIdx,quizmode:"strategy",isTeacher:!1,content:JSON.parse(JSON.stringify(s))};this.sendPostMessage("init",o)}completeContent(){const e=this._quizs;if(this._curIdx<0||0===e.length||this._curIdx>=e.length)return;let t=e[this._curIdx],s=null;if(1===this.curProgress?s=t:100===this.curProgress&&t.step.length>0?s=t.step[0]:200===this.curProgress&&t.step.length>1?s=t.step[1]:300===this.curProgress&&t.step.length>2&&(s=t.step[2]),!s)return;let o={idx:this._curIdx,content:JSON.parse(JSON.stringify(s))};this.sendPostMessage("completed",o)}componentDidUpdate(e){this.props.view&&this._setNavi()}_setNavi(){this.props.view?this.props.actions.setNaviView(!0):this.props.actions.setNaviView(!1),this.props.actions.setNavi(!0,!0),0===this.curProgress&&this.props.actions.setNavi(!1,!0),200===this.curProgress&&2===this.stepCnt&&this.props.actions.setNavi(!0,!1),300===this.curProgress&&this.props.actions.setNavi(!0,!1),this.props.actions.setNaviFnc(()=>{c.App.pub_playBtnTab(),0===this.curProgress||(1===this.curProgress?this.onGotoProgress(0):10===this.curProgress?this.onGotoProgress(1):100===this.curProgress?this.onGotoProgress(10):200===this.curProgress?this.onGotoProgress(100):300===this.curProgress&&this.onGotoProgress(200))},()=>{c.App.pub_playBtnTab(),0===this.curProgress?this.onGotoProgress(1):1===this.curProgress?this.onGotoProgress(10):10===this.curProgress?this.onGotoProgress(100):100===this.curProgress?this.onGotoProgress(200):200===this.curProgress&&this.onGotoProgress(300)})}render(){const{view:e,state:t,actions:s}=this.props;if(0===this._quizs.length)return n.createElement(n.Fragment,null);let o=this._quizs[this._curIdx],i=0,r=o.url,a="",c="",h="",p="",d="",u="",y=o.step;y.length>0&&(i=y.length,a=y[0].url,c=y[1].url,p=y[0].desc,d=y[1].desc,3===y.length&&(h=y[2].url,u=y[2].desc));let b=!1;if(this.curProgress>10){let e=this.curProgress/100;b=this._quizResult[this._curIdx].step[e-1].completed}return n.createElement("div",{className:"s_module_strategy",style:{display:e?void 0:"none"}},n.createElement(m.MAHeader_STRATEGY,{view:!0,curProgress:this.curProgress,onGotoProgress:this.onGotoProgress,isStudent:!0,quizIdx:t.idx,stepCnt:i,typeStrategy:"module_strategy",plan:this.problem_strategy,team:this.team,headerResult:this._quizResult}),n.createElement("div",{className:"strategyPage"},n.createElement("div",{style:{display:!this._viewMainIFrame||0!==this.curProgress&&1!==this.curProgress&&10!==this.curProgress?"none":""}},n.createElement("iframe",{src:r,onLoad:this.onIfmLoaded,ref:e=>{e&&(this.curIframe=e)}})),n.createElement("div",{style:{display:100===this.curProgress?"":"none"}},n.createElement("iframe",{src:a,style:{display:this._viewDesc?"none":""},ref:e=>{e&&(this.step1Iframe=e)}}),n.createElement("iframe",{src:p,style:{display:this._viewDesc?"":"none"},onLoad:this.onIfmDescLoaded,ref:e=>{e&&(this.step1IframeDesc=e)}})),n.createElement("div",{style:{display:200===this.curProgress?"":"none"}},n.createElement("iframe",{src:c,style:{display:this._viewDesc?"none":""},ref:e=>{e&&(this.step2Iframe=e)}}),n.createElement("iframe",{src:d,style:{display:this._viewDesc?"":"none"},onLoad:this.onIfmDescLoaded,ref:e=>{e&&(this.step2IframeDesc=e)}})),n.createElement("div",{style:{display:300===this.curProgress?"":"none"}},n.createElement("iframe",{src:h,style:{display:this._viewDesc?"none":""},ref:e=>{e&&(this.step3Iframe=e)}}),n.createElement("iframe",{src:u,style:{display:this._viewDesc?"":"none"},onLoad:this.onIfmDescLoaded,ref:e=>{e&&(this.step3IframeDesc=e)}})),n.createElement("div",{className:"problem_box enlightenment",style:{display:10===this.curProgress?"":"none"}},n.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:this.problem_plan}}),n.createElement("div",{className:"btns",style:{display:this._viewCheckStrategy?"none":"block"}},n.createElement("button",{className:"check",onClick:this.onViewCheckStrategy})),n.createElement("div",{className:"msg_text",style:{display:this._viewCheckStrategy?"block":"none"}},n.createElement("span",null,this.problem_strategy,n.createElement("span",{className:"ani left"}),n.createElement("span",{className:"ani right"}))))),n.createElement("button",{className:"btn_solution",onClick:this.showSolution,style:{display:b&&this.curProgress>10&&!this._viewProblem?"block":"none"}}),n.createElement("button",{className:"btn_problem",onClick:this.showProblem,style:{display:b&&this.curProgress>10&&this._viewProblem?"block":"none"}}),n.createElement("button",{className:"btn_lookback",onClick:this.showLookBack,style:{display:b&&this._viewLookbackBtn&&!this._viewProblem?"block":"none"}}),this._viewLookback&&n.createElement(g.LookbackStrategy,{view:this._viewLookback,quiz:o,title:this.problem_explain,solutions:this.stepSolutions,lookanswers:this.lookbackAnswers,onClose:this.closeLookBack}),n.createElement(_.NewSayPopup,{view:this._typeSayPop>0,delay:1800,type:this._typeSayPop,onComplete:this._onCompletedSayPop}),n.createElement("div",{className:"dim_control",style:{display:this._typeSayPop>0?"":"none"}}),n.createElement(f.WarningPopup,{view:this._viewAlert,type:0,button:!1,delay:3e3,onComplete:this._onCompletedAlertPop}),n.createElement(l.default,{view:!this.isEnd&&this._viewSendUI&&this.curProgress>10&&!b,type:"pad",sended:!1,originY:0,onSend:this._onSend}))}};o([a.observable],b.prototype,"_curIdx",void 0),o([a.observable],b.prototype,"_viewAlert",void 0),o([a.observable],b.prototype,"_quizs",void 0),o([a.observable],b.prototype,"_quizResult",void 0),o([a.observable],b.prototype,"_prog",void 0),o([a.observable],b.prototype,"_typeSayPop",void 0),o([a.observable],b.prototype,"_curStep",void 0),o([a.observable],b.prototype,"_viewProblem",void 0),o([a.observable],b.prototype,"_viewDesc",void 0),o([a.observable],b.prototype,"_viewNewAlertMsg",void 0),o([a.observable],b.prototype,"_viewMainIFrame",void 0),o([a.observable],b.prototype,"_viewLookbackBtn",void 0),o([a.observable],b.prototype,"_viewLookback",void 0),o([a.observable],b.prototype,"_viewCheckStrategy",void 0),o([a.observable],b.prototype,"_viewSendUI",void 0),o([a.observable],b.prototype,"curProgress",void 0),o([a.observable],b.prototype,"strategyNum",void 0),o([a.observable],b.prototype,"isEnd",void 0),o([a.observable],b.prototype,"team",void 0),o([a.observable],b.prototype,"stepSolutions",void 0),o([a.observable],b.prototype,"problem_explain",void 0),o([a.observable],b.prototype,"problem_plan",void 0),o([a.observable],b.prototype,"problem_strategy",void 0),o([a.observable],b.prototype,"lookbackAnswers",void 0),b=o([r.observer],b),t.default=b},function(e,t){e.exports=ReactDraggable},function(e,t,s){"use strict";function o(e,t){const s=/[^a-zA-Z]/g,o=/[^0-9]/g;var i=e.replace(s,""),n=t.replace(s,"");if(i===n){var r=parseInt(e.replace(o,""),10),a=parseInt(t.replace(o,""),10);return r===a?0:r>a?1:-1}return i>n?1:-1}function i(e){for(var t=0,s=e.length,o=s;(o-=1)>-1;)t+=(e.charCodeAt(o)-64)*Math.pow(26,s-1-o);return t}function n(e){var t=e%26,s=e/26|0,o=t?String.fromCharCode(64+t):(s--,"Z");return s?n(s)+o:o}Object.defineProperty(t,"__esModule",{value:!0}),t.answercheck=void 0,t.answercheck=function(e,t){if(console.log("=========> answercheck result",e),console.log("=========> answercheck msg",t),!t||e.length<0)return-1;const s=e;if(!s)return-1;if(0===t.basetype&&1===t.subtype){console.log("=========> answercheck gap2",s.contentAnswers);let e=[],o=[];return s.contentAnswers.map((s,i)=>{s.basetype===t.basetype&&s.subtype===t.subtype&&(e.push(s),o.push(i))}),e.map((e,i)=>{let n=o[i];const r=s.userChoices[n];if(2===e.matchType){r.correct=!1;for(let s=0;s<e.answers.length;s++)e.answers[s]===t.choicedValue[i]&&(r.correct=!0)}else e.answers[0]===t.choicedValue[i]?r.correct=!0:r.correct=!1;r.choicedIdx=t.choicedIdx[i],r.choicedValue=t.choicedValue[i],r.completed=!0}),o.length>0?o[o.length-1]:-1}if(0===t.basetype&&2===t.subtype){console.log("=========> answercheck gap3",s.contentAnswers);let e=[],o=[];return s.contentAnswers.map((s,i)=>{s.basetype===t.basetype&&s.subtype===t.subtype&&(e.push(s),o.push(i))}),e.map((e,i)=>{let n=o[i];const r=s.userChoices[n];if(2===e.matchType){r.correct=!1;for(let s=0;s<e.answers.length;s++)JSON.stringify(e.answers[s])===JSON.stringify(t.choicedValue[i])&&(r.correct=!0)}else JSON.stringify(e.answers)===JSON.stringify(t.choicedValue[i])?r.correct=!0:r.correct=!1;r.choicedIdx=t.choicedIdx[i],r.choicedValue=t.choicedValue[i],r.completed=!0}),o.length>0?o[o.length-1]:-1}let r=s.contentAnswers.findIndex(e=>e.basetype===t.basetype&&e.subtype===t.subtype);if(r<0)return-1;console.log("=========> answercheck answer idx",r,s.contentAnswers[r]);const a=s.contentAnswers[r],c=s.userChoices[r];if(!c)return-1;if(0===t.basetype&&0===t.subtype){if(console.log("=========> answercheck gap",a),2===a.matchType){let e=t.choicedValue.join(",");console.log("=========> answercheck gap choices",e);let s=!1;for(let t=0;t<a.answers.length;t++)if(a.answers[t]===e){s=!0;break}c.correct=s}else if(1===a.matchType){if(console.log("=========> answercheck gap",a.answers.length,t.choicedValue.length),a.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;let e=!0;for(let s=0;s<a.answers.length;s++)if(a.answers[s]!==t.choicedValue[s]){e=!1;break}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck gap",a,c)}else if(1===t.basetype&&0===t.subtype){if(2===a.matchType){const e=a.answers.findIndex(e=>e+""===t.choicedValue[0]);c.correct=!(e<0)}else 1===a.matchType&&(console.log("=========> answercheck choice",a.answers[0],t.choicedValue[0]),a.answers[0]+""===t.choicedValue[0]?c.correct=!0:c.correct=!1);c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck choice",a,c)}else if(1===t.basetype&&1===t.subtype){if(2===a.matchType){let e=t.choicedValue.sort();console.log("=========> answercheck choice/multi compare2",e,e.join());const s=a.answers.findIndex(t=>t===e.join());c.correct=!(s<0)}else if(1===a.matchType){let e=a.answers.slice().sort(),s=t.choicedValue.sort();console.log("=========> answercheck choice/multi compare",e,s),JSON.stringify(e)===JSON.stringify(s)?c.correct=!0:c.correct=!1}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck choice/multi",a,c)}else if(1===t.basetype&&2===t.subtype){if(2===a.matchType){for(let e=0;e<a.answers.length;e++){if(-1==a.answers[e].indexOf(","))return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,-1}for(let e=0;e<a.answers.length;e++){let s=a.answers[e].split(",").sort(),o=t.choicedValue.sort();if(console.log("=========> answercheck choice/group match one compare",s,o),console.log("JSON.stringify(ans),JSON.stringify(cho)",JSON.stringify(s),JSON.stringify(o)),JSON.stringify(s)===JSON.stringify(o)){c.correct=!0;break}c.correct=!1}}else if(1===a.matchType){if(-1==a.answers[0].indexOf(","))return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,-1;let e=a.answers[0].split(",").sort(),s=t.choicedValue.sort();console.log("=========> answercheck choice/group compare",e,s),console.log("JSON.stringify(ans),JSON.stringify(cho)",JSON.stringify(e),JSON.stringify(s)),JSON.stringify(e)===JSON.stringify(s)?c.correct=!0:c.correct=!1}console.log("=========> answercheck choice/group userChoice.correct",c.correct),c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck choice/group",a,c)}else if(2===t.basetype){if(2===a.matchType&&5===a.subtype){const e=t.choicedValue,s=a.answers;console.log("copy group math one choicedValue",e),console.log("copy group math one answers",s);const o=Array.from(s),i=[];o.forEach(e=>{let t=[];-1!=e.indexOf(",")?t=e.split(","):t.push(e),i.push(t)}),console.log("copy group math one arrGroupAnswers",i);let n=!1;for(let t=0;t<i.length;t++)if(console.log("copy group math one","arrGroupAnswers[i]",JSON.stringify(i[t]),"choicedValue",JSON.stringify(e)),JSON.stringify(i[t])==JSON.stringify(e)){n=!0;break}c.correct=n}else if(2===a.matchType&&4===a.subtype){const e=t.choicedValue.length,s=a.answers.length;console.log();const o=Math.round(s/e);let i=[];for(let t=0;t<o;t++){let o=e*t,n=e*(t+1);n>s&&(n=s),i.push(a.answers.slice(o,n))}console.log("===> answercheck dragdrop tmp",i);let n=!1;for(let e=0;e<i.length;e++){let s=!0;for(let o=0;o<i[e].length;o++){let n=i[e][o].split(",").sort(),r=t.choicedValue[o].split(",").sort();if(n.length!==r.length){s=!1;break}if(JSON.stringify(n)!==JSON.stringify(r)){s=!1;break}}if(s){n=!0;break}}c.correct=n}else if(2===a.matchType&&1===t.subtype){let e=!1;for(let s=0;s<a.answers.length;s++){let o=a.answers[s].split(","),i=t.choicedValue[0].split(",");if(o.length!==i.length)break;if(console.log("JSON.stringify(answerArr)",JSON.stringify(o)),console.log("JSON.stringify(choicedValue)",JSON.stringify(i)),JSON.stringify(o)===JSON.stringify(i)){e=!0;break}}c.correct=e}else if(2===a.matchType&&4!==t.subtype){let e=!1;for(let s=0;s<a.answers.length;s++){let o=a.answers[s].split(",");if(o.length!==t.choicedValue.length)break;if(console.log("===> answercheck dragdrop check",t.subtype,a.matchType,s,o,t.choicedValue),JSON.stringify(o)===JSON.stringify(t.choicedValue)){e=!0;break}}c.correct=e}else if(1===a.matchType){if(console.log("=========> answercheck dragdrop",t.subtype,a.matchType,a.answers.length,t.choicedValue.length),console.log("=========> answers.length/",a.answers.length,t.choicedValue.length),a.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;let e=!0;for(let s=0;s<a.answers.length;s++){console.log("=========> answercheck dragdrop",t.subtype,a.matchType,s,a.answers[s],t.choicedValue[s],a.answers[s]===t.choicedValue[s]);let o=a.answers[s].split(",").sort();if(o.length>1){let i=t.choicedValue[s].split(",").sort();if(o.length!==i.length){e=!1;break}if(o.join()!==i.join()){e=!1;break}}else if(a.answers[s]!==t.choicedValue[s]){e=!1;break}}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck dragdrop",t.subtype,a.matchType,a,c)}else if(3===t.basetype&&0===t.subtype){if(3===a.matchType);else if(2===a.matchType);else if(1===a.matchType){if(console.log("=========> answercheck shade",a.answers.length,t.choicedValue.length),a.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;let e=!0;for(let s=0;s<a.answers.length;s++){console.log("=========> answercheck shade",s,a.answers[s],t.choicedValue[s],a.answers[s]===t.choicedValue[s]);let o=a.answers[s].split(",").sort();if(o.length>1){let i=t.choicedValue[s].split(",").sort();if(o.length!==i.length){e=!1;break}if(o.join()!==i.join()){e=!1;break}}else if(a.answers[s]!==t.choicedValue[s]){e=!1;break}}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck shade",a,c)}else if(3===t.basetype&&1===t.subtype){if(3===a.matchType){let e=!0;if(0===t.choicedValue.length)e=!1;else{let s=!1;if(t.choicedValue.length>1)for(let e=1;e<t.choicedValue.length;e++)if(t.choicedValue[0]===t.choicedValue[e]){s=!0;break}if(s)e=!1;else for(let s=0;s<t.choicedValue.length;s++){let o=t.choicedValue[s].split(",");if(a.answers.length!==o.length){e=!1;break}if(a.answers.slice().sort().join(",")===t.choicedValue[s]){e=!1;break}}}c.correct=e}else if(2===a.matchType);else if(1===a.matchType){if(console.log("=========> answercheck shade",a.answers.length,t.choicedValue.length),a.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;let e=!0;for(let s=0;s<a.answers.length;s++)if(console.log("contentanswer.answers[i]",s,a.answers[s]),console.log("msg.choicedValue[i]",s,t.choicedValue[s]),a.answers[s]!==t.choicedValue[s]){e=!1;break}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck shade",a,c)}else if(4===t.basetype&&0===t.subtype){if(2===a.matchType){let e=t.choicedValue;console.log("=========> answercheck dragadd",e,e.join());const s=a.answers.findIndex(t=>t===e.join());c.correct=!(s<0)}else if(1===a.matchType){if(console.log("=========> answercheck dragadd",a.answers.length,t.choicedValue.length),a.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;let e=!0;for(let s=0;s<a.answers.length;s++)if(console.log("=========> answercheck dragadd",s,a.answers[s],t.choicedValue[s],a.answers[s]!==t.choicedValue[s]),a.answers[s]!==t.choicedValue[s]){e=!1;break}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck dragadd",a,c)}else if(4===t.basetype&&2===t.subtype){if(2===a.matchType){let e=t.choicedValue;console.log("=========> answercheck tally chart",e,e.join());const s=a.answers.findIndex(t=>t===e.join());c.correct=!(s<0)}else if(1===a.matchType){if(console.log("=========> answercheck tally chart",a.answers.length,t.choicedValue.length),a.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;let e=!0;for(let s=0;s<a.answers.length;s++)if(console.log("=========> answercheck tally chart",s,a.answers[s],t.choicedValue[s],a.answers[s]!==t.choicedValue[s]),a.answers[s]!==t.choicedValue[s]){e=!1;break}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck tally chart",a,c)}else if(4===t.basetype&&3===t.subtype||0===t.basetype&&3===t.subtype){if(2===a.matchType){let e=t.choicedValue;console.log("=========> answercheck gapplus",e,e.join());const s=a.answers.findIndex(t=>t===e.join());c.correct=!(s<0)}else if(1===a.matchType){if(console.log("=========> answercheck gapplus",a.answers.length,t.choicedValue.length),a.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;let e=!0;for(let s=0;s<a.answers.length;s++)if(console.log("=========> answercheck gapplus",s,a.answers[s],t.choicedValue[s],a.answers[s]!==t.choicedValue[s]),a.answers[s]!==t.choicedValue[s]){e=!1;break}c.correct=e}if(c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,4===t.basetype){let e=s.contentAnswers.findIndex(e=>0===e.basetype&&3===e.subtype);if(e<0)return c.completed=!1,-2;const t=s.userChoices[e];if(t&&t.completed&&t.correct&&JSON.stringify(c.choicedValue)!==JSON.stringify(t.choicedValue))return console.log("=========> final compare1 contentanswer.matchType",a.matchType),c.correct=!1,r}else{let e=s.contentAnswers.findIndex(e=>4===e.basetype&&3===e.subtype);if(e<0)return c.completed=!1,-2;const t=s.userChoices[e];if(t&&t.completed&&t.correct&&JSON.stringify(c.choicedValue)!==JSON.stringify(t.choicedValue))return console.log("=========> final compare2 contentanswer.matchType",a.matchType),c.correct=!1,r}console.log("=========> answercheck gapplus contentresult",s)}else if(5===t.basetype){if(2===a.matchType){const e=t.choicedValue.length,s=a.answers.length,o=Math.round(s/e);let i=[];console.log("===> answercheck connection len",e,s,o);for(let t=0;t<o;t++){let o=e*t,n=e*(t+1);n>s&&(n=s),i.push(a.answers.slice(o,n))}console.log("===> answercheck connection tmp",i);let n=!1;for(let e=0;e<i.length;e++){let s=!0;if(i[e].length===t.choicedValue.length){for(let o=0;o<i[e].length;o++)if(i[e][o]!==t.choicedValue[o]){s=!1;break}if(s){n=!0;break}}else s=!1}c.correct=n}else if(1===a.matchType){if(console.log("=========> answercheck connection",a.answers.length,t.choicedValue.length),a.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;let e=!0;for(let s=0;s<a.answers.length;s++)if(console.log("=========> answercheck connection",s,a.answers[s],t.choicedValue[s],a.answers[s]!==t.choicedValue[s]),a.answers[s]!==t.choicedValue[s]){e=!1;break}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck dragadd",a,c)}else if(6===t.basetype){if(2===a.matchType){let e=!1;for(let s=0;s<a.answers.length;s++){let o=a.answers[s].split(",");if(o.length!==t.choicedValue.length)break;if(console.log("===> answercheck number line check",t.subtype,a.matchType,s,o,t.choicedValue),JSON.stringify(o)===JSON.stringify(t.choicedValue)){e=!0;break}}c.correct=e}else if(1===a.matchType){if(a.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;console.log("=========> answercheck number line",a.answers,t.choicedValue),JSON.stringify(a.answers)===JSON.stringify(t.choicedValue)?c.correct=!0:c.correct=!1}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck number line",a,c)}else if(7===t.basetype){if(2===a.matchType){let e=!1;for(let s=0;s<a.answers.length;s++){let o=a.answers[s].split(",");if(o.length!==t.choicedValue.length)break;if(console.log("===> answercheck picture graph check",t.subtype,a.matchType,s,o,t.choicedValue),JSON.stringify(o)===JSON.stringify(t.choicedValue)){e=!0;break}}c.correct=e}else if(1===a.matchType){if(a.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;console.log("=========> answercheck picture graph",a.answers,t.choicedValue),JSON.stringify(a.answers)===JSON.stringify(t.choicedValue)?c.correct=!0:c.correct=!1}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck picture graph",a,c)}else if(8===t.basetype){if(2===a.matchType){let e=!1;for(let s=0;s<a.answers.length;s++){let o=a.answers[s].split(",");if(o.length!==t.choicedValue.length)break;if(console.log("===> answercheck bar graph check",t.subtype,a.matchType,s,o,t.choicedValue),JSON.stringify(o)===JSON.stringify(t.choicedValue)){e=!0;break}}c.correct=e}else if(1===a.matchType){if(a.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;console.log("=========> answercheck bar graph",a.answers,t.choicedValue),JSON.stringify(a.answers)===JSON.stringify(t.choicedValue)?c.correct=!0:c.correct=!1}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck bar graph",a,c)}else if(9===t.basetype){if(2===a.matchType){let e=!1;for(let s=0;s<a.answers.length;s++){let o=a.answers[s].split(",");if(o.length!==t.choicedValue.length)break;if(console.log("===> answercheck line plot check",t.subtype,a.matchType,s,o,t.choicedValue),JSON.stringify(o)===JSON.stringify(t.choicedValue)){e=!0;break}}c.correct=e}else if(1===a.matchType){if(a.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;console.log("=========> answercheck line plot",a.answers,t.choicedValue),JSON.stringify(a.answers)===JSON.stringify(t.choicedValue)?c.correct=!0:c.correct=!1}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck line plot",a,c)}else if(10===t.basetype){if(2===a.matchType);else if(1===a.matchType&&0===t.subtype)console.log("=========> answercheck clock hands",Object.assign({},a.answers),t.choicedValue),console.log("arrGroupAnswers",JSON.stringify(a.answers),"/",JSON.stringify(t.choicedValue[0])),JSON.stringify(a.answers)===JSON.stringify(t.choicedValue[0])?c.correct=!0:c.correct=!1;else if(1===a.matchType&&1===t.subtype){console.log("=========> answercheck clock hands group",Object.assign({},a.answers),t.choicedValue);const e=Array.from(a.answers),s=[];e.forEach(e=>{let t=[];-1!=e.indexOf(",")?t=e.split(","):t.push(e),s.push(t)}),console.log("arrGroupAnswers",JSON.stringify(s),"/",JSON.stringify(t.choicedValue)),JSON.stringify(s)===JSON.stringify(t.choicedValue)?c.correct=!0:c.correct=!1}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck clock hands",a,c)}else if(11===t.basetype&&0===t.subtype){if(2===a.matchType);else if(1===a.matchType){if(console.log("=========> answercheck radio",a.answers.length,t.choicedValue.length),a.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;let e=!0;for(let s=0;s<a.answers.length;s++)if(console.log("=========> answercheck radio",s,a.answers[s],t.choicedValue[s],a.answers[s]!==t.choicedValue[s]),a.answers[s]!==t.choicedValue[s]){e=!1;break}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck dragadd",a,c)}else if(12===t.basetype&&0===t.subtype){if(2===a.matchType);else if(1===a.matchType){if(console.log("=========> answercheck checkbox",a.answers.length,t.choicedValue.length),a.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,c.correct=!1,r;let e=!0;for(let s=0;s<a.answers.length;s++)if(console.log("=========> answercheck checkbox",s,a.answers[s],t.choicedValue[s],a.answers[s]!==t.choicedValue[s]),a.answers[s]!==t.choicedValue[s]){e=!1;break}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck",a,c)}else if(13===t.basetype&&0===t.subtype){if(2===a.matchType){let e=!1;for(let s=0;s<a.answers.length;s++){let i=a.answers[s].split(",");if(i.length!==t.choicedValue.length)break;const n=i.sort(o);if(console.log("===> answercheck grid and chart check",t.subtype,a.matchType,s,i,n,t.choicedValue),JSON.stringify(n)===JSON.stringify(t.choicedValue)){e=!0;break}}c.correct=e}else if(1===a.matchType){if(console.log("=========> answercheck grid and chart",a.answers.length,t.choicedValue.length),a.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,c.correct=!1,r;let e=!0;const s=a.answers.sort(o);console.log("=========> answercheck grid and chart sorted ans",s);for(let o=0;o<s.length;o++)if(console.log("=========> answercheck grid and chart",o,s[o],t.choicedValue[o],s[o]!==t.choicedValue[o]),s[o]!==t.choicedValue[o]){e=!1;break}c.correct=e}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck grid and chart",a,c)}else if(13===t.basetype&&1===t.subtype){if(2===a.matchType){let e=!1;if(t.choicedValue.length<2)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,c.correct=!1,r;let s=t.choicedValue.slice(0,t.choicedValue.length-1),o=t.choicedValue.slice(t.choicedValue.length-1),l=(i(o[0].substring(0,1)),parseInt(o[0].substring(1)));for(let o=0;o<a.answers.length;o++){let h=a.answers[o].split(",");if(2!==h.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,c.correct=!1,-1;let p=h[0],d=i(p.substring(0,1)),u=parseInt(p.substring(1)),m=h[1],_=i(m.substring(0,1)),f=parseInt(m.substring(1));if(isNaN(d)||isNaN(u)||isNaN(_)||isNaN(f))return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,c.correct=!1,r;let g=[];if(d===_)for(let e=u;e<=f;e++)g.push(n(d)+e);else for(let e=d;e<=_;e++)if(e==d)for(let t=u;t<=l;t++)g.push(n(e)+t);else if(e>d&&e<_)for(let t=1;t<=l;t++)g.push(n(e)+t);else if(e==_)for(let t=1;t<=f;t++)g.push(n(e)+t);if(JSON.stringify(g)===JSON.stringify(s)){e=!0;break}}c.correct=e}else if(1===a.matchType){if(console.log("=========> answercheck grid and chart 2",a.answers.length,t.choicedValue.length),2!==a.answers.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,c.correct=!1,-1;if(t.choicedValue.length<2)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,c.correct=!1,r;let e=t.choicedValue.slice(0,t.choicedValue.length-1),s=t.choicedValue.slice(t.choicedValue.length-1),o=(i(s[0].substring(0,1)),parseInt(s[0].substring(1))),l=a.answers[0],h=i(l.substring(0,1)),p=parseInt(l.substring(1)),d=a.answers[1],u=i(d.substring(0,1)),m=parseInt(d.substring(1));if(isNaN(h)||isNaN(p)||isNaN(u)||isNaN(m))return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,c.correct=!1,r;let _=[];if(h===u)for(let e=p;e<=m;e++)_.push(n(h)+e);else for(let e=h;e<=u;e++)if(e==h)for(let t=p;t<=o;t++)_.push(n(e)+t);else if(e>h&&e<u)for(let t=1;t<=o;t++)_.push(n(e)+t);else if(e==u)for(let t=1;t<=m;t++)_.push(n(e)+t);let f=!1;JSON.stringify(_)===JSON.stringify(e)&&(f=!0),c.correct=f}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck grid and chart 2",a,c)}else if(13===t.basetype&&2===t.subtype){if(2===a.matchType){console.log("=========> answercheck grid and chart 3",a.answers,t.choicedValue[0]);const e=a.answers.findIndex(e=>e+""===t.choicedValue[0]);c.correct=!(e<0)}else if(1===a.matchType){if(console.log("=========> answercheck grid and chart 3",a.answers[0],t.choicedValue[0]),a.answers.length!==t.choicedValue.length)return c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!1,-2;a.answers[0]+""===t.choicedValue[0]?c.correct=!0:c.correct=!1}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> answercheck grid and chart 3",a,c)}else if(14===t.basetype){console.log("=========> coordinate",a.answers,t.choicedValue);for(let e=0;e<a.answers.length;e++){let s=[],o=[],i=a.answers[e];if(0===t.subtype){if(i=i.replace(/ /gi,""),i=i.replace(/\),\(/gi,"/"),i=i.replace(/\(/gi,""),i=i.replace(/\)/gi,""),console.log("answer re",i),i.indexOf("/")){i.split("/").forEach(e=>{o.push(e)})}else o.push(i);s.push(o)}else if(1===t.subtype){if(i=i.replace(/ /gi,""),i=i.replace(/\),/gi,"/"),i.indexOf("/")){i.split("/").forEach(e=>{e=(e=e.replace(/\(/gi,"")).replace(/\)/gi,""),o.push(e)})}else i=i.replace(/\(/gi,""),i=i.replace(/\)/gi,""),o.push(i);s.push(o),i=i.replace(/\(/gi,""),i=i.replace(/\)/gi,""),console.log("answer re",i)}const n=s[0].sort(),l=t.choicedValue.sort();if(console.log("JSON.stringify(sortedAnswerXYs)",JSON.stringify(n)),console.log("JSON.stringify(sortedChoicedValue)",JSON.stringify(l)),JSON.stringify(n)==JSON.stringify(l)){if(c.correct=!0,2===a.matchType)break}else c.correct=!1;if(1===a.matchType&&0===r)break}c.choicedIdx=t.choicedIdx,c.choicedValue=t.choicedValue,c.completed=!0,console.log("=========> coordinate",a,c)}return r}},function(e,t){e.exports=ReactIdSwiper},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.LookbackStrategy=void 0;const i=s(0),n=s(1),r=s(2);s(63);let a=class extends i.Component{constructor(e){super(e),this.understand="",this.lookback_step1_left="",this.lookback_step1_right="",this.lookback_step2_left="",this.lookback_step2_right="",this.lookback_step3_left="",this.lookback_step3_right="",this.onShow=()=>{const{quiz:e,title:t,solutions:s,lookanswers:o}=this.props;let i=e.smTypeReason?e.smTypeReason:"",n=e.smTypeNm?e.smTypeNm:"",r=e.smTypeValue?e.smTypeValue:"";if(n=n.replace(r,"").trim(),e.lookback_title)this.understand="<img src='"+e.lookback_title+"' style='max-width: 847px;' />";else{let e=t,s=/>/gi;e=e.replace(s,">\n");let o=e.match(/[^\r\n]+/g),i="";o&&o.map((e,t)=>{(e.indexOf('class="title')>0||e.indexOf('class="problem_explain')>0||e.indexOf('class="legend')>0)&&(e=(e=e.replace('class="title','class="lookback_title')).replace("style=","_style=")),i+=e.trim()}),this.understand=i}const a=document.getElementById("plan");a&&(a.innerHTML=i,a.innerHTML+='<div class="arrow_strategy">'+n+"</div>");const c=document.getElementById("answer_content");if(c)if(c.innerHTML="",e.lookback_answer)c.innerHTML="<img src='"+e.lookback_answer+"' style='max-width: 847px;' />";else if(o&&o.length>0)o.map(e=>{"img"===e.type?e.data.indexOf("data:image")>-1?""!==c.innerHTML?c.innerHTML+='<span>,</span><img src="'+e.data+'"/>':c.innerHTML+='<img src="'+e.data+'"/>':""!==c.innerHTML?c.innerHTML+="<span>,</span>"+e.data:c.innerHTML+=e.data:""!==c.innerHTML?c.innerHTML+=", "+e.data:c.innerHTML+=" "+e.data});else{let t=[];e.answers.map(e=>{if(2===e.matchType){if(e.answers.length>0){e.answers[0].split(",").map(e=>{t.push(e.trim())})}}else e.answers.map(e=>{t.push(e)})}),t.map(e=>{""!==c.innerHTML?c.innerHTML+=", "+e:c.innerHTML+=" "+e})}let l=e.step.length;l>0&&""!==e.step[0].lookback_stepleft?(this.lookback_step1_left="<img src='"+e.step[0].lookback_stepleft+"' style='max-width: 847px;' />",""!==e.step[0].lookback_stepright&&(this.lookback_step1_right="<img src='"+e.step[0].lookback_stepright+"' style='max-width: 847px;' />")):s.length>0&&s[0]&&(this.lookback_step1_left=s[0].leftInnerHTML,this.lookback_step1_right=s[0].rightInnerHTML),l>1&&""!==e.step[1].lookback_stepleft?(this.lookback_step2_left="<img src='"+e.step[1].lookback_stepleft+"' style='max-width: 847px;' />",""!==e.step[1].lookback_stepright&&(this.lookback_step2_right="<img src='"+e.step[1].lookback_stepright+"' style='max-width: 847px;' />")):s.length>0&&s[1]&&(this.lookback_step2_left=s[1].leftInnerHTML,this.lookback_step2_right=s[1].rightInnerHTML),l>2&&""!==e.step[2].lookback_stepleft?(this.lookback_step3_left="<img src='"+e.step[2].lookback_stepleft+"' style='max-width: 847px;' />",""!==e.step[1].lookback_stepright&&(this.lookback_step3_right="<img src='"+e.step[2].lookback_stepright+"' style='max-width: 847px;' />")):s.length>2&&s[2]&&(this.lookback_step3_left=s[2].leftInnerHTML,this.lookback_step3_right=s[2].rightInnerHTML)},this.onClose=()=>{this.props.onClose&&this.props.onClose()}}componentDidMount(){this.onShow()}componentWillUnmount(){}componentDidUpdate(e){this.props.view&&!e.view?(this.lookback_step1_left="",this.lookback_step1_right="",this.lookback_step2_left="",this.lookback_step2_right="",this.lookback_step3_left="",this.lookback_step3_right="",this.onShow()):!this.props.view&&e.view&&(this.lookback_step1_left="",this.lookback_step1_right="",this.lookback_step2_left="",this.lookback_step2_right="",this.lookback_step3_left="",this.lookback_step3_right="")}render(){const{view:e,quiz:t}=this.props;let s=t.step.length;return i.createElement("div",{className:"lookback",style:{display:e?"block":"none"}},i.createElement("div",{className:"stage"},i.createElement("div",{className:"header"},i.createElement("span",{className:"logo"}),i.createElement("button",{className:"btn_close",onClick:this.onClose})),i.createElement("div",{className:"content"},i.createElement("table",null,i.createElement("tbody",null,i.createElement("tr",{className:"step s01"},i.createElement("td",{className:"title"},i.createElement("span",{className:"img"}),"Understand"),i.createElement("td",{className:"cnt"+(""!==t.lookback_title?" new":"")},i.createElement("div",{id:"understand",dangerouslySetInnerHTML:{__html:this.understand}}))),i.createElement("tr",{className:"step s02"},i.createElement("td",{className:"title"},i.createElement("span",{className:"img"}),"Plan"),i.createElement("td",{className:"cnt",id:"plan"})),i.createElement("tr",{className:"step s03"},i.createElement("td",{className:"title"},i.createElement("span",{className:"img"}),"Do it"),i.createElement("td",{className:"cnt"},i.createElement("div",{className:"icon_step"},"Step 1"),i.createElement("div",{className:"lookback_step"+(s>0&&""!==t.step[0].lookback_stepleft?" new":""),id:"lookback_step1"},i.createElement("div",{className:"answer",dangerouslySetInnerHTML:{__html:this.lookback_step1_left}}),i.createElement("div",{className:"solution",dangerouslySetInnerHTML:{__html:this.lookback_step1_right}})),i.createElement("div",{className:"icon_step"},"Step 2"),i.createElement("div",{className:"lookback_step"+(s>1&&""!==t.step[1].lookback_stepleft?" new":""),id:"lookback_step2"},i.createElement("div",{className:"answer",dangerouslySetInnerHTML:{__html:this.lookback_step2_left}}),i.createElement("div",{className:"solution",dangerouslySetInnerHTML:{__html:this.lookback_step2_right}})),i.createElement("div",{className:"icon_step",style:{display:3===s?"":"none"}},"Step 3"),i.createElement("div",{className:"lookback_step"+(s>2&&""!==t.step[2].lookback_stepleft?" new":""),id:"lookback_step3"},i.createElement("div",{className:"answer",dangerouslySetInnerHTML:{__html:this.lookback_step3_left}}),i.createElement("div",{className:"solution",dangerouslySetInnerHTML:{__html:this.lookback_step3_right}})))),i.createElement("tr",{className:"step s04"},i.createElement("td",{className:"title"},i.createElement("span",{className:"img"}),"Answer"),i.createElement("td",{className:"cnt"+(""!==t.lookback_answer?" new":"")},i.createElement("div",{id:"answer_content"}))))))))}};o([r.observable],a.prototype,"understand",void 0),o([r.observable],a.prototype,"lookback_step1_left",void 0),o([r.observable],a.prototype,"lookback_step1_right",void 0),o([r.observable],a.prototype,"lookback_step2_left",void 0),o([r.observable],a.prototype,"lookback_step2_right",void 0),o([r.observable],a.prototype,"lookback_step3_left",void 0),o([r.observable],a.prototype,"lookback_step3_right",void 0),a=o([n.observer],a),t.LookbackStrategy=a},function(e,t,s){"use strict";s.r(t)},function(e,t,s){"use strict";var o=this&&this.__awaiter||function(e,t,s,o){return new(s||(s=Promise))((function(i,n){function r(e){try{c(o.next(e))}catch(e){n(e)}}function a(e){try{c(o.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.setLivePoint=void 0;const i=s(10),n=s(5);t.setLivePoint=function(e){return o(this,void 0,void 0,(function*(){let t=new FormData;t.append("score",e.score+""),t.append("userIdx",e.userIdx),t.append("clsIdx",e.clsIdx+""),t.append("depthItemIdx",e.depthItemIdx+""),n.showTLoading(!0),yield i.default({method:"post",url:e.addOnHost+`/ma/rw/${e.plusMinusType}/${e.liveType}`,data:t}).then(t=>o(this,void 0,void 0,(function*(){yield i.default.get(e.addOnHost+"/ma/rw/info",{params:{userIdx:e.userIdx}}).then(t=>o(this,void 0,void 0,(function*(){n.showTLoading(!1),t.data&&t.data.resultData&&t.data.resultData.map(t=>{e.callback({redScore:t.redScore,redAccScore:t.redAccScore,greenScore:t.greenScore,greenAccScore:t.greenAccScore})})}))).catch(t=>{n.showTLoading(!1),n.alertToTeacher("서버로 부터 응답 받지 못하였습니다."),e.error(t)})}))).catch(t=>{n.showTLoading(!1),n.alertToTeacher("서버로 부터 응답 받지 못하였습니다."),e.error(t)})}))}},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},i=this&&this.__awaiter||function(e,t,s,o){return new(s||(s=Promise))((function(i,n){function r(e){try{c(o.next(e))}catch(e){n(e)}}function a(e){try{c(o.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),r=s(1),a=s(2),c=s(4),l=s(19),h=s(5),p=s(7),d=s(20),u=s(66),m=s(67),_=s(22),f=s(21);let g=class extends n.Component{constructor(e){super(e),this.cameraState="beforeStart",this._curIdx=0,this.ifr=[],this._viewAlert=!1,this._viewStrategyPopup=!1,this._quiz=void 0,this._prog=0,this._typeSayPop=0,this._imgUrl="",this.curIframe=void 0,this.curProgress=0,this.isEnd=!1,this._viewMainIframe=!1,this._viewSendButton=!1,this._viewWorkSheet=!1,this._viewCamaraSS=!1,this._viewPhotoList=!1,this._viewCheckAlert=!1,this.noCamera=!1,this.photoUrl="",this.photoSrc="",this.takenPhoto=[],this.selectedPhoto=-1,this.pageIdx=0,this.team=0,this.problem_plan="",this.problem_strategy="",this.tryNum=1,this._onCompletedSayPop=()=>{this._typeSayPop=0},this._onSend=()=>i(this,void 0,void 0,(function*(){if(this.props.view&&!this.isEnd&&1!==this._prog)if(this._prog=1,c.App.pub_playToPad(),this.props.actions.setMultiUploadedFnc(this._multiUploaded),this.props.actions.setLoading(!0),c.App.isDvlp){yield p.wait(1e3);let e=[];this.takenPhoto.map((t,s)=>{e.push({result:"success",url:t.url})}),this._multiUploaded(e)}else{let e=[];this.takenPhoto.map((t,s)=>{e.push(t.url)}),h.uploadFileToServerMulti(e)}})),this.callbackFnc=e=>{if("module_strategy_send"===e||"module_strategy_revise"===e){if("module_strategy_send"===e)for(this.tryNum=1;this.takenPhoto.length>0;)this.takenPhoto.pop();else"module_strategy_revise"===e&&(this.tryNum=2);this.isEnd=!1,this.team=this.props.state.team;const t=this.props.actions.getData().quizs;this._quiz=t[0],this.problem_plan=this._quiz.smTypeReason?this._quiz.smTypeReason:"",this.problem_strategy=this._quiz.smTypeNm?this._quiz.smTypeNm:"",this._prog=0}else("module_strategy_stop"===e||"module_strategy_end"===e)&&(this._viewPhotoList=!1,this._viewCamaraSS=!1,this.isEnd=!0,this._prog=3)},this.handlePhotoOrder=e=>{const t=this.selectedPhoto+e;if(t<0)return;if(t>=this.takenPhoto.length)return;const s=this.takenPhoto[this.selectedPhoto];this.takenPhoto[this.selectedPhoto]=this.takenPhoto[t],this.takenPhoto[t]=s,this.selectedPhoto=t},this.handlePostMessage=e=>{const t=e.data;"macontent"===t.from&&t.type},this._onCheckAlertOk=()=>{this._viewCheckAlert=!1},this._onCompletedAlertPop=()=>i(this,void 0,void 0,(function*(){if(this.props.view&&(this._viewAlert=!1,this._prog=3,c.App.student)){const e={msgtype:"module_strategy_result",id:c.App.student.id,imageUrl:this._imgUrl,tryCnt:this.tryNum,team:this.team};h.sendTeacher(11,e),p.wait(600)}})),this.onIfmDescLoaded=()=>{console.log("onIfmDescLoaded")},this.onIfmLoaded=()=>{this.curIframe&&(this.sendPostMessage("hideHighlight",null),this.stgAnswerVisibility(!1),setTimeout(()=>{this._viewMainIframe=!0},500),this.chanageBackColor(this.props.state.bgColor,!1))},this.notifyFnc=e=>{switch(e){case"notifyStartCamera":this.cameraState="started",this.noCamera=this._viewPhotoList=!1,this._viewCamaraSS=!0,this.photoUrl="",this.photoSrc="",h.showSMathKit(!1);break;case"notifyStopCamera":this.cameraState="stoped";break;case"notifySwitchCamera":this.cameraState="switched";break;case"notifyNoCamera":this.noCamera=!0}},this.onCameraSS=()=>i(this,void 0,void 0,(function*(){c.App.pub_playBtnTab(),this.props.actions.setNotifyFnc(this.notifyFnc),yield p.wait(1e3),c.App.isDvlp?(this._viewCamaraSS=!0,this._viewPhotoList=!1,this.photoUrl="",this.photoSrc=""):h.startCamera(!0),this.noCamera&&(this._viewCheckAlert=!0)})),this.notifyTakePhotoFnc=(e,t)=>{this.props.actions.setLoading(!1),this.cameraState="captured",this.photoUrl=e,this.photoSrc="data:image/jpg;base64,"+t,c.App.isDvlp||h.stopCamera()},this.takePicture=()=>i(this,void 0,void 0,(function*(){this.props.actions.setLoading(!0),h.takePicture({top:0,left:0,width:1280,height:800}),c.App.pub_playBtnPage()})),this.onTakePicture=()=>{if(c.App.pub_playBtnTab(),this.noCamera)return console.log("카메라 없음"),void(this._viewCheckAlert=!0);this.photoUrl="",this.photoSrc="",c.App.isDvlp?setTimeout(()=>{let e="/content/mathalive_lib/MA/topic_strategy/common/temp_img_worksheet.png";this.takenPhoto.length%2==1&&(e=c.App.data_url+"sample_draw.png");this.notifyTakePhotoFnc(e,"R0lGODlhPQBEAPeoAJosM//AwO/AwHVYZ/z595kzAP/s7P+goOXMv8+fhw/v739/f+8PD98fH/8mJl+fn/9ZWb8/PzWlwv///6wWGbImAPgTEMImIN9gUFCEm/gDALULDN8PAD6atYdCTX9gUNKlj8wZAKUsAOzZz+UMAOsJAP/Z2ccMDA8PD/95eX5NWvsJCOVNQPtfX/8zM8+QePLl38MGBr8JCP+zs9myn/8GBqwpAP/GxgwJCPny78lzYLgjAJ8vAP9fX/+MjMUcAN8zM/9wcM8ZGcATEL+QePdZWf/29uc/P9cmJu9MTDImIN+/r7+/vz8/P8VNQGNugV8AAF9fX8swMNgTAFlDOICAgPNSUnNWSMQ5MBAQEJE3QPIGAM9AQMqGcG9vb6MhJsEdGM8vLx8fH98AANIWAMuQeL8fABkTEPPQ0OM5OSYdGFl5jo+Pj/+pqcsTE78wMFNGQLYmID4dGPvd3UBAQJmTkP+8vH9QUK+vr8ZWSHpzcJMmILdwcLOGcHRQUHxwcK9PT9DQ0O/v70w5MLypoG8wKOuwsP/g4P/Q0IcwKEswKMl8aJ9fX2xjdOtGRs/Pz+Dg4GImIP8gIH0sKEAwKKmTiKZ8aB/f39Wsl+LFt8dgUE9PT5x5aHBwcP+AgP+WltdgYMyZfyywz78AAAAAAAD///8AAP9mZv///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAKgALAAAAAA9AEQAAAj/AFEJHEiwoMGDCBMqXMiwocAbBww4nEhxoYkUpzJGrMixogkfGUNqlNixJEIDB0SqHGmyJSojM1bKZOmyop0gM3Oe2liTISKMOoPy7GnwY9CjIYcSRYm0aVKSLmE6nfq05QycVLPuhDrxBlCtYJUqNAq2bNWEBj6ZXRuyxZyDRtqwnXvkhACDV+euTeJm1Ki7A73qNWtFiF+/gA95Gly2CJLDhwEHMOUAAuOpLYDEgBxZ4GRTlC1fDnpkM+fOqD6DDj1aZpITp0dtGCDhr+fVuCu3zlg49ijaokTZTo27uG7Gjn2P+hI8+PDPERoUB318bWbfAJ5sUNFcuGRTYUqV/3ogfXp1rWlMc6awJjiAAd2fm4ogXjz56aypOoIde4OE5u/F9x199dlXnnGiHZWEYbGpsAEA3QXYnHwEFliKAgswgJ8LPeiUXGwedCAKABACCN+EA1pYIIYaFlcDhytd51sGAJbo3onOpajiihlO92KHGaUXGwWjUBChjSPiWJuOO/LYIm4v1tXfE6J4gCSJEZ7YgRYUNrkji9P55sF/ogxw5ZkSqIDaZBV6aSGYq/lGZplndkckZ98xoICbTcIJGQAZcNmdmUc210hs35nCyJ58fgmIKX5RQGOZowxaZwYA+JaoKQwswGijBV4C6SiTUmpphMspJx9unX4KaimjDv9aaXOEBteBqmuuxgEHoLX6Kqx+yXqqBANsgCtit4FWQAEkrNbpq7HSOmtwag5w57GrmlJBASEU18ADjUYb3ADTinIttsgSB1oJFfA63bduimuqKB1keqwUhoCSK374wbujvOSu4QG6UvxBRydcpKsav++Ca6G8A6Pr1x2kVMyHwsVxUALDq/krnrhPSOzXG1lUTIoffqGR7Goi2MAxbv6O2kEG56I7CSlRsEFKFVyovDJoIRTg7sugNRDGqCJzJgcKE0ywc0ELm6KBCCJo8DIPFeCWNGcyqNFE06ToAfV0HBRgxsvLThHn1oddQMrXj5DyAQgjEHSAJMWZwS3HPxT/QMbabI/iBCliMLEJKX2EEkomBAUCxRi42VDADxyTYDVogV+wSChqmKxEKCDAYFDFj4OmwbY7bDGdBhtrnTQYOigeChUmc1K3QTnAUfEgGFgAWt88hKA6aCRIXhxnQ1yg3BCayK44EWdkUQcBByEQChFXfCB776aQsG0BIlQgQgE8qO26X1h8cEUep8ngRBnOy74E9QgRgEAC8SvOfQkh7FDBDmS43PmGoIiKUUEGkMEC/PJHgxw0xH74yx/3XnaYRJgMB8obxQW6kL9QYEJ0FIFgByfIL7/IQAlvQwEpnAC7DtLNJCKUoO/w45c44GwCXiAFB/OXAATQryUxdN4LfFiwgjCNYg+kYMIEFkCKDs6PKAIJouyGWMS1FSKJOMRB/BoIxYJIUXFUxNwoIkEKPAgCBZSQHQ1A2EWDfDEUVLyADj5AChSIQW6gu10bE/JG2VnCZGfo4R4d0sdQoBAHhPjhIB94v/wRoRKQWGRHgrhGSQJxCS+0pCZbEhAAOw==")},1e3):this.takePicture()},this.onRetryPicture=()=>{c.App.pub_playBtnTab(),c.App.isDvlp?(this._viewCamaraSS=!0,this._viewPhotoList=!1,this.photoUrl="",this.photoSrc=""):h.startCamera(!0)},this.photoList=()=>{this.takenPhoto.length<=0?this._viewPhotoList=this._viewCamaraSS=!1:(this._viewPhotoList=!0,this._viewCamaraSS=!1)},this.downloadPhoto=()=>{c.App.pub_playBtnTab(),this.takenPhoto.push({id:this.takenPhoto.length+"",url:this.photoUrl,src:this.photoSrc}),this.photoUrl="",this.photoSrc="",this._viewPhotoList=!0,this._viewCamaraSS=!1,c.App.isDvlp||h.showSMathKit(!0),this.takenPhoto.length>0&&(this._viewSendButton=!0)},this._multiUploaded=e=>i(this,void 0,void 0,(function*(){if(this.props.view){if(c.App.student){let t=[];e.map((e,s)=>{"success"===e.result&&t.push(e.url)});const s={msgtype:"module_strategy_result",id:c.App.student.id,imageUrl:JSON.stringify(t),tryCnt:this.tryNum,team:this.team};h.sendTeacher(11,s)}yield p.wait(600),this.props.actions.setLoading(!1),this._prog=2,2===this.tryNum&&(this.isEnd=!0,this._prog=3,this.completeContent()),this._typeSayPop=1,this._viewPhotoList=!1,this._viewCamaraSS=!1}else this.props.actions.setLoading(!1)})),this.onViewWorkSheet=()=>{c.App.pub_playBtnTab(),this._viewWorkSheet=!0},this.onCloseWorkSheet=()=>{c.App.pub_playBtnTab(),this._viewWorkSheet=!1},this.onDownloadWorkSheet=()=>{c.App.pub_playBtnTab(),this._viewWorkSheet=!1,this.download()},this.download=()=>{var e=document.createElement("a");const t=window.location.protocol+"//"+window.location.host+"/content/mathalive_lib/images/worksheet.png";e.setAttribute("href",t),e.setAttribute("download","worksheet"),document.body.appendChild(e),e.click(),setTimeout(()=>{document.body.removeChild(e)},100)},this.deletePhoto=e=>{c.App.pub_playBtnTab(),this.takenPhoto=this.takenPhoto.filter((t,s)=>s!==e),this.takenPhoto.length>0?this._viewSendButton=!0:this._viewSendButton=!1},this._onCompleteLiveget=()=>{this.props.state.prog="module_strategyQ3"},this.selectPhoto=e=>{c.App.pub_playBtnTab(),-1===e&&(c.App.isDvlp?(this._viewPhotoList=!1,this._viewCamaraSS=!0,this.photoUrl="",this.photoSrc=""):h.startCamera(!0))},this._onSendLive=e=>i(this,void 0,void 0,(function*(){if(p.wait(600),c.App.student){const t={msgtype:"livepoint_send",from:c.App.student.id,to:e,livePoint:5,quizSeq:this._curIdx};h.sendTeacher(11,t)}})),this._onStrategyPopOK=()=>{this._viewStrategyPopup=!1,c.App.isDvlp?(this._viewPhotoList=!1,this._viewCamaraSS=!0,this.photoUrl="",this.photoSrc=""):h.startCamera(!0)},this._onStrategyPopCancel=()=>{this._viewStrategyPopup=!1}}init(){this._curIdx=0,this._viewAlert=!1,this._viewStrategyPopup=!1,this.isEnd=!1}componentDidMount(){window.addEventListener("message",this.handlePostMessage,!1),this.props.actions.setCallbackFnc(this.callbackFnc),this.props.actions.setNotifyFnc(this.notifyFnc),this.props.actions.setNotifyTakePhotoFnc(this.notifyTakePhotoFnc)}componentWillUnmount(){window.removeEventListener("message",this.handlePostMessage,!1),this.props.actions.setCallbackFnc(null),this.props.actions.setNotifyFnc(null),this.props.actions.setNotifyTakePhotoFnc(null)}_setNavi(){this.props.actions.setNaviView(!1),this.props.actions.setNavi(!1,!1),!this._viewCamaraSS&&!this._viewPhotoList&&this.takenPhoto.length>0&&this._prog<2?(this.props.actions.setNaviView(!0),this.props.actions.setNavi(!1,!0)):this._viewPhotoList&&(this.props.actions.setNaviView(!0),this.props.actions.setNavi(!0,!1)),this.selectedPhoto>=0&&(this.props.actions.setNaviView(!0),this.props.actions.setNavi(!0,!0)),this.props.actions.setNaviFnc(()=>{this._viewPhotoList&&(this.selectedPhoto>=0?this.handlePhotoOrder(-1):(this._viewPhotoList=!1,this._viewCamaraSS=!1))},()=>{!this._viewCamaraSS&&!this._viewPhotoList&&this.takenPhoto.length>0?this._viewPhotoList=!0:this._viewPhotoList&&this.selectedPhoto>=0&&this.handlePhotoOrder(1)})}sendPostMessage(e,t){let s={from:"matemplate",to:"macontent",type:e,msg:t};s=JSON.parse(JSON.stringify(s)),this.curProgress<10&&this.curIframe&&this.curIframe.contentWindow.postMessage(s,"*")}sendPostMessageToDesc(e,t){let s={from:"matemplate",to:"macontent",type:e,msg:t};s=JSON.parse(JSON.stringify(s))}chanageBackColor(e,t){if(!this.props.view)return;if(!e)return;const s={bgColor:Object.assign({},e)};t?this.sendPostMessageToDesc("changeBGStyle",s):this.sendPostMessage("changeBGStyle",s)}initContent(){if(this._curIdx<0)return;let e={idx:this._curIdx,quizmode:"strategy",isTeacher:!1,content:this._quiz};this.sendPostMessage("init",e)}completeContent(){let e={idx:this._curIdx,content:this._quiz};this.sendPostMessage("completed",e)}componentDidUpdate(e){3===this.props.state.strategyProg&&this.props.state.teacherEnd,this.props.view&&this._setNavi()}stgAnswerVisibility(e){this.sendPostMessage("stgAnswerVisibility",{isVisible:e})}render(){const{view:e,state:t,actions:s,students:o,teamNum:i}=this.props;let r="",a=this._quiz;if(!a)return n.createElement(n.Fragment,null);r=a.url;c.App.student&&c.App.student.id,a.seq,a.seq;return n.createElement("div",{className:"s_module_strategyQ3",style:{display:e?void 0:"none"}},n.createElement(d.MAHeader_STRATEGY,{view:!this._viewCamaraSS,curProgress:this.curProgress,isStudent:!0,quizIdx:2,typeStrategy:"module_strategy",onViewWorkSheet:this.onViewWorkSheet,pageIdx:this._viewPhotoList?1:0,plan:this.problem_strategy,team:this.team}),n.createElement("div",{id:"contentWrap",className:"contentWrap bg01"},n.createElement("div",{style:{display:this._viewPhotoList||this._viewCamaraSS?"none":"block"}},n.createElement("iframe",{src:r,onLoad:this.onIfmLoaded,style:{display:this._viewMainIframe?"":"none"},ref:e=>{e&&(this.curIframe=e)}})),n.createElement("button",{className:"btn_next",style:{display:this._viewPhotoList||this._viewCamaraSS?"none":"block"},onClick:this.onCameraSS,disabled:this._prog>=2||this.takenPhoto.length>=10},n.createElement("span",{className:"ico_camera"+(this._prog>=2||this.takenPhoto.length>=10?" off":" on")},n.createElement("span",{className:"camera"}))),n.createElement("div",{className:"camera_screenshot",style:{display:this._viewCamaraSS?"block":"none"}},n.createElement("button",{className:"btn_camera_close",onClick:this.photoList}),n.createElement("div",{className:"camera_zone"},n.createElement("div",{className:"camera_mark"+(""!==this.photoUrl?" no_mark":"")},n.createElement("img",{src:this.photoSrc,style:{display:""===this.photoUrl?"none":"",width:"100%"}}))),n.createElement("div",{className:"control"},n.createElement("button",{className:"btn_camera",onClick:this.onTakePicture,style:{display:""!==this.photoUrl?"none":""}}),n.createElement("button",{className:"btn_retry",onClick:this.onRetryPicture,style:{display:""===this.photoUrl?"none":""}}),n.createElement("button",{className:"btn_download",onClick:this.downloadPhoto,style:{display:""===this.photoUrl?"none":""}}))),n.createElement("div",{className:"camera_list",style:{display:this._viewPhotoList?"":"none"}},n.createElement("ul",{className:this.takenPhoto.length<3?"center":void 0},this.takenPhoto.map(({id:e,url:t,src:s},o)=>n.createElement("li",{key:e,id:"photo_"+o,className:this.selectedPhoto===o?"on":"",onClick:this.selectPhoto.bind(this,o)},n.createElement("span",{className:"num"+(o>9?" two":"")},o+1),n.createElement("img",{src:s,style:{width:"342px",height:"214px"}}),n.createElement("button",{className:"btn_close",onClick:this.deletePhoto.bind(this,o)}))),n.createElement("li",{onClick:this.selectPhoto.bind(this,-1),style:{display:this.takenPhoto.length>=10?"none":""}}))),n.createElement("div",{className:"pop_worksheet",style:{display:this._viewWorkSheet?"":"none"}},n.createElement("button",{className:"btn_close",onClick:this.onCloseWorkSheet}),n.createElement("div",{className:"image_download"},n.createElement("img",{src:"/content/mathalive_lib/MA/module_strategy/common/img_sc_std_worksheet.png"}),n.createElement("button",{className:"btn_download",onClick:this.onDownloadWorkSheet})))),n.createElement(f.NewSayPopup,{view:this._typeSayPop>0,delay:1800,type:this._typeSayPop,onComplete:this._onCompletedSayPop}),n.createElement(_.WarningPopup,{view:this._viewAlert,type:0,button:!1,delay:3e3,onComplete:this._onCompletedAlertPop}),n.createElement(l.default,{view:this._viewSendButton&&this._viewPhotoList,type:"pad",sended:!1,originY:0,onSend:this._onSend}),n.createElement(u.MAPresenter,{view:e&&"presenter"===t.prog,showHide:t.showhide,onSendLive:this._onSendLive,destiStudent:t.presenter,students:0===o.length?c.App.students:o,isReset:t.resetPresenter,curIdx:i,length:2}),n.createElement(m.CheckAlert,{view:this._viewCheckAlert,onOk:this._onCheckAlertOk,msg:"Camera is not working. Please\ncheck the system settings."}),n.createElement(_.StrategyPopup,{view:this._viewStrategyPopup,type:4,button:!0,isSingle:!1,onOk:this._onStrategyPopOK,onCancel:this._onStrategyPopCancel}))}};o([a.observable],g.prototype,"_curIdx",void 0),o([a.observable],g.prototype,"_viewAlert",void 0),o([a.observable],g.prototype,"_viewStrategyPopup",void 0),o([a.observable],g.prototype,"_quiz",void 0),o([a.observable],g.prototype,"_prog",void 0),o([a.observable],g.prototype,"_typeSayPop",void 0),o([a.observable],g.prototype,"_imgUrl",void 0),o([a.observable],g.prototype,"curProgress",void 0),o([a.observable],g.prototype,"isEnd",void 0),o([a.observable],g.prototype,"_viewMainIframe",void 0),o([a.observable],g.prototype,"_viewSendButton",void 0),o([a.observable],g.prototype,"_viewWorkSheet",void 0),o([a.observable],g.prototype,"_viewCamaraSS",void 0),o([a.observable],g.prototype,"_viewPhotoList",void 0),o([a.observable],g.prototype,"_viewCheckAlert",void 0),o([a.observable],g.prototype,"noCamera",void 0),o([a.observable],g.prototype,"photoUrl",void 0),o([a.observable],g.prototype,"photoSrc",void 0),o([a.observable],g.prototype,"takenPhoto",void 0),o([a.observable],g.prototype,"selectedPhoto",void 0),o([a.observable],g.prototype,"pageIdx",void 0),o([a.observable],g.prototype,"team",void 0),o([a.observable],g.prototype,"problem_plan",void 0),o([a.observable],g.prototype,"problem_strategy",void 0),g=o([r.observer],g),t.default=g},function(e,t,s){"use strict";var o=this&&this.__decorate||function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.MAPresenter=void 0;const i=s(0),n=s(2),r=s(1),a=s(6),c=s(4),l=s(5);let h=class extends i.Component{constructor(e){super(e),this.sendCount=0,this.name="",this.thumbImage="",this.gender="",this.isInit=!1,this.sendHistory=[],this._onSend=()=>{if(!this.props.view)return;c.App.pub_playBtnTab();let e=this.props.destiStudent+"",t=a.find(this.sendHistory[this.props.curIdx],{student:e});if(t){if(50===t.sendCount)return;t.sendCount+=5,this.props.onSendLive(this.props.destiStudent)}};for(let t=0;t<e.length;t++)this.sendHistory.push([])}componentWillReceiveProps(e){if(e.students.length>0&&!this.isInit){for(let t=0;t<this.props.length;t++)for(let s=0;s<e.students.length;s++)this.sendHistory[t].push({student:e.students[s].id+"",sendCount:0});this.isInit=!0}if(!this.props.view&&e.view){const t=a.find(e.students,t=>t.id===e.destiStudent);t&&(this.gender=t.gender,"1"===t.displayMode?(this.name=t.name,this.thumbImage=t.thumb):(t.nickname&&""!==t.nickname?this.name=t.nickname:this.name=t.name,this.thumbImage=t.avatar))}}componentDidUpdate(e){if(this.props.view&&!e.view?(this.sendCount=0,l.showSMathKit(!1)):this.props.view||!e.view||this.props.hideTeaching||(l.showSMathKit(!0),this.sendCount=0),this.props.isReset&&!e.isReset&&this.sendHistory[this.props.curIdx].length>0)for(let e=0;e<this.sendHistory[this.props.curIdx].length;e++)this.sendHistory[this.props.curIdx][e].sendCount=0}render(){const{view:e,showHide:t,curIdx:s}=this.props;let o=this.props.destiStudent+"",n=0,r=a.find(this.sendHistory[s],{student:o});return r&&(n=r.sendCount),i.createElement("div",{className:"mapresenter",style:{display:e?"":"none"}},i.createElement("div",{className:"content"},i.createElement("div",{className:"profile_img"},"hide"===t&&i.createElement("img",{className:"default",src:"/content/mathalive_lib/images/ico_profile_default.png"}),"show"===t&&""===this.thumbImage&&i.createElement("div",{className:"F"===this.gender?"defaultImg_f":"defaultImg_m"},i.createElement("div",null,this.name.substring(0,2).toUpperCase())),"show"===t&&""!==this.thumbImage&&i.createElement("img",{className:"thumbnail",src:this.thumbImage})),i.createElement("div",{className:"profile_name",style:{display:"show"===t?"":"none"}},this.name),i.createElement("div",{className:"live_name"},i.createElement("div",{className:"number"},i.createElement("span",null,n)," / 50"),i.createElement("div",{className:"box",onClick:this._onSend},i.createElement("div",{className:"twinkles"},i.createElement("span",{className:"t1"}),i.createElement("span",{className:"t1"}),i.createElement("span",{className:"t1"}),i.createElement("span",{className:"t2"}),i.createElement("span",{className:"t2"}),i.createElement("span",{className:"t2"})),i.createElement("span",{className:"ico_heart"}),"Green Lives"))))}};o([n.observable],h.prototype,"sendCount",void 0),o([n.observable],h.prototype,"name",void 0),o([n.observable],h.prototype,"thumbImage",void 0),o([n.observable],h.prototype,"gender",void 0),o([n.observable],h.prototype,"sendHistory",void 0),h=o([r.observer],h),t.MAPresenter=h},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckAlert=void 0;const o=s(0),i=s(23);class n extends o.Component{render(){const{msg:e}=this.props;return o.createElement(i.CoverPopup,{className:"alert_popup",view:this.props.view,onClosed:this.props.onOk},o.createElement("div",{className:"pop_box"},o.createElement("span",{className:"ico_alert"}),o.createElement("span",{className:"text"},e&&""!==e?e:"Check the Problem"),o.createElement("div",{className:"btns"},o.createElement("button",{className:"btn_ok",onClick:this.props.onOk},o.createElement("span",null,"OK")))))}}t.CheckAlert=n},function(e,t,s){"use strict";s.r(t)},function(e,t,s){"use strict";s.r(t)},function(e,t,s){"use strict";s.r(t)}]);